/*! For license information please see 498.bc619207.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunksvelte_vega_demo=globalThis.webpackChunksvelte_vega_demo||[]).push([[498],{"../../node_modules/@storybook/addons/dist/esm/hooks.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{DM:()=>applyHooks,c8:()=>HooksContext,d4:()=>useEffect});__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.set.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js");var global__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../node_modules/global/window.js"),global__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_20__),_storybook_client_logger__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("../../node_modules/@storybook/client-logger/dist/esm/index.js"),_storybook_core_events__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../../node_modules/@storybook/core-events/dist/esm/index.js"),_index__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../node_modules/@storybook/addons/dist/esm/index.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var globalWindow=global__WEBPACK_IMPORTED_MODULE_20___default().window,HooksContext=function(){function HooksContext(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HooksContext),this.hookListsMap=void 0,this.mountedDecorators=void 0,this.prevMountedDecorators=void 0,this.currentHooks=void 0,this.nextHookIndex=void 0,this.currentPhase=void 0,this.currentEffects=void 0,this.prevEffects=void 0,this.currentDecoratorName=void 0,this.hasUpdates=void 0,this.currentContext=void 0,this.renderListener=function(storyId){storyId===_this.currentContext.id&&(_this.triggerEffects(),_this.currentContext=null,_this.removeRenderListeners())},this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(HooksContext,[{key:"init",value:function init(){this.hookListsMap=new WeakMap,this.mountedDecorators=new Set,this.prevMountedDecorators=this.mountedDecorators,this.currentHooks=[],this.nextHookIndex=0,this.currentPhase="NONE",this.currentEffects=[],this.prevEffects=[],this.currentDecoratorName=null,this.hasUpdates=!1,this.currentContext=null}},{key:"clean",value:function clean(){this.prevEffects.forEach((function(effect){effect.destroy&&effect.destroy()})),this.init(),this.removeRenderListeners()}},{key:"getNextHook",value:function getNextHook(){var hook=this.currentHooks[this.nextHookIndex];return this.nextHookIndex+=1,hook}},{key:"triggerEffects",value:function triggerEffects(){var _this2=this;this.prevEffects.forEach((function(effect){!_this2.currentEffects.includes(effect)&&effect.destroy&&effect.destroy()})),this.currentEffects.forEach((function(effect){_this2.prevEffects.includes(effect)||(effect.destroy=effect.create())})),this.prevEffects=this.currentEffects,this.currentEffects=[]}},{key:"addRenderListeners",value:function addRenderListeners(){this.removeRenderListeners(),_index__WEBPACK_IMPORTED_MODULE_21__.KP.getChannel().on(_storybook_core_events__WEBPACK_IMPORTED_MODULE_22__.STORY_RENDERED,this.renderListener)}},{key:"removeRenderListeners",value:function removeRenderListeners(){_index__WEBPACK_IMPORTED_MODULE_21__.KP.getChannel().removeListener(_storybook_core_events__WEBPACK_IMPORTED_MODULE_22__.STORY_RENDERED,this.renderListener)}}]),HooksContext}();function hookify(fn){return function(){var _ref="function"==typeof(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=0?void 0:arguments[0],hooks=_ref.hooks,prevPhase=hooks.currentPhase,prevHooks=hooks.currentHooks,prevNextHookIndex=hooks.nextHookIndex,prevDecoratorName=hooks.currentDecoratorName;hooks.currentDecoratorName=fn.name,hooks.prevMountedDecorators.has(fn)?(hooks.currentPhase="UPDATE",hooks.currentHooks=hooks.hookListsMap.get(fn)||[]):(hooks.currentPhase="MOUNT",hooks.currentHooks=[],hooks.hookListsMap.set(fn,hooks.currentHooks),hooks.prevMountedDecorators.add(fn)),hooks.nextHookIndex=0;var prevContext=globalWindow.STORYBOOK_HOOKS_CONTEXT;globalWindow.STORYBOOK_HOOKS_CONTEXT=hooks;var result=fn.apply(void 0,arguments);if(globalWindow.STORYBOOK_HOOKS_CONTEXT=prevContext,"UPDATE"===hooks.currentPhase&&null!=hooks.getNextHook())throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return hooks.currentPhase=prevPhase,hooks.currentHooks=prevHooks,hooks.nextHookIndex=prevNextHookIndex,hooks.currentDecoratorName=prevDecoratorName,result}}var numberOfRenders=0,applyHooks=function applyHooks(applyDecorators){return function(storyFn,decorators){var decorated=applyDecorators(hookify(storyFn),decorators.map((function(decorator){return hookify(decorator)})));return function(context){var hooks=context.hooks;hooks.prevMountedDecorators=hooks.mountedDecorators,hooks.mountedDecorators=new Set([storyFn].concat(_toConsumableArray(decorators))),hooks.currentContext=context,hooks.hasUpdates=!1;var result=decorated(context);for(numberOfRenders=1;hooks.hasUpdates;)if(hooks.hasUpdates=!1,hooks.currentEffects=[],result=decorated(context),(numberOfRenders+=1)>25)throw new Error("Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.");return hooks.addRenderListeners(),result}}},invalidHooksError=function invalidHooksError(){return new Error("Storybook preview hooks can only be called inside decorators and story functions.")};function getHooksContextOrNull(){return globalWindow.STORYBOOK_HOOKS_CONTEXT||null}function getHooksContextOrThrow(){var hooks=getHooksContextOrNull();if(null==hooks)throw invalidHooksError();return hooks}function useMemoLike(name,nextCreate,deps){var _useHook=function useHook(name,callback,deps){var hooks=getHooksContextOrThrow();if("MOUNT"===hooks.currentPhase){null==deps||Array.isArray(deps)||_storybook_client_logger__WEBPACK_IMPORTED_MODULE_23__.kg.warn("".concat(name," received a final argument that is not an array (instead, received ").concat(deps,"). When specified, the final argument must be an array."));var _hook={name,deps};return hooks.currentHooks.push(_hook),callback(_hook),_hook}if("UPDATE"===hooks.currentPhase){var _hook2=hooks.getNextHook();if(null==_hook2)throw new Error("Rendered more hooks than during the previous render.");return _hook2.name!==name&&_storybook_client_logger__WEBPACK_IMPORTED_MODULE_23__.kg.warn("Storybook has detected a change in the order of Hooks".concat(hooks.currentDecoratorName?" called by ".concat(hooks.currentDecoratorName):"",". This will lead to bugs and errors if not fixed.")),null!=deps&&null==_hook2.deps&&_storybook_client_logger__WEBPACK_IMPORTED_MODULE_23__.kg.warn("".concat(name," received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.")),null!=deps&&null!=_hook2.deps&&deps.length!==_hook2.deps.length&&_storybook_client_logger__WEBPACK_IMPORTED_MODULE_23__.kg.warn("The final argument passed to ".concat(name," changed size between renders. The order and size of this array must remain constant.\nPrevious: ").concat(_hook2.deps,"\nIncoming: ").concat(deps)),null!=deps&&null!=_hook2.deps&&function areDepsEqual(deps,nextDeps){return deps.length===nextDeps.length&&deps.every((function(dep,i){return dep===nextDeps[i]}))}(deps,_hook2.deps)||(callback(_hook2),_hook2.deps=deps),_hook2}throw invalidHooksError()}(name,(function(hook){hook.memoizedState=nextCreate()}),deps);return _useHook.memoizedState}function useEffect(create,deps){var hooks=getHooksContextOrThrow(),effect=useMemoLike("useEffect",(function(){return{create}}),deps);hooks.currentEffects.includes(effect)||hooks.currentEffects.push(effect)}},"../../node_modules/@storybook/addons/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{KP:()=>addons});__webpack_require__("../../node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.values.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.js");var global_window=__webpack_require__("../../node_modules/global/window.js"),window_default=__webpack_require__.n(global_window),esm=__webpack_require__("../../node_modules/@storybook/client-logger/dist/esm/index.js"),dist_esm=__webpack_require__("../../node_modules/@storybook/channels/dist/esm/index.js");var types;__webpack_require__("../../node_modules/core-js/modules/es.array.find.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}!function(types){types.TAB="tab",types.PANEL="panel",types.TOOL="tool",types.TOOLEXTRA="toolextra",types.PREVIEW="preview",types.NOTES_ELEMENT="notes-element"}(types||(types={}));var AddonStore=_createClass((function AddonStore(){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddonStore),this.loaders={},this.elements={},this.config={},this.channel=void 0,this.serverChannel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){return _this.channel||_this.setChannel(function mockChannel(){return new dist_esm.Z({transport:{setHandler:function setHandler(){},send:function send(){}}})}()),_this.channel},this.getServerChannel=function(){if(!_this.serverChannel)throw new Error("Accessing non-existent serverChannel");return _this.serverChannel},this.ready=function(){return _this.promise},this.hasChannel=function(){return!!_this.channel},this.hasServerChannel=function(){return!!_this.serverChannel},this.setChannel=function(channel){_this.channel=channel,_this.resolve()},this.setServerChannel=function(channel){_this.serverChannel=channel},this.getElements=function(type){return _this.elements[type]||(_this.elements[type]={}),_this.elements[type]},this.addPanel=function(name,options){_this.add(name,Object.assign({type:types.PANEL},options))},this.add=function(name,addon){var type=addon.type;_this.getElements(type)[name]=Object.assign({id:name},addon)},this.setConfig=function(value){Object.assign(_this.config,value)},this.getConfig=function(){return _this.config},this.register=function(name,registerCallback){_this.loaders[name]&&esm.kg.warn("".concat(name," was loaded twice, this could have bad side-effects")),_this.loaders[name]=registerCallback},this.loadAddons=function(api){Object.values(_this.loaders).forEach((function(value){return value(api)}))},this.promise=new Promise((function(res){_this.resolve=function(){return res(_this.getChannel())}}))})),KEY="__STORYBOOK_ADDONS";var addons=function getAddonsStore(){return window_default()[KEY]||(window_default()[KEY]=new AddonStore),window_default()[KEY]}()},"../../node_modules/@storybook/channels/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("../../node_modules/core-js/modules/es.object.freeze.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/web.immediate.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js");var _templateObject,util_deprecate__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/util-deprecate/browser.js"),util_deprecate__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(util_deprecate__WEBPACK_IMPORTED_MODULE_8__),ts_dedent__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/ts-dedent/esm/index.js");function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var generateRandomId=function generateRandomId(){return Math.random().toString(16).slice(2)};const __WEBPACK_DEFAULT_EXPORT__=function(){function Channel(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},transport=_ref.transport,_ref$async=_ref.async,async=void 0!==_ref$async&&_ref$async;_classCallCheck(this,Channel),this.isAsync=void 0,this.sender=generateRandomId(),this.events={},this.data={},this.transport=void 0,this.addPeerListener=util_deprecate__WEBPACK_IMPORTED_MODULE_8___default()((function(eventName,listener){_this.addListener(eventName,listener)}),(0,ts_dedent__WEBPACK_IMPORTED_MODULE_9__.C)(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n      channel.addPeerListener is deprecated\n    "])))),this.isAsync=async,transport&&(this.transport=transport,this.transport.setHandler((function(event){return _this.handleEvent(event)})))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Channel,[{key:"hasTransport",get:function get(){return!!this.transport}},{key:"addListener",value:function addListener(eventName,listener){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(listener)}},{key:"emit",value:function emit(eventName){for(var _this2=this,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var event={type:eventName,args,from:this.sender},options={};args.length>=1&&args[0]&&args[0].options&&(options=args[0].options);var handler=function handler(){_this2.transport&&_this2.transport.send(event,options),_this2.handleEvent(event)};this.isAsync?setImmediate(handler):handler()}},{key:"last",value:function last(eventName){return this.data[eventName]}},{key:"eventNames",value:function eventNames(){return Object.keys(this.events)}},{key:"listenerCount",value:function listenerCount(eventName){var listeners=this.listeners(eventName);return listeners?listeners.length:0}},{key:"listeners",value:function listeners(eventName){var listeners=this.events[eventName];return listeners||void 0}},{key:"once",value:function once(eventName,listener){var onceListener=this.onceListener(eventName,listener);this.addListener(eventName,onceListener)}},{key:"removeAllListeners",value:function removeAllListeners(eventName){eventName?this.events[eventName]&&delete this.events[eventName]:this.events={}}},{key:"removeListener",value:function removeListener(eventName,listener){var listeners=this.listeners(eventName);listeners&&(this.events[eventName]=listeners.filter((function(l){return l!==listener})))}},{key:"on",value:function on(eventName,listener){this.addListener(eventName,listener)}},{key:"off",value:function off(eventName,listener){this.removeListener(eventName,listener)}},{key:"handleEvent",value:function handleEvent(event){var listeners=this.listeners(event.type);listeners&&listeners.length&&listeners.forEach((function(fn){fn.apply(event,event.args)})),this.data[event.type]=event.args}},{key:"onceListener",value:function onceListener(eventName,listener){var _this3=this,onceListener=function onceListener(){return _this3.removeListener(eventName,onceListener),listener.apply(void 0,arguments)};return onceListener}}]),Channel}()},"../../node_modules/@storybook/client-api/dist/esm/ClientApi.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ti:()=>ClientApi,v9:()=>addArgTypes,My:()=>addArgTypesEnhancer,uc:()=>addArgs,_C:()=>addArgsEnhancer,$9:()=>addDecorator,HZ:()=>addLoader,h1:()=>addParameters,$P:()=>setGlobalRender});__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.freeze.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.set.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.values.js");var browser=__webpack_require__("../../node_modules/util-deprecate/browser.js"),browser_default=__webpack_require__.n(browser),esm=__webpack_require__("../../node_modules/ts-dedent/esm/index.js"),global_window=__webpack_require__("../../node_modules/global/window.js"),window_default=__webpack_require__.n(global_window),dist_esm=__webpack_require__("../../node_modules/@storybook/client-logger/dist/esm/index.js"),dist=__webpack_require__("../../node_modules/@storybook/csf/dist/index.js"),esm_parameters=__webpack_require__("../../node_modules/@storybook/store/dist/esm/parameters.js"),normalizeInputTypes=__webpack_require__("../../node_modules/@storybook/store/dist/esm/csf/normalizeInputTypes.js"),synchronous_promise=(__webpack_require__("../../node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../../node_modules/synchronous-promise/index.js")),stable=__webpack_require__("../../node_modules/stable/stable.js"),stable_default=__webpack_require__.n(stable),STORY_KIND_PATH_SEPARATOR=(__webpack_require__("../../node_modules/core-js/modules/es.string.split.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.trim.js"),/\s*\/\s*/);var autoTitle_templateObject,sortStoriesCommon=function sortStoriesCommon(stories,storySortParameter,fileNameOrder){var sortFn;storySortParameter?(sortFn="function"==typeof storySortParameter?storySortParameter:function storySort(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(a,b){if(a.title===b.title&&!options.includeNames)return 0;var method=options.method||"configure",order=options.order||[],storyTitleA=a.title.trim().split(STORY_KIND_PATH_SEPARATOR),storyTitleB=b.title.trim().split(STORY_KIND_PATH_SEPARATOR);options.includeNames&&(storyTitleA.push(a.name),storyTitleB.push(b.name));for(var depth=0;storyTitleA[depth]||storyTitleB[depth];){if(!storyTitleA[depth])return-1;if(!storyTitleB[depth])return 1;var nameA=storyTitleA[depth],nameB=storyTitleB[depth];if(nameA!==nameB){var indexA=order.indexOf(nameA),indexB=order.indexOf(nameB),indexWildcard=order.indexOf("*");return-1!==indexA||-1!==indexB?(-1===indexA&&(indexA=-1!==indexWildcard?indexWildcard:order.length),-1===indexB&&(indexB=-1!==indexWildcard?indexWildcard:order.length),indexA-indexB):"configure"===method?0:nameA.localeCompare(nameB,options.locales?options.locales:void 0,{numeric:!0,sensitivity:"accent"})}var index=order.indexOf(nameA);order=-1!==index&&Array.isArray(order[index+1])?order[index+1]:[],depth+=1}return 0}}(storySortParameter),stable_default().inplace(stories,sortFn)):stable_default().inplace(stories,(function(s1,s2){return fileNameOrder.indexOf(s1.importPath)-fileNameOrder.indexOf(s2.importPath)}));return stories},toIndexEntry=function toIndexEntry(story){return{id:story.id,title:story.title,name:story.name,importPath:story.parameters.fileName}},slash=(__webpack_require__("../../node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.join.js"),__webpack_require__("../../node_modules/slash/index.js")),slash_default=__webpack_require__.n(slash);function _toArray(arr){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var indexRe=/^index$/i;function pathJoin(paths){var slashes=new RegExp("/{1,}","g");return paths.join("/").replace(slashes,"/")}var StoryStoreFacade_templateObject,userOrAutoTitleFromSpecifier=function userOrAutoTitleFromSpecifier(fileName,entry,userTitle){var _ref=entry||{},directory=_ref.directory,importPathMatcher=_ref.importPathMatcher,_ref$titlePrefix=_ref.titlePrefix,titlePrefix=void 0===_ref$titlePrefix?"":_ref$titlePrefix;"number"==typeof fileName&&dist_esm.IH.warn((0,esm.C)(autoTitle_templateObject||(autoTitle_templateObject=function autoTitle_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(['\n      CSF Auto-title received a numeric fileName. This typically happens when\n      webpack is mis-configured in production mode. To force webpack to produce\n      filenames, set optimization.moduleIds = "named" in your webpack config.\n    ']))));var normalizedFileName=slash_default()(String(fileName));if(importPathMatcher.exec(normalizedFileName)){if(!userTitle){var suffix=normalizedFileName.replace(directory,""),path=slash_default()(pathJoin([titlePrefix,suffix])).split("/");return(path=function removeRedundantFilename(paths){var prevVal;return paths.filter((function(val,index){return(index!==paths.length-1||val!==prevVal&&!indexRe.test(val))&&(prevVal=val,!0)}))}(path=function stripExtension(path){var parts=_toConsumableArray(path),last=parts[parts.length-1],dotIndex=last.indexOf("."),stripped=dotIndex>0?last.substr(0,dotIndex):last;parts[parts.length-1]=stripped;var _parts2=_toArray(parts),first=_parts2[0],rest=_parts2.slice(1);return""===first&&(parts=rest),parts}(path))).join("/")}return titlePrefix?slash_default()(pathJoin([titlePrefix,userTitle])):userTitle}},_excluded=["default","__namedExportsOrder"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _slicedToArray(arr,i){return function StoryStoreFacade_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function StoryStoreFacade_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StoryStoreFacade_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StoryStoreFacade_arrayLikeToArray(o,minLen)}(arr,i)||function StoryStoreFacade_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StoryStoreFacade_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ClientApi_templateObject,_templateObject2,_templateObject3,_templateObject4,singleton,StoryStoreFacade=function(){function StoryStoreFacade(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStoreFacade),this.projectAnnotations=void 0,this.stories=void 0,this.csfExports=void 0,this.projectAnnotations={loaders:[],decorators:[],parameters:{},argsEnhancers:[],argTypesEnhancers:[],args:{},argTypes:{}},this.stories={},this.csfExports={}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(StoryStoreFacade,[{key:"importFn",value:function importFn(path){var _this=this;return synchronous_promise.SynchronousPromise.resolve().then((function(){var moduleExports=_this.csfExports[path];if(!moduleExports)throw new Error("Unknown path: ".concat(path));return moduleExports}))}},{key:"getStoryIndex",value:function getStoryIndex(store){var _this$projectAnnotati,_this$projectAnnotati2,sortedV7,_this2=this,fileNameOrder=Object.keys(this.csfExports),storySortParameter=null===(_this$projectAnnotati=this.projectAnnotations.parameters)||void 0===_this$projectAnnotati||null===(_this$projectAnnotati2=_this$projectAnnotati.options)||void 0===_this$projectAnnotati2?void 0:_this$projectAnnotati2.storySort,sortableV6=Object.entries(this.stories).map((function(_ref){var _ref2=_slicedToArray(_ref,2),storyId=_ref2[0],importPath=_ref2[1].importPath,exports=_this2.csfExports[importPath],csfFile=store.processCSFFileWithCache(exports,importPath,exports.default.title);return[storyId,store.storyFromCSFFile({storyId,csfFile}),csfFile.meta.parameters,_this2.projectAnnotations.parameters]}));try{sortedV7=function sortStoriesV6(stories,storySortParameter,fileNameOrder){if(storySortParameter&&"function"==typeof storySortParameter)return stable_default().inplace(stories,storySortParameter),stories.map((function(s){return toIndexEntry(s[1])}));var storiesV7=stories.map((function(s){return toIndexEntry(s[1])}));return sortStoriesCommon(storiesV7,storySortParameter,fileNameOrder)}(sortableV6,storySortParameter,fileNameOrder)}catch(err){if("function"==typeof storySortParameter)throw new Error((0,esm.C)(StoryStoreFacade_templateObject||(StoryStoreFacade_templateObject=function StoryStoreFacade_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n          Error sorting stories with sort parameter ",":\n\n          > ","\n          \n          Are you using a V7-style sort function in V6 compatibility mode?\n          \n          More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort\n        "])),storySortParameter,err.message));throw err}return{v:3,stories:sortedV7.reduce((function(acc,s){return acc[s.id]=_this2.stories[s.id],acc}),{})}}},{key:"clearFilenameExports",value:function clearFilenameExports(fileName){var _this3=this;this.csfExports[fileName]&&(Object.entries(this.stories).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),id=_ref4[0];_ref4[1].importPath===fileName&&delete _this3.stories[id]})),this.csfExports[fileName]={})}},{key:"addStoriesFromExports",value:function addStoriesFromExports(fileName,fileExports){var _this4=this;if(this.csfExports[fileName]!==fileExports){this.clearFilenameExports(fileName);var defaultExport=fileExports.default,__namedExportsOrder=fileExports.__namedExportsOrder,namedExports=_objectWithoutProperties(fileExports,_excluded),_ref5=defaultExport||{},componentId=_ref5.id,title=_ref5.title,specifiers=(window_default().STORIES||[]).map((function(specifier){return Object.assign({},specifier,{importPathMatcher:new RegExp(specifier.importPathMatcher)})}));if(title=function userOrAutoTitle(fileName,storiesEntries,userTitle){for(var i=0;i<storiesEntries.length;i+=1){var title=userOrAutoTitleFromSpecifier(fileName,storiesEntries[i],userTitle);if(title)return title}return userTitle||void 0}(fileName,specifiers,title),title){this.csfExports[fileName]=Object.assign({},fileExports,{default:Object.assign({},defaultExport,{title})});var sortedExports=namedExports;Array.isArray(__namedExportsOrder)&&(sortedExports={},__namedExportsOrder.forEach((function(name){var namedExport=namedExports[name];namedExport&&(sortedExports[name]=namedExport)}))),Object.entries(sortedExports).filter((function(_ref6){var key=_slicedToArray(_ref6,1)[0];return(0,dist.isExportStory)(key,defaultExport)})).forEach((function(_ref8){var _storyExport$paramete,_storyExport$story,_ref9=_slicedToArray(_ref8,2),key=_ref9[0],storyExport=_ref9[1],exportName=(0,dist.storyNameFromExport)(key),id=(null===(_storyExport$paramete=storyExport.parameters)||void 0===_storyExport$paramete?void 0:_storyExport$paramete.__id)||(0,dist.toId)(componentId||title,exportName),name="function"!=typeof storyExport&&storyExport.name||storyExport.storyName||(null===(_storyExport$story=storyExport.story)||void 0===_storyExport$story?void 0:_storyExport$story.name)||exportName;_this4.stories[id]={id,name,title,importPath:fileName}}))}else dist_esm.kg.info("Unexpected default export without title in '".concat(fileName,"': ").concat(JSON.stringify(fileExports.default)))}}}]),StoryStoreFacade}(),ClientApi_excluded=["globals","globalTypes"],_excluded2=["decorators","loaders","component","args","argTypes"],_excluded3=["component","args","argTypes"];function ClientApi_slicedToArray(arr,i){return function ClientApi_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ClientApi_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ClientApi_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ClientApi_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ClientApi_arrayLikeToArray(o,minLen)}(arr,i)||function ClientApi_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ClientApi_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ClientApi_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ClientApi_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ClientApi_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ClientApi_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ClientApi_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var warningAlternatives={addDecorator:"Instead, use `export const decorators = [];` in your `preview.js`.",addParameters:"Instead, use `export const parameters = {};` in your `preview.js`.",addLoaders:"Instead, use `export const loaders = [];` in your `preview.js`."},warningMessage=function warningMessage(method){return browser_default()((function(){}),(0,esm.C)(ClientApi_templateObject||(ClientApi_templateObject=ClientApi_taggedTemplateLiteral(["\n  `","` is deprecated, and will be removed in Storybook 7.0.\n\n  ","\n\n  Read more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-addparameters-and-adddecorator)."],["\n  \\`","\\` is deprecated, and will be removed in Storybook 7.0.\n\n  ","\n\n  Read more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-addparameters-and-adddecorator)."])),method,warningAlternatives[method]))},warnings={addDecorator:warningMessage("addDecorator"),addParameters:warningMessage("addParameters"),addLoaders:warningMessage("addLoaders")},checkMethod=function checkMethod(method,deprecationWarning){var _global$FEATURES;if(null!==(_global$FEATURES=window_default().FEATURES)&&void 0!==_global$FEATURES&&_global$FEATURES.storyStoreV7)throw new Error((0,esm.C)(_templateObject2||(_templateObject2=ClientApi_taggedTemplateLiteral(["You cannot use `","` with the new Story Store.\n      \n      ",""],["You cannot use \\`","\\` with the new Story Store.\n      \n      ",""])),method,warningAlternatives[method]));if(!singleton)throw new Error("Singleton client API not yet initialized, cannot call `".concat(method,"`."));deprecationWarning&&warnings[method]()},addDecorator=function addDecorator(decorator){var deprecationWarning=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];checkMethod("addDecorator",deprecationWarning),singleton.addDecorator(decorator)},addParameters=function addParameters(parameters){var deprecationWarning=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];checkMethod("addParameters",deprecationWarning),singleton.addParameters(parameters)},addLoader=function addLoader(loader){var deprecationWarning=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];checkMethod("addLoader",deprecationWarning),singleton.addLoader(loader)},addArgs=function addArgs(args){checkMethod("addArgs",!1),singleton.addArgs(args)},addArgTypes=function addArgTypes(argTypes){checkMethod("addArgTypes",!1),singleton.addArgTypes(argTypes)},addArgsEnhancer=function addArgsEnhancer(enhancer){checkMethod("addArgsEnhancer",!1),singleton.addArgsEnhancer(enhancer)},addArgTypesEnhancer=function addArgTypesEnhancer(enhancer){checkMethod("addArgTypesEnhancer",!1),singleton.addArgTypesEnhancer(enhancer)},setGlobalRender=function setGlobalRender(render){checkMethod("setGlobalRender",!1),singleton.facade.projectAnnotations.render=render},invalidStoryTypes=new Set(["string","number","boolean","symbol"]),ClientApi=function(){function ClientApi(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},storyStore=_ref.storyStore;ClientApi_classCallCheck(this,ClientApi),this.facade=void 0,this.storyStore=void 0,this.addons=void 0,this.onImportFnChanged=void 0,this.lastFileName=0,this.setAddon=browser_default()((function(addon){_this.addons=Object.assign({},_this.addons,addon)}),(0,esm.C)(_templateObject3||(_templateObject3=ClientApi_taggedTemplateLiteral(["\n      `setAddon` is deprecated and will be removed in Storybook 7.0.\n\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-setaddon\n    "],["\n      \\`setAddon\\` is deprecated and will be removed in Storybook 7.0.\n\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-setaddon\n    "])))),this.addDecorator=function(decorator){_this.facade.projectAnnotations.decorators.push(decorator)},this.clearDecorators=browser_default()((function(){_this.facade.projectAnnotations.decorators=[]}),(0,esm.C)(_templateObject4||(_templateObject4=ClientApi_taggedTemplateLiteral(["\n      `clearDecorators` is deprecated and will be removed in Storybook 7.0.\n\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-cleardecorators\n    "],["\n      \\`clearDecorators\\` is deprecated and will be removed in Storybook 7.0.\n\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-cleardecorators\n    "])))),this.addParameters=function(_ref2){var globals=_ref2.globals,globalTypes=_ref2.globalTypes,parameters=ClientApi_objectWithoutProperties(_ref2,ClientApi_excluded);_this.facade.projectAnnotations.parameters=(0,esm_parameters.f)(_this.facade.projectAnnotations.parameters,parameters),globals&&(_this.facade.projectAnnotations.globals=Object.assign({},_this.facade.projectAnnotations.globals,globals)),globalTypes&&(_this.facade.projectAnnotations.globalTypes=Object.assign({},_this.facade.projectAnnotations.globalTypes,(0,normalizeInputTypes.x)(globalTypes)))},this.addLoader=function(loader){_this.facade.projectAnnotations.loaders.push(loader)},this.addArgs=function(args){_this.facade.projectAnnotations.args=Object.assign({},_this.facade.projectAnnotations.args,args)},this.addArgTypes=function(argTypes){_this.facade.projectAnnotations.argTypes=Object.assign({},_this.facade.projectAnnotations.argTypes,(0,normalizeInputTypes.x)(argTypes))},this.addArgsEnhancer=function(enhancer){_this.facade.projectAnnotations.argsEnhancers.push(enhancer)},this.addArgTypesEnhancer=function(enhancer){_this.facade.projectAnnotations.argTypesEnhancers.push(enhancer)},this.storiesOf=function(kind,m){if(!kind&&"string"!=typeof kind)throw new Error("Invalid or missing kind provided for stories, should be a string");if(m||dist_esm.kg.warn("Missing 'module' parameter for story with a kind of '".concat(kind,"'. It will break your HMR")),m){var proto=Object.getPrototypeOf(m);proto.exports&&proto.exports.default&&dist_esm.kg.error("Illegal mix of CSF default export and storiesOf calls in a single file: ".concat(proto.i))}for(var baseFilename=m&&m.id?"".concat(m.id):(_this.lastFileName++).toString(),fileName=baseFilename,i=1;_this.facade.csfExports[fileName]&&Object.keys(_this.facade.csfExports[fileName]).length>0;)i+=1,fileName="".concat(baseFilename,"-").concat(i);m&&m.hot&&m.hot.accept&&(m.hot.accept(),m.hot.dispose((function(){_this.facade.clearFilenameExports(fileName),setTimeout((function(){var _this$onImportFnChang;null===(_this$onImportFnChang=_this.onImportFnChanged)||void 0===_this$onImportFnChang||_this$onImportFnChang.call(_this,{importFn:_this.importFn.bind(_this)})}),0)})));var hasAdded=!1,api={kind:kind.toString(),add:function add(){return api},addDecorator:function addDecorator(){return api},addLoader:function addLoader(){return api},addParameters:function addParameters(){return api}};Object.keys(_this.addons).forEach((function(name){var addon=_this.addons[name];api[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return addon.apply(api,args),api}}));var meta={id:(0,dist.sanitize)(kind),title:kind,decorators:[],loaders:[],parameters:{}};_this.facade.csfExports[fileName]={default:meta};var counter=0;return api.add=function(storyName,storyFn){var parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(hasAdded=!0,"string"!=typeof storyName)throw new Error('Invalid or missing storyName provided for a "'.concat(kind,'" story.'));if(!storyFn||Array.isArray(storyFn)||invalidStoryTypes.has(_typeof(storyFn)))throw new Error('Cannot load story "'.concat(storyName,'" in "').concat(kind,'" due to invalid format. Storybook expected a function/object but received ').concat(_typeof(storyFn)," instead."));var decorators=parameters.decorators,loaders=parameters.loaders,component=parameters.component,args=parameters.args,argTypes=parameters.argTypes,storyParameters=ClientApi_objectWithoutProperties(parameters,_excluded2),storyId=parameters.__id||(0,dist.toId)(kind,storyName),csfExports=_this.facade.csfExports[fileName];return csfExports["story".concat(counter)]={name:storyName,parameters:Object.assign({fileName,__id:storyId},storyParameters),decorators,loaders,args,argTypes,component,render:storyFn},counter+=1,_this.facade.stories[storyId]={id:storyId,title:csfExports.default.title,name:storyName,importPath:fileName},api},api.addDecorator=function(decorator){if(hasAdded)throw new Error("You cannot add a decorator after the first story for a kind.\nRead more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories");return meta.decorators.push(decorator),api},api.addLoader=function(loader){if(hasAdded)throw new Error("You cannot add a loader after the first story for a kind.");return meta.loaders.push(loader),api},api.addParameters=function(_ref3){var component=_ref3.component,args=_ref3.args,argTypes=_ref3.argTypes,parameters=ClientApi_objectWithoutProperties(_ref3,_excluded3);if(hasAdded)throw new Error("You cannot add parameters after the first story for a kind.\nRead more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories");return meta.parameters=(0,esm_parameters.f)(meta.parameters,parameters),component&&(meta.component=component),args&&(meta.args=Object.assign({},meta.args,args)),argTypes&&(meta.argTypes=Object.assign({},meta.argTypes,argTypes)),api},api},this.getStorybook=function(){var stories=_this.storyStore.storyIndex.stories,kinds={};return Object.entries(stories).forEach((function(_ref4){var _ref5=ClientApi_slicedToArray(_ref4,2),storyId=_ref5[0],_ref5$=_ref5[1],title=_ref5$.title,name=_ref5$.name,importPath=_ref5$.importPath;kinds[title]||(kinds[title]={kind:title,fileName:importPath,stories:[]});var storyFn=_this.storyStore.fromId(storyId).storyFn;kinds[title].stories.push({name,render:storyFn})})),Object.values(kinds)},this.raw=function(){return _this.storyStore.raw()},this.facade=new StoryStoreFacade,this.addons={},this.storyStore=storyStore,singleton=this}return function ClientApi_createClass(Constructor,protoProps,staticProps){return protoProps&&ClientApi_defineProperties(Constructor.prototype,protoProps),staticProps&&ClientApi_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ClientApi,[{key:"importFn",value:function importFn(path){return this.facade.importFn(path)}},{key:"getStoryIndex",value:function getStoryIndex(){if(!this.storyStore)throw new Error("Cannot get story index before setting storyStore");return this.facade.getStoryIndex(this.storyStore)}},{key:"_storyStore",get:function get(){return this.storyStore}}]),ClientApi}()},"../../node_modules/@storybook/client-logger/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{IC:()=>pretty,IH:()=>once,kg:()=>logger});__webpack_require__("../../node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.set.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.replace.js");var global__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/global/window.js"),global__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_8__),LOGLEVEL=global__WEBPACK_IMPORTED_MODULE_8___default().LOGLEVEL,console=global__WEBPACK_IMPORTED_MODULE_8___default().console,levels={trace:1,debug:2,info:3,warn:4,error:5,silent:10},currentLogLevelNumber=levels[LOGLEVEL]||levels.info,logger={trace:function trace(message){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return currentLogLevelNumber<=levels.trace&&console.trace.apply(console,[message].concat(rest))},debug:function debug(message){for(var _len2=arguments.length,rest=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)rest[_key2-1]=arguments[_key2];return currentLogLevelNumber<=levels.debug&&console.debug.apply(console,[message].concat(rest))},info:function info(message){for(var _len3=arguments.length,rest=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)rest[_key3-1]=arguments[_key3];return currentLogLevelNumber<=levels.info&&console.info.apply(console,[message].concat(rest))},warn:function warn(message){for(var _len4=arguments.length,rest=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)rest[_key4-1]=arguments[_key4];return currentLogLevelNumber<=levels.warn&&console.warn.apply(console,[message].concat(rest))},error:function error(message){for(var _len5=arguments.length,rest=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)rest[_key5-1]=arguments[_key5];return currentLogLevelNumber<=levels.error&&console.error.apply(console,[message].concat(rest))},log:function log(message){for(var _len6=arguments.length,rest=new Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++)rest[_key6-1]=arguments[_key6];return currentLogLevelNumber<levels.silent&&console.log.apply(console,[message].concat(rest))}},logged=new Set,once=function once(type){return function(message){if(!logged.has(message)){logged.add(message);for(var _len7=arguments.length,rest=new Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++)rest[_key7-1]=arguments[_key7];return logger[type].apply(logger,[message].concat(rest))}}};once.clear=function(){return logged.clear()},once.trace=once("trace"),once.debug=once("debug"),once.info=once("info"),once.warn=once("warn"),once.error=once("error"),once.log=once("log");var pretty=function pretty(type){return function(){for(var argArray=[],_len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];if(args.length){var reResultArray,startTagRe=/<span\s+style=(['"])([^'"]*)\1\s*>/gi,endTagRe=/<\/span>/gi;for(argArray.push(args[0].replace(startTagRe,"%c").replace(endTagRe,"%c"));reResultArray=startTagRe.exec(args[0]);)argArray.push(reResultArray[2]),argArray.push("");for(var j=1;j<args.length;j++)argArray.push(args[j])}logger[type].apply(logger,argArray)}};pretty.trace=pretty("trace"),pretty.debug=pretty("debug"),pretty.info=pretty("info"),pretty.warn=pretty("warn"),pretty.error=pretty("error")},"../../node_modules/@storybook/core-client/dist/esm/globals/globals.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var global__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/global/window.js");__webpack_require__.n(global__WEBPACK_IMPORTED_MODULE_0__)().window.STORYBOOK_REACT_CLASSES={}},"../../node_modules/@storybook/core-client/dist/esm/globals/polyfills.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/regenerator-runtime/runtime.js"),__webpack_require__("../../node_modules/airbnb-js-shims/index.js"),__webpack_require__("../../node_modules/core-js/features/symbol/index.js")},"../../node_modules/@storybook/core-events/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var events;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CHANNEL_CREATED:()=>CHANNEL_CREATED,CONFIG_ERROR:()=>CONFIG_ERROR,CURRENT_STORY_WAS_SET:()=>CURRENT_STORY_WAS_SET,DOCS_RENDERED:()=>DOCS_RENDERED,FORCE_REMOUNT:()=>FORCE_REMOUNT,FORCE_RE_RENDER:()=>FORCE_RE_RENDER,GLOBALS_UPDATED:()=>GLOBALS_UPDATED,IGNORED_EXCEPTION:()=>IGNORED_EXCEPTION,NAVIGATE_URL:()=>NAVIGATE_URL,PRELOAD_STORIES:()=>PRELOAD_STORIES,PREVIEW_KEYDOWN:()=>PREVIEW_KEYDOWN,REGISTER_SUBSCRIPTION:()=>REGISTER_SUBSCRIPTION,RESET_STORY_ARGS:()=>RESET_STORY_ARGS,SELECT_STORY:()=>SELECT_STORY,SET_CURRENT_STORY:()=>SET_CURRENT_STORY,SET_GLOBALS:()=>SET_GLOBALS,SET_STORIES:()=>SET_STORIES,SHARED_STATE_CHANGED:()=>SHARED_STATE_CHANGED,SHARED_STATE_SET:()=>SHARED_STATE_SET,STORIES_COLLAPSE_ALL:()=>STORIES_COLLAPSE_ALL,STORIES_EXPAND_ALL:()=>STORIES_EXPAND_ALL,STORY_ARGS_UPDATED:()=>STORY_ARGS_UPDATED,STORY_CHANGED:()=>STORY_CHANGED,STORY_ERRORED:()=>STORY_ERRORED,STORY_INDEX_INVALIDATED:()=>STORY_INDEX_INVALIDATED,STORY_MISSING:()=>STORY_MISSING,STORY_PREPARED:()=>STORY_PREPARED,STORY_RENDERED:()=>STORY_RENDERED,STORY_RENDER_PHASE_CHANGED:()=>STORY_RENDER_PHASE_CHANGED,STORY_SPECIFIED:()=>STORY_SPECIFIED,STORY_THREW_EXCEPTION:()=>STORY_THREW_EXCEPTION,STORY_UNCHANGED:()=>STORY_UNCHANGED,UPDATE_GLOBALS:()=>UPDATE_GLOBALS,UPDATE_QUERY_PARAMS:()=>UPDATE_QUERY_PARAMS,UPDATE_STORY_ARGS:()=>UPDATE_STORY_ARGS,default:()=>__WEBPACK_DEFAULT_EXPORT__}),function(events){events.CHANNEL_CREATED="channelCreated",events.CONFIG_ERROR="configError",events.STORY_INDEX_INVALIDATED="storyIndexInvalidated",events.STORY_SPECIFIED="storySpecified",events.SET_STORIES="setStories",events.SET_CURRENT_STORY="setCurrentStory",events.CURRENT_STORY_WAS_SET="currentStoryWasSet",events.FORCE_RE_RENDER="forceReRender",events.FORCE_REMOUNT="forceRemount",events.PRELOAD_STORIES="preloadStories",events.STORY_PREPARED="storyPrepared",events.STORY_CHANGED="storyChanged",events.STORY_UNCHANGED="storyUnchanged",events.STORY_RENDERED="storyRendered",events.STORY_MISSING="storyMissing",events.STORY_ERRORED="storyErrored",events.STORY_THREW_EXCEPTION="storyThrewException",events.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",events.UPDATE_STORY_ARGS="updateStoryArgs",events.STORY_ARGS_UPDATED="storyArgsUpdated",events.RESET_STORY_ARGS="resetStoryArgs",events.SET_GLOBALS="setGlobals",events.UPDATE_GLOBALS="updateGlobals",events.GLOBALS_UPDATED="globalsUpdated",events.REGISTER_SUBSCRIPTION="registerSubscription",events.PREVIEW_KEYDOWN="previewKeydown",events.SELECT_STORY="selectStory",events.STORIES_COLLAPSE_ALL="storiesCollapseAll",events.STORIES_EXPAND_ALL="storiesExpandAll",events.DOCS_RENDERED="docsRendered",events.SHARED_STATE_CHANGED="sharedStateChanged",events.SHARED_STATE_SET="sharedStateSet",events.NAVIGATE_URL="navigateUrl",events.UPDATE_QUERY_PARAMS="updateQueryParams"}(events||(events={}));const __WEBPACK_DEFAULT_EXPORT__=events;var CHANNEL_CREATED=events.CHANNEL_CREATED,CONFIG_ERROR=events.CONFIG_ERROR,STORY_INDEX_INVALIDATED=events.STORY_INDEX_INVALIDATED,STORY_SPECIFIED=events.STORY_SPECIFIED,SET_STORIES=events.SET_STORIES,SET_CURRENT_STORY=events.SET_CURRENT_STORY,CURRENT_STORY_WAS_SET=events.CURRENT_STORY_WAS_SET,FORCE_RE_RENDER=events.FORCE_RE_RENDER,FORCE_REMOUNT=events.FORCE_REMOUNT,STORY_PREPARED=events.STORY_PREPARED,STORY_CHANGED=events.STORY_CHANGED,STORY_UNCHANGED=events.STORY_UNCHANGED,PRELOAD_STORIES=events.PRELOAD_STORIES,STORY_RENDERED=events.STORY_RENDERED,STORY_MISSING=events.STORY_MISSING,STORY_ERRORED=events.STORY_ERRORED,STORY_THREW_EXCEPTION=events.STORY_THREW_EXCEPTION,STORY_RENDER_PHASE_CHANGED=events.STORY_RENDER_PHASE_CHANGED,UPDATE_STORY_ARGS=events.UPDATE_STORY_ARGS,STORY_ARGS_UPDATED=events.STORY_ARGS_UPDATED,RESET_STORY_ARGS=events.RESET_STORY_ARGS,SET_GLOBALS=events.SET_GLOBALS,UPDATE_GLOBALS=events.UPDATE_GLOBALS,GLOBALS_UPDATED=events.GLOBALS_UPDATED,REGISTER_SUBSCRIPTION=events.REGISTER_SUBSCRIPTION,PREVIEW_KEYDOWN=events.PREVIEW_KEYDOWN,SELECT_STORY=events.SELECT_STORY,STORIES_COLLAPSE_ALL=events.STORIES_COLLAPSE_ALL,STORIES_EXPAND_ALL=events.STORIES_EXPAND_ALL,DOCS_RENDERED=events.DOCS_RENDERED,SHARED_STATE_CHANGED=events.SHARED_STATE_CHANGED,SHARED_STATE_SET=events.SHARED_STATE_SET,NAVIGATE_URL=events.NAVIGATE_URL,UPDATE_QUERY_PARAMS=events.UPDATE_QUERY_PARAMS,IGNORED_EXCEPTION=new Error("ignoredException")},"../../node_modules/@storybook/csf/dist/SBType.js":()=>{},"../../node_modules/@storybook/csf/dist/includeConditionalArg.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.includeConditionalArg=exports.testValue=void 0;var _isEqual=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("../../node_modules/lodash/isEqual.js"));var count=function count(vals){return vals.map((function(v){return void 0!==v})).filter(Boolean).length},testValue=function testValue(cond,value){var _ref=cond,exists=_ref.exists,eq=_ref.eq,neq=_ref.neq,truthy=_ref.truthy;if(count([exists,eq,neq,truthy])>1)throw new Error("Invalid conditional test ".concat(JSON.stringify({exists,eq,neq})));if(void 0!==eq)return(0,_isEqual.default)(value,eq);if(void 0!==neq)return!(0,_isEqual.default)(value,neq);if(void 0!==exists){var valueExists=void 0!==value;return exists?valueExists:!valueExists}return void 0===truthy||truthy?!!value:!value};exports.testValue=testValue;exports.includeConditionalArg=function includeConditionalArg(argType,args,globals){if(!argType.if)return!0;var _ref2=argType.if,arg=_ref2.arg,global=_ref2.global;if(1!==count([arg,global]))throw new Error("Invalid conditional value ".concat(JSON.stringify({arg,global})));var value=arg?args[arg]:globals[global];return testValue(argType.if,value)}},"../../node_modules/@storybook/csf/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={sanitize:!0,toId:!0,storyNameFromExport:!0,isExportStory:!0,parseKind:!0,includeConditionalArg:!0};exports.isExportStory=function isExportStory(key,_ref){var includeStories=_ref.includeStories,excludeStories=_ref.excludeStories;return"__esModule"!==key&&(!includeStories||matches(key,includeStories))&&(!excludeStories||!matches(key,excludeStories))},Object.defineProperty(exports,"includeConditionalArg",{enumerable:!0,get:function get(){return _includeConditionalArg.includeConditionalArg}}),exports.parseKind=exports.storyNameFromExport=exports.toId=exports.sanitize=void 0;var _startCase=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("../../node_modules/lodash/startCase.js")),_includeConditionalArg=__webpack_require__("../../node_modules/@storybook/csf/dist/includeConditionalArg.js"),_story=__webpack_require__("../../node_modules/@storybook/csf/dist/story.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}Object.keys(_story).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _story[key]}}))}));var sanitize=function sanitize(string){return string.toLowerCase().replace(/[ '`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};exports.sanitize=sanitize;var sanitizeSafe=function sanitizeSafe(string,part){var sanitized=sanitize(string);if(""===sanitized)throw new Error("Invalid ".concat(part," '").concat(string,"', must include alphanumeric characters"));return sanitized};exports.toId=function toId(kind,name){return"".concat(sanitizeSafe(kind,"kind")).concat(name?"--".concat(sanitizeSafe(name,"name")):"")};function matches(storyKey,arrayOrRegex){return Array.isArray(arrayOrRegex)?arrayOrRegex.includes(storyKey):storyKey.match(arrayOrRegex)}exports.storyNameFromExport=function storyNameFromExport(key){return(0,_startCase.default)(key)};exports.parseKind=function parseKind(kind,_ref2){var rootSeparator=_ref2.rootSeparator,groupSeparator=_ref2.groupSeparator,_kind$split2=_slicedToArray(kind.split(rootSeparator,2),2),root=_kind$split2[0],remainder=_kind$split2[1];return{root:remainder?root:null,groups:(remainder||kind).split(groupSeparator).filter((function(i){return!!i}))}}},"../../node_modules/@storybook/csf/dist/story.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _SBType=__webpack_require__("../../node_modules/@storybook/csf/dist/SBType.js");Object.keys(_SBType).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _SBType[key]}})}))},"../../node_modules/@storybook/store/dist/esm/csf/normalizeInputTypes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>normalizeInputTypes});__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.assign.js");var lodash_mapValues__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/lodash/mapValues.js"),lodash_mapValues__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_3__),_excluded=["type","control"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var normalizeInputType=function normalizeInputType(inputType,key){var type=inputType.type,control=inputType.control,rest=_objectWithoutProperties(inputType,_excluded),normalized=Object.assign({name:key},rest);return type&&(normalized.type=function normalizeType(type){return"string"==typeof type?{name:type}:type}(type)),control?normalized.control=function normalizeControl(control){return"string"==typeof control?{type:control}:control}(control):!1===control&&(normalized.control={disable:!0}),normalized},normalizeInputTypes=function normalizeInputTypes(inputTypes){return lodash_mapValues__WEBPACK_IMPORTED_MODULE_3___default()(inputTypes,normalizeInputType)}},"../../node_modules/@storybook/store/dist/esm/decorators.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a7:()=>defaultDecorateStory,n0:()=>sanitizeStoryContextUpdate});__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js");var _excluded=["componentId","title","kind","id","name","story","parameters","initialArgs","argTypes"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function sanitizeStoryContextUpdate(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},update=(_ref.componentId,_ref.title,_ref.kind,_ref.id,_ref.name,_ref.story,_ref.parameters,_ref.initialArgs,_ref.argTypes,_objectWithoutProperties(_ref,_excluded));return update}function defaultDecorateStory(storyFn,decorators){var contextStore={},bindWithContext=function bindWithContext(decoratedStoryFn){return function(update){return contextStore.value=Object.assign({},contextStore.value,sanitizeStoryContextUpdate(update)),decoratedStoryFn(contextStore.value)}},decoratedWithContextStore=decorators.reduce((function(story,decorator){return function decorateStory(storyFn,decorator,bindWithContext){var boundStoryFunction=bindWithContext(storyFn);return function(context){return decorator(boundStoryFunction,context)}}(story,decorator,bindWithContext)}),storyFn);return function(context){return contextStore.value=context,decoratedWithContextStore(context)}}},"../../node_modules/@storybook/store/dist/esm/parameters.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>combineParameters});__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js");var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../node_modules/lodash/isPlainObject.js"),lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_16__);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var combineParameters=function combineParameters(){for(var _len=arguments.length,parameterSets=new Array(_len),_key=0;_key<_len;_key++)parameterSets[_key]=arguments[_key];var mergeKeys={},combined=parameterSets.filter(Boolean).reduce((function(acc,p){return Object.entries(p).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1],existing=acc[key];Array.isArray(value)||void 0===existing?acc[key]=value:lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_16___default()(value)&&lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_16___default()(existing)?mergeKeys[key]=!0:void 0!==value&&(acc[key]=value)})),acc}),{});return Object.keys(mergeKeys).forEach((function(key){var mergeValues=parameterSets.filter(Boolean).map((function(p){return p[key]})).filter((function(value){return void 0!==value}));mergeValues.every((function(value){return lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_16___default()(value)}))?combined[key]=combineParameters.apply(void 0,_toConsumableArray(mergeValues)):combined[key]=mergeValues[mergeValues.length-1]})),combined}},"../../node_modules/@storybook/svelte/templates/SlotDecorator.svelte":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/svelte/internal/index.mjs"),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/svelte/index.mjs");function create_else_block(ctx){let switch_instance,switch_instance_anchor,current;const switch_instance_spread_levels=[ctx[3]];var switch_value=ctx[2];function switch_props(ctx){let switch_instance_props={};for(let i=0;i<switch_instance_spread_levels.length;i+=1)switch_instance_props=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f0i)(switch_instance_props,switch_instance_spread_levels[i]);return{props:switch_instance_props}}return switch_value&&(switch_instance=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vV4)(switch_value,switch_props()),ctx[9](switch_instance)),{c(){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(switch_instance.$$.fragment),switch_instance_anchor=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.cSb)()},m(target,anchor){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(switch_instance,target,anchor),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(target,switch_instance_anchor,anchor),current=!0},p(ctx,dirty){const switch_instance_changes=8&dirty?(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.LoY)(switch_instance_spread_levels,[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gCg)(ctx[3])]):{};if(switch_value!==(switch_value=ctx[2])){if(switch_instance){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)();const old_component=switch_instance;(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(old_component.$$.fragment,1,0,(()=>{(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(old_component,1)})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()}switch_value?(switch_instance=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vV4)(switch_value,switch_props()),ctx[9](switch_instance),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(switch_instance.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(switch_instance.$$.fragment,1),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else switch_value&&switch_instance.$set(switch_instance_changes)},i(local){current||(switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(switch_instance.$$.fragment,local),current=!1},d(detaching){ctx[9](null),detaching&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(switch_instance_anchor),switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(switch_instance,detaching)}}}function create_if_block(ctx){let switch_instance,switch_instance_anchor,current;const switch_instance_spread_levels=[ctx[1]];var switch_value=ctx[0];function switch_props(ctx){let switch_instance_props={$$slots:{default:[create_default_slot]},$$scope:{ctx}};for(let i=0;i<switch_instance_spread_levels.length;i+=1)switch_instance_props=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f0i)(switch_instance_props,switch_instance_spread_levels[i]);return{props:switch_instance_props}}return switch_value&&(switch_instance=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vV4)(switch_value,switch_props(ctx)),ctx[8](switch_instance)),{c(){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(switch_instance.$$.fragment),switch_instance_anchor=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.cSb)()},m(target,anchor){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(switch_instance,target,anchor),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(target,switch_instance_anchor,anchor),current=!0},p(ctx,dirty){const switch_instance_changes=2&dirty?(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.LoY)(switch_instance_spread_levels,[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gCg)(ctx[1])]):{};if(2076&dirty&&(switch_instance_changes.$$scope={dirty,ctx}),switch_value!==(switch_value=ctx[0])){if(switch_instance){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)();const old_component=switch_instance;(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(old_component.$$.fragment,1,0,(()=>{(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(old_component,1)})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()}switch_value?(switch_instance=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vV4)(switch_value,switch_props(ctx)),ctx[8](switch_instance),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(switch_instance.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(switch_instance.$$.fragment,1),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else switch_value&&switch_instance.$set(switch_instance_changes)},i(local){current||(switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(switch_instance.$$.fragment,local),current=!1},d(detaching){ctx[8](null),detaching&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(switch_instance_anchor),switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(switch_instance,detaching)}}}function create_default_slot(ctx){let switch_instance,switch_instance_anchor,current;const switch_instance_spread_levels=[ctx[3]];var switch_value=ctx[2];function switch_props(ctx){let switch_instance_props={};for(let i=0;i<switch_instance_spread_levels.length;i+=1)switch_instance_props=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f0i)(switch_instance_props,switch_instance_spread_levels[i]);return{props:switch_instance_props}}return switch_value&&(switch_instance=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vV4)(switch_value,switch_props()),ctx[7](switch_instance)),{c(){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(switch_instance.$$.fragment),switch_instance_anchor=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.cSb)()},m(target,anchor){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(switch_instance,target,anchor),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(target,switch_instance_anchor,anchor),current=!0},p(ctx,dirty){const switch_instance_changes=8&dirty?(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.LoY)(switch_instance_spread_levels,[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gCg)(ctx[3])]):{};if(switch_value!==(switch_value=ctx[2])){if(switch_instance){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)();const old_component=switch_instance;(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(old_component.$$.fragment,1,0,(()=>{(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(old_component,1)})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()}switch_value?(switch_instance=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vV4)(switch_value,switch_props()),ctx[7](switch_instance),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(switch_instance.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(switch_instance.$$.fragment,1),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else switch_value&&switch_instance.$set(switch_instance_changes)},i(local){current||(switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(switch_instance.$$.fragment,local),current=!1},d(detaching){ctx[7](null),detaching&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(switch_instance_anchor),switch_instance&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(switch_instance,detaching)}}}function create_fragment(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block,create_else_block],if_blocks=[];function select_block_type(ctx,dirty){return ctx[0]?0:1}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block.c(),if_block_anchor=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.cSb)()},m(target,anchor){if_blocks[current_block_type_index].m(target,anchor),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(if_block),current=!0)},o(local){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(if_block),current=!1},d(detaching){if_blocks[current_block_type_index].d(detaching),detaching&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(if_block_anchor)}}}function instance_1($$self,$$props,$$invalidate){let instance,decoratorInstance,{decorator}=$$props,{decoratorProps={}}=$$props,{component}=$$props,{props={}}=$$props,{on}=$$props;return on&&Object.keys(on).forEach((eventName=>{(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)((()=>function getInstance(){return instance||decoratorInstance}().$on(eventName,on[eventName])))})),$$self.$$set=$$props=>{"decorator"in $$props&&$$invalidate(0,decorator=$$props.decorator),"decoratorProps"in $$props&&$$invalidate(1,decoratorProps=$$props.decoratorProps),"component"in $$props&&$$invalidate(2,component=$$props.component),"props"in $$props&&$$invalidate(3,props=$$props.props),"on"in $$props&&$$invalidate(6,on=$$props.on)},[decorator,decoratorProps,component,props,instance,decoratorInstance,on,function switch_instance_binding($$value){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[$$value?"unshift":"push"]((()=>{instance=$$value,$$invalidate(4,instance)}))},function switch_instance_binding_1($$value){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[$$value?"unshift":"push"]((()=>{decoratorInstance=$$value,$$invalidate(5,decoratorInstance)}))},function switch_instance_binding_2($$value){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[$$value?"unshift":"push"]((()=>{instance=$$value,$$invalidate(4,instance)}))}]}class SlotDecorator extends svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_C{constructor(options){super(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1n)(this,options,instance_1,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{decorator:0,decoratorProps:1,component:2,props:3,on:6})}}const __WEBPACK_DEFAULT_EXPORT__=SlotDecorator;SlotDecorator.__docgen={version:3,name:"SlotDecorator.svelte",data:[{visibility:"public",description:null,keywords:[],name:"decorator",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"decoratorProps",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"component",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"props",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"on",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]}},"../../node_modules/@storybook/svelte/dist/esm/client/docs/config-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var config_namespaceObject={};__webpack_require__.r(config_namespaceObject),__webpack_require__.d(config_namespaceObject,{argTypesEnhancers:()=>argTypesEnhancers,decorators:()=>decorators,parameters:()=>config_parameters});var ClientApi=__webpack_require__("../../node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters=__webpack_require__("../../node_modules/@storybook/store/dist/esm/parameters.js"),esm=(__webpack_require__("../../node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.join.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/@storybook/client-logger/dist/esm/index.js"));var createArgTypes=function createArgTypes(docgen){var results={};return docgen.data.forEach((function(item){var _item$type,_item$type2,keyword,keywords;results[item.name]={control:parseTypeToControl(item.type),name:item.name,description:item.description,type:{required:(keyword="required",keywords=item.keywords,!!keywords&&null!=keywords.find((function(k){return k.name===keyword}))),name:null===(_item$type=item.type)||void 0===_item$type?void 0:_item$type.text},table:{type:{summary:null===(_item$type2=item.type)||void 0===_item$type2?void 0:_item$type2.text},defaultValue:{summary:item.defaultValue},category:"properties"}}})),docgen.events.forEach((function(item){results["event_".concat(item.name)]={name:item.name,description:item.description,type:{name:"other",value:"void"},table:{category:"events"}}})),docgen.slots.forEach((function(item){var _item$params;results["slot_".concat(item.name)]={name:item.name,description:[item.description,null===(_item$params=item.params)||void 0===_item$params?void 0:_item$params.map((function(p){return"`".concat(p.name,"`")})).join(" ")].filter((function(p){return p})).join("\n\n"),type:{name:"other",value:"void"},table:{category:"slots"}}})),results},parseTypeToControl=function parseTypeToControl(type){if(!type)return null;if("type"===type.kind)switch(type.type){case"string":return{type:"text"};case"enum":return{type:"radio"};case"any":return{type:"object"};default:return{type:type.type}}else if("union"===type.kind&&Array.isArray(type.type)&&!type.type.find((function(t){return"string"!==t.type})))return{type:"radio",options:type.type.filter((function(t){return"const"===t.kind})).map((function(t){return t.value}))};return null};var react=__webpack_require__("../../node_modules/react/index.js"),internal=__webpack_require__("../../node_modules/svelte/internal/index.mjs");function create_fragment(ctx){let switch_instance,switch_instance_anchor,current;const switch_instance_spread_levels=[ctx[1]];var switch_value=ctx[0];function switch_props(ctx){let switch_instance_props={};for(let i=0;i<switch_instance_spread_levels.length;i+=1)switch_instance_props=(0,internal.f0i)(switch_instance_props,switch_instance_spread_levels[i]);return{props:switch_instance_props}}return switch_value&&(switch_instance=(0,internal.vV4)(switch_value,switch_props())),{c(){switch_instance&&(0,internal.YCL)(switch_instance.$$.fragment),switch_instance_anchor=(0,internal.cSb)()},m(target,anchor){switch_instance&&(0,internal.yef)(switch_instance,target,anchor),(0,internal.$Tr)(target,switch_instance_anchor,anchor),current=!0},p(ctx,[dirty]){const switch_instance_changes=2&dirty?(0,internal.LoY)(switch_instance_spread_levels,[(0,internal.gCg)(ctx[1])]):{};if(switch_value!==(switch_value=ctx[0])){if(switch_instance){(0,internal.dvw)();const old_component=switch_instance;(0,internal.etI)(old_component.$$.fragment,1,0,(()=>{(0,internal.vpE)(old_component,1)})),(0,internal.gbL)()}switch_value?(switch_instance=(0,internal.vV4)(switch_value,switch_props()),(0,internal.YCL)(switch_instance.$$.fragment),(0,internal.Ui)(switch_instance.$$.fragment,1),(0,internal.yef)(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else switch_value&&switch_instance.$set(switch_instance_changes)},i(local){current||(switch_instance&&(0,internal.Ui)(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&(0,internal.etI)(switch_instance.$$.fragment,local),current=!1},d(detaching){detaching&&(0,internal.ogt)(switch_instance_anchor),switch_instance&&(0,internal.vpE)(switch_instance,detaching)}}}function instance($$self,$$props,$$invalidate){let{storyFn}=$$props,{Component:component,props}=storyFn();return $$self.$$set=$$props=>{"storyFn"in $$props&&$$invalidate(2,storyFn=$$props.storyFn)},[component,props,storyFn]}class HOC extends internal.f_C{constructor(options){super(),(0,internal.S1n)(this,options,instance,create_fragment,internal.N8,{storyFn:2})}}const HOC_svelte=HOC;HOC.__docgen={version:3,name:"HOC.svelte",data:[{visibility:"public",description:null,keywords:[],name:"storyFn",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};__webpack_require__("../../node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.ends-with.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js");var SourceType,dist_esm=__webpack_require__("../../node_modules/@storybook/addons/dist/esm/index.js"),hooks=__webpack_require__("../../node_modules/@storybook/addons/dist/esm/hooks.js"),SNIPPET_RENDERED=("".concat("storybook/docs","/panel"),"".concat("storybook/docs","/snippet-rendered"));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(SourceType){SourceType.AUTO="auto",SourceType.CODE="code",SourceType.DYNAMIC="dynamic"}(SourceType||(SourceType={}));function generateSvelteSource(component,args,argTypes,slotProperty){var name=function getComponentName(component){if(null==component)return null;var _component$__docgen=component.__docgen,name=(void 0===_component$__docgen?{}:_component$__docgen).name;return name?(name.endsWith(".svelte")&&(name=name.substring(0,name.length-7)),name):component.name}(component);if(!name)return null;var props=Object.entries(args).filter((function(_ref){return _slicedToArray(_ref,1)[0]!==slotProperty})).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2);return function toSvelteProperty(key,value,argTypes){return null==value||argTypes[key]&&argTypes[key].defaultValue===value?null:!0===value?key:"string"==typeof value?"".concat(key,"=").concat(JSON.stringify(value)):"".concat(key,"={").concat(JSON.stringify(value),"}")}(_ref4[0],_ref4[1],argTypes)})).filter((function(p){return p})).join(" "),slotValue=slotProperty?args[slotProperty]:null;return slotValue?"<".concat(name," ").concat(props,">\n    ").concat(slotValue,"\n</").concat(name,">"):"<".concat(name," ").concat(props,"/>")}var config_parameters={docs:{inlineStories:!0,prepareForInline:function prepareForInline(storyFn){var el=react.useRef(null);return react.useEffect((function(){var root=new HOC_svelte({target:el.current,props:{storyFn}});return function(){return root.$destroy()}})),react.createElement("div",{ref:el})},extractArgTypes:function extractArgTypes(component){try{var docgen=component.__docgen;if(docgen)return createArgTypes(docgen)}catch(err){esm.kg.log("Error extracting argTypes: ".concat(err))}return{}},extractComponentDescription:function extractComponentDescription(component){if(!component)return null;var _component$__docgen=component.__docgen;return(void 0===_component$__docgen?{}:_component$__docgen).description}}},decorators=[function sourceDecorator(storyFn,context){var source,channel=dist_esm.KP.getChannel(),skip=function skipSourceRender(context){var _context$parameters$d,sourceParams=null==context||null===(_context$parameters$d=context.parameters.docs)||void 0===_context$parameters$d?void 0:_context$parameters$d.source,isArgsStory=null==context?void 0:context.parameters.__isArgsStory;return(null==sourceParams?void 0:sourceParams.type)!==SourceType.DYNAMIC&&(!isArgsStory||(null==sourceParams?void 0:sourceParams.code)||(null==sourceParams?void 0:sourceParams.type)===SourceType.CODE)}(context),story=storyFn();if((0,hooks.d4)((function(){!skip&&source&&channel.emit(SNIPPET_RENDERED,(context||{}).id,source)})),skip)return story;var _ref5=context||{},_ref5$parameters=_ref5.parameters,parameters=void 0===_ref5$parameters?{}:_ref5$parameters,_ref5$args=_ref5.args,args=void 0===_ref5$args?{}:_ref5$args,ctxtComponent=_ref5.component,_story$Component=story.Component,component=void 0===_story$Component?{}:_story$Component,_getWrapperProperties=function getWrapperProperties(component){var __docgen=component.__docgen;if(!__docgen)return{wrapper:!1};if(!__docgen.keywords.find((function(kw){return"wrapper"===kw.name})))return{wrapper:!1};var slotProp=__docgen.data.find((function(prop){return prop.keywords.find((function(kw){return"slot"===kw.name}))}));return{wrapper:!0,slotProperty:null==slotProp?void 0:slotProp.name}}(component),wrapper=_getWrapperProperties.wrapper,slotProperty=_getWrapperProperties.slotProperty;return wrapper&&(parameters.component&&esm.IH.warn("parameters.component is deprecated. Using context.component instead."),component=ctxtComponent),source=generateSvelteSource(component,args,null==context?void 0:context.argTypes,slotProperty),story}],argTypesEnhancers=[function enhanceArgTypes(context){var component=context.component,userArgTypes=context.argTypes,_context$parameters$d=context.parameters.docs,extractArgTypes=(void 0===_context$parameters$d?{}:_context$parameters$d).extractArgTypes,extractedArgTypes=extractArgTypes&&component?extractArgTypes(component):{};return extractedArgTypes?(0,parameters.f)(extractedArgTypes,userArgTypes):userArgTypes}];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(config_namespaceObject).forEach((function(key){var value=config_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"../../node_modules/@storybook/svelte/dist/esm/client/index.js":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{addDecorator:()=>addDecorator,addParameters:()=>addParameters,configure:()=>configure,forceReRender:()=>forceReRender,getStorybook:()=>getStorybook,raw:()=>raw,setAddon:()=>setAddon,storiesOf:()=>storiesOf});var _templateObject,ClientApi=__webpack_require__("../../node_modules/@storybook/client-api/dist/esm/ClientApi.js"),memoizerific=(__webpack_require__("../../node_modules/regenerator-runtime/runtime.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.values.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../../node_modules/memoizerific/memoizerific.js")),memoizerific_default=__webpack_require__.n(memoizerific),mapValues=__webpack_require__("../../node_modules/lodash/mapValues.js"),mapValues_default=__webpack_require__.n(mapValues),pick=__webpack_require__("../../node_modules/lodash/pick.js"),pick_default=__webpack_require__.n(pick),global_window=__webpack_require__("../../node_modules/global/window.js"),window_default=__webpack_require__.n(global_window),synchronous_promise=__webpack_require__("../../node_modules/synchronous-promise/index.js"),esm=(__webpack_require__("../../node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.freeze.js"),__webpack_require__("../../node_modules/ts-dedent/esm/index.js"));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var args_templateObject,_templateObject2,StoryIndexStore=function(){function StoryIndexStore(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{v:3,stories:{}},stories=_ref.stories;_classCallCheck(this,StoryIndexStore),this.channel=void 0,this.stories=void 0,this.stories=stories}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(StoryIndexStore,[{key:"storyIdFromSpecifier",value:function storyIdFromSpecifier(specifier){var storyIds=Object.keys(this.stories);if("*"===specifier)return storyIds[0];if("string"==typeof specifier)return storyIds.indexOf(specifier)>=0?specifier:storyIds.find((function(storyId){return storyId.startsWith(specifier)}));var name=specifier.name,title=specifier.title,match=Object.entries(this.stories).find((function(_ref2){var _ref3=_slicedToArray(_ref2,2),story=(_ref3[0],_ref3[1]);return story.name===name&&story.title===title}));return match&&match[0]}},{key:"storyIdToEntry",value:function storyIdToEntry(storyId){var storyEntry=this.stories[storyId];if(!storyEntry)throw new Error((0,esm.C)(_templateObject||(_templateObject=function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["Couldn't find story matching '","' after HMR.\n      - Did you remove it from your CSF file?\n      - Are you sure a story with that id exists?\n      - Please check your stories field of your main.js config.\n      - Also check the browser console and terminal for error messages."])),storyId));return storyEntry}}]),StoryIndexStore}(),fast_deep_equal=(__webpack_require__("../../node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.find-index.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.join.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("../../node_modules/fast-deep-equal/index.js")),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),dist_esm=__webpack_require__("../../node_modules/@storybook/client-logger/dist/esm/index.js"),isPlainObject=__webpack_require__("../../node_modules/lodash/isPlainObject.js"),isPlainObject_default=__webpack_require__.n(isPlainObject);function args_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return args_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||args_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function args_slicedToArray(arr,i){return function args_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function args_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||args_unsupportedIterableToArray(arr,i)||function args_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function args_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return args_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?args_arrayLikeToArray(o,minLen):void 0}}function args_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var INCOMPATIBLE=Symbol("incompatible"),map=function map(arg,argType){var type=argType.type;if(null==arg||!type)return arg;if(argType.mapping)return arg;switch(type.name){case"string":return String(arg);case"enum":return arg;case"number":return Number(arg);case"boolean":return"true"===arg;case"array":return type.value&&Array.isArray(arg)?arg.reduce((function(acc,item,index){var mapped=map(item,{type:type.value});return mapped!==INCOMPATIBLE&&(acc[index]=mapped),acc}),new Array(arg.length)):INCOMPATIBLE;case"object":return"string"==typeof arg||"number"==typeof arg?arg:type.value&&"object"===_typeof(arg)?Object.entries(arg).reduce((function(acc,_ref){var _ref2=args_slicedToArray(_ref,2),key=_ref2[0],val=_ref2[1],mapped=map(val,{type:type.value[key]});return mapped===INCOMPATIBLE?acc:Object.assign(acc,_defineProperty({},key,mapped))}),{}):INCOMPATIBLE;default:return INCOMPATIBLE}},mapArgsToTypes=function mapArgsToTypes(args,argTypes){return Object.entries(args).reduce((function(acc,_ref3){var _ref4=args_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];if(!argTypes[key])return acc;var mapped=map(value,argTypes[key]);return mapped===INCOMPATIBLE?acc:Object.assign(acc,_defineProperty({},key,mapped))}),{})},combineArgs=function combineArgs(value,update){return Array.isArray(value)&&Array.isArray(update)?update.reduce((function(acc,upd,index){return acc[index]=combineArgs(value[index],update[index]),acc}),_toConsumableArray(value)).filter((function(v){return void 0!==v})):isPlainObject_default()(value)&&isPlainObject_default()(update)?Object.keys(Object.assign({},value,update)).reduce((function(acc,key){if(key in update){var combined=combineArgs(value[key],update[key]);void 0!==combined&&(acc[key]=combined)}else acc[key]=value[key];return acc}),{}):update},DEEPLY_EQUAL=Symbol("Deeply equal"),deepDiff=function deepDiff(value,update){if(_typeof(value)!==_typeof(update))return update;if(fast_deep_equal_default()(value,update))return DEEPLY_EQUAL;if(Array.isArray(value)&&Array.isArray(update)){var res=update.reduce((function(acc,upd,index){var diff=deepDiff(value[index],upd);return diff!==DEEPLY_EQUAL&&(acc[index]=diff),acc}),new Array(update.length));return update.length>=value.length?res:res.concat(new Array(value.length-update.length).fill(void 0))}return isPlainObject_default()(value)&&isPlainObject_default()(update)?Object.keys(Object.assign({},value,update)).reduce((function(acc,key){var diff=deepDiff(null==value?void 0:value[key],null==update?void 0:update[key]);return diff===DEEPLY_EQUAL?acc:Object.assign(acc,_defineProperty({},key,diff))}),{}):update};function groupArgsByTarget(_ref7){var args=_ref7.args,argTypes=_ref7.argTypes,groupedArgs={};return Object.entries(args).forEach((function(_ref8){var _ref9=args_slicedToArray(_ref8,2),name=_ref9[0],value=_ref9[1],_ref10$target=(argTypes[name]||{}).target,target=void 0===_ref10$target?"":_ref10$target;groupedArgs[target]=groupedArgs[target]||{},groupedArgs[target][name]=value})),groupedArgs}function ArgsStore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ArgsStore=function(){function ArgsStore(){!function ArgsStore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ArgsStore),this.initialArgsByStoryId={},this.argsByStoryId={}}return function ArgsStore_createClass(Constructor,protoProps,staticProps){return protoProps&&ArgsStore_defineProperties(Constructor.prototype,protoProps),staticProps&&ArgsStore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ArgsStore,[{key:"get",value:function get(storyId){if(!(storyId in this.argsByStoryId))throw new Error("No args known for ".concat(storyId," -- has it been rendered yet?"));return this.argsByStoryId[storyId]}},{key:"setInitial",value:function setInitial(story){if(this.initialArgsByStoryId[story.id]){if(this.initialArgsByStoryId[story.id]!==story.initialArgs){var delta=deepDiff(this.initialArgsByStoryId[story.id],this.argsByStoryId[story.id]);this.initialArgsByStoryId[story.id]=story.initialArgs,this.argsByStoryId[story.id]=story.initialArgs,delta!==DEEPLY_EQUAL&&this.updateFromDelta(story,delta)}}else this.initialArgsByStoryId[story.id]=story.initialArgs,this.argsByStoryId[story.id]=story.initialArgs}},{key:"updateFromDelta",value:function updateFromDelta(story,delta){var validatedDelta=function validateOptions(args,argTypes){return Object.entries(argTypes).reduce((function(acc,_ref5){var _ref6=args_slicedToArray(_ref5,2),key=_ref6[0],options=_ref6[1].options;function allowArg(){return key in args&&(acc[key]=args[key]),acc}if(!options)return allowArg();if(!Array.isArray(options))return dist_esm.IH.error((0,esm.C)(args_templateObject||(args_templateObject=args_taggedTemplateLiteral(["\n        Invalid argType: '",".options' should be an array.\n\n        More info: https://storybook.js.org/docs/react/api/argtypes\n      "])),key)),allowArg();if(options.some((function(opt){return opt&&["object","function"].includes(_typeof(opt))})))return dist_esm.IH.error((0,esm.C)(_templateObject2||(_templateObject2=args_taggedTemplateLiteral(["\n        Invalid argType: '",".options' should only contain primitives. Use a 'mapping' for complex values.\n\n        More info: https://storybook.js.org/docs/react/writing-stories/args#mapping-to-complex-arg-values\n      "])),key)),allowArg();var isArray=Array.isArray(args[key]),invalidIndex=isArray&&args[key].findIndex((function(val){return!options.includes(val)})),isValidArray=isArray&&-1===invalidIndex;if(void 0===args[key]||options.includes(args[key])||isValidArray)return allowArg();var field=isArray?"".concat(key,"[").concat(invalidIndex,"]"):key,supportedOptions=options.map((function(opt){return"string"==typeof opt?"'".concat(opt,"'"):String(opt)})).join(", ");return dist_esm.IH.warn("Received illegal value for '".concat(field,"'. Supported options: ").concat(supportedOptions)),acc}),{})}(delta,story.argTypes);this.argsByStoryId[story.id]=combineArgs(this.argsByStoryId[story.id],validatedDelta)}},{key:"updateFromPersisted",value:function updateFromPersisted(story,persisted){var mappedPersisted=mapArgsToTypes(persisted,story.argTypes);return this.updateFromDelta(story,mappedPersisted)}},{key:"update",value:function update(storyId,argsUpdate){if(!(storyId in this.argsByStoryId))throw new Error("No args known for ".concat(storyId," -- has it been rendered yet?"));this.argsByStoryId[storyId]=function deleteUndefined(obj){return Object.keys(obj).forEach((function(key){return void 0===obj[key]&&delete obj[key]})),obj}(Object.assign({},this.argsByStoryId[storyId],argsUpdate))}}]),ArgsStore}(),browser=(__webpack_require__("../../node_modules/core-js/modules/es.set.js"),__webpack_require__("../../node_modules/util-deprecate/browser.js")),browser_default=__webpack_require__.n(browser);function getValuesFromArgTypes_slicedToArray(arr,i){return function getValuesFromArgTypes_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function getValuesFromArgTypes_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function getValuesFromArgTypes_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return getValuesFromArgTypes_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return getValuesFromArgTypes_arrayLikeToArray(o,minLen)}(arr,i)||function getValuesFromArgTypes_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function getValuesFromArgTypes_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var GlobalsStore_templateObject,getValuesFromArgTypes=function getValuesFromArgTypes(){var argTypes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(argTypes).reduce((function(acc,_ref){var _ref2=getValuesFromArgTypes_slicedToArray(_ref,2),arg=_ref2[0],defaultValue=_ref2[1].defaultValue;return void 0!==defaultValue&&(acc[arg]=defaultValue),acc}),{})};function GlobalsStore_slicedToArray(arr,i){return function GlobalsStore_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function GlobalsStore_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||GlobalsStore_unsupportedIterableToArray(arr,i)||function GlobalsStore_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GlobalsStore_toConsumableArray(arr){return function GlobalsStore_arrayWithoutHoles(arr){if(Array.isArray(arr))return GlobalsStore_arrayLikeToArray(arr)}(arr)||function GlobalsStore_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||GlobalsStore_unsupportedIterableToArray(arr)||function GlobalsStore_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GlobalsStore_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return GlobalsStore_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GlobalsStore_arrayLikeToArray(o,minLen):void 0}}function GlobalsStore_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GlobalsStore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var normalizeStory_templateObject,setUndeclaredWarning=browser_default()((function(){}),(0,esm.C)(GlobalsStore_templateObject||(GlobalsStore_templateObject=function GlobalsStore_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    Setting a global value that is undeclared (i.e. not in the user's initial set of globals\n    or globalTypes) is deprecated and will have no effect in 7.0.\n  "])))),GlobalsStore=function(){function GlobalsStore(){!function GlobalsStore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GlobalsStore),this.allowedGlobalNames=void 0,this.initialGlobals=void 0,this.globals={}}return function GlobalsStore_createClass(Constructor,protoProps,staticProps){return protoProps&&GlobalsStore_defineProperties(Constructor.prototype,protoProps),staticProps&&GlobalsStore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GlobalsStore,[{key:"set",value:function set(_ref){var _ref$globals=_ref.globals,globals=void 0===_ref$globals?{}:_ref$globals,_ref$globalTypes=_ref.globalTypes,globalTypes=void 0===_ref$globalTypes?{}:_ref$globalTypes,delta=this.initialGlobals&&deepDiff(this.initialGlobals,this.globals);this.allowedGlobalNames=new Set([].concat(GlobalsStore_toConsumableArray(Object.keys(globals)),GlobalsStore_toConsumableArray(Object.keys(globalTypes))));var defaultGlobals=getValuesFromArgTypes(globalTypes);this.initialGlobals=Object.assign({},defaultGlobals,globals),this.globals=this.initialGlobals,delta&&delta!==DEEPLY_EQUAL&&this.updateFromPersisted(delta)}},{key:"filterAllowedGlobals",value:function filterAllowedGlobals(globals){var _this=this;return Object.entries(globals).reduce((function(acc,_ref2){var _ref3=GlobalsStore_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];return _this.allowedGlobalNames.has(key)&&(acc[key]=value),acc}),{})}},{key:"updateFromPersisted",value:function updateFromPersisted(persisted){var allowedUrlGlobals=this.filterAllowedGlobals(persisted);this.globals=Object.assign({},this.globals,allowedUrlGlobals)}},{key:"get",value:function get(){return this.globals}},{key:"update",value:function update(newGlobals){var _this2=this;Object.keys(newGlobals).forEach((function(key){_this2.allowedGlobalNames.has(key)||setUndeclaredWarning()})),this.globals=Object.assign({},this.globals,newGlobals)}}]),GlobalsStore}(),dist=__webpack_require__("../../node_modules/@storybook/csf/dist/index.js"),normalizeInputTypes=__webpack_require__("../../node_modules/@storybook/store/dist/esm/csf/normalizeInputTypes.js");function normalizeStory_toConsumableArray(arr){return function normalizeStory_arrayWithoutHoles(arr){if(Array.isArray(arr))return normalizeStory_arrayLikeToArray(arr)}(arr)||function normalizeStory_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function normalizeStory_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return normalizeStory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return normalizeStory_arrayLikeToArray(o,minLen)}(arr)||function normalizeStory_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function normalizeStory_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var deprecatedStoryAnnotation=(0,esm.C)(normalizeStory_templateObject||(normalizeStory_templateObject=function normalizeStory_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\nCSF .story annotations deprecated; annotate story functions directly:\n- StoryFn.story.name => StoryFn.storyName\n- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.\n"]))),deprecatedStoryAnnotationWarning=browser_default()((function(){}),deprecatedStoryAnnotation);var _excluded=["default","__namedExportsOrder"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var checkDisallowedParameters=function checkDisallowedParameters(parameters){parameters&&(function checkGlobals(parameters){var globals=parameters.globals,globalTypes=parameters.globalTypes;(globals||globalTypes)&&dist_esm.kg.error("Global args/argTypes can only be set globally",JSON.stringify({globals,globalTypes}))}(parameters),function checkStorySort(parameters){var options=parameters.options;null!=options&&options.storySort&&dist_esm.kg.error("The storySort option parameter can only be set globally")}(parameters))};function processCSFFile(moduleExports,importPath,title){var defaultExport=moduleExports.default,namedExports=(moduleExports.__namedExportsOrder,_objectWithoutProperties(moduleExports,_excluded)),meta=function normalizeComponentAnnotations(defaultExport){var title=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultExport.title,importPath=arguments.length>2?arguments[2]:void 0,id=defaultExport.id,argTypes=defaultExport.argTypes;return Object.assign({id:(0,dist.sanitize)(id||title)},defaultExport,{title},argTypes&&{argTypes:(0,normalizeInputTypes.x)(argTypes)},{parameters:Object.assign({fileName:importPath},defaultExport.parameters)})}(defaultExport,title,importPath);checkDisallowedParameters(meta.parameters);var csfFile={meta,stories:{}};return Object.keys(namedExports).forEach((function(key){if((0,dist.isExportStory)(key,meta)){var storyMeta=function normalizeStory(key,storyAnnotations,meta){var userStoryFn,storyObject;"function"==typeof storyAnnotations?(userStoryFn=storyAnnotations,storyObject=storyAnnotations):storyObject=storyAnnotations;var story=storyObject.story;story&&(dist_esm.kg.debug("deprecated story",story),deprecatedStoryAnnotationWarning());var exportName=(0,dist.storyNameFromExport)(key),name="function"!=typeof storyObject&&storyObject.name||storyObject.storyName||(null==story?void 0:story.name)||exportName,decorators=[].concat(normalizeStory_toConsumableArray(storyObject.decorators||[]),normalizeStory_toConsumableArray((null==story?void 0:story.decorators)||[])),parameters=Object.assign({},null==story?void 0:story.parameters,storyObject.parameters),args=Object.assign({},null==story?void 0:story.args,storyObject.args),argTypes=Object.assign({},null==story?void 0:story.argTypes,storyObject.argTypes),loaders=[].concat(normalizeStory_toConsumableArray(storyObject.loaders||[]),normalizeStory_toConsumableArray((null==story?void 0:story.loaders)||[])),_storyObject2=storyObject,render=_storyObject2.render,play=_storyObject2.play,id=parameters.__id||(0,dist.toId)(meta.id||meta.title,exportName);return Object.assign({id,name,decorators,parameters,args,argTypes:(0,normalizeInputTypes.x)(argTypes),loaders},render&&{render},userStoryFn&&{userStoryFn},play&&{play})}(key,namedExports[key],meta);checkDisallowedParameters(storyMeta.parameters),csfFile.stories[storyMeta.id]=storyMeta}})),csfFile}var prepareStory_templateObject,esm_parameters=__webpack_require__("../../node_modules/@storybook/store/dist/esm/parameters.js"),hooks=__webpack_require__("../../node_modules/@storybook/addons/dist/esm/hooks.js"),esm_decorators=__webpack_require__("../../node_modules/@storybook/store/dist/esm/decorators.js");function prepareStory_slicedToArray(arr,i){return function prepareStory_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function prepareStory_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||prepareStory_unsupportedIterableToArray(arr,i)||function prepareStory_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function prepareStory_toConsumableArray(arr){return function prepareStory_arrayWithoutHoles(arr){if(Array.isArray(arr))return prepareStory_arrayLikeToArray(arr)}(arr)||function prepareStory_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||prepareStory_unsupportedIterableToArray(arr)||function prepareStory_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function prepareStory_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return prepareStory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?prepareStory_arrayLikeToArray(o,minLen):void 0}}function prepareStory_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var inferArgTypes_templateObject,argTypeDefaultValueWarning=browser_default()((function(){}),(0,esm.C)(prepareStory_templateObject||(prepareStory_templateObject=function prepareStory_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n  `argType.defaultValue` is deprecated and will be removed in Storybook 7.0.\n\n  https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#no-longer-inferring-default-values-of-args"],["\n  \\`argType.defaultValue\\` is deprecated and will be removed in Storybook 7.0.\n\n  https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#no-longer-inferring-default-values-of-args"]))));function prepareStory(storyAnnotations,componentAnnotations,projectAnnotations){var _global$FEATURES,id=storyAnnotations.id,name=storyAnnotations.name,title=componentAnnotations.title,parameters=(0,esm_parameters.f)(projectAnnotations.parameters,componentAnnotations.parameters,storyAnnotations.parameters),decorators=[].concat(prepareStory_toConsumableArray(storyAnnotations.decorators||[]),prepareStory_toConsumableArray(componentAnnotations.decorators||[]),prepareStory_toConsumableArray(projectAnnotations.decorators||[])),_projectAnnotations$a=projectAnnotations.applyDecorators,applyDecorators=void 0===_projectAnnotations$a?esm_decorators.a7:_projectAnnotations$a,_projectAnnotations$a2=projectAnnotations.argTypesEnhancers,argTypesEnhancers=void 0===_projectAnnotations$a2?[]:_projectAnnotations$a2,_projectAnnotations$a3=projectAnnotations.argsEnhancers,argsEnhancers=void 0===_projectAnnotations$a3?[]:_projectAnnotations$a3,loaders=[].concat(prepareStory_toConsumableArray(projectAnnotations.loaders||[]),prepareStory_toConsumableArray(componentAnnotations.loaders||[]),prepareStory_toConsumableArray(storyAnnotations.loaders||[])),render=storyAnnotations.userStoryFn||storyAnnotations.render||componentAnnotations.render||projectAnnotations.render,passedArgTypes=(0,esm_parameters.f)(projectAnnotations.argTypes,componentAnnotations.argTypes,storyAnnotations.argTypes),_parameters$passArgsF=parameters.passArgsFirst,passArgsFirst=void 0===_parameters$passArgsF||_parameters$passArgsF;parameters.__isArgsStory=passArgsFirst&&render.length>0;var passedArgs=Object.assign({},projectAnnotations.args,componentAnnotations.args,storyAnnotations.args),contextForEnhancers={componentId:componentAnnotations.id,title,kind:title,id,name,story:name,component:componentAnnotations.component,subcomponents:componentAnnotations.subcomponents,parameters,initialArgs:passedArgs,argTypes:passedArgTypes};contextForEnhancers.argTypes=argTypesEnhancers.reduce((function(accumulatedArgTypes,enhancer){return enhancer(Object.assign({},contextForEnhancers,{argTypes:accumulatedArgTypes}))}),contextForEnhancers.argTypes);var defaultArgs=getValuesFromArgTypes(contextForEnhancers.argTypes);Object.keys(defaultArgs).length>0&&argTypeDefaultValueWarning();var initialArgsBeforeEnhancers=Object.assign({},defaultArgs,passedArgs);contextForEnhancers.initialArgs=argsEnhancers.reduce((function(accumulatedArgs,enhancer){return Object.assign({},accumulatedArgs,enhancer(Object.assign({},contextForEnhancers,{initialArgs:accumulatedArgs})))}),initialArgsBeforeEnhancers),null!==(_global$FEATURES=window_default().FEATURES)&&void 0!==_global$FEATURES&&_global$FEATURES.breakingChangesV7||(contextForEnhancers.parameters=Object.assign({},contextForEnhancers.parameters,{__id:id,globals:projectAnnotations.globals,globalTypes:projectAnnotations.globalTypes,args:contextForEnhancers.initialArgs,argTypes:contextForEnhancers.argTypes}));var applyLoaders=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(context){var loadResults,loaded;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all(loaders.map((function(loader){return loader(context)})));case 2:return loadResults=_context.sent,loaded=Object.assign.apply(Object,[{}].concat(prepareStory_toConsumableArray(loadResults))),_context.abrupt("return",Object.assign({},context,{loaded}));case 5:case"end":return _context.stop()}}),_callee)})));return function applyLoaders(_x){return _ref.apply(this,arguments)}}(),undecoratedStoryFn=function undecoratedStoryFn(context){var mappedArgs=Object.entries(context.args).reduce((function(acc,_ref2){var _context$argTypes$key,_ref3=prepareStory_slicedToArray(_ref2,2),key=_ref3[0],val=_ref3[1],mapping=null===(_context$argTypes$key=context.argTypes[key])||void 0===_context$argTypes$key?void 0:_context$argTypes$key.mapping;return acc[key]=mapping&&val in mapping?mapping[val]:val,acc}),{}),includedArgs=Object.entries(mappedArgs).reduce((function(acc,_ref4){var _ref5=prepareStory_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1],argType=context.argTypes[key]||{};return(0,dist.includeConditionalArg)(argType,mappedArgs,context.globals)&&(acc[key]=val),acc}),{}),includedContext=Object.assign({},context,{args:includedArgs}),_context$parameters$p=context.parameters.passArgsFirst;return void 0===_context$parameters$p||_context$parameters$p?render(includedContext.args,includedContext):render(includedContext)},decoratedStoryFn=(0,hooks.DM)(applyDecorators)(undecoratedStoryFn,decorators),playFunction=storyAnnotations.play;return Object.freeze(Object.assign({},contextForEnhancers,{originalStoryFn:render,undecoratedStoryFn,unboundStoryFn:function unboundStoryFn(context){var _global$FEATURES2,finalContext=context;if(null!==(_global$FEATURES2=window_default().FEATURES)&&void 0!==_global$FEATURES2&&_global$FEATURES2.argTypeTargetsV7){var argsByTarget=groupArgsByTarget(Object.assign({args:context.args},context));finalContext=Object.assign({},context,{allArgs:context.args,argsByTarget,args:argsByTarget[""]||{}})}return decoratedStoryFn(finalContext)},applyLoaders,playFunction}))}function inferArgTypes_typeof(obj){return inferArgTypes_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},inferArgTypes_typeof(obj)}var inferType=function inferType(value,name,visited){var type=inferArgTypes_typeof(value);switch(type){case"boolean":case"string":case"number":case"function":case"symbol":return{name:type}}return value?visited.has(value)?(dist_esm.kg.warn((0,esm.C)(inferArgTypes_templateObject||(inferArgTypes_templateObject=function inferArgTypes_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n        We've detected a cycle in arg '","'. Args should be JSON-serializable.\n\n        Consider using the mapping feature or fully custom args:\n        - Mapping: https://storybook.js.org/docs/react/writing-stories/args#mapping-to-complex-arg-values\n        - Custom args: https://storybook.js.org/docs/react/essentials/controls#fully-custom-args\n      "])),name)),{name:"other",value:"cyclic object"}):(visited.add(value),Array.isArray(value)?{name:"array",value:value.length>0?inferType(value[0],name,new Set(visited)):{name:"other",value:"unknown"}}:{name:"object",value:mapValues_default()(value,(function(field){return inferType(field,name,new Set(visited))}))}):{name:"object",value:{}}},inferArgTypes=function inferArgTypes(context){var id=context.id,_context$argTypes=context.argTypes,userArgTypes=void 0===_context$argTypes?{}:_context$argTypes,_context$initialArgs=context.initialArgs,initialArgs=void 0===_context$initialArgs?{}:_context$initialArgs,argTypes=mapValues_default()(initialArgs,(function(arg,key){return{name:key,type:inferType(arg,"".concat(id,".").concat(key),new Set)}})),userArgTypesNames=mapValues_default()(userArgTypes,(function(argType,key){return{name:key}}));return(0,esm_parameters.f)(argTypes,userArgTypesNames,userArgTypes)};inferArgTypes.secondPass=!0;__webpack_require__("../../node_modules/core-js/modules/es.string.match.js");var pickBy=__webpack_require__("../../node_modules/lodash/pickBy.js"),pickBy_default=__webpack_require__.n(pickBy),matches=function matches(name,descriptor){return Array.isArray(descriptor)?descriptor.includes(name):name.match(descriptor)},inferControls=function inferControls(context){var argTypes=context.argTypes,_context$parameters=context.parameters,__isArgsStory=_context$parameters.__isArgsStory,_context$parameters$c=_context$parameters.controls,_context$parameters$c2=(_context$parameters$c=void 0===_context$parameters$c?{}:_context$parameters$c).include,include=void 0===_context$parameters$c2?null:_context$parameters$c2,_context$parameters$c3=_context$parameters$c.exclude,exclude=void 0===_context$parameters$c3?null:_context$parameters$c3,_context$parameters$c4=_context$parameters$c.matchers,matchers=void 0===_context$parameters$c4?{}:_context$parameters$c4;if(!__isArgsStory)return argTypes;var filteredArgTypes=function filterArgTypes(argTypes,include,exclude){return include||exclude?argTypes&&pickBy_default()(argTypes,(function(argType,key){var name=argType.name||key;return(!include||matches(name,include))&&(!exclude||!matches(name,exclude))})):argTypes}(argTypes,include,exclude),withControls=mapValues_default()(filteredArgTypes,(function(argType,name){return(null==argType?void 0:argType.type)&&function inferControl(argType,name,matchers){var type=argType.type,options=argType.options;if(type||options){if(matchers.color&&matchers.color.test(name)){var controlType=argType.type.name;if("string"===controlType)return{control:{type:"color"}};dist_esm.kg.warn('Addon controls: Control of type color only supports string, received "'.concat(controlType,'" instead'))}if(matchers.date&&matchers.date.test(name))return{control:{type:"date"}};switch(type.name){case"array":return{control:{type:"object"}};case"boolean":return{control:{type:"boolean"}};case"string":return{control:{type:"text"}};case"number":return{control:{type:"number"}};case"enum":var value=type.value;return{control:{type:(null==value?void 0:value.length)<=5?"radio":"select"},options:value};case"function":case"symbol":return null;default:return{control:{type:options?"select":"object"}}}}}(argType,name,matchers)}));return(0,esm_parameters.f)(withControls,filteredArgTypes)};inferControls.secondPass=!0;var normalizeProjectAnnotations_excluded=["argTypes","globalTypes","argTypesEnhancers"];function normalizeProjectAnnotations_toConsumableArray(arr){return function normalizeProjectAnnotations_arrayWithoutHoles(arr){if(Array.isArray(arr))return normalizeProjectAnnotations_arrayLikeToArray(arr)}(arr)||function normalizeProjectAnnotations_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function normalizeProjectAnnotations_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return normalizeProjectAnnotations_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return normalizeProjectAnnotations_arrayLikeToArray(o,minLen)}(arr)||function normalizeProjectAnnotations_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function normalizeProjectAnnotations_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function normalizeProjectAnnotations_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function normalizeProjectAnnotations_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function StoryStore_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function StoryStore_slicedToArray(arr,i){return function StoryStore_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StoryStore_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function StoryStore_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StoryStore_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StoryStore_arrayLikeToArray(o,minLen)}(arr,i)||function StoryStore_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StoryStore_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function StoryStore_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function StoryStore_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){StoryStore_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){StoryStore_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function StoryStore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var StoryStore=function(){function StoryStore(){var _this=this;!function StoryStore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStore),this.storyIndex=void 0,this.importFn=void 0,this.projectAnnotations=void 0,this.globals=void 0,this.args=void 0,this.hooks=void 0,this.cachedCSFFiles=void 0,this.processCSFFileWithCache=void 0,this.prepareStoryWithCache=void 0,this.initializationPromise=void 0,this.resolveInitializationPromise=void 0,this.getStoriesJsonData=function(){var value=_this.getSetStoriesPayload(),allowedParameters=["fileName","docsOnly","framework","__id","__isArgsStory"];return{v:3,stories:mapValues_default()(value.stories,(function(story){var _global$FEATURES;return Object.assign({},pick_default()(story,["id","name","title"]),{importPath:_this.storyIndex.stories[story.id].importPath},!(null!==(_global$FEATURES=window_default().FEATURES)&&void 0!==_global$FEATURES&&_global$FEATURES.breakingChangesV7)&&{kind:story.title,story:story.name,parameters:Object.assign({},pick_default()(story.parameters,allowedParameters),{fileName:_this.storyIndex.stories[story.id].importPath})})}))}},this.globals=new GlobalsStore,this.args=new ArgsStore,this.hooks={},this.processCSFFileWithCache=memoizerific_default()(1e3)(processCSFFile),this.prepareStoryWithCache=memoizerific_default()(1e4)(prepareStory),this.initializationPromise=new synchronous_promise.SynchronousPromise((function(resolve){_this.resolveInitializationPromise=resolve}))}var _loadStory,_onStoriesChanged;return function StoryStore_createClass(Constructor,protoProps,staticProps){return protoProps&&StoryStore_defineProperties(Constructor.prototype,protoProps),staticProps&&StoryStore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(StoryStore,[{key:"setProjectAnnotations",value:function setProjectAnnotations(projectAnnotations){this.projectAnnotations=function normalizeProjectAnnotations(_ref){var argTypes=_ref.argTypes,globalTypes=_ref.globalTypes,argTypesEnhancers=_ref.argTypesEnhancers,annotations=normalizeProjectAnnotations_objectWithoutProperties(_ref,normalizeProjectAnnotations_excluded);return Object.assign({},argTypes&&{argTypes:(0,normalizeInputTypes.x)(argTypes)},globalTypes&&{globalTypes:(0,normalizeInputTypes.x)(globalTypes)},{argTypesEnhancers:[].concat(normalizeProjectAnnotations_toConsumableArray(argTypesEnhancers||[]),[inferArgTypes,inferControls])},annotations)}(projectAnnotations);var globals=projectAnnotations.globals,globalTypes=projectAnnotations.globalTypes;this.globals.set({globals,globalTypes})}},{key:"initialize",value:function initialize(_ref){var storyIndex=_ref.storyIndex,importFn=_ref.importFn,_ref$cache=_ref.cache,cache=void 0!==_ref$cache&&_ref$cache;return this.storyIndex=new StoryIndexStore(storyIndex),this.importFn=importFn,this.resolveInitializationPromise(),cache?this.cacheAllCSFFiles():synchronous_promise.SynchronousPromise.resolve()}},{key:"onStoriesChanged",value:(_onStoriesChanged=StoryStore_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var importFn,storyIndex;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(importFn=_ref2.importFn,storyIndex=_ref2.storyIndex,importFn&&(this.importFn=importFn),storyIndex&&(this.storyIndex.stories=storyIndex.stories),!this.cachedCSFFiles){_context.next=6;break}return _context.next=6,this.cacheAllCSFFiles();case 6:case"end":return _context.stop()}}),_callee,this)}))),function onStoriesChanged(_x){return _onStoriesChanged.apply(this,arguments)})},{key:"loadCSFFileByStoryId",value:function loadCSFFileByStoryId(storyId){var _this2=this,_this$storyIndex$stor=this.storyIndex.storyIdToEntry(storyId),importPath=_this$storyIndex$stor.importPath,title=_this$storyIndex$stor.title;return this.importFn(importPath).then((function(moduleExports){return _this2.processCSFFileWithCache(moduleExports,importPath,title)}))}},{key:"loadAllCSFFiles",value:function loadAllCSFFiles(){var _this3=this,importPaths={};Object.entries(this.storyIndex.stories).forEach((function(_ref3){var _ref4=StoryStore_slicedToArray(_ref3,2),storyId=_ref4[0],importPath=_ref4[1].importPath;importPaths[importPath]=storyId}));var csfFilePromiseList=Object.entries(importPaths).map((function(_ref5){var _ref6=StoryStore_slicedToArray(_ref5,2),importPath=_ref6[0],storyId=_ref6[1];return _this3.loadCSFFileByStoryId(storyId).then((function(csfFile){return{importPath,csfFile}}))}));return synchronous_promise.SynchronousPromise.all(csfFilePromiseList).then((function(list){return list.reduce((function(acc,_ref7){var importPath=_ref7.importPath,csfFile=_ref7.csfFile;return acc[importPath]=csfFile,acc}),{})}))}},{key:"cacheAllCSFFiles",value:function cacheAllCSFFiles(){var _this4=this;return this.initializationPromise.then((function(){return _this4.loadAllCSFFiles().then((function(csfFiles){_this4.cachedCSFFiles=csfFiles}))}))}},{key:"loadStory",value:(_loadStory=StoryStore_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref8){var storyId,csfFile;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return storyId=_ref8.storyId,_context2.next=3,this.initializationPromise;case 3:return _context2.next=5,this.loadCSFFileByStoryId(storyId);case 5:return csfFile=_context2.sent,_context2.abrupt("return",this.storyFromCSFFile({storyId,csfFile}));case 7:case"end":return _context2.stop()}}),_callee2,this)}))),function loadStory(_x2){return _loadStory.apply(this,arguments)})},{key:"storyFromCSFFile",value:function storyFromCSFFile(_ref9){var storyId=_ref9.storyId,csfFile=_ref9.csfFile,storyAnnotations=csfFile.stories[storyId];if(!storyAnnotations)throw new Error("Didn't find '".concat(storyId,"' in CSF file, this is unexpected"));var componentAnnotations=csfFile.meta,story=this.prepareStoryWithCache(storyAnnotations,componentAnnotations,this.projectAnnotations);return this.args.setInitial(story),this.hooks[story.id]=this.hooks[story.id]||new hooks.c8,story}},{key:"componentStoriesFromCSFFile",value:function componentStoriesFromCSFFile(_ref10){var _this5=this,csfFile=_ref10.csfFile;return Object.keys(this.storyIndex.stories).filter((function(storyId){return!!csfFile.stories[storyId]})).map((function(storyId){return _this5.storyFromCSFFile({storyId,csfFile})}))}},{key:"getStoryContext",value:function getStoryContext(story){return Object.assign({},story,{args:this.args.get(story.id),globals:this.globals.get(),hooks:this.hooks[story.id]})}},{key:"cleanupStory",value:function cleanupStory(story){this.hooks[story.id].clean()}},{key:"extract",value:function extract(){var _this6=this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeDocsOnly:!1};if(!this.cachedCSFFiles)throw new Error("Cannot call extract() unless you call cacheAllCSFFiles() first.");return Object.entries(this.storyIndex.stories).reduce((function(acc,_ref11){var _ref12=StoryStore_slicedToArray(_ref11,2),storyId=_ref12[0],importPath=_ref12[1].importPath,csfFile=_this6.cachedCSFFiles[importPath],story=_this6.storyFromCSFFile({storyId,csfFile});return!options.includeDocsOnly&&story.parameters.docsOnly||(acc[storyId]=Object.entries(story).reduce((function(storyAcc,_ref13){var _ref14=StoryStore_slicedToArray(_ref13,2),key=_ref14[0],value=_ref14[1];return"function"==typeof value?storyAcc:Array.isArray(value)?Object.assign(storyAcc,StoryStore_defineProperty({},key,value.slice().sort())):Object.assign(storyAcc,StoryStore_defineProperty({},key,value))}),{args:story.initialArgs})),acc}),{})}},{key:"getSetStoriesPayload",value:function getSetStoriesPayload(){var stories=this.extract({includeDocsOnly:!0}),kindParameters=Object.values(stories).reduce((function(acc,_ref15){return acc[_ref15.title]={},acc}),{});return{v:2,globals:this.globals.get(),globalParameters:{},kindParameters,stories}}},{key:"raw",value:function raw(){var _this7=this;return Object.values(this.extract()).map((function(_ref16){var id=_ref16.id;return _this7.fromId(id)}))}},{key:"fromId",value:function fromId(storyId){var importPath,_this8=this;if(!this.cachedCSFFiles)throw new Error("Cannot call fromId/raw() unless you call cacheAllCSFFiles() first.");try{importPath=this.storyIndex.storyIdToEntry(storyId).importPath}catch(err){return null}var csfFile=this.cachedCSFFiles[importPath],story=this.storyFromCSFFile({storyId,csfFile});return Object.assign({},story,{storyFn:function storyFn(update){var context=Object.assign({},_this8.getStoryContext(story),{viewMode:"story"});return story.unboundStoryFn(Object.assign({},context,update))}})}}]),StoryStore}(),core_events_dist_esm=(__webpack_require__("../../node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../../node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../../node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("../../node_modules/@storybook/core-events/dist/esm/index.js")),addons_dist_esm=__webpack_require__("../../node_modules/@storybook/addons/dist/esm/index.js");function StoryRender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function StoryRender_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){StoryRender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){StoryRender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function StoryRender_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var AbortController=window_default().AbortController;function createController(){return AbortController?new AbortController:{signal:{aborted:!1},abort:function abort(){this.signal.aborted=!0}}}var Preview_templateObject,Preview_templateObject2,PREPARE_ABORTED=new Error("prepareAborted"),StoryRender=function(){function StoryRender(channel,store,renderToScreen,callbacks,id,viewMode,story){!function StoryRender_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryRender),this.channel=channel,this.store=store,this.renderToScreen=renderToScreen,this.callbacks=callbacks,this.id=id,this.viewMode=viewMode,this.story=void 0,this.phase=void 0,this.abortController=void 0,this.canvasElement=void 0,this.notYetRendered=!0,this.disableKeyListeners=!1,this.abortController=createController(),story&&(this.story=story,this.phase="preparing")}var _teardown,_remount,_rerender,_render,_renderToElement,_prepare,_runPhase;return function StoryRender_createClass(Constructor,protoProps,staticProps){return protoProps&&StoryRender_defineProperties(Constructor.prototype,protoProps),staticProps&&StoryRender_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(StoryRender,[{key:"runPhase",value:(_runPhase=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee(signal,phase,phaseFn){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.phase=phase,this.channel.emit(core_events_dist_esm.STORY_RENDER_PHASE_CHANGED,{newPhase:this.phase,storyId:this.id}),!phaseFn){_context.next=5;break}return _context.next=5,phaseFn();case 5:signal.aborted&&(this.phase="aborted",this.channel.emit(core_events_dist_esm.STORY_RENDER_PHASE_CHANGED,{newPhase:this.phase,storyId:this.id}));case 6:case"end":return _context.stop()}}),_callee,this)}))),function runPhase(_x,_x2,_x3){return _runPhase.apply(this,arguments)})},{key:"prepare",value:(_prepare=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _this=this;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this.runPhase(this.abortController.signal,"preparing",StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_this.store.loadStory({storyId:_this.id});case 2:_this.story=_context2.sent;case 3:case"end":return _context2.stop()}}),_callee2)}))));case 2:if(!this.abortController.signal.aborted){_context3.next=5;break}throw this.store.cleanupStory(this.story),PREPARE_ABORTED;case 5:case"end":return _context3.stop()}}),_callee3,this)}))),function prepare(){return _prepare.apply(this,arguments)})},{key:"isEqual",value:function isEqual(other){return other&&this.id===other.id&&this.story&&this.story===other.story}},{key:"isPreparing",value:function isPreparing(){return["preparing"].includes(this.phase)}},{key:"isPending",value:function isPending(){return["rendering","playing"].includes(this.phase)}},{key:"context",value:function context(){return this.store.getStoryContext(this.story)}},{key:"renderToElement",value:(_renderToElement=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee4(canvasElement){return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return this.canvasElement=canvasElement,_context4.abrupt("return",this.render({initial:!0,forceRemount:!0}));case 2:case"end":return _context4.stop()}}),_callee4,this)}))),function renderToElement(_x4){return _renderToElement.apply(this,arguments)})},{key:"render",value:(_render=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var _ref2,_ref2$initial,initial,_ref2$forceRemount,forceRemount,_this$story,id,componentId,title,name,applyLoaders,unboundStoryFn,playFunction,abortSignal,loadedContext,renderStoryContext,_renderContext,_this2=this,_args9=arguments;return regeneratorRuntime.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(_ref2=_args9.length>0&&void 0!==_args9[0]?_args9[0]:{},_ref2$initial=_ref2.initial,initial=void 0!==_ref2$initial&&_ref2$initial,_ref2$forceRemount=_ref2.forceRemount,forceRemount=void 0!==_ref2$forceRemount&&_ref2$forceRemount,this.story){_context9.next=3;break}throw new Error("cannot render when not prepared");case 3:return _this$story=this.story,id=_this$story.id,componentId=_this$story.componentId,title=_this$story.title,name=_this$story.name,applyLoaders=_this$story.applyLoaders,unboundStoryFn=_this$story.unboundStoryFn,playFunction=_this$story.playFunction,forceRemount&&!initial&&(this.cancelRender(),this.abortController=createController()),abortSignal=this.abortController.signal,_context9.prev=6,_context9.next=9,this.runPhase(abortSignal,"loading",StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,applyLoaders(Object.assign({},_this2.context(),{viewMode:_this2.viewMode}));case 2:loadedContext=_context5.sent;case 3:case"end":return _context5.stop()}}),_callee5)}))));case 9:if(!abortSignal.aborted){_context9.next=11;break}return _context9.abrupt("return");case 11:return renderStoryContext=Object.assign({},loadedContext,this.context(),{abortSignal,canvasElement:this.canvasElement}),_renderContext=Object.assign({componentId,title,kind:title,id,name,story:name},this.callbacks,{forceRemount:forceRemount||this.notYetRendered,storyContext:renderStoryContext,storyFn:function storyFn(){return unboundStoryFn(renderStoryContext)},unboundStoryFn}),_context9.next=15,this.runPhase(abortSignal,"rendering",StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",_this2.renderToScreen(_renderContext,_this2.canvasElement));case 1:case"end":return _context6.stop()}}),_callee6)}))));case 15:if(this.notYetRendered=!1,!abortSignal.aborted){_context9.next=18;break}return _context9.abrupt("return");case 18:if(!forceRemount||!playFunction){_context9.next=27;break}return this.disableKeyListeners=!0,_context9.next=22,this.runPhase(abortSignal,"playing",StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",playFunction(_renderContext.storyContext));case 1:case"end":return _context7.stop()}}),_callee7)}))));case 22:return _context9.next=24,this.runPhase(abortSignal,"played");case 24:if(this.disableKeyListeners=!1,!abortSignal.aborted){_context9.next=27;break}return _context9.abrupt("return");case 27:return _context9.next=29,this.runPhase(abortSignal,"completed",StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){return regeneratorRuntime.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",_this2.channel.emit(core_events_dist_esm.STORY_RENDERED,id));case 1:case"end":return _context8.stop()}}),_callee8)}))));case 29:_context9.next=34;break;case 31:_context9.prev=31,_context9.t0=_context9.catch(6),this.callbacks.showException(_context9.t0);case 34:case"end":return _context9.stop()}}),_callee9,this,[[6,31]])}))),function render(){return _render.apply(this,arguments)})},{key:"rerender",value:(_rerender=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){return regeneratorRuntime.wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.abrupt("return",this.render());case 1:case"end":return _context10.stop()}}),_callee10,this)}))),function rerender(){return _rerender.apply(this,arguments)})},{key:"remount",value:(_remount=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){return regeneratorRuntime.wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.abrupt("return",this.render({forceRemount:!0}));case 1:case"end":return _context11.stop()}}),_callee11,this)}))),function remount(){return _remount.apply(this,arguments)})},{key:"cancelRender",value:function cancelRender(){this.abortController.abort()}},{key:"teardown",value:(_teardown=StoryRender_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var i,_args12=arguments;return regeneratorRuntime.wrap((function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:_args12.length>0&&void 0!==_args12[0]&&_args12[0],this.cancelRender(),this.story&&this.store.cleanupStory(this.story),i=0;case 4:if(!(i<3)){_context12.next=12;break}if(this.isPending()){_context12.next=7;break}return _context12.abrupt("return");case 7:return _context12.next=9,new Promise((function(resolve){return setTimeout(resolve,0)}));case 9:i+=1,_context12.next=4;break;case 12:return window_default().window.location.reload(),_context12.next=15,new Promise((function(){}));case 15:case"end":return _context12.stop()}}),_callee12,this)}))),function teardown(){return _teardown.apply(this,arguments)})}]),StoryRender}();function Preview_toConsumableArray(arr){return function Preview_arrayWithoutHoles(arr){if(Array.isArray(arr))return Preview_arrayLikeToArray(arr)}(arr)||function Preview_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function Preview_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Preview_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Preview_arrayLikeToArray(o,minLen)}(arr)||function Preview_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Preview_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Preview_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function Preview_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Preview_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Preview_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function Preview_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function Preview_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}StoryRender.displayName="StoryRender";var parseArgsParam_templateObject,fetch=window_default().fetch,Preview=function(){function Preview(){var _global$FEATURES;!function Preview_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Preview),this.channel=void 0,this.serverChannel=void 0,this.storyStore=void 0,this.getStoryIndex=void 0,this.importFn=void 0,this.renderToDOM=void 0,this.storyRenders=[],this.previewEntryError=void 0,this.channel=addons_dist_esm.KP.getChannel(),null!==(_global$FEATURES=window_default().FEATURES)&&void 0!==_global$FEATURES&&_global$FEATURES.storyStoreV7&&addons_dist_esm.KP.hasServerChannel()&&(this.serverChannel=addons_dist_esm.KP.getServerChannel()),this.storyStore=new StoryStore}var _extract,_teardownRender,_onForceRemount,_onForceReRender,_onResetArgs,_onUpdateArgs,_onUpdateGlobals,_onStoriesChanged,_onStoryIndexChanged,_onGetProjectAnnotationsChanged,_getStoryIndexFromServer,_setInitialGlobals;return function Preview_createClass(Constructor,protoProps,staticProps){return protoProps&&Preview_defineProperties(Constructor.prototype,protoProps),staticProps&&Preview_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Preview,[{key:"initialize",value:function initialize(_ref){var _this=this,getStoryIndex=_ref.getStoryIndex,importFn=_ref.importFn,getProjectAnnotations=_ref.getProjectAnnotations;return this.getStoryIndex=getStoryIndex,this.importFn=importFn,this.setupListeners(),this.getProjectAnnotationsOrRenderError(getProjectAnnotations).then((function(projectAnnotations){return _this.initializeWithProjectAnnotations(projectAnnotations)}))}},{key:"setupListeners",value:function setupListeners(){var _this$serverChannel;null===(_this$serverChannel=this.serverChannel)||void 0===_this$serverChannel||_this$serverChannel.on(core_events_dist_esm.STORY_INDEX_INVALIDATED,this.onStoryIndexChanged.bind(this)),this.channel.on(core_events_dist_esm.UPDATE_GLOBALS,this.onUpdateGlobals.bind(this)),this.channel.on(core_events_dist_esm.UPDATE_STORY_ARGS,this.onUpdateArgs.bind(this)),this.channel.on(core_events_dist_esm.RESET_STORY_ARGS,this.onResetArgs.bind(this)),this.channel.on(core_events_dist_esm.FORCE_RE_RENDER,this.onForceReRender.bind(this)),this.channel.on(core_events_dist_esm.FORCE_REMOUNT,this.onForceRemount.bind(this))}},{key:"getProjectAnnotationsOrRenderError",value:function getProjectAnnotationsOrRenderError(getProjectAnnotations){var _this2=this;return synchronous_promise.SynchronousPromise.resolve().then(getProjectAnnotations).then((function(projectAnnotations){if(_this2.renderToDOM=projectAnnotations.renderToDOM,!_this2.renderToDOM)throw new Error((0,esm.C)(Preview_templateObject||(Preview_templateObject=Preview_taggedTemplateLiteral(["\n            Expected your framework's preset to export a `renderToDOM` field.\n\n            Perhaps it needs to be upgraded for Storybook 6.4?\n\n            More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field          \n          "],["\n            Expected your framework's preset to export a \\`renderToDOM\\` field.\n\n            Perhaps it needs to be upgraded for Storybook 6.4?\n\n            More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field          \n          "]))));return projectAnnotations})).catch((function(err){throw _this2.renderPreviewEntryError("Error reading preview.js:",err),err}))}},{key:"initializeWithProjectAnnotations",value:function initializeWithProjectAnnotations(projectAnnotations){var _global$FEATURES2,storyIndexPromise,_this3=this;if(this.storyStore.setProjectAnnotations(projectAnnotations),this.setInitialGlobals(),null!==(_global$FEATURES2=window_default().FEATURES)&&void 0!==_global$FEATURES2&&_global$FEATURES2.storyStoreV7)storyIndexPromise=this.getStoryIndexFromServer();else{if(!this.getStoryIndex)throw new Error("No `getStoryIndex` passed defined in v6 mode");storyIndexPromise=synchronous_promise.SynchronousPromise.resolve().then(this.getStoryIndex)}return storyIndexPromise.then((function(storyIndex){return _this3.initializeWithStoryIndex(storyIndex)})).catch((function(err){throw _this3.renderPreviewEntryError("Error loading story index:",err),err}))}},{key:"setInitialGlobals",value:(_setInitialGlobals=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:this.emitGlobals();case 1:case"end":return _context.stop()}}),_callee,this)}))),function setInitialGlobals(){return _setInitialGlobals.apply(this,arguments)})},{key:"emitGlobals",value:function emitGlobals(){this.channel.emit(core_events_dist_esm.SET_GLOBALS,{globals:this.storyStore.globals.get()||{},globalTypes:this.storyStore.projectAnnotations.globalTypes||{}})}},{key:"getStoryIndexFromServer",value:(_getStoryIndexFromServer=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var result;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,fetch("./stories.json");case 2:if(200!==(result=_context2.sent).status){_context2.next=5;break}return _context2.abrupt("return",result.json());case 5:return _context2.t0=Error,_context2.next=8,result.text();case 8:throw _context2.t1=_context2.sent,new _context2.t0(_context2.t1);case 10:case"end":return _context2.stop()}}),_callee2)}))),function getStoryIndexFromServer(){return _getStoryIndexFromServer.apply(this,arguments)})},{key:"initializeWithStoryIndex",value:function initializeWithStoryIndex(storyIndex){var _global$FEATURES3;return this.storyStore.initialize({storyIndex,importFn:this.importFn,cache:!(null!==(_global$FEATURES3=window_default().FEATURES)&&void 0!==_global$FEATURES3&&_global$FEATURES3.storyStoreV7)})}},{key:"onGetProjectAnnotationsChanged",value:(_onGetProjectAnnotationsChanged=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref2){var getProjectAnnotations,projectAnnotations;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return getProjectAnnotations=_ref2.getProjectAnnotations,delete this.previewEntryError,_context3.next=4,this.getProjectAnnotationsOrRenderError(getProjectAnnotations);case 4:if(projectAnnotations=_context3.sent,this.storyStore.projectAnnotations){_context3.next=9;break}return _context3.next=8,this.initializeWithProjectAnnotations(projectAnnotations);case 8:return _context3.abrupt("return");case 9:return _context3.next=11,this.storyStore.setProjectAnnotations(projectAnnotations);case 11:this.emitGlobals();case 12:case"end":return _context3.stop()}}),_callee3,this)}))),function onGetProjectAnnotationsChanged(_x){return _onGetProjectAnnotationsChanged.apply(this,arguments)})},{key:"onStoryIndexChanged",value:(_onStoryIndexChanged=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var storyIndex;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(delete this.previewEntryError,this.storyStore.projectAnnotations){_context4.next=3;break}return _context4.abrupt("return");case 3:return _context4.prev=3,_context4.next=6,this.getStoryIndexFromServer();case 6:if(storyIndex=_context4.sent,this.storyStore.storyIndex){_context4.next=10;break}return _context4.next=10,this.initializeWithStoryIndex(storyIndex);case 10:return _context4.next=12,this.onStoriesChanged({storyIndex});case 12:_context4.next=18;break;case 14:throw _context4.prev=14,_context4.t0=_context4.catch(3),this.renderPreviewEntryError("Error loading story index:",_context4.t0),_context4.t0;case 18:case"end":return _context4.stop()}}),_callee4,this,[[3,14]])}))),function onStoryIndexChanged(){return _onStoryIndexChanged.apply(this,arguments)})},{key:"onStoriesChanged",value:(_onStoriesChanged=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee5(_ref3){var importFn,storyIndex;return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return importFn=_ref3.importFn,storyIndex=_ref3.storyIndex,_context5.next=3,this.storyStore.onStoriesChanged({importFn,storyIndex});case 3:case"end":return _context5.stop()}}),_callee5,this)}))),function onStoriesChanged(_x2){return _onStoriesChanged.apply(this,arguments)})},{key:"onUpdateGlobals",value:(_onUpdateGlobals=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee6(_ref4){var globals;return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return globals=_ref4.globals,this.storyStore.globals.update(globals),_context6.next=4,Promise.all(this.storyRenders.map((function(r){return r.rerender()})));case 4:this.channel.emit(core_events_dist_esm.GLOBALS_UPDATED,{globals:this.storyStore.globals.get(),initialGlobals:this.storyStore.globals.initialGlobals});case 5:case"end":return _context6.stop()}}),_callee6,this)}))),function onUpdateGlobals(_x3){return _onUpdateGlobals.apply(this,arguments)})},{key:"onUpdateArgs",value:(_onUpdateArgs=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee7(_ref5){var storyId,updatedArgs;return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return storyId=_ref5.storyId,updatedArgs=_ref5.updatedArgs,this.storyStore.args.update(storyId,updatedArgs),_context7.next=4,Promise.all(this.storyRenders.filter((function(r){return r.id===storyId})).map((function(r){return r.rerender()})));case 4:this.channel.emit(core_events_dist_esm.STORY_ARGS_UPDATED,{storyId,args:this.storyStore.args.get(storyId)});case 5:case"end":return _context7.stop()}}),_callee7,this)}))),function onUpdateArgs(_x4){return _onUpdateArgs.apply(this,arguments)})},{key:"onResetArgs",value:(_onResetArgs=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee8(_ref6){var storyId,argNames,render,story,argNamesToReset,updatedArgs;return regeneratorRuntime.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(storyId=_ref6.storyId,argNames=_ref6.argNames,render=this.storyRenders.find((function(r){return r.id===storyId})),_context8.t0=null==render?void 0:render.story,_context8.t0){_context8.next=7;break}return _context8.next=6,this.storyStore.loadStory({storyId});case 6:_context8.t0=_context8.sent;case 7:return story=_context8.t0,argNamesToReset=argNames||Preview_toConsumableArray(new Set([].concat(Preview_toConsumableArray(Object.keys(story.initialArgs)),Preview_toConsumableArray(Object.keys(this.storyStore.args.get(storyId)))))),updatedArgs=argNamesToReset.reduce((function(acc,argName){return acc[argName]=story.initialArgs[argName],acc}),{}),_context8.next=12,this.onUpdateArgs({storyId,updatedArgs});case 12:case"end":return _context8.stop()}}),_callee8,this)}))),function onResetArgs(_x5){return _onResetArgs.apply(this,arguments)})},{key:"onForceReRender",value:(_onForceReRender=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){return regeneratorRuntime.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,Promise.all(this.storyRenders.map((function(r){return r.rerender()})));case 2:case"end":return _context9.stop()}}),_callee9,this)}))),function onForceReRender(){return _onForceReRender.apply(this,arguments)})},{key:"onForceRemount",value:(_onForceRemount=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee10(_ref7){var storyId;return regeneratorRuntime.wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return storyId=_ref7.storyId,_context10.next=3,Promise.all(this.storyRenders.filter((function(r){return r.id===storyId})).map((function(r){return r.remount()})));case 3:case"end":return _context10.stop()}}),_callee10,this)}))),function onForceRemount(_x6){return _onForceRemount.apply(this,arguments)})},{key:"renderStoryToElement",value:function renderStoryToElement(story,element){var _this4=this,render=new StoryRender(this.channel,this.storyStore,this.renderToDOM,this.inlineStoryCallbacks(story.id),story.id,"docs",story);return render.renderToElement(element),this.storyRenders.push(render),Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){return regeneratorRuntime.wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,_this4.teardownRender(render);case 2:case"end":return _context11.stop()}}),_callee11)})))}},{key:"teardownRender",value:(_teardownRender=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee12(render){var _ref9,viewModeChanged,_args12=arguments;return regeneratorRuntime.wrap((function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _ref9=_args12.length>1&&void 0!==_args12[1]?_args12[1]:{},viewModeChanged=_ref9.viewModeChanged,this.storyRenders=this.storyRenders.filter((function(r){return r!==render})),_context12.next=4,null==render?void 0:render.teardown({viewModeChanged});case 4:case"end":return _context12.stop()}}),_callee12,this)}))),function teardownRender(_x7){return _teardownRender.apply(this,arguments)})},{key:"extract",value:(_extract=Preview_asyncToGenerator(regeneratorRuntime.mark((function _callee13(options){var _global$FEATURES4;return regeneratorRuntime.wrap((function _callee13$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:if(!this.previewEntryError){_context13.next=2;break}throw this.previewEntryError;case 2:if(this.storyStore.projectAnnotations){_context13.next=4;break}throw new Error((0,esm.C)(Preview_templateObject2||(Preview_templateObject2=Preview_taggedTemplateLiteral(["Failed to initialize Storybook.\n      \n      Do you have an error in your `preview.js`? Check your Storybook's browser console for errors."],["Failed to initialize Storybook.\n      \n      Do you have an error in your \\`preview.js\\`? Check your Storybook's browser console for errors."]))));case 4:if(null===(_global$FEATURES4=window_default().FEATURES)||void 0===_global$FEATURES4||!_global$FEATURES4.storyStoreV7){_context13.next=7;break}return _context13.next=7,this.storyStore.cacheAllCSFFiles();case 7:return _context13.abrupt("return",this.storyStore.extract(options));case 8:case"end":return _context13.stop()}}),_callee13,this)}))),function extract(_x8){return _extract.apply(this,arguments)})},{key:"inlineStoryCallbacks",value:function inlineStoryCallbacks(storyId){return{showMain:function showMain(){},showError:function showError(err){return dist_esm.kg.error("Error rendering docs story (".concat(storyId,")"),err)},showException:function showException(err){return dist_esm.kg.error("Error rendering docs story (".concat(storyId,")"),err)}}}},{key:"renderPreviewEntryError",value:function renderPreviewEntryError(reason,err){this.previewEntryError=err,dist_esm.kg.error(reason),dist_esm.kg.error(err),this.channel.emit(core_events_dist_esm.CONFIG_ERROR,err)}}]),Preview}(),lib=(__webpack_require__("../../node_modules/core-js/modules/es.string.search.js"),__webpack_require__("../../node_modules/qs/lib/index.js")),lib_default=__webpack_require__.n(lib);__webpack_require__("../../node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.ends-with.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.split.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.replace.js");function parseArgsParam_slicedToArray(arr,i){return function parseArgsParam_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function parseArgsParam_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function parseArgsParam_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return parseArgsParam_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return parseArgsParam_arrayLikeToArray(o,minLen)}(arr,i)||function parseArgsParam_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function parseArgsParam_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var VALIDATION_REGEXP=/^[a-zA-Z0-9 _-]*$/,NUMBER_REGEXP=/^-?[0-9]+(\.[0-9]+)?$/,HEX_REGEXP=/^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i,COLOR_REGEXP=/^(rgba?|hsla?)\(([0-9]{1,3}),\s?([0-9]{1,3})%?,\s?([0-9]{1,3})%?,?\s?([0-9](\.[0-9]{1,2})?)?\)$/i,validateArgs=function validateArgs(){var key=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",value=arguments.length>1?arguments[1]:void 0;return null!==key&&(!(""===key||!VALIDATION_REGEXP.test(key))&&(null==value||(value instanceof Date||("number"==typeof value||"boolean"==typeof value||("string"==typeof value?VALIDATION_REGEXP.test(value)||NUMBER_REGEXP.test(value)||HEX_REGEXP.test(value)||COLOR_REGEXP.test(value):Array.isArray(value)?value.every((function(v){return validateArgs(key,v)})):!!isPlainObject_default()(value)&&Object.entries(value).every((function(_ref){var _ref2=parseArgsParam_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return validateArgs(k,v)})))))))},QS_OPTIONS={delimiter:";",allowDots:!0,allowSparse:!0,decoder:function(_decoder){function decoder(_x,_x2,_x3,_x4){return _decoder.apply(this,arguments)}return decoder.toString=function(){return _decoder.toString()},decoder}((function(str,defaultDecoder,charset,type){if("value"===type&&str.startsWith("!")){if("!undefined"===str)return;if("!null"===str)return null;if(str.startsWith("!date(")&&str.endsWith(")"))return new Date(str.slice(6,-1));if(str.startsWith("!hex(")&&str.endsWith(")"))return"#".concat(str.slice(5,-1));var color=str.slice(1).match(COLOR_REGEXP);if(color)return str.startsWith("!rgba")?"".concat(color[1],"(").concat(color[2],", ").concat(color[3],", ").concat(color[4],", ").concat(color[5],")"):str.startsWith("!hsla")?"".concat(color[1],"(").concat(color[2],", ").concat(color[3],"%, ").concat(color[4],"%, ").concat(color[5],")"):str.startsWith("!rgb")?"".concat(color[1],"(").concat(color[2],", ").concat(color[3],", ").concat(color[4],")"):"".concat(color[1],"(").concat(color[2],", ").concat(color[3],"%, ").concat(color[4],"%)")}return"value"===type&&NUMBER_REGEXP.test(str)?Number(str):defaultDecoder(str,defaultDecoder,charset)}))},parseArgsParam=function parseArgsParam(argsString){var parts=argsString.split(";").map((function(part){return part.replace("=","~").replace(":","=")}));return Object.entries(lib_default().parse(parts.join(";"),QS_OPTIONS)).reduce((function(acc,_ref3){var _ref4=parseArgsParam_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return validateArgs(key,value)?Object.assign(acc,function parseArgsParam_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},key,value)):(dist_esm.IH.warn((0,esm.C)(parseArgsParam_templateObject||(parseArgsParam_templateObject=function parseArgsParam_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n      Omitted potentially unsafe URL args.\n\n      More info: https://storybook.js.org/docs/react/writing-stories/args#setting-args-through-the-url\n    "])))),acc)}),{})},UrlStore_excluded=["path","selectedKind","selectedStory"];function UrlStore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function UrlStore_typeof(obj){return UrlStore_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},UrlStore_typeof(obj)}function UrlStore_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function UrlStore_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var UrlStore_history=window_default().history,UrlStore_document=window_default().document;var WebView_templateObject,getQueryString=function getQueryString(_ref){var selection=_ref.selection,extraParams=_ref.extraParams,_document$location$se=UrlStore_document.location.search,search=void 0===_document$location$se?"":_document$location$se,_qs$parse=lib_default().parse(search,{ignoreQueryPrefix:!0}),rest=(_qs$parse.path,_qs$parse.selectedKind,_qs$parse.selectedStory,UrlStore_objectWithoutProperties(_qs$parse,UrlStore_excluded));return lib_default().stringify(Object.assign({},rest,extraParams,selection&&{id:selection.storyId,viewMode:selection.viewMode}),{encode:!1,addQueryPrefix:!0})},getFirstString=function getFirstString(v){return"string"==typeof v?v:Array.isArray(v)?getFirstString(v[0]):function isObject(val){return null!=val&&"object"===UrlStore_typeof(val)&&!1===Array.isArray(val)}(v)?getFirstString(Object.values(v)):void 0},deprecatedLegacyQuery=browser_default()((function(){return 0}),"URL formats with `selectedKind` and `selectedName` query parameters are deprecated.\nUse `id=$storyId` instead.\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#new-url-structure"),getSelectionSpecifierFromPath=function getSelectionSpecifierFromPath(){var query=lib_default().parse(UrlStore_document.location.search,{ignoreQueryPrefix:!0}),args="string"==typeof query.args?parseArgsParam(query.args):void 0,globals="string"==typeof query.globals?parseArgsParam(query.globals):void 0,viewMode=getFirstString(query.viewMode);"string"==typeof viewMode&&viewMode.match(/docs|story/)||(viewMode="story");var path=getFirstString(query.path),storyId=path?function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]}(path):getFirstString(query.id);if(storyId)return{storySpecifier:storyId,args,globals,viewMode};var title=getFirstString(query.selectedKind),name=getFirstString(query.selectedStory);return title&&name?(deprecatedLegacyQuery(),{storySpecifier:{title,name},args,globals,viewMode}):null},UrlStore=function(){function UrlStore(){!function UrlStore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UrlStore),this.selectionSpecifier=void 0,this.selection=void 0,this.selectionSpecifier=getSelectionSpecifierFromPath()}return function UrlStore_createClass(Constructor,protoProps,staticProps){return protoProps&&UrlStore_defineProperties(Constructor.prototype,protoProps),staticProps&&UrlStore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(UrlStore,[{key:"setSelection",value:function setSelection(selection){this.selection=selection,function setPath(selection){if(selection){var query=getQueryString({selection}),_document$location$ha=UrlStore_document.location.hash,hash=void 0===_document$location$ha?"":_document$location$ha;UrlStore_document.title=selection.storyId,UrlStore_history.replaceState({},"","".concat(UrlStore_document.location.pathname).concat(query).concat(hash))}}(this.selection)}},{key:"setQueryParams",value:function setQueryParams(queryParams){var query=getQueryString({extraParams:queryParams}),_document$location$ha2=UrlStore_document.location.hash,hash=void 0===_document$location$ha2?"":_document$location$ha2;UrlStore_history.replaceState({},"","".concat(UrlStore_document.location.pathname).concat(query).concat(hash))}}]),UrlStore}(),ansi_to_html=__webpack_require__("../../node_modules/ansi-to-html/lib/ansi_to_html.js"),ansi_to_html_default=__webpack_require__.n(ansi_to_html);function WebView_slicedToArray(arr,i){return function WebView_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function WebView_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function WebView_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return WebView_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WebView_arrayLikeToArray(o,minLen)}(arr,i)||function WebView_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WebView_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function WebView_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Mode,WebView_document=window_default().document,layoutClassMap={centered:"sb-main-centered",fullscreen:"sb-main-fullscreen",padded:"sb-main-padded"};!function(Mode){Mode.MAIN="MAIN",Mode.NOPREVIEW="NOPREVIEW",Mode.PREPARING_STORY="PREPARING_STORY",Mode.PREPARING_DOCS="PREPARING_DOCS",Mode.ERROR="ERROR"}(Mode||(Mode={}));var classes={PREPARING_STORY:"sb-show-preparing-story",PREPARING_DOCS:"sb-show-preparing-docs",MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"},ansiConverter=new(ansi_to_html_default())({escapeXML:!0}),WebView=function(){function WebView(){switch(function WebView_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WebView),this.currentLayoutClass=void 0,this.testing=!1,this.preparingTimeout=null,lib_default().parse(WebView_document.location.search,{ignoreQueryPrefix:!0}).__SPECIAL_TEST_PARAMETER__){case"preparing-story":this.showPreparingStory(),this.testing=!0;break;case"preparing-docs":this.showPreparingDocs(),this.testing=!0}}return function WebView_createClass(Constructor,protoProps,staticProps){return protoProps&&WebView_defineProperties(Constructor.prototype,protoProps),staticProps&&WebView_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(WebView,[{key:"prepareForStory",value:function prepareForStory(story){return this.showStory(),this.applyLayout(story.parameters.layout),WebView_document.documentElement.scrollTop=0,WebView_document.documentElement.scrollLeft=0,this.storyRoot()}},{key:"storyRoot",value:function storyRoot(){return WebView_document.getElementById("root")}},{key:"prepareForDocs",value:function prepareForDocs(){return this.showMain(),this.showDocs(),this.applyLayout("fullscreen"),this.docsRoot()}},{key:"docsRoot",value:function docsRoot(){return WebView_document.getElementById("docs-root")}},{key:"applyLayout",value:function applyLayout(){var layout=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"padded";if("none"===layout)return WebView_document.body.classList.remove(this.currentLayoutClass),void(this.currentLayoutClass=null);this.checkIfLayoutExists(layout);var layoutClass=layoutClassMap[layout];WebView_document.body.classList.remove(this.currentLayoutClass),WebView_document.body.classList.add(layoutClass),this.currentLayoutClass=layoutClass}},{key:"checkIfLayoutExists",value:function checkIfLayoutExists(layout){layoutClassMap[layout]||dist_esm.kg.warn((0,esm.C)(WebView_templateObject||(WebView_templateObject=function WebView_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["The desired layout: "," is not a valid option.\n         The possible options are: ",", none."])),layout,Object.keys(layoutClassMap).join(", ")))}},{key:"showMode",value:function showMode(mode){clearTimeout(this.preparingTimeout),Object.keys(Mode).forEach((function(otherMode){otherMode===mode?WebView_document.body.classList.add(classes[otherMode]):WebView_document.body.classList.remove(classes[otherMode])}))}},{key:"showErrorDisplay",value:function showErrorDisplay(_ref){var _ref$message=_ref.message,message=void 0===_ref$message?"":_ref$message,_ref$stack=_ref.stack,header=message,detail=void 0===_ref$stack?"":_ref$stack,parts=message.split("\n");parts.length>1&&(header=WebView_slicedToArray(parts,1)[0],detail=parts.slice(1).join("\n"));WebView_document.getElementById("error-message").innerHTML=ansiConverter.toHtml(header),WebView_document.getElementById("error-stack").innerHTML=ansiConverter.toHtml(detail),this.showMode(Mode.ERROR)}},{key:"showNoPreview",value:function showNoPreview(){var _this$storyRoot,_this$docsRoot;this.testing||(this.showMode(Mode.NOPREVIEW),null===(_this$storyRoot=this.storyRoot())||void 0===_this$storyRoot||_this$storyRoot.setAttribute("hidden","true"),null===(_this$docsRoot=this.docsRoot())||void 0===_this$docsRoot||_this$docsRoot.setAttribute("hidden","true"))}},{key:"showPreparingStory",value:function showPreparingStory(){var _this=this,_ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$immediate=_ref2.immediate,immediate=void 0!==_ref2$immediate&&_ref2$immediate;clearTimeout(this.preparingTimeout),immediate?this.showMode(Mode.PREPARING_STORY):this.preparingTimeout=setTimeout((function(){return _this.showMode(Mode.PREPARING_STORY)}),100)}},{key:"showPreparingDocs",value:function showPreparingDocs(){var _this2=this;clearTimeout(this.preparingTimeout),this.preparingTimeout=setTimeout((function(){return _this2.showMode(Mode.PREPARING_DOCS)}),100)}},{key:"showMain",value:function showMain(){this.showMode(Mode.MAIN)}},{key:"showDocs",value:function showDocs(){this.storyRoot().setAttribute("hidden","true"),this.docsRoot().removeAttribute("hidden")}},{key:"showStory",value:function showStory(){this.docsRoot().setAttribute("hidden","true"),this.storyRoot().removeAttribute("hidden")}},{key:"showStoryDuringRender",value:function showStoryDuringRender(){WebView_document.body.classList.add(classes.MAIN)}}]),WebView}();function DocsRender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function DocsRender_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DocsRender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DocsRender_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function DocsRender_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var PreviewWeb_templateObject,PreviewWeb_templateObject2,_templateObject3,_templateObject4,DocsRender=function(){function DocsRender(channel,store,id,story){!function DocsRender_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DocsRender),this.channel=channel,this.store=store,this.id=id,this.story=story,this.canvasElement=void 0,this.context=void 0,this.disableKeyListeners=!1}var _teardown,_rerender,_render,_renderToElement;return function DocsRender_createClass(Constructor,protoProps,staticProps){return protoProps&&DocsRender_defineProperties(Constructor.prototype,protoProps),staticProps&&DocsRender_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DocsRender,[{key:"isPreparing",value:function isPreparing(){return!1}},{key:"renderToElement",value:(_renderToElement=DocsRender_asyncToGenerator(regeneratorRuntime.mark((function _callee(canvasElement,renderStoryToElement){var _global$FEATURES,_this$story,id,title,name,csfFile,_this=this;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.canvasElement=canvasElement,_this$story=this.story,id=_this$story.id,title=_this$story.title,name=_this$story.name,_context.next=4,this.store.loadCSFFileByStoryId(this.id);case 4:return csfFile=_context.sent,this.context=Object.assign({id,title,name,storyById:function storyById(storyId){return _this.store.storyFromCSFFile({storyId,csfFile})},componentStories:function componentStories(){return _this.store.componentStoriesFromCSFFile({csfFile})},loadStory:function loadStory(storyId){return _this.store.loadStory({storyId})},renderStoryToElement,getStoryContext:function getStoryContext(renderedStory){return Object.assign({},_this.store.getStoryContext(renderedStory),{viewMode:"docs"})}},!(null!==(_global$FEATURES=window_default().FEATURES)&&void 0!==_global$FEATURES&&_global$FEATURES.breakingChangesV7)&&this.store.getStoryContext(this.story)),_context.abrupt("return",this.render());case 7:case"end":return _context.stop()}}),_callee,this)}))),function renderToElement(_x,_x2){return _renderToElement.apply(this,arguments)})},{key:"render",value:(_render=DocsRender_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this2=this;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(this.story&&this.context&&this.canvasElement){_context2.next=2;break}throw new Error("DocsRender not ready to render");case 2:return _context2.next=4,__webpack_require__.e(491).then(__webpack_require__.bind(__webpack_require__,"../../node_modules/@storybook/preview-web/dist/esm/renderDocs.js"));case 4:_context2.sent.renderDocs(this.story,this.context,this.canvasElement,(function(){return _this2.channel.emit(core_events_dist_esm.DOCS_RENDERED,_this2.id)}));case 6:case"end":return _context2.stop()}}),_callee2,this)}))),function render(){return _render.apply(this,arguments)})},{key:"rerender",value:(_rerender=DocsRender_asyncToGenerator(regeneratorRuntime.mark((function _callee3(isGlobals){var _global$FEATURES2;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(null!==(_global$FEATURES2=window_default().FEATURES)&&void 0!==_global$FEATURES2&&_global$FEATURES2.modernInlineRender&&!isGlobals){_context3.next=3;break}return _context3.next=3,this.render();case 3:case"end":return _context3.stop()}}),_callee3,this)}))),function rerender(_x3){return _rerender.apply(this,arguments)})},{key:"teardown",value:(_teardown=DocsRender_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _args4=arguments;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if((_args4.length>0&&void 0!==_args4[0]?_args4[0]:{}).viewModeChanged&&this.canvasElement){_context4.next=3;break}return _context4.abrupt("return");case 3:return _context4.next=5,__webpack_require__.e(491).then(__webpack_require__.bind(__webpack_require__,"../../node_modules/@storybook/preview-web/dist/esm/renderDocs.js"));case 5:_context4.sent.unmountDocs(this.canvasElement);case 7:case"end":return _context4.stop()}}),_callee4,this)}))),function teardown(){return _teardown.apply(this,arguments)})}],[{key:"fromStoryRender",value:function fromStoryRender(storyRender){return new DocsRender(storyRender.channel,storyRender.store,storyRender.id,storyRender.story)}}]),DocsRender}();function PreviewWeb_typeof(obj){return PreviewWeb_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PreviewWeb_typeof(obj)}function PreviewWeb_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PreviewWeb_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PreviewWeb_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PreviewWeb_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function PreviewWeb_taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function PreviewWeb_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===PreviewWeb_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}DocsRender.displayName="DocsRender";var globalWindow=window_default().window;var PreviewWeb=function(_Preview){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(PreviewWeb,_Preview);var _extract,_teardownRender,_renderSelection,_onPreloadStories,_onUpdateArgs,_onUpdateGlobals,_onStoriesChanged,_onGetProjectAnnotationsChanged,_selectSpecifiedStory,_setInitialGlobals,_super=_createSuper(PreviewWeb);function PreviewWeb(){var _this;return function PreviewWeb_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PreviewWeb),(_this=_super.call(this)).urlStore=void 0,_this.view=void 0,_this.previewEntryError=void 0,_this.currentSelection=void 0,_this.currentRender=void 0,_this.view=new WebView,_this.urlStore=new UrlStore,_this.storyStore.getSelection=browser_default()((function(){return _this.urlStore.selection}),(0,esm.C)(PreviewWeb_templateObject||(PreviewWeb_templateObject=PreviewWeb_taggedTemplateLiteral(["\n        `__STORYBOOK_STORY_STORE__.getSelection()` is deprecated and will be removed in 7.0.\n  \n        To get the current selection, use the `useStoryContext()` hook from `@storybook/addons`.\n      "],["\n        \\`__STORYBOOK_STORY_STORE__.getSelection()\\` is deprecated and will be removed in 7.0.\n  \n        To get the current selection, use the \\`useStoryContext()\\` hook from \\`@storybook/addons\\`.\n      "])))),_this}return function PreviewWeb_createClass(Constructor,protoProps,staticProps){return protoProps&&PreviewWeb_defineProperties(Constructor.prototype,protoProps),staticProps&&PreviewWeb_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PreviewWeb,[{key:"setupListeners",value:function setupListeners(){_get(_getPrototypeOf(PreviewWeb.prototype),"setupListeners",this).call(this),globalWindow.onkeydown=this.onKeydown.bind(this),this.channel.on(core_events_dist_esm.SET_CURRENT_STORY,this.onSetCurrentStory.bind(this)),this.channel.on(core_events_dist_esm.UPDATE_QUERY_PARAMS,this.onUpdateQueryParams.bind(this)),this.channel.on(core_events_dist_esm.PRELOAD_STORIES,this.onPreloadStories.bind(this))}},{key:"initializeWithProjectAnnotations",value:function initializeWithProjectAnnotations(projectAnnotations){var _this2=this;return _get(_getPrototypeOf(PreviewWeb.prototype),"initializeWithProjectAnnotations",this).call(this,projectAnnotations).then((function(){return _this2.setInitialGlobals()}))}},{key:"setInitialGlobals",value:(_setInitialGlobals=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref,globals;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_ref=this.urlStore.selectionSpecifier||{},(globals=_ref.globals)&&this.storyStore.globals.updateFromPersisted(globals),this.emitGlobals();case 3:case"end":return _context.stop()}}),_callee,this)}))),function setInitialGlobals(){return _setInitialGlobals.apply(this,arguments)})},{key:"initializeWithStoryIndex",value:function initializeWithStoryIndex(storyIndex){var _this3=this;return _get(_getPrototypeOf(PreviewWeb.prototype),"initializeWithStoryIndex",this).call(this,storyIndex).then((function(){var _global$FEATURES;return null!==(_global$FEATURES=window_default().FEATURES)&&void 0!==_global$FEATURES&&_global$FEATURES.storyStoreV7||_this3.channel.emit(core_events_dist_esm.SET_STORIES,_this3.storyStore.getSetStoriesPayload()),_this3.selectSpecifiedStory()}))}},{key:"selectSpecifiedStory",value:(_selectSpecifiedStory=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$urlStore$select,storySpecifier,viewMode,args,storyId;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(this.urlStore.selectionSpecifier){_context2.next=3;break}return this.renderMissingStory(),_context2.abrupt("return");case 3:if(_this$urlStore$select=this.urlStore.selectionSpecifier,storySpecifier=_this$urlStore$select.storySpecifier,viewMode=_this$urlStore$select.viewMode,args=_this$urlStore$select.args,storyId=this.storyStore.storyIndex.storyIdFromSpecifier(storySpecifier)){_context2.next=8;break}return"*"===storySpecifier?this.renderStoryLoadingException(storySpecifier,new Error((0,esm.C)(PreviewWeb_templateObject2||(PreviewWeb_templateObject2=PreviewWeb_taggedTemplateLiteral(["\n            Couldn't find any stories in your Storybook.\n            - Please check your stories field of your main.js config.\n            - Also check the browser console and terminal for error messages.\n          "]))))):this.renderStoryLoadingException(storySpecifier,new Error((0,esm.C)(_templateObject3||(_templateObject3=PreviewWeb_taggedTemplateLiteral(["\n            Couldn't find story matching '","'.\n            - Are you sure a story with that id exists?\n            - Please check your stories field of your main.js config.\n            - Also check the browser console and terminal for error messages.\n          "])),storySpecifier))),_context2.abrupt("return");case 8:return this.urlStore.setSelection({storyId,viewMode}),this.channel.emit(core_events_dist_esm.STORY_SPECIFIED,this.urlStore.selection),this.channel.emit(core_events_dist_esm.CURRENT_STORY_WAS_SET,this.urlStore.selection),_context2.next=13,this.renderSelection({persistedArgs:args});case 13:case"end":return _context2.stop()}}),_callee2,this)}))),function selectSpecifiedStory(){return _selectSpecifiedStory.apply(this,arguments)})},{key:"onGetProjectAnnotationsChanged",value:(_onGetProjectAnnotationsChanged=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref2){var getProjectAnnotations;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return getProjectAnnotations=_ref2.getProjectAnnotations,_context3.next=3,_get(_getPrototypeOf(PreviewWeb.prototype),"onGetProjectAnnotationsChanged",this).call(this,{getProjectAnnotations});case 3:this.renderSelection();case 4:case"end":return _context3.stop()}}),_callee3,this)}))),function onGetProjectAnnotationsChanged(_x){return _onGetProjectAnnotationsChanged.apply(this,arguments)})},{key:"onStoriesChanged",value:(_onStoriesChanged=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee4(_ref3){var _global$FEATURES2,importFn,storyIndex;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(importFn=_ref3.importFn,storyIndex=_ref3.storyIndex,_get(_getPrototypeOf(PreviewWeb.prototype),"onStoriesChanged",this).call(this,{importFn,storyIndex}),null!==(_global$FEATURES2=window_default().FEATURES)&&void 0!==_global$FEATURES2&&_global$FEATURES2.storyStoreV7){_context4.next=9;break}return _context4.t0=this.channel,_context4.t1=core_events_dist_esm.SET_STORIES,_context4.next=7,this.storyStore.getSetStoriesPayload();case 7:_context4.t2=_context4.sent,_context4.t0.emit.call(_context4.t0,_context4.t1,_context4.t2);case 9:if(!this.urlStore.selection){_context4.next=14;break}return _context4.next=12,this.renderSelection();case 12:_context4.next=16;break;case 14:return _context4.next=16,this.selectSpecifiedStory();case 16:case"end":return _context4.stop()}}),_callee4,this)}))),function onStoriesChanged(_x2){return _onStoriesChanged.apply(this,arguments)})},{key:"onKeydown",value:function onKeydown(event){var _this$currentRender;if(!(null!==(_this$currentRender=this.currentRender)&&void 0!==_this$currentRender&&_this$currentRender.disableKeyListeners||function focusInInput(event){var target=event.target;return/input|textarea/i.test(target.tagName)||null!==target.getAttribute("contenteditable")}(event))){var altKey=event.altKey,ctrlKey=event.ctrlKey,metaKey=event.metaKey,shiftKey=event.shiftKey,key=event.key,code=event.code,keyCode=event.keyCode;this.channel.emit(core_events_dist_esm.PREVIEW_KEYDOWN,{event:{altKey,ctrlKey,metaKey,shiftKey,key,code,keyCode}})}}},{key:"onSetCurrentStory",value:function onSetCurrentStory(selection){this.urlStore.setSelection(Object.assign({viewMode:"story"},selection)),this.channel.emit(core_events_dist_esm.CURRENT_STORY_WAS_SET,this.urlStore.selection),this.renderSelection()}},{key:"onUpdateQueryParams",value:function onUpdateQueryParams(queryParams){this.urlStore.setQueryParams(queryParams)}},{key:"onUpdateGlobals",value:(_onUpdateGlobals=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee5(_ref4){var globals;return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(globals=_ref4.globals,_get(_getPrototypeOf(PreviewWeb.prototype),"onUpdateGlobals",this).call(this,{globals}),!(this.currentRender instanceof DocsRender)){_context5.next=5;break}return _context5.next=5,this.currentRender.rerender(!0);case 5:case"end":return _context5.stop()}}),_callee5,this)}))),function onUpdateGlobals(_x3){return _onUpdateGlobals.apply(this,arguments)})},{key:"onUpdateArgs",value:(_onUpdateArgs=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee6(_ref5){var storyId,updatedArgs;return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(storyId=_ref5.storyId,updatedArgs=_ref5.updatedArgs,_get(_getPrototypeOf(PreviewWeb.prototype),"onUpdateArgs",this).call(this,{storyId,updatedArgs}),!(this.currentRender instanceof DocsRender)){_context6.next=5;break}return _context6.next=5,this.currentRender.rerender(!1);case 5:case"end":return _context6.stop()}}),_callee6,this)}))),function onUpdateArgs(_x4){return _onUpdateArgs.apply(this,arguments)})},{key:"onPreloadStories",value:(_onPreloadStories=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee7(ids){var _this4=this;return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,Promise.all(ids.map((function(id){return _this4.storyStore.loadStory({storyId:id})})));case 2:case"end":return _context7.stop()}}),_callee7)}))),function onPreloadStories(_x5){return _onPreloadStories.apply(this,arguments)})},{key:"renderSelection",value:(_renderSelection=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var _this$currentSelectio,_this$currentSelectio2,_lastRender,_global$FEATURES3,_ref6,persistedArgs,selection,storyId,storyIdChanged,viewModeChanged,lastSelection,lastRender,storyRender,implementationChanged,_storyRender$context,parameters,initialArgs,argTypes,args,_this5=this,_args8=arguments;return regeneratorRuntime.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(_ref6=_args8.length>0&&void 0!==_args8[0]?_args8[0]:{},persistedArgs=_ref6.persistedArgs,selection=this.urlStore.selection){_context8.next=4;break}throw new Error("Cannot render story as no selection was made");case 4:if(storyId=selection.storyId,storyIdChanged=(null===(_this$currentSelectio=this.currentSelection)||void 0===_this$currentSelectio?void 0:_this$currentSelectio.storyId)!==storyId,viewModeChanged=(null===(_this$currentSelectio2=this.currentSelection)||void 0===_this$currentSelectio2?void 0:_this$currentSelectio2.viewMode)!==selection.viewMode,"story"===selection.viewMode?this.view.showPreparingStory({immediate:viewModeChanged}):this.view.showPreparingDocs(),lastSelection=this.currentSelection,lastRender=this.currentRender,null===(_lastRender=lastRender)||void 0===_lastRender||!_lastRender.isPreparing()){_context8.next=14;break}return _context8.next=13,this.teardownRender(lastRender);case 13:lastRender=null;case 14:return storyRender=new StoryRender(this.channel,this.storyStore,(function(){return _this5.view.showStoryDuringRender(),_this5.renderToDOM.apply(_this5,arguments)}),this.mainStoryCallbacks(storyId),storyId,"story"),this.currentSelection=selection,this.currentRender=storyRender,_context8.prev=17,_context8.next=20,storyRender.prepare();case 20:_context8.next=29;break;case 22:if(_context8.prev=22,_context8.t0=_context8.catch(17),_context8.t0===PREPARE_ABORTED){_context8.next=28;break}return _context8.next=27,this.teardownRender(lastRender);case 27:this.renderStoryLoadingException(storyId,_context8.t0);case 28:return _context8.abrupt("return");case 29:if(implementationChanged=!storyIdChanged&&!storyRender.isEqual(lastRender),persistedArgs&&this.storyStore.args.updateFromPersisted(storyRender.story,persistedArgs),_storyRender$context=storyRender.context(),parameters=_storyRender$context.parameters,initialArgs=_storyRender$context.initialArgs,argTypes=_storyRender$context.argTypes,args=_storyRender$context.args,!lastRender||storyIdChanged||implementationChanged||viewModeChanged){_context8.next=37;break}return this.currentRender=lastRender,this.channel.emit(core_events_dist_esm.STORY_UNCHANGED,storyId),this.view.showMain(),_context8.abrupt("return");case 37:return _context8.next=39,this.teardownRender(lastRender,{viewModeChanged});case 39:lastSelection&&(storyIdChanged||viewModeChanged)&&this.channel.emit(core_events_dist_esm.STORY_CHANGED,storyId),null!==(_global$FEATURES3=window_default().FEATURES)&&void 0!==_global$FEATURES3&&_global$FEATURES3.storyStoreV7&&this.channel.emit(core_events_dist_esm.STORY_PREPARED,{id:storyId,parameters,initialArgs,argTypes,args}),(implementationChanged||persistedArgs)&&this.channel.emit(core_events_dist_esm.STORY_ARGS_UPDATED,{storyId,args}),"docs"===selection.viewMode||parameters.docsOnly?(this.currentRender=DocsRender.fromStoryRender(storyRender),this.currentRender.renderToElement(this.view.prepareForDocs(),this.renderStoryToElement.bind(this))):(this.storyRenders.push(storyRender),this.currentRender.renderToElement(this.view.prepareForStory(storyRender.story)));case 43:case"end":return _context8.stop()}}),_callee8,this,[[17,22]])}))),function renderSelection(){return _renderSelection.apply(this,arguments)})},{key:"renderStoryToElement",value:function renderStoryToElement(story,element){var _this6=this,render=new StoryRender(this.channel,this.storyStore,this.renderToDOM,this.inlineStoryCallbacks(story.id),story.id,"docs",story);return render.renderToElement(element),this.storyRenders.push(render),PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){return regeneratorRuntime.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,_this6.teardownRender(render);case 2:case"end":return _context9.stop()}}),_callee9)})))}},{key:"teardownRender",value:(_teardownRender=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee10(render){var _ref8,viewModeChanged,_args10=arguments;return regeneratorRuntime.wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _ref8=_args10.length>1&&void 0!==_args10[1]?_args10[1]:{},viewModeChanged=_ref8.viewModeChanged,this.storyRenders=this.storyRenders.filter((function(r){return r!==render})),_context10.next=4,null==render?void 0:render.teardown({viewModeChanged});case 4:case"end":return _context10.stop()}}),_callee10,this)}))),function teardownRender(_x6){return _teardownRender.apply(this,arguments)})},{key:"extract",value:(_extract=PreviewWeb_asyncToGenerator(regeneratorRuntime.mark((function _callee11(options){var _global$FEATURES4;return regeneratorRuntime.wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(!this.previewEntryError){_context11.next=2;break}throw this.previewEntryError;case 2:if(this.storyStore.projectAnnotations){_context11.next=4;break}throw new Error((0,esm.C)(_templateObject4||(_templateObject4=PreviewWeb_taggedTemplateLiteral(["Failed to initialize Storybook.\n      \n      Do you have an error in your `preview.js`? Check your Storybook's browser console for errors."],["Failed to initialize Storybook.\n      \n      Do you have an error in your \\`preview.js\\`? Check your Storybook's browser console for errors."]))));case 4:if(null===(_global$FEATURES4=window_default().FEATURES)||void 0===_global$FEATURES4||!_global$FEATURES4.storyStoreV7){_context11.next=7;break}return _context11.next=7,this.storyStore.cacheAllCSFFiles();case 7:return _context11.abrupt("return",this.storyStore.extract(options));case 8:case"end":return _context11.stop()}}),_callee11,this)}))),function extract(_x7){return _extract.apply(this,arguments)})},{key:"mainStoryCallbacks",value:function mainStoryCallbacks(storyId){var _this7=this;return{showMain:function showMain(){return _this7.view.showMain()},showError:function showError(err){return _this7.renderError(storyId,err)},showException:function showException(err){return _this7.renderException(storyId,err)}}}},{key:"inlineStoryCallbacks",value:function inlineStoryCallbacks(storyId){return{showMain:function showMain(){},showError:function showError(err){return dist_esm.kg.error("Error rendering docs story (".concat(storyId,")"),err)},showException:function showException(err){return dist_esm.kg.error("Error rendering docs story (".concat(storyId,")"),err)}}}},{key:"renderPreviewEntryError",value:function renderPreviewEntryError(reason,err){_get(_getPrototypeOf(PreviewWeb.prototype),"renderPreviewEntryError",this).call(this,reason,err),this.view.showErrorDisplay(err)}},{key:"renderMissingStory",value:function renderMissingStory(){this.view.showNoPreview(),this.channel.emit(core_events_dist_esm.STORY_MISSING)}},{key:"renderStoryLoadingException",value:function renderStoryLoadingException(storySpecifier,err){dist_esm.kg.error("Unable to load story '".concat(storySpecifier,"':")),dist_esm.kg.error(err),this.view.showErrorDisplay(err),this.channel.emit(core_events_dist_esm.STORY_MISSING,storySpecifier)}},{key:"renderException",value:function renderException(storyId,err){this.channel.emit(core_events_dist_esm.STORY_THREW_EXCEPTION,err),this.channel.emit(core_events_dist_esm.STORY_RENDER_PHASE_CHANGED,{newPhase:"errored",storyId}),err!==core_events_dist_esm.IGNORED_EXCEPTION&&(this.view.showErrorDisplay(err),dist_esm.kg.error("Error rendering story '".concat(storyId,"':")),dist_esm.kg.error(err))}},{key:"renderError",value:function renderError(storyId,_ref9){var title=_ref9.title,description=_ref9.description;dist_esm.kg.error("Error rendering story ".concat(title,": ").concat(description)),this.channel.emit(core_events_dist_esm.STORY_ERRORED,{title,description}),this.channel.emit(core_events_dist_esm.STORY_RENDER_PHASE_CHANGED,{newPhase:"errored",storyId}),this.view.showErrorDisplay({message:title,stack:description})}}]),PreviewWeb}(Preview),channels_dist_esm=(__webpack_require__("../../node_modules/core-js/modules/es.object.from-entries.js"),__webpack_require__("../../node_modules/core-js/modules/es.number.is-integer.js"),__webpack_require__("../../node_modules/core-js/modules/web.url.js"),__webpack_require__("../../node_modules/core-js/modules/web.url-search-params.js"),__webpack_require__("../../node_modules/@storybook/channels/dist/esm/index.js")),telejson_dist_esm=__webpack_require__("../../node_modules/telejson/dist/esm/index.js");function esm_toConsumableArray(arr){return function esm_arrayWithoutHoles(arr){if(Array.isArray(arr))return esm_arrayLikeToArray(arr)}(arr)||esm_iterableToArray(arr)||esm_unsupportedIterableToArray(arr)||function esm_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function esm_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function esm_slicedToArray(arr,i){return esm_arrayWithHoles(arr)||function esm_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||esm_unsupportedIterableToArray(arr,i)||esm_nonIterableRest()}function esm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function esm_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return esm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?esm_arrayLikeToArray(o,minLen):void 0}}function esm_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function esm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function esm_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var esm_globalWindow=window_default().window,esm_document=window_default().document,esm_location=window_default().location,KEY="storybook-channel",defaultEventOptions={allowFunction:!0,maxDepth:25},PostmsgTransport=function(){function PostmsgTransport(config){if(function esm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PostmsgTransport),this.config=config,this.buffer=void 0,this.handler=void 0,this.connected=void 0,this.buffer=[],this.handler=null,esm_globalWindow.addEventListener("message",this.handleEvent.bind(this),!1),"manager"!==config.page&&"preview"!==config.page)throw new Error('postmsg-channel: "config.page" cannot be "'.concat(config.page,'"'))}return function esm_createClass(Constructor,protoProps,staticProps){return protoProps&&esm_defineProperties(Constructor.prototype,protoProps),staticProps&&esm_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PostmsgTransport,[{key:"setHandler",value:function setHandler(handler){var _this=this;this.handler=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];handler.apply(_this,args),!_this.connected&&_this.getLocalFrame().length&&(_this.flush(),_this.connected=!0)}}},{key:"send",value:function send(event,options){var _this2=this,_ref=options||{},target=_ref.target,allowRegExp=_ref.allowRegExp,allowFunction=_ref.allowFunction,allowSymbol=_ref.allowSymbol,allowDate=_ref.allowDate,allowUndefined=_ref.allowUndefined,allowClass=_ref.allowClass,maxDepth=_ref.maxDepth,space=_ref.space,lazyEval=_ref.lazyEval,eventOptions=Object.fromEntries(Object.entries({allowRegExp,allowFunction,allowSymbol,allowDate,allowUndefined,allowClass,maxDepth,space,lazyEval}).filter((function(_ref2){var _ref3=esm_slicedToArray(_ref2,2);_ref3[0];return void 0!==_ref3[1]}))),stringifyOptions=Object.assign({},defaultEventOptions,window_default().CHANNEL_OPTIONS||{},eventOptions);options&&Number.isInteger(options.depth)&&(stringifyOptions.maxDepth=options.depth);var frames=this.getFrames(target),query=lib_default().parse(esm_location.search,{ignoreQueryPrefix:!0}),data=(0,telejson_dist_esm.Pz)({key:KEY,event,refId:query.refId},stringifyOptions);return frames.length?(this.buffer.length&&this.flush(),frames.forEach((function(f){try{f.postMessage(data,"*")}catch(e){console.error("sending over postmessage fail")}})),Promise.resolve(null)):new Promise((function(resolve,reject){_this2.buffer.push({event,resolve,reject})}))}},{key:"flush",value:function flush(){var _this3=this,buffer=this.buffer;this.buffer=[],buffer.forEach((function(item){_this3.send(item.event).then(item.resolve).catch(item.reject)}))}},{key:"getFrames",value:function getFrames(target){if("manager"===this.config.page){var list=esm_toConsumableArray(esm_document.querySelectorAll("iframe[data-is-storybook][data-is-loaded]")).filter((function(e){try{return!!e.contentWindow&&void 0!==e.dataset.isStorybook&&e.id===target}catch(er){return!1}})).map((function(e){return e.contentWindow}));return list.length?list:this.getCurrentFrames()}return esm_globalWindow&&esm_globalWindow.parent&&esm_globalWindow.parent!==esm_globalWindow?[esm_globalWindow.parent]:[]}},{key:"getCurrentFrames",value:function getCurrentFrames(){return"manager"===this.config.page?esm_toConsumableArray(esm_document.querySelectorAll('[data-is-storybook="true"]')).map((function(e){return e.contentWindow})):esm_globalWindow&&esm_globalWindow.parent?[esm_globalWindow.parent]:[]}},{key:"getLocalFrame",value:function getLocalFrame(){return"manager"===this.config.page?esm_toConsumableArray(esm_document.querySelectorAll("#storybook-preview-iframe")).map((function(e){return e.contentWindow})):esm_globalWindow&&esm_globalWindow.parent?[esm_globalWindow.parent]:[]}},{key:"handleEvent",value:function handleEvent(rawEvent){try{var data=rawEvent.data,_ref4="string"==typeof data&&(0,telejson_dist_esm.pM)(data)?(0,telejson_dist_esm.Qc)(data,window_default().CHANNEL_OPTIONS||{}):data,key=_ref4.key,event=_ref4.event,refId=_ref4.refId;if(key===KEY){var pageString="manager"===this.config.page?'<span style="color: #37D5D3; background: black"> manager </span>':'<span style="color: #1EA7FD; background: black"> preview </span>',eventString=Object.values(core_events_dist_esm).includes(event.type)?'<span style="color: #FF4785">'.concat(event.type,"</span>"):'<span style="color: #FFAE00">'.concat(event.type,"</span>");if(refId&&(event.refId=refId),event.source="preview"===this.config.page?rawEvent.origin:getEventSourceUrl(rawEvent),!event.source)return void dist_esm.IC.error("".concat(pageString," received ").concat(eventString," but was unable to determine the source of the event"));var message="".concat(pageString," received ").concat(eventString," (").concat(data.length,")");dist_esm.IC.debug.apply(dist_esm.IC,[esm_location.origin!==event.source?message:"".concat(message,' <span style="color: gray">(on ').concat(esm_location.origin," from ").concat(event.source,")</span>")].concat(esm_toConsumableArray(event.args))),this.handler(event)}}catch(error){dist_esm.kg.error(error)}}}]),PostmsgTransport}(),getEventSourceUrl=function getEventSourceUrl(event){var _frames$filter=esm_toConsumableArray(esm_document.querySelectorAll("iframe[data-is-storybook]")).filter((function(element){try{return element.contentWindow===event.source}catch(err){}var origin,src=element.getAttribute("src");try{origin=new URL(src,esm_document.location).origin}catch(err){return!1}return origin===event.origin})),_frames$filter2=function _toArray(arr){return esm_arrayWithHoles(arr)||esm_iterableToArray(arr)||esm_unsupportedIterableToArray(arr)||esm_nonIterableRest()}(_frames$filter),frame=_frames$filter2[0],remainder=_frames$filter2.slice(1);if(frame&&0===remainder.length){var src=frame.getAttribute("src"),_URL2=new URL(src,esm_document.location),protocol=_URL2.protocol,host=_URL2.host,pathname=_URL2.pathname;return"".concat(protocol,"//").concat(host).concat(pathname)}return remainder.length>0&&dist_esm.kg.error("found multiple candidates for event source"),null};function createChannel(_ref5){var page=_ref5.page,transport=new PostmsgTransport({page});return new channels_dist_esm.Z({transport})}__webpack_require__("../../node_modules/core-js/modules/es.map.js");function executeLoadable_slicedToArray(arr,i){return function executeLoadable_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function executeLoadable_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function executeLoadable_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return executeLoadable_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return executeLoadable_arrayLikeToArray(o,minLen)}(arr,i)||function executeLoadable_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function executeLoadable_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function executeLoadableForChanges(loadable,m){var _m$hot,_m$hot$data,_m$hot2,lastExportsMap=(null==m||null===(_m$hot=m.hot)||void 0===_m$hot||null===(_m$hot$data=_m$hot.data)||void 0===_m$hot$data?void 0:_m$hot$data.lastExportsMap)||new Map;null!=m&&null!==(_m$hot2=m.hot)&&void 0!==_m$hot2&&_m$hot2.dispose&&(m.hot.accept(),m.hot.dispose((function(data){data.lastExportsMap=lastExportsMap})));var exportsMap=function executeLoadable(loadable){var reqs=null;Array.isArray(loadable)?reqs=loadable:loadable.keys&&(reqs=[loadable]);var exportsMap=new Map;if(reqs)reqs.forEach((function(req){req.keys().forEach((function(filename){try{var fileExports=req(filename);exportsMap.set("function"==typeof req.resolve?req.resolve(filename):filename,fileExports)}catch(error){var errorString=error.message&&error.stack?"".concat(error.message,"\n ").concat(error.stack):error.toString();dist_esm.kg.error("Unexpected error while loading ".concat(filename,": ").concat(errorString))}}))}));else{var exported=loadable();Array.isArray(exported)&&exported.every((function(obj){return null!=obj.default}))?exportsMap=new Map(exported.map((function(fileExports,index){return["exports-map-".concat(index),fileExports]}))):exported&&dist_esm.kg.warn("Loader function passed to 'configure' should return void or an array of module exports that all contain a 'default' export. Received: ".concat(JSON.stringify(exported)))}return exportsMap}(loadable),added=new Map;Array.from(exportsMap.entries()).filter((function(_ref){return!!executeLoadable_slicedToArray(_ref,2)[1].default})).filter((function(_ref3){var _ref4=executeLoadable_slicedToArray(_ref3,2),fileName=_ref4[0],fileExports=_ref4[1];return lastExportsMap.get(fileName)!==fileExports})).forEach((function(_ref5){var _ref6=executeLoadable_slicedToArray(_ref5,2),fileName=_ref6[0],fileExports=_ref6[1];return added.set(fileName,fileExports)}));var removed=new Map;return Array.from(lastExportsMap.keys()).filter((function(fileName){return!exportsMap.has(fileName)})).forEach((function(fileName){return removed.set(fileName,lastExportsMap.get(fileName))})),lastExportsMap=exportsMap,{added,removed}}function start_slicedToArray(arr,i){return function start_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function start_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function start_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return start_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return start_arrayLikeToArray(o,minLen)}(arr,i)||function start_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function start_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var start_globalWindow=window_default().window,FEATURES=window_default().FEATURES,configureDeprecationWarning=browser_default()((function(){}),"`configure()` is deprecated and will be removed in Storybook 7.0. \nPlease use the `stories` field of `main.js` to load stories.\nRead more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-configure"),removedApi=function removedApi(name){return function(){throw new Error("@storybook/client-api:".concat(name," was removed in storyStoreV7."))}};function start(renderToDOM){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},decorateStory=_ref.decorateStory,render=_ref.render;if(start_globalWindow&&(start_globalWindow.IS_STORYBOOK=!0),null!=FEATURES&&FEATURES.storyStoreV7)return{forceReRender:removedApi("forceReRender"),getStorybook:removedApi("getStorybook"),configure:removedApi("configure"),clientApi:{addDecorator:removedApi("clientApi.addDecorator"),addParameters:removedApi("clientApi.addParameters"),clearDecorators:removedApi("clientApi.clearDecorators"),addLoader:removedApi("clientApi.addLoader"),setAddon:removedApi("clientApi.setAddon"),getStorybook:removedApi("clientApi.getStorybook"),storiesOf:removedApi("clientApi.storiesOf"),raw:removedApi("raw")}};var channel=createChannel({page:"preview"});addons_dist_esm.KP.setChannel(channel);var clientApi=new ClientApi.ti,preview=new PreviewWeb,initialized=!1,importFn=function importFn(path){return clientApi.importFn(path)};function onStoriesChanged(){var storyIndex=clientApi.getStoryIndex();preview.onStoriesChanged({storyIndex,importFn})}return clientApi.onImportFnChanged=onStoriesChanged,clientApi.storyStore=preview.storyStore,start_globalWindow&&(start_globalWindow.__STORYBOOK_CLIENT_API__=clientApi,start_globalWindow.__STORYBOOK_ADDONS_CHANNEL__=channel,start_globalWindow.__STORYBOOK_PREVIEW__=preview,start_globalWindow.__STORYBOOK_STORY_STORE__=preview.storyStore),{forceReRender:function forceReRender(){return channel.emit(core_events_dist_esm.default.FORCE_RE_RENDER)},getStorybook:function getStorybook(){return[]},raw:function raw(){},clientApi,configure:function configure(framework,loadable,m){var showDeprecationWarning=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];showDeprecationWarning&&configureDeprecationWarning(),clientApi.addParameters({framework});var getProjectAnnotations=function getProjectAnnotations(){var _executeLoadableForCh=executeLoadableForChanges(loadable,m),added=_executeLoadableForCh.added,removed=_executeLoadableForCh.removed;return Array.from(added.entries()).forEach((function(_ref2){var _ref3=start_slicedToArray(_ref2,2),fileName=_ref3[0],fileExports=_ref3[1];return clientApi.facade.addStoriesFromExports(fileName,fileExports)})),Array.from(removed.entries()).forEach((function(_ref4){var fileName=start_slicedToArray(_ref4,1)[0];return clientApi.facade.clearFilenameExports(fileName)})),Object.assign({render},clientApi.facade.projectAnnotations,{renderToDOM,applyDecorators:decorateStory})};initialized?(getProjectAnnotations(),onStoriesChanged()):(preview.initialize({getStoryIndex:function getStoryIndex(){return clientApi.getStoryIndex()},importFn,getProjectAnnotations}),initialized=!0)}}}dist.toId,ClientApi.ti;var decorators=__webpack_require__("../../node_modules/@storybook/svelte/dist/esm/client/preview/decorators.js");window_default().window.STORYBOOK_ENV="svelte";var render=__webpack_require__("../../node_modules/@storybook/svelte/dist/esm/client/preview/render.js"),_start=start(render.A,{decorateStory:decorators.o,render:render.s}),coreConfigure=_start.configure,clientApi=_start.clientApi,forceReRender=_start.forceReRender,setAddon=clientApi.setAddon,addDecorator=clientApi.addDecorator,addParameters=clientApi.addParameters,getStorybook=(clientApi.clearDecorators,clientApi.getStorybook),raw=clientApi.raw,storiesOf=function storiesOf(kind,m){return clientApi.storiesOf(kind,m).addParameters({framework:"svelte"})},configure=function configure(loadable,m){return coreConfigure("svelte",loadable,m)};(module=__webpack_require__.hmd(module))&&module.hot},"../../node_modules/@storybook/svelte/dist/esm/client/preview/config-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var config_namespaceObject={};__webpack_require__.r(config_namespaceObject),__webpack_require__.d(config_namespaceObject,{decorateStory:()=>decorators.o,parameters:()=>parameters,render:()=>render.s,renderToDOM:()=>render.A});var ClientApi=__webpack_require__("../../node_modules/@storybook/client-api/dist/esm/ClientApi.js"),render=__webpack_require__("../../node_modules/@storybook/svelte/dist/esm/client/preview/render.js"),decorators=__webpack_require__("../../node_modules/@storybook/svelte/dist/esm/client/preview/decorators.js"),parameters={framework:"svelte"};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(config_namespaceObject).forEach((function(key){var value=config_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"../../node_modules/@storybook/svelte/dist/esm/client/preview/decorators.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>decorateStory});__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.assign.js");var _storybook_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@storybook/store/dist/esm/decorators.js"),_storybook_svelte_templates_SlotDecorator_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@storybook/svelte/templates/SlotDecorator.svelte");function unWrap(obj){return obj&&obj.default?obj.default:obj}function prepareStory(context,story,originalStory){var result=unWrap(story);if(function isSvelteComponent(obj){return obj.prototype&&void 0!==obj.prototype.$destroy}(result)&&(result={Component:result}),originalStory)result={Component:_storybook_svelte_templates_SlotDecorator_svelte__WEBPACK_IMPORTED_MODULE_2__.Z,props:{decorator:unWrap(result.Component),decoratorProps:result.props,component:unWrap(originalStory.Component),props:originalStory.props,on:originalStory.on}};else{var cpn=result.Component;cpn||(cpn=context.component),result.Component=unWrap(cpn)}return result}function decorateStory(storyFn,decorators){return decorators.reduce((function(previousStoryFn,decorator){return function(context){var story,decoratedStory=decorator((function(update){return story=previousStoryFn(Object.assign({},context,(0,_storybook_store__WEBPACK_IMPORTED_MODULE_3__.n0)(update)))}),context);return story||(story=previousStoryFn(context)),decoratedStory&&decoratedStory!==story?prepareStory(context,decoratedStory,story):story}}),(function(context){return prepareStory(context,storyFn(context))}))}},"../../node_modules/@storybook/svelte/dist/esm/client/preview/render.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>render,A:()=>renderToDOM});__webpack_require__("../../node_modules/core-js/modules/es.function.name.js");var global_window=__webpack_require__("../../node_modules/global/window.js"),window_default=__webpack_require__.n(global_window),internal=__webpack_require__("../../node_modules/svelte/internal/index.mjs"),SlotDecorator_svelte=__webpack_require__("../../node_modules/@storybook/svelte/templates/SlotDecorator.svelte"),esm=__webpack_require__("../../node_modules/ts-dedent/esm/index.js");function create_fragment(ctx){let slotdecorator,current;return slotdecorator=new SlotDecorator_svelte.Z({props:{decorator:ctx[3],decoratorProps:ctx[4],component:ctx[0],props:ctx[1],on:ctx[2]}}),{c(){(0,internal.YCL)(slotdecorator.$$.fragment)},m(target,anchor){(0,internal.yef)(slotdecorator,target,anchor),current=!0},p:internal.ZTd,i(local){current||((0,internal.Ui)(slotdecorator.$$.fragment,local),current=!0)},o(local){(0,internal.etI)(slotdecorator.$$.fragment,local),current=!1},d(detaching){(0,internal.vpE)(slotdecorator,detaching)}}}function instance($$self,$$props,$$invalidate){let{name}=$$props,{kind}=$$props,{storyFn}=$$props,{showError}=$$props;const{Component,props={},on,Wrapper,WrapperData={}}=storyFn();return Component||showError({title:`Expecting a Svelte component from the story: "${name}" of "${kind}".`,description:esm.C`
        Did you forget to return the Svelte component configuration from the story?
        Use "() => ({ Component: YourComponent, data: {} })"
        when defining the story.
      `}),$$self.$$set=$$props=>{"name"in $$props&&$$invalidate(5,name=$$props.name),"kind"in $$props&&$$invalidate(6,kind=$$props.kind),"storyFn"in $$props&&$$invalidate(7,storyFn=$$props.storyFn),"showError"in $$props&&$$invalidate(8,showError=$$props.showError)},[Component,props,on,Wrapper,WrapperData,name,kind,storyFn,showError]}class PreviewRender extends internal.f_C{constructor(options){super(),(0,internal.S1n)(this,options,instance,create_fragment,internal.N8,{name:5,kind:6,storyFn:7,showError:8})}}const PreviewRender_svelte=PreviewRender;PreviewRender.__docgen={version:3,name:"PreviewRender.svelte",data:[{visibility:"public",description:null,keywords:[],name:"name",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"kind",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"storyFn",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}},{visibility:"public",description:null,keywords:[],name:"showError",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"any",type:"any"}}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};var render_document=window_default().document,previousComponent=null;function renderToDOM(_ref,domElement){var storyFn=_ref.storyFn,kind=_ref.kind,name=_ref.name,showMain=_ref.showMain,showError=_ref.showError;!function cleanUpPreviousStory(){previousComponent&&(previousComponent.$destroy(),previousComponent=null)}();var target=render_document.getElementById("root");target.innerHTML="",previousComponent=new PreviewRender_svelte({target,props:{storyFn,name,kind,showError}}),showMain()}var render=function render(args,context){var id=context.id,Component=context.component;if(!Component)throw new Error("Unable to render story ".concat(id," as the component annotation is missing from the default export"));return{Component,props:args}}},"../../node_modules/airbnb-js-shims/index.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/airbnb-js-shims/target/es5.js")},"../../node_modules/airbnb-js-shims/target/es2015.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/es6-shim/es6-shim.js"),__webpack_require__("../../node_modules/function.prototype.name/shim.js")(),__webpack_require__("../../node_modules/airbnb-js-shims/target/es2016.js")},"../../node_modules/airbnb-js-shims/target/es2016.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/array-includes/shim.js")(),__webpack_require__("../../node_modules/airbnb-js-shims/target/es2017.js")},"../../node_modules/airbnb-js-shims/target/es2017.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/object.values/shim.js")(),__webpack_require__("../../node_modules/object.entries/shim.js")(),__webpack_require__("../../node_modules/string.prototype.padstart/shim.js")(),__webpack_require__("../../node_modules/string.prototype.padend/shim.js")(),__webpack_require__("../../node_modules/object.getownpropertydescriptors/shim.js")(),__webpack_require__("../../node_modules/airbnb-js-shims/target/es2018.js")},"../../node_modules/airbnb-js-shims/target/es2018.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";"function"==typeof Promise&&__webpack_require__("../../node_modules/promise.prototype.finally/auto.js"),__webpack_require__("../../node_modules/airbnb-js-shims/target/es2019.js")},"../../node_modules/airbnb-js-shims/target/es2019.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/array.prototype.flat/auto.js"),__webpack_require__("../../node_modules/array.prototype.flatmap/auto.js"),__webpack_require__("../../node_modules/symbol.prototype.description/auto.js"),__webpack_require__("../../node_modules/object.fromentries/auto.js"),__webpack_require__("../../node_modules/airbnb-js-shims/target/es2020.js")},"../../node_modules/airbnb-js-shims/target/es2020.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/string.prototype.matchall/auto.js"),__webpack_require__("../../node_modules/globalthis/auto.js"),__webpack_require__("../../node_modules/promise.allsettled/auto.js")},"../../node_modules/airbnb-js-shims/target/es5.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/es5-shim/es5-shim.js"),__webpack_require__("../../node_modules/es5-shim/es5-sham.js"),__webpack_require__("../../node_modules/airbnb-js-shims/target/es2015.js")},"../../node_modules/ansi-to-html/lib/ansi_to_html.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createForOfIteratorHelper(o){if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))){var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var entities=__webpack_require__("../../node_modules/entities/lib/index.js"),defaults={fg:"#FFF",bg:"#000",newline:!1,escapeXML:!1,stream:!1,colors:function getDefaultColors(){var colors={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return range(0,5).forEach((function(red){range(0,5).forEach((function(green){range(0,5).forEach((function(blue){return function setStyleColor(red,green,blue,colors){var r=red>0?40*red+55:0,g=green>0?40*green+55:0,b=blue>0?40*blue+55:0;colors[16+36*red+6*green+blue]=function toColorHexString(ref){var _step,results=[],_iterator=_createForOfIteratorHelper(ref);try{for(_iterator.s();!(_step=_iterator.n()).done;){var r=_step.value;results.push(toHexString(r))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return"#"+results.join("")}([r,g,b])}(red,green,blue,colors)}))}))})),range(0,23).forEach((function(gray){var c=gray+232,l=toHexString(10*gray+8);colors[c]="#"+l+l+l})),colors}()};function toHexString(num){for(var str=num.toString(16);str.length<2;)str="0"+str;return str}function generateOutput(stack,token,data,options){var result;return"text"===token?result=function pushText(text,options){if(options.escapeXML)return entities.encodeXML(text);return text}(data,options):"display"===token?result=function handleDisplay(stack,code,options){code=parseInt(code,10);var result,codeMap={"-1":function _(){return"<br/>"},0:function _(){return stack.length&&resetStyles(stack)},1:function _(){return pushTag(stack,"b")},3:function _(){return pushTag(stack,"i")},4:function _(){return pushTag(stack,"u")},8:function _(){return pushStyle(stack,"display:none")},9:function _(){return pushTag(stack,"strike")},22:function _(){return pushStyle(stack,"font-weight:normal;text-decoration:none;font-style:normal")},23:function _(){return closeTag(stack,"i")},24:function _(){return closeTag(stack,"u")},39:function _(){return pushForegroundColor(stack,options.fg)},49:function _(){return pushBackgroundColor(stack,options.bg)},53:function _(){return pushStyle(stack,"text-decoration:overline")}};codeMap[code]?result=codeMap[code]():4<code&&code<7?result=pushTag(stack,"blink"):29<code&&code<38?result=pushForegroundColor(stack,options.colors[code-30]):39<code&&code<48?result=pushBackgroundColor(stack,options.colors[code-40]):89<code&&code<98?result=pushForegroundColor(stack,options.colors[code-90+8]):99<code&&code<108&&(result=pushBackgroundColor(stack,options.colors[code-100+8]));return result}(stack,data,options):"xterm256"===token?result=pushForegroundColor(stack,options.colors[data]):"rgb"===token&&(result=function handleRgb(stack,data){var operation=+(data=data.substring(2).slice(0,-1)).substr(0,2),rgb=data.substring(5).split(";").map((function(value){return("0"+Number(value).toString(16)).substr(-2)})).join("");return pushStyle(stack,(38===operation?"color:#":"background-color:#")+rgb)}(stack,data)),result}function resetStyles(stack){var stackClone=stack.slice(0);return stack.length=0,stackClone.reverse().map((function(tag){return"</"+tag+">"})).join("")}function range(low,high){for(var results=[],j=low;j<=high;j++)results.push(j);return results}function categoryForCode(code){var result=null;return 0===(code=parseInt(code,10))?result="all":1===code?result="bold":2<code&&code<5?result="underline":4<code&&code<7?result="blink":8===code?result="hide":9===code?result="strike":29<code&&code<38||39===code||89<code&&code<98?result="foreground-color":(39<code&&code<48||49===code||99<code&&code<108)&&(result="background-color"),result}function pushTag(stack,tag,style){return style||(style=""),stack.push(tag),"<".concat(tag).concat(style?' style="'.concat(style,'"'):"",">")}function pushStyle(stack,style){return pushTag(stack,"span",style)}function pushForegroundColor(stack,color){return pushTag(stack,"span","color:"+color)}function pushBackgroundColor(stack,color){return pushTag(stack,"span","background-color:"+color)}function closeTag(stack,style){var last;if(stack.slice(-1)[0]===style&&(last=stack.pop()),last)return"</"+style+">"}var Filter=function(){function Filter(options){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Filter),(options=options||{}).colors&&(options.colors=Object.assign({},defaults.colors,options.colors)),this.options=Object.assign({},defaults,options),this.stack=[],this.stickyStack=[]}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Filter,[{key:"toHtml",value:function toHtml(input){var _this=this;input="string"==typeof input?[input]:input;var stack=this.stack,options=this.options,buf=[];return this.stickyStack.forEach((function(element){var output=generateOutput(stack,element.token,element.data,options);output&&buf.push(output)})),function tokenize(text,options,callback){var ansiMatch=!1;function remove(){return""}function newline(m){return options.newline?callback("display",-1):callback("text",m),""}var tokens=[{pattern:/^\x08+/,sub:remove},{pattern:/^\x1b\[[012]?K/,sub:remove},{pattern:/^\x1b\[\(B/,sub:remove},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function rgb(m){return callback("rgb",m),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function removeXterm256(m,g1){return callback("xterm256",g1),""}},{pattern:/^\n/,sub:newline},{pattern:/^\r+\n/,sub:newline},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function ansiMess(m,g1){ansiMatch=!0,0===g1.trim().length&&(g1="0");var _step2,_iterator2=_createForOfIteratorHelper(g1=g1.trimRight(";").split(";"));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var g=_step2.value;callback("display",g)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return""}},{pattern:/^\x1b\[\d?J/,sub:remove},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:remove},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:remove},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:function realText(m){return callback("text",m),""}}];function process(handler,i){i>3&&ansiMatch||(ansiMatch=!1,text=text.replace(handler.pattern,handler.sub))}var results1=[],length=text.length;outer:for(;length>0;){for(var i=0,o=0,len=tokens.length;o<len;i=++o)if(process(tokens[i],i),text.length!==length){length=text.length;continue outer}if(text.length===length)break;results1.push(0),length=text.length}return results1}(input.join(""),options,(function(token,data){var output=generateOutput(stack,token,data,options);output&&buf.push(output),options.stream&&(_this.stickyStack=function updateStickyStack(stickyStack,token,data){return"text"!==token&&(stickyStack=stickyStack.filter(function notCategory(category){return function(e){return(null===category||e.category!==category)&&"all"!==category}}(categoryForCode(data)))).push({token,data,category:categoryForCode(data)}),stickyStack}(_this.stickyStack,token,data))})),stack.length&&buf.push(resetStyles(stack)),buf.join("")}}]),Filter}();module.exports=Filter},"../../node_modules/array-includes/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ToIntegerOrInfinity=__webpack_require__("../../node_modules/es-abstract/2021/ToIntegerOrInfinity.js"),ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js"),SameValueZero=__webpack_require__("../../node_modules/es-abstract/2021/SameValueZero.js"),$isNaN=__webpack_require__("../../node_modules/es-abstract/helpers/isNaN.js"),$isFinite=__webpack_require__("../../node_modules/es-abstract/helpers/isFinite.js"),GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),isString=__webpack_require__("../../node_modules/is-string/index.js"),$charAt=callBound("String.prototype.charAt"),$indexOf=GetIntrinsic("%Array.prototype.indexOf%"),$max=GetIntrinsic("%Math.max%");module.exports=function includes(searchElement){var fromIndex=arguments.length>1?ToIntegerOrInfinity(arguments[1]):0;if($indexOf&&!$isNaN(searchElement)&&$isFinite(fromIndex)&&void 0!==searchElement)return $indexOf.apply(this,arguments)>-1;var O=ToObject(this),length=ToLength(O.length);if(0===length)return!1;for(var k=fromIndex>=0?fromIndex:$max(0,length+fromIndex);k<length;){if(SameValueZero(searchElement,isString(O)?$charAt(O,k):O[k]))return!0;k+=1}return!1}},"../../node_modules/array-includes/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/array-includes/implementation.js");module.exports=function getPolyfill(){return Array.prototype.includes&&Array(1).includes(void 0)?Array.prototype.includes:implementation}},"../../node_modules/array-includes/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),getPolyfill=__webpack_require__("../../node_modules/array-includes/polyfill.js");module.exports=function shimArrayPrototypeIncludes(){var polyfill=getPolyfill();return define(Array.prototype,{includes:polyfill},{includes:function(){return Array.prototype.includes!==polyfill}}),polyfill}},"../../node_modules/array.prototype.flat/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/array.prototype.flat/shim.js")()},"../../node_modules/array.prototype.flat/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ArraySpeciesCreate=__webpack_require__("../../node_modules/es-abstract/2021/ArraySpeciesCreate.js"),FlattenIntoArray=__webpack_require__("../../node_modules/es-abstract/2021/FlattenIntoArray.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),ToIntegerOrInfinity=__webpack_require__("../../node_modules/es-abstract/2021/ToIntegerOrInfinity.js"),ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js");module.exports=function flat(){var O=ToObject(this),sourceLen=ToLength(Get(O,"length")),depthNum=1;arguments.length>0&&void 0!==arguments[0]&&(depthNum=ToIntegerOrInfinity(arguments[0]));var A=ArraySpeciesCreate(O,0);return FlattenIntoArray(A,O,sourceLen,0,depthNum),A}},"../../node_modules/array.prototype.flat/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/array.prototype.flat/implementation.js");module.exports=function getPolyfill(){return Array.prototype.flat||implementation}},"../../node_modules/array.prototype.flat/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),shimUnscopables=__webpack_require__("../../node_modules/es-shim-unscopables/index.js"),getPolyfill=__webpack_require__("../../node_modules/array.prototype.flat/polyfill.js");module.exports=function shimFlat(){var polyfill=getPolyfill();return define(Array.prototype,{flat:polyfill},{flat:function(){return Array.prototype.flat!==polyfill}}),shimUnscopables("flat"),polyfill}},"../../node_modules/array.prototype.flatmap/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/array.prototype.flatmap/shim.js")()},"../../node_modules/array.prototype.flatmap/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ArraySpeciesCreate=__webpack_require__("../../node_modules/es-abstract/2021/ArraySpeciesCreate.js"),FlattenIntoArray=__webpack_require__("../../node_modules/es-abstract/2021/FlattenIntoArray.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js");module.exports=function flatMap(mapperFunction){var T,O=ToObject(this),sourceLen=ToLength(Get(O,"length"));if(!IsCallable(mapperFunction))throw new TypeError("mapperFunction must be a function");arguments.length>1&&(T=arguments[1]);var A=ArraySpeciesCreate(O,0);return FlattenIntoArray(A,O,sourceLen,0,1,mapperFunction,T),A}},"../../node_modules/array.prototype.flatmap/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/array.prototype.flatmap/implementation.js");module.exports=function getPolyfill(){return Array.prototype.flatMap||implementation}},"../../node_modules/array.prototype.flatmap/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),shimUnscopables=__webpack_require__("../../node_modules/es-shim-unscopables/index.js"),getPolyfill=__webpack_require__("../../node_modules/array.prototype.flatmap/polyfill.js");module.exports=function shimFlatMap(){var polyfill=getPolyfill();return define(Array.prototype,{flatMap:polyfill},{flatMap:function(){return Array.prototype.flatMap!==polyfill}}),shimUnscopables("flatMap"),polyfill}},"../../node_modules/array.prototype.map/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ArraySpeciesCreate=__webpack_require__("../../node_modules/es-abstract/2021/ArraySpeciesCreate.js"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),CreateDataPropertyOrThrow=__webpack_require__("../../node_modules/es-abstract/2021/CreateDataPropertyOrThrow.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),HasProperty=__webpack_require__("../../node_modules/es-abstract/2021/HasProperty.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),ToUint32=__webpack_require__("../../node_modules/es-abstract/2021/ToUint32.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),isString=__webpack_require__("../../node_modules/is-string/index.js"),boxedString=Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),strSplit=callBound("String.prototype.split");module.exports=function map(callbackfn){var T,O=ToObject(this),self=splitString&&isString(O)?strSplit(O,""):O,len=ToUint32(self.length);if(!IsCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");arguments.length>1&&(T=arguments[1]);for(var A=ArraySpeciesCreate(O,len),k=0;k<len;){var Pk=ToString(k),kPresent=HasProperty(O,Pk);if(kPresent){var kValue=Get(O,Pk),mappedValue=Call(callbackfn,T,[kValue,k,O]);CreateDataPropertyOrThrow(A,Pk,mappedValue)}k+=1}return A}},"../../node_modules/array.prototype.map/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),implementation=__webpack_require__("../../node_modules/array.prototype.map/implementation.js"),getPolyfill=__webpack_require__("../../node_modules/array.prototype.map/polyfill.js"),polyfill=getPolyfill(),shim=__webpack_require__("../../node_modules/array.prototype.map/shim.js"),$slice=callBound("Array.prototype.slice"),boundMapShim=function map(array,callbackfn){return RequireObjectCoercible(array),polyfill.apply(array,$slice(arguments,1))};define(boundMapShim,{getPolyfill,implementation,shim}),module.exports=boundMapShim},"../../node_modules/array.prototype.map/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var arrayMethodBoxesProperly=__webpack_require__("../../node_modules/es-array-method-boxes-properly/index.js"),implementation=__webpack_require__("../../node_modules/array.prototype.map/implementation.js");module.exports=function getPolyfill(){var method=Array.prototype.map;return arrayMethodBoxesProperly(method)?method:implementation}},"../../node_modules/array.prototype.map/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),getPolyfill=__webpack_require__("../../node_modules/array.prototype.map/polyfill.js");module.exports=function shimArrayPrototypeMap(){var polyfill=getPolyfill();return define(Array.prototype,{map:polyfill},{map:function(){return Array.prototype.map!==polyfill}}),polyfill}},"../../node_modules/array.prototype.reduce/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),HasProperty=__webpack_require__("../../node_modules/es-abstract/2021/HasProperty.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),LengthOfArrayLike=__webpack_require__("../../node_modules/es-abstract/2021/LengthOfArrayLike.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),isString=__webpack_require__("../../node_modules/is-string/index.js"),$TypeError=TypeError,boxedString=Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),strSplit=callBound("%String.prototype.split%");module.exports=function reduce(callbackfn){var O=ToObject(this),self=splitString&&isString(O)?strSplit(O,""):O,len=LengthOfArrayLike(self);if(!IsCallable(callbackfn))throw new $TypeError("Array.prototype.reduce callback must be a function");if(0===len&&arguments.length<2)throw new $TypeError("reduce of empty array with no initial value");var accumulator,Pk,kPresent,k=0;if(arguments.length>1)accumulator=arguments[1];else{for(kPresent=!1;!kPresent&&k<len;)Pk=ToString(k),(kPresent=HasProperty(O,Pk))&&(accumulator=Get(O,Pk)),k+=1;if(!kPresent)throw new $TypeError("reduce of empty array with no initial value")}for(;k<len;){if(Pk=ToString(k),kPresent=HasProperty(O,Pk)){var kValue=Get(O,Pk);accumulator=Call(callbackfn,void 0,[accumulator,kValue,k,O])}k+=1}return accumulator}},"../../node_modules/array.prototype.reduce/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),callBind=__webpack_require__("../../node_modules/call-bind/index.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),implementation=__webpack_require__("../../node_modules/array.prototype.reduce/implementation.js"),getPolyfill=__webpack_require__("../../node_modules/array.prototype.reduce/polyfill.js"),polyfill=callBind.apply(getPolyfill()),shim=__webpack_require__("../../node_modules/array.prototype.reduce/shim.js"),$slice=callBound("%Array.prototype.slice%"),boundShim=function reduce(array,callbackfn){return RequireObjectCoercible(array),polyfill(array,$slice(arguments,1))};define(boundShim,{getPolyfill,implementation,shim}),module.exports=boundShim},"../../node_modules/array.prototype.reduce/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var arrayMethodBoxesProperly=__webpack_require__("../../node_modules/es-array-method-boxes-properly/index.js"),implementation=__webpack_require__("../../node_modules/array.prototype.reduce/implementation.js");module.exports=function getPolyfill(){var method=Array.prototype.reduce;return arrayMethodBoxesProperly(method)?method:implementation}},"../../node_modules/array.prototype.reduce/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),getPolyfill=__webpack_require__("../../node_modules/array.prototype.reduce/polyfill.js");module.exports=function shimArrayPrototypeReduce(){var polyfill=getPolyfill();return define(Array.prototype,{reduce:polyfill},{reduce:function(){return Array.prototype.reduce!==polyfill}}),polyfill}},"../../node_modules/slash/index.js":module=>{"use strict";module.exports=function(path){var isExtendedLengthPath=/^\\\\\?\\/.test(path),hasNonAscii=/[^\u0000-\u0080]+/.test(path);return isExtendedLengthPath||hasNonAscii?path:path.replace(/\\/g,"/")}},"../../node_modules/call-bind/callBound.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBind=__webpack_require__("../../node_modules/call-bind/index.js"),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}},"../../node_modules/call-bind/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__("../../node_modules/function-bind/index.js"),GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),$max=GetIntrinsic("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}module.exports=function callBind(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");desc.configurable&&$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}return func};var applyBind=function applyBind(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind},"../../node_modules/clone/clone.js":module=>{var clone=function(){"use strict";function _instanceof(obj,type){return null!=type&&obj instanceof type}var nativeMap,nativeSet,nativePromise;try{nativeMap=Map}catch(_){nativeMap=function(){}}try{nativeSet=Set}catch(_){nativeSet=function(){}}try{nativePromise=Promise}catch(_){nativePromise=function(){}}function clone(parent,circular,depth,prototype,includeNonEnumerable){"object"==typeof circular&&(depth=circular.depth,prototype=circular.prototype,includeNonEnumerable=circular.includeNonEnumerable,circular=circular.circular);var allParents=[],allChildren=[],useBuffer="undefined"!=typeof Buffer;return void 0===circular&&(circular=!0),void 0===depth&&(depth=1/0),function _clone(parent,depth){if(null===parent)return null;if(0===depth)return parent;var child,proto;if("object"!=typeof parent)return parent;if(_instanceof(parent,nativeMap))child=new nativeMap;else if(_instanceof(parent,nativeSet))child=new nativeSet;else if(_instanceof(parent,nativePromise))child=new nativePromise((function(resolve,reject){parent.then((function(value){resolve(_clone(value,depth-1))}),(function(err){reject(_clone(err,depth-1))}))}));else if(clone.__isArray(parent))child=[];else if(clone.__isRegExp(parent))child=new RegExp(parent.source,__getRegExpFlags(parent)),parent.lastIndex&&(child.lastIndex=parent.lastIndex);else if(clone.__isDate(parent))child=new Date(parent.getTime());else{if(useBuffer&&Buffer.isBuffer(parent))return child=Buffer.allocUnsafe?Buffer.allocUnsafe(parent.length):new Buffer(parent.length),parent.copy(child),child;_instanceof(parent,Error)?child=Object.create(parent):void 0===prototype?(proto=Object.getPrototypeOf(parent),child=Object.create(proto)):(child=Object.create(prototype),proto=prototype)}if(circular){var index=allParents.indexOf(parent);if(-1!=index)return allChildren[index];allParents.push(parent),allChildren.push(child)}for(var i in _instanceof(parent,nativeMap)&&parent.forEach((function(value,key){var keyChild=_clone(key,depth-1),valueChild=_clone(value,depth-1);child.set(keyChild,valueChild)})),_instanceof(parent,nativeSet)&&parent.forEach((function(value){var entryChild=_clone(value,depth-1);child.add(entryChild)})),parent){var attrs;proto&&(attrs=Object.getOwnPropertyDescriptor(proto,i)),attrs&&null==attrs.set||(child[i]=_clone(parent[i],depth-1))}if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(parent);for(i=0;i<symbols.length;i++){var symbol=symbols[i];(!(descriptor=Object.getOwnPropertyDescriptor(parent,symbol))||descriptor.enumerable||includeNonEnumerable)&&(child[symbol]=_clone(parent[symbol],depth-1),descriptor.enumerable||Object.defineProperty(child,symbol,{enumerable:!1}))}}if(includeNonEnumerable){var allPropertyNames=Object.getOwnPropertyNames(parent);for(i=0;i<allPropertyNames.length;i++){var descriptor,propertyName=allPropertyNames[i];(descriptor=Object.getOwnPropertyDescriptor(parent,propertyName))&&descriptor.enumerable||(child[propertyName]=_clone(parent[propertyName],depth-1),Object.defineProperty(child,propertyName,{enumerable:!1}))}}return child}(parent,depth)}function __objToStr(o){return Object.prototype.toString.call(o)}function __getRegExpFlags(re){var flags="";return re.global&&(flags+="g"),re.ignoreCase&&(flags+="i"),re.multiline&&(flags+="m"),flags}return clone.clonePrototype=function clonePrototype(parent){if(null===parent)return null;var c=function(){};return c.prototype=parent,new c},clone.__objToStr=__objToStr,clone.__isDate=function __isDate(o){return"object"==typeof o&&"[object Date]"===__objToStr(o)},clone.__isArray=function __isArray(o){return"object"==typeof o&&"[object Array]"===__objToStr(o)},clone.__isRegExp=function __isRegExp(o){return"object"==typeof o&&"[object RegExp]"===__objToStr(o)},clone.__getRegExpFlags=__getRegExpFlags,clone}();module.exports&&(module.exports=clone)},"../../node_modules/core-js/actual/symbol/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var parent=__webpack_require__("../../node_modules/core-js/stable/symbol/index.js");module.exports=parent},"../../node_modules/core-js/es/symbol/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.has-instance.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.is-concat-spreadable.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.match.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.match-all.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.replace.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.search.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.species.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.split.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.unscopables.js"),__webpack_require__("../../node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("../../node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("../../node_modules/core-js/modules/es.reflect.to-string-tag.js");var path=__webpack_require__("../../node_modules/core-js/internals/path.js");module.exports=path.Symbol},"../../node_modules/core-js/features/symbol/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/full/symbol/index.js")},"../../node_modules/core-js/full/symbol/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var parent=__webpack_require__("../../node_modules/core-js/actual/symbol/index.js");__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.async-dispose.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.dispose.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.matcher.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.metadata-key.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.observable.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.metadata.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.pattern-match.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.symbol.replace-all.js"),module.exports=parent},"../../node_modules/core-js/internals/a-callable.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),tryToString=__webpack_require__("../../node_modules/core-js/internals/try-to-string.js"),$TypeError=TypeError;module.exports=function(argument){if(isCallable(argument))return argument;throw $TypeError(tryToString(argument)+" is not a function")}},"../../node_modules/core-js/internals/a-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isConstructor=__webpack_require__("../../node_modules/core-js/internals/is-constructor.js"),tryToString=__webpack_require__("../../node_modules/core-js/internals/try-to-string.js"),$TypeError=TypeError;module.exports=function(argument){if(isConstructor(argument))return argument;throw $TypeError(tryToString(argument)+" is not a constructor")}},"../../node_modules/core-js/internals/a-possible-prototype.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),$String=String,$TypeError=TypeError;module.exports=function(argument){if("object"==typeof argument||isCallable(argument))return argument;throw $TypeError("Can't set "+$String(argument)+" as a prototype")}},"../../node_modules/core-js/internals/add-to-unscopables.js":(module,__unused_webpack_exports,__webpack_require__)=>{var wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&defineProperty(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},"../../node_modules/core-js/internals/advance-string-index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var charAt=__webpack_require__("../../node_modules/core-js/internals/string-multibyte.js").charAt;module.exports=function(S,index,unicode){return index+(unicode?charAt(S,index).length:1)}},"../../node_modules/core-js/internals/an-instance.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),$TypeError=TypeError;module.exports=function(it,Prototype){if(isPrototypeOf(Prototype,it))return it;throw $TypeError("Incorrect invocation")}},"../../node_modules/core-js/internals/an-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),$String=String,$TypeError=TypeError;module.exports=function(argument){if(isObject(argument))return argument;throw $TypeError($String(argument)+" is not an object")}},"../../node_modules/core-js/internals/array-buffer-non-extensible.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=fails((function(){if("function"==typeof ArrayBuffer){var buffer=new ArrayBuffer(8);Object.isExtensible(buffer)&&Object.defineProperty(buffer,"a",{value:8})}}))},"../../node_modules/core-js/internals/array-fill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),toAbsoluteIndex=__webpack_require__("../../node_modules/core-js/internals/to-absolute-index.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js");module.exports=function fill(value){for(var O=toObject(this),length=lengthOfArrayLike(O),argumentsLength=arguments.length,index=toAbsoluteIndex(argumentsLength>1?arguments[1]:void 0,length),end=argumentsLength>2?arguments[2]:void 0,endPos=void 0===end?length:toAbsoluteIndex(end,length);endPos>index;)O[index++]=value;return O}},"../../node_modules/core-js/internals/array-for-each.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $forEach=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js").forEach,STRICT_METHOD=__webpack_require__("../../node_modules/core-js/internals/array-method-is-strict.js")("forEach");module.exports=STRICT_METHOD?[].forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments.length>1?arguments[1]:void 0)}},"../../node_modules/core-js/internals/array-from.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),callWithSafeIterationClosing=__webpack_require__("../../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),isArrayIteratorMethod=__webpack_require__("../../node_modules/core-js/internals/is-array-iterator-method.js"),isConstructor=__webpack_require__("../../node_modules/core-js/internals/is-constructor.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),createProperty=__webpack_require__("../../node_modules/core-js/internals/create-property.js"),getIterator=__webpack_require__("../../node_modules/core-js/internals/get-iterator.js"),getIteratorMethod=__webpack_require__("../../node_modules/core-js/internals/get-iterator-method.js"),$Array=Array;module.exports=function from(arrayLike){var O=toObject(arrayLike),IS_CONSTRUCTOR=isConstructor(this),argumentsLength=arguments.length,mapfn=argumentsLength>1?arguments[1]:void 0,mapping=void 0!==mapfn;mapping&&(mapfn=bind(mapfn,argumentsLength>2?arguments[2]:void 0));var length,result,step,iterator,next,value,iteratorMethod=getIteratorMethod(O),index=0;if(!iteratorMethod||this===$Array&&isArrayIteratorMethod(iteratorMethod))for(length=lengthOfArrayLike(O),result=IS_CONSTRUCTOR?new this(length):$Array(length);length>index;index++)value=mapping?mapfn(O[index],index):O[index],createProperty(result,index,value);else for(next=(iterator=getIterator(O,iteratorMethod)).next,result=IS_CONSTRUCTOR?new this:[];!(step=call(next,iterator)).done;index++)value=mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],!0):step.value,createProperty(result,index,value);return result.length=index,result}},"../../node_modules/core-js/internals/array-includes.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),toAbsoluteIndex=__webpack_require__("../../node_modules/core-js/internals/to-absolute-index.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIndexedObject($this),length=lengthOfArrayLike(O),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},"../../node_modules/core-js/internals/array-iteration.js":(module,__unused_webpack_exports,__webpack_require__)=>{var bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),IndexedObject=__webpack_require__("../../node_modules/core-js/internals/indexed-object.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),arraySpeciesCreate=__webpack_require__("../../node_modules/core-js/internals/array-species-create.js"),push=uncurryThis([].push),createMethod=function(TYPE){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,IS_FILTER_REJECT=7==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){for(var value,result,O=toObject($this),self=IndexedObject(O),boundFunction=bind(callbackfn,that),length=lengthOfArrayLike(self),index=0,create=specificCreate||arraySpeciesCreate,target=IS_MAP?create($this,length):IS_FILTER||IS_FILTER_REJECT?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(result=boundFunction(value=self[index],index,O),TYPE))if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return!0;case 5:return value;case 6:return index;case 2:push(target,value)}else switch(TYPE){case 4:return!1;case 7:push(target,value)}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6),filterReject:createMethod(7)}},"../../node_modules/core-js/internals/array-method-has-species-support.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),V8_VERSION=__webpack_require__("../../node_modules/core-js/internals/engine-v8-version.js"),SPECIES=wellKnownSymbol("species");module.exports=function(METHOD_NAME){return V8_VERSION>=51||!fails((function(){var array=[];return(array.constructor={})[SPECIES]=function(){return{foo:1}},1!==array[METHOD_NAME](Boolean).foo}))}},"../../node_modules/core-js/internals/array-method-is-strict.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!!method&&fails((function(){method.call(null,argument||function(){return 1},1)}))}},"../../node_modules/core-js/internals/array-slice-simple.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toAbsoluteIndex=__webpack_require__("../../node_modules/core-js/internals/to-absolute-index.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),createProperty=__webpack_require__("../../node_modules/core-js/internals/create-property.js"),$Array=Array,max=Math.max;module.exports=function(O,start,end){for(var length=lengthOfArrayLike(O),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(void 0===end?length:end,length),result=$Array(max(fin-k,0)),n=0;k<fin;k++,n++)createProperty(result,n,O[k]);return result.length=n,result}},"../../node_modules/core-js/internals/array-slice.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js");module.exports=uncurryThis([].slice)},"../../node_modules/core-js/internals/array-sort.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice-simple.js"),floor=Math.floor,mergeSort=function(array,comparefn){var length=array.length,middle=floor(length/2);return length<8?insertionSort(array,comparefn):merge(array,mergeSort(arraySlice(array,0,middle),comparefn),mergeSort(arraySlice(array,middle),comparefn),comparefn)},insertionSort=function(array,comparefn){for(var element,j,length=array.length,i=1;i<length;){for(j=i,element=array[i];j&&comparefn(array[j-1],element)>0;)array[j]=array[--j];j!==i++&&(array[j]=element)}return array},merge=function(array,left,right,comparefn){for(var llength=left.length,rlength=right.length,lindex=0,rindex=0;lindex<llength||rindex<rlength;)array[lindex+rindex]=lindex<llength&&rindex<rlength?comparefn(left[lindex],right[rindex])<=0?left[lindex++]:right[rindex++]:lindex<llength?left[lindex++]:right[rindex++];return array};module.exports=mergeSort},"../../node_modules/core-js/internals/array-species-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isArray=__webpack_require__("../../node_modules/core-js/internals/is-array.js"),isConstructor=__webpack_require__("../../node_modules/core-js/internals/is-constructor.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),SPECIES=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("species"),$Array=Array;module.exports=function(originalArray){var C;return isArray(originalArray)&&(C=originalArray.constructor,(isConstructor(C)&&(C===$Array||isArray(C.prototype))||isObject(C)&&null===(C=C[SPECIES]))&&(C=void 0)),void 0===C?$Array:C}},"../../node_modules/core-js/internals/array-species-create.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arraySpeciesConstructor=__webpack_require__("../../node_modules/core-js/internals/array-species-constructor.js");module.exports=function(originalArray,length){return new(arraySpeciesConstructor(originalArray))(0===length?0:length)}},"../../node_modules/core-js/internals/call-with-safe-iteration-closing.js":(module,__unused_webpack_exports,__webpack_require__)=>{var anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),iteratorClose=__webpack_require__("../../node_modules/core-js/internals/iterator-close.js");module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value)}catch(error){iteratorClose(iterator,"throw",error)}}},"../../node_modules/core-js/internals/check-correctness-of-iteration.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ITERATOR=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch(error){}return ITERATION_SUPPORT}},"../../node_modules/core-js/internals/classof-raw.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),toString=uncurryThis({}.toString),stringSlice=uncurryThis("".slice);module.exports=function(it){return stringSlice(toString(it),8,-1)}},"../../node_modules/core-js/internals/classof.js":(module,__unused_webpack_exports,__webpack_require__)=>{var TO_STRING_TAG_SUPPORT=__webpack_require__("../../node_modules/core-js/internals/to-string-tag-support.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),classofRaw=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),TO_STRING_TAG=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),$Object=Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}());module.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(tag=function(it,key){try{return it[key]}catch(error){}}(O=$Object(it),TO_STRING_TAG))?tag:CORRECT_ARGUMENTS?classofRaw(O):"Object"==(result=classofRaw(O))&&isCallable(O.callee)?"Arguments":result}},"../../node_modules/core-js/internals/collection-strong.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),defineBuiltIns=__webpack_require__("../../node_modules/core-js/internals/define-built-ins.js"),bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),anInstance=__webpack_require__("../../node_modules/core-js/internals/an-instance.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),iterate=__webpack_require__("../../node_modules/core-js/internals/iterate.js"),defineIterator=__webpack_require__("../../node_modules/core-js/internals/iterator-define.js"),setSpecies=__webpack_require__("../../node_modules/core-js/internals/set-species.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),fastKey=__webpack_require__("../../node_modules/core-js/internals/internal-metadata.js").fastKey,InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor;module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper((function(that,iterable){anInstance(that,Prototype),setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(that.size=0),isNullOrUndefined(iterable)||iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP})})),Prototype=Constructor.prototype,getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var previous,index,state=getInternalState(that),entry=getEntry(that,key);return entry?entry.value=value:(state.last=entry={index:index=fastKey(key,!0),key,value,previous:previous=state.last,next:void 0,removed:!1},state.first||(state.first=entry),previous&&(previous.next=entry),DESCRIPTORS?state.size++:that.size++,"F"!==index&&(state.index[index]=entry)),that},getEntry=function(that,key){var entry,state=getInternalState(that),index=fastKey(key);if("F"!==index)return state.index[index];for(entry=state.first;entry;entry=entry.next)if(entry.key==key)return entry};return defineBuiltIns(Prototype,{clear:function clear(){for(var state=getInternalState(this),data=state.index,entry=state.first;entry;)entry.removed=!0,entry.previous&&(entry.previous=entry.previous.next=void 0),delete data[entry.index],entry=entry.next;state.first=state.last=void 0,DESCRIPTORS?state.size=0:this.size=0},delete:function(key){var state=getInternalState(this),entry=getEntry(this,key);if(entry){var next=entry.next,prev=entry.previous;delete state.index[entry.index],entry.removed=!0,prev&&(prev.next=next),next&&(next.previous=prev),state.first==entry&&(state.first=next),state.last==entry&&(state.last=prev),DESCRIPTORS?state.size--:this.size--}return!!entry},forEach:function forEach(callbackfn){for(var entry,state=getInternalState(this),boundFunction=bind(callbackfn,arguments.length>1?arguments[1]:void 0);entry=entry?entry.next:state.first;)for(boundFunction(entry.value,entry.key,this);entry&&entry.removed;)entry=entry.previous},has:function has(key){return!!getEntry(this,key)}}),defineBuiltIns(Prototype,IS_MAP?{get:function get(key){var entry=getEntry(this,key);return entry&&entry.value},set:function set(key,value){return define(this,0===key?0:key,value)}}:{add:function add(value){return define(this,value=0===value?0:value,value)}}),DESCRIPTORS&&defineProperty(Prototype,"size",{get:function(){return getInternalState(this).size}}),Constructor},setStrong:function(Constructor,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator",getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME),getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(Constructor,CONSTRUCTOR_NAME,(function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind,last:void 0})}),(function(){for(var state=getInternalIteratorState(this),kind=state.kind,entry=state.last;entry&&entry.removed;)entry=entry.previous;return state.target&&(state.last=entry=entry?entry.next:state.state.first)?"keys"==kind?{value:entry.key,done:!1}:"values"==kind?{value:entry.value,done:!1}:{value:[entry.key,entry.value],done:!1}:(state.target=void 0,{value:void 0,done:!0})}),IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(CONSTRUCTOR_NAME)}}},"../../node_modules/core-js/internals/collection-weak.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),defineBuiltIns=__webpack_require__("../../node_modules/core-js/internals/define-built-ins.js"),getWeakData=__webpack_require__("../../node_modules/core-js/internals/internal-metadata.js").getWeakData,anInstance=__webpack_require__("../../node_modules/core-js/internals/an-instance.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),iterate=__webpack_require__("../../node_modules/core-js/internals/iterate.js"),ArrayIterationModule=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,splice=uncurryThis([].splice),id=0,uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(store,key){return find(store.entries,(function(it){return it[0]===key}))};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.entries.push([key,value])},delete:function(key){var index=findIndex(this.entries,(function(it){return it[0]===key}));return~index&&splice(this.entries,index,1),!!~index}},module.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper((function(that,iterable){anInstance(that,Prototype),setInternalState(that,{type:CONSTRUCTOR_NAME,id:id++,frozen:void 0}),isNullOrUndefined(iterable)||iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP})})),Prototype=Constructor.prototype,getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=function(that,key,value){var state=getInternalState(that),data=getWeakData(anObject(key),!0);return!0===data?uncaughtFrozenStore(state).set(key,value):data[state.id]=value,that};return defineBuiltIns(Prototype,{delete:function(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).delete(key):data&&hasOwn(data,state.id)&&delete data[state.id]},has:function has(key){var state=getInternalState(this);if(!isObject(key))return!1;var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).has(key):data&&hasOwn(data,state.id)}}),defineBuiltIns(Prototype,IS_MAP?{get:function get(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);return!0===data?uncaughtFrozenStore(state).get(key):data?data[state.id]:void 0}},set:function set(key,value){return define(this,key,value)}}:{add:function add(value){return define(this,value,!0)}}),Constructor}}},"../../node_modules/core-js/internals/collection.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),isForced=__webpack_require__("../../node_modules/core-js/internals/is-forced.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),InternalMetadataModule=__webpack_require__("../../node_modules/core-js/internals/internal-metadata.js"),iterate=__webpack_require__("../../node_modules/core-js/internals/iterate.js"),anInstance=__webpack_require__("../../node_modules/core-js/internals/an-instance.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),checkCorrectnessOfIteration=__webpack_require__("../../node_modules/core-js/internals/check-correctness-of-iteration.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),inheritIfRequired=__webpack_require__("../../node_modules/core-js/internals/inherit-if-required.js");module.exports=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=-1!==CONSTRUCTOR_NAME.indexOf("Map"),IS_WEAK=-1!==CONSTRUCTOR_NAME.indexOf("Weak"),ADDER=IS_MAP?"set":"add",NativeConstructor=global[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,exported={},fixMethod=function(KEY){var uncurriedNativeMethod=uncurryThis(NativePrototype[KEY]);defineBuiltIn(NativePrototype,KEY,"add"==KEY?function add(value){return uncurriedNativeMethod(this,0===value?0:value),this}:"delete"==KEY?function(key){return!(IS_WEAK&&!isObject(key))&&uncurriedNativeMethod(this,0===key?0:key)}:"get"==KEY?function get(key){return IS_WEAK&&!isObject(key)?void 0:uncurriedNativeMethod(this,0===key?0:key)}:"has"==KEY?function has(key){return!(IS_WEAK&&!isObject(key))&&uncurriedNativeMethod(this,0===key?0:key)}:function set(key,value){return uncurriedNativeMethod(this,0===key?0:key,value),this})};if(isForced(CONSTRUCTOR_NAME,!isCallable(NativeConstructor)||!(IS_WEAK||NativePrototype.forEach&&!fails((function(){(new NativeConstructor).entries().next()})))))Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.enable();else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails((function(){instance.has(1)})),ACCEPT_ITERABLES=checkCorrectnessOfIteration((function(iterable){new NativeConstructor(iterable)})),BUGGY_ZERO=!IS_WEAK&&fails((function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)}));ACCEPT_ITERABLES||((Constructor=wrapper((function(dummy,iterable){anInstance(dummy,NativePrototype);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return isNullOrUndefined(iterable)||iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP}),that}))).prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$({global:!0,constructor:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}},"../../node_modules/core-js/internals/copy-constructor-properties.js":(module,__unused_webpack_exports,__webpack_require__)=>{var hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),ownKeys=__webpack_require__("../../node_modules/core-js/internals/own-keys.js"),getOwnPropertyDescriptorModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js");module.exports=function(target,source,exceptions){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];hasOwn(target,key)||exceptions&&hasOwn(exceptions,key)||defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},"../../node_modules/core-js/internals/correct-is-regexp-logic.js":(module,__unused_webpack_exports,__webpack_require__)=>{var MATCH=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("match");module.exports=function(METHOD_NAME){var regexp=/./;try{"/./"[METHOD_NAME](regexp)}catch(error1){try{return regexp[MATCH]=!1,"/./"[METHOD_NAME](regexp)}catch(error2){}}return!1}},"../../node_modules/core-js/internals/correct-prototype-getter.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=!fails((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},"../../node_modules/core-js/internals/create-non-enumerable-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js"),createPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/create-property-descriptor.js");module.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},"../../node_modules/core-js/internals/create-property-descriptor.js":module=>{module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value}}},"../../node_modules/core-js/internals/create-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toPropertyKey=__webpack_require__("../../node_modules/core-js/internals/to-property-key.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js"),createPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/create-property-descriptor.js");module.exports=function(object,key,value){var propertyKey=toPropertyKey(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},"../../node_modules/core-js/internals/define-built-in-accessor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var makeBuiltIn=__webpack_require__("../../node_modules/core-js/internals/make-built-in.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js");module.exports=function(target,name,descriptor){return descriptor.get&&makeBuiltIn(descriptor.get,name,{getter:!0}),descriptor.set&&makeBuiltIn(descriptor.set,name,{setter:!0}),defineProperty.f(target,name,descriptor)}},"../../node_modules/core-js/internals/define-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js"),makeBuiltIn=__webpack_require__("../../node_modules/core-js/internals/make-built-in.js"),defineGlobalProperty=__webpack_require__("../../node_modules/core-js/internals/define-global-property.js");module.exports=function(O,key,value,options){options||(options={});var simple=options.enumerable,name=void 0!==options.name?options.name:key;if(isCallable(value)&&makeBuiltIn(value,name,options),options.global)simple?O[key]=value:defineGlobalProperty(key,value);else{try{options.unsafe?O[key]&&(simple=!0):delete O[key]}catch(error){}simple?O[key]=value:definePropertyModule.f(O,key,{value,enumerable:!1,configurable:!options.nonConfigurable,writable:!options.nonWritable})}return O}},"../../node_modules/core-js/internals/define-built-ins.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js");module.exports=function(target,src,options){for(var key in src)defineBuiltIn(target,key,src[key],options);return target}},"../../node_modules/core-js/internals/define-global-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),defineProperty=Object.defineProperty;module.exports=function(key,value){try{defineProperty(global,key,{value,configurable:!0,writable:!0})}catch(error){global[key]=value}return value}},"../../node_modules/core-js/internals/delete-property-or-throw.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var tryToString=__webpack_require__("../../node_modules/core-js/internals/try-to-string.js"),$TypeError=TypeError;module.exports=function(O,P){if(!delete O[P])throw $TypeError("Cannot delete property "+tryToString(P)+" of "+tryToString(O))}},"../../node_modules/core-js/internals/descriptors.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"../../node_modules/core-js/internals/document-create-element.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),document=global.document,EXISTS=isObject(document)&&isObject(document.createElement);module.exports=function(it){return EXISTS?document.createElement(it):{}}},"../../node_modules/core-js/internals/does-not-exceed-safe-integer.js":module=>{var $TypeError=TypeError;module.exports=function(it){if(it>9007199254740991)throw $TypeError("Maximum allowed index exceeded");return it}},"../../node_modules/core-js/internals/dom-iterables.js":module=>{module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"../../node_modules/core-js/internals/dom-token-list-prototype.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classList=__webpack_require__("../../node_modules/core-js/internals/document-create-element.js")("span").classList,DOMTokenListPrototype=classList&&classList.constructor&&classList.constructor.prototype;module.exports=DOMTokenListPrototype===Object.prototype?void 0:DOMTokenListPrototype},"../../node_modules/core-js/internals/engine-ff-version.js":(module,__unused_webpack_exports,__webpack_require__)=>{var firefox=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js").match(/firefox\/(\d+)/i);module.exports=!!firefox&&+firefox[1]},"../../node_modules/core-js/internals/engine-is-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{var IS_DENO=__webpack_require__("../../node_modules/core-js/internals/engine-is-deno.js"),IS_NODE=__webpack_require__("../../node_modules/core-js/internals/engine-is-node.js");module.exports=!IS_DENO&&!IS_NODE&&"object"==typeof window&&"object"==typeof document},"../../node_modules/core-js/internals/engine-is-deno.js":module=>{module.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},"../../node_modules/core-js/internals/engine-is-ie-or-edge.js":(module,__unused_webpack_exports,__webpack_require__)=>{var UA=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js");module.exports=/MSIE|Trident/.test(UA)},"../../node_modules/core-js/internals/engine-is-ios-pebble.js":(module,__unused_webpack_exports,__webpack_require__)=>{var userAgent=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js");module.exports=/ipad|iphone|ipod/i.test(userAgent)&&void 0!==global.Pebble},"../../node_modules/core-js/internals/engine-is-ios.js":(module,__unused_webpack_exports,__webpack_require__)=>{var userAgent=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js");module.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent)},"../../node_modules/core-js/internals/engine-is-node.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js");module.exports="process"==classof(global.process)},"../../node_modules/core-js/internals/engine-is-webos-webkit.js":(module,__unused_webpack_exports,__webpack_require__)=>{var userAgent=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js");module.exports=/web0s(?!.*chrome)/i.test(userAgent)},"../../node_modules/core-js/internals/engine-user-agent.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js");module.exports=getBuiltIn("navigator","userAgent")||""},"../../node_modules/core-js/internals/engine-v8-version.js":(module,__unused_webpack_exports,__webpack_require__)=>{var match,version,global=__webpack_require__("../../node_modules/core-js/internals/global.js"),userAgent=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js"),process=global.process,Deno=global.Deno,versions=process&&process.versions||Deno&&Deno.version,v8=versions&&versions.v8;v8&&(version=(match=v8.split("."))[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent&&(!(match=userAgent.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/))&&(version=+match[1]),module.exports=version},"../../node_modules/core-js/internals/engine-webkit-version.js":(module,__unused_webpack_exports,__webpack_require__)=>{var webkit=__webpack_require__("../../node_modules/core-js/internals/engine-user-agent.js").match(/AppleWebKit\/(\d+)\./);module.exports=!!webkit&&+webkit[1]},"../../node_modules/core-js/internals/enum-bug-keys.js":module=>{module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"../../node_modules/core-js/internals/export.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),getOwnPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),defineGlobalProperty=__webpack_require__("../../node_modules/core-js/internals/define-global-property.js"),copyConstructorProperties=__webpack_require__("../../node_modules/core-js/internals/copy-constructor-properties.js"),isForced=__webpack_require__("../../node_modules/core-js/internals/is-forced.js");module.exports=function(options,source){var target,key,targetProperty,sourceProperty,descriptor,TARGET=options.target,GLOBAL=options.global,STATIC=options.stat;if(target=GLOBAL?global:STATIC?global[TARGET]||defineGlobalProperty(TARGET,{}):(global[TARGET]||{}).prototype)for(key in source){if(sourceProperty=source[key],targetProperty=options.dontCallGetSet?(descriptor=getOwnPropertyDescriptor(target,key))&&descriptor.value:target[key],!isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced)&&void 0!==targetProperty){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),defineBuiltIn(target,key,sourceProperty,options)}}},"../../node_modules/core-js/internals/fails.js":module=>{module.exports=function(exec){try{return!!exec()}catch(error){return!0}}},"../../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/core-js/modules/es.regexp.exec.js");var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),regexpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),SPECIES=wellKnownSymbol("species"),RegExpPrototype=RegExp.prototype;module.exports=function(KEY,exec,FORCED,SHAM){var SYMBOL=wellKnownSymbol(KEY),DELEGATES_TO_SYMBOL=!fails((function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails((function(){var execCalled=!1,re=/a/;return"split"===KEY&&((re={}).constructor={},re.constructor[SPECIES]=function(){return re},re.flags="",re[SYMBOL]=/./[SYMBOL]),re.exec=function(){return execCalled=!0,null},re[SYMBOL](""),!execCalled}));if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||FORCED){var uncurriedNativeRegExpMethod=uncurryThis(/./[SYMBOL]),methods=exec(SYMBOL,""[KEY],(function(nativeMethod,regexp,str,arg2,forceStringMethod){var uncurriedNativeMethod=uncurryThis(nativeMethod),$exec=regexp.exec;return $exec===regexpExec||$exec===RegExpPrototype.exec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:uncurriedNativeRegExpMethod(regexp,str,arg2)}:{done:!0,value:uncurriedNativeMethod(str,regexp,arg2)}:{done:!1}}));defineBuiltIn(String.prototype,KEY,methods[0]),defineBuiltIn(RegExpPrototype,SYMBOL,methods[1])}SHAM&&createNonEnumerableProperty(RegExpPrototype[SYMBOL],"sham",!0)}},"../../node_modules/core-js/internals/freezing.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))}))},"../../node_modules/core-js/internals/function-apply.js":(module,__unused_webpack_exports,__webpack_require__)=>{var NATIVE_BIND=__webpack_require__("../../node_modules/core-js/internals/function-bind-native.js"),FunctionPrototype=Function.prototype,apply=FunctionPrototype.apply,call=FunctionPrototype.call;module.exports="object"==typeof Reflect&&Reflect.apply||(NATIVE_BIND?call.bind(apply):function(){return call.apply(apply,arguments)})},"../../node_modules/core-js/internals/function-bind-context.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),NATIVE_BIND=__webpack_require__("../../node_modules/core-js/internals/function-bind-native.js"),bind=uncurryThis(uncurryThis.bind);module.exports=function(fn,that){return aCallable(fn),void 0===that?fn:NATIVE_BIND?bind(fn,that):function(){return fn.apply(that,arguments)}}},"../../node_modules/core-js/internals/function-bind-native.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=!fails((function(){var test=function(){}.bind();return"function"!=typeof test||test.hasOwnProperty("prototype")}))},"../../node_modules/core-js/internals/function-bind.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice.js"),NATIVE_BIND=__webpack_require__("../../node_modules/core-js/internals/function-bind-native.js"),$Function=Function,concat=uncurryThis([].concat),join=uncurryThis([].join),factories={},construct=function(C,argsLength,args){if(!hasOwn(factories,argsLength)){for(var list=[],i=0;i<argsLength;i++)list[i]="a["+i+"]";factories[argsLength]=$Function("C,a","return new C("+join(list,",")+")")}return factories[argsLength](C,args)};module.exports=NATIVE_BIND?$Function.bind:function bind(that){var F=aCallable(this),Prototype=F.prototype,partArgs=arraySlice(arguments,1),boundFunction=function bound(){var args=concat(partArgs,arraySlice(arguments));return this instanceof boundFunction?construct(F,args.length,args):F.apply(that,args)};return isObject(Prototype)&&(boundFunction.prototype=Prototype),boundFunction}},"../../node_modules/core-js/internals/function-call.js":(module,__unused_webpack_exports,__webpack_require__)=>{var NATIVE_BIND=__webpack_require__("../../node_modules/core-js/internals/function-bind-native.js"),call=Function.prototype.call;module.exports=NATIVE_BIND?call.bind(call):function(){return call.apply(call,arguments)}},"../../node_modules/core-js/internals/function-name.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),FunctionPrototype=Function.prototype,getDescriptor=DESCRIPTORS&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn(FunctionPrototype,"name"),PROPER=EXISTS&&"something"===function something(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS||DESCRIPTORS&&getDescriptor(FunctionPrototype,"name").configurable);module.exports={EXISTS,PROPER,CONFIGURABLE}},"../../node_modules/core-js/internals/function-uncurry-this.js":(module,__unused_webpack_exports,__webpack_require__)=>{var NATIVE_BIND=__webpack_require__("../../node_modules/core-js/internals/function-bind-native.js"),FunctionPrototype=Function.prototype,bind=FunctionPrototype.bind,call=FunctionPrototype.call,uncurryThis=NATIVE_BIND&&bind.bind(call,call);module.exports=NATIVE_BIND?function(fn){return fn&&uncurryThis(fn)}:function(fn){return fn&&function(){return call.apply(fn,arguments)}}},"../../node_modules/core-js/internals/get-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),aFunction=function(argument){return isCallable(argument)?argument:void 0};module.exports=function(namespace,method){return arguments.length<2?aFunction(global[namespace]):global[namespace]&&global[namespace][method]}},"../../node_modules/core-js/internals/get-iterator-method.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classof=__webpack_require__("../../node_modules/core-js/internals/classof.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),Iterators=__webpack_require__("../../node_modules/core-js/internals/iterators.js"),ITERATOR=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("iterator");module.exports=function(it){if(!isNullOrUndefined(it))return getMethod(it,ITERATOR)||getMethod(it,"@@iterator")||Iterators[classof(it)]}},"../../node_modules/core-js/internals/get-iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),tryToString=__webpack_require__("../../node_modules/core-js/internals/try-to-string.js"),getIteratorMethod=__webpack_require__("../../node_modules/core-js/internals/get-iterator-method.js"),$TypeError=TypeError;module.exports=function(argument,usingIterator){var iteratorMethod=arguments.length<2?getIteratorMethod(argument):usingIterator;if(aCallable(iteratorMethod))return anObject(call(iteratorMethod,argument));throw $TypeError(tryToString(argument)+" is not iterable")}},"../../node_modules/core-js/internals/get-method.js":(module,__unused_webpack_exports,__webpack_require__)=>{var aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js");module.exports=function(V,P){var func=V[P];return isNullOrUndefined(func)?void 0:aCallable(func)}},"../../node_modules/core-js/internals/get-substitution.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),floor=Math.floor,charAt=uncurryThis("".charAt),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g;module.exports=function(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==namedCaptures&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),replace(replacement,symbols,(function(match,ch){var capture;switch(charAt(ch,0)){case"$":return"$";case"&":return matched;case"`":return stringSlice(str,0,position);case"'":return stringSlice(str,tailPos);case"<":capture=namedCaptures[stringSlice(ch,1,-1)];break;default:var n=+ch;if(0===n)return match;if(n>m){var f=floor(n/10);return 0===f?match:f<=m?void 0===captures[f-1]?charAt(ch,1):captures[f-1]+charAt(ch,1):match}capture=captures[n-1]}return void 0===capture?"":capture}))}},"../../node_modules/core-js/internals/global.js":(module,__unused_webpack_exports,__webpack_require__)=>{var check=function(it){return it&&it.Math==Math&&it};module.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof __webpack_require__.g&&__webpack_require__.g)||function(){return this}()||Function("return this")()},"../../node_modules/core-js/internals/has-own-property.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),hasOwnProperty=uncurryThis({}.hasOwnProperty);module.exports=Object.hasOwn||function hasOwn(it,key){return hasOwnProperty(toObject(it),key)}},"../../node_modules/core-js/internals/hidden-keys.js":module=>{module.exports={}},"../../node_modules/core-js/internals/host-report-errors.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js");module.exports=function(a,b){var console=global.console;console&&console.error&&(1==arguments.length?console.error(a):console.error(a,b))}},"../../node_modules/core-js/internals/html.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js");module.exports=getBuiltIn("document","documentElement")},"../../node_modules/core-js/internals/ie8-dom-define.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),createElement=__webpack_require__("../../node_modules/core-js/internals/document-create-element.js");module.exports=!DESCRIPTORS&&!fails((function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}))},"../../node_modules/core-js/internals/indexed-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),$Object=Object,split=uncurryThis("".split);module.exports=fails((function(){return!$Object("z").propertyIsEnumerable(0)}))?function(it){return"String"==classof(it)?split(it,""):$Object(it)}:$Object},"../../node_modules/core-js/internals/inherit-if-required.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),setPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-set-prototype-of.js");module.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&isCallable(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}},"../../node_modules/core-js/internals/inspect-source.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),store=__webpack_require__("../../node_modules/core-js/internals/shared-store.js"),functionToString=uncurryThis(Function.toString);isCallable(store.inspectSource)||(store.inspectSource=function(it){return functionToString(it)}),module.exports=store.inspectSource},"../../node_modules/core-js/internals/internal-metadata.js":(module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),hiddenKeys=__webpack_require__("../../node_modules/core-js/internals/hidden-keys.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,getOwnPropertyNamesModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names.js"),getOwnPropertyNamesExternalModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names-external.js"),isExtensible=__webpack_require__("../../node_modules/core-js/internals/object-is-extensible.js"),uid=__webpack_require__("../../node_modules/core-js/internals/uid.js"),FREEZING=__webpack_require__("../../node_modules/core-js/internals/freezing.js"),REQUIRED=!1,METADATA=uid("meta"),id=0,setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:"O"+id++,weakData:{}}})},meta=module.exports={enable:function(){meta.enable=function(){},REQUIRED=!0;var getOwnPropertyNames=getOwnPropertyNamesModule.f,splice=uncurryThis([].splice),test={};test[METADATA]=1,getOwnPropertyNames(test).length&&(getOwnPropertyNamesModule.f=function(it){for(var result=getOwnPropertyNames(it),i=0,length=result.length;i<length;i++)if(result[i]===METADATA){splice(result,i,1);break}return result},$({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!hasOwn(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},getWeakData:function(it,create){if(!hasOwn(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},onFreeze:function(it){return FREEZING&&REQUIRED&&isExtensible(it)&&!hasOwn(it,METADATA)&&setMetadata(it),it}};hiddenKeys[METADATA]=!0},"../../node_modules/core-js/internals/internal-state.js":(module,__unused_webpack_exports,__webpack_require__)=>{var set,get,has,NATIVE_WEAK_MAP=__webpack_require__("../../node_modules/core-js/internals/weak-map-basic-detection.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),shared=__webpack_require__("../../node_modules/core-js/internals/shared-store.js"),sharedKey=__webpack_require__("../../node_modules/core-js/internals/shared-key.js"),hiddenKeys=__webpack_require__("../../node_modules/core-js/internals/hidden-keys.js"),TypeError=global.TypeError,WeakMap=global.WeakMap;if(NATIVE_WEAK_MAP||shared.state){var store=shared.state||(shared.state=new WeakMap),wmget=uncurryThis(store.get),wmhas=uncurryThis(store.has),wmset=uncurryThis(store.set);set=function(it,metadata){if(wmhas(store,it))throw TypeError("Object already initialized");return metadata.facade=it,wmset(store,it,metadata),metadata},get=function(it){return wmget(store,it)||{}},has=function(it){return wmhas(store,it)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(it,metadata){if(hasOwn(it,STATE))throw TypeError("Object already initialized");return metadata.facade=it,createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return hasOwn(it,STATE)?it[STATE]:{}},has=function(it){return hasOwn(it,STATE)}}module.exports={set,get,has,enforce:function(it){return has(it)?get(it):set(it,{})},getterFor:function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required");return state}}}},"../../node_modules/core-js/internals/is-array-iterator-method.js":(module,__unused_webpack_exports,__webpack_require__)=>{var wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),Iterators=__webpack_require__("../../node_modules/core-js/internals/iterators.js"),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},"../../node_modules/core-js/internals/is-array.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js");module.exports=Array.isArray||function isArray(argument){return"Array"==classof(argument)}},"../../node_modules/core-js/internals/is-callable.js":module=>{module.exports=function(argument){return"function"==typeof argument}},"../../node_modules/core-js/internals/is-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),inspectSource=__webpack_require__("../../node_modules/core-js/internals/inspect-source.js"),noop=function(){},empty=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function isConstructor(argument){if(!isCallable(argument))return!1;try{return construct(noop,empty,argument),!0}catch(error){return!1}},isConstructorLegacy=function isConstructor(argument){if(!isCallable(argument))return!1;switch(classof(argument)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(argument))}catch(error){return!0}};isConstructorLegacy.sham=!0,module.exports=!construct||fails((function(){var called;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){called=!0}))||called}))?isConstructorLegacy:isConstructorModern},"../../node_modules/core-js/internals/is-data-descriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js");module.exports=function(descriptor){return void 0!==descriptor&&(hasOwn(descriptor,"value")||hasOwn(descriptor,"writable"))}},"../../node_modules/core-js/internals/is-forced.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL||value!=NATIVE&&(isCallable(detection)?fails(detection):!!detection)},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced},"../../node_modules/core-js/internals/is-integral-number.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),floor=Math.floor;module.exports=Number.isInteger||function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},"../../node_modules/core-js/internals/is-null-or-undefined.js":module=>{module.exports=function(it){return null==it}},"../../node_modules/core-js/internals/is-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),documentAll="object"==typeof document&&document.all,SPECIAL_DOCUMENT_ALL=void 0===documentAll&&void 0!==documentAll;module.exports=SPECIAL_DOCUMENT_ALL?function(it){return"object"==typeof it?null!==it:isCallable(it)||it===documentAll}:function(it){return"object"==typeof it?null!==it:isCallable(it)}},"../../node_modules/core-js/internals/is-pure.js":module=>{module.exports=!1},"../../node_modules/core-js/internals/is-regexp.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),MATCH=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==classof(it))}},"../../node_modules/core-js/internals/is-symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),USE_SYMBOL_AS_UID=__webpack_require__("../../node_modules/core-js/internals/use-symbol-as-uid.js"),$Object=Object;module.exports=USE_SYMBOL_AS_UID?function(it){return"symbol"==typeof it}:function(it){var $Symbol=getBuiltIn("Symbol");return isCallable($Symbol)&&isPrototypeOf($Symbol.prototype,$Object(it))}},"../../node_modules/core-js/internals/iterate.js":(module,__unused_webpack_exports,__webpack_require__)=>{var bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),tryToString=__webpack_require__("../../node_modules/core-js/internals/try-to-string.js"),isArrayIteratorMethod=__webpack_require__("../../node_modules/core-js/internals/is-array-iterator-method.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),getIterator=__webpack_require__("../../node_modules/core-js/internals/get-iterator.js"),getIteratorMethod=__webpack_require__("../../node_modules/core-js/internals/get-iterator-method.js"),iteratorClose=__webpack_require__("../../node_modules/core-js/internals/iterator-close.js"),$TypeError=TypeError,Result=function(stopped,result){this.stopped=stopped,this.result=result},ResultPrototype=Result.prototype;module.exports=function(iterable,unboundFunction,options){var iterator,iterFn,index,length,result,next,step,that=options&&options.that,AS_ENTRIES=!(!options||!options.AS_ENTRIES),IS_RECORD=!(!options||!options.IS_RECORD),IS_ITERATOR=!(!options||!options.IS_ITERATOR),INTERRUPTED=!(!options||!options.INTERRUPTED),fn=bind(unboundFunction,that),stop=function(condition){return iterator&&iteratorClose(iterator,"normal",condition),new Result(!0,condition)},callFn=function(value){return AS_ENTRIES?(anObject(value),INTERRUPTED?fn(value[0],value[1],stop):fn(value[0],value[1])):INTERRUPTED?fn(value,stop):fn(value)};if(IS_RECORD)iterator=iterable.iterator;else if(IS_ITERATOR)iterator=iterable;else{if(!(iterFn=getIteratorMethod(iterable)))throw $TypeError(tryToString(iterable)+" is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=lengthOfArrayLike(iterable);length>index;index++)if((result=callFn(iterable[index]))&&isPrototypeOf(ResultPrototype,result))return result;return new Result(!1)}iterator=getIterator(iterable,iterFn)}for(next=IS_RECORD?iterable.next:iterator.next;!(step=call(next,iterator)).done;){try{result=callFn(step.value)}catch(error){iteratorClose(iterator,"throw",error)}if("object"==typeof result&&result&&isPrototypeOf(ResultPrototype,result))return result}return new Result(!1)}},"../../node_modules/core-js/internals/iterator-close.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js");module.exports=function(iterator,kind,value){var innerResult,innerError;anObject(iterator);try{if(!(innerResult=getMethod(iterator,"return"))){if("throw"===kind)throw value;return value}innerResult=call(innerResult,iterator)}catch(error){innerError=!0,innerResult=error}if("throw"===kind)throw value;if(innerError)throw innerResult;return anObject(innerResult),value}},"../../node_modules/core-js/internals/iterator-create-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var IteratorPrototype=__webpack_require__("../../node_modules/core-js/internals/iterators-core.js").IteratorPrototype,create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),createPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/create-property-descriptor.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),Iterators=__webpack_require__("../../node_modules/core-js/internals/iterators.js"),returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next,ENUMERABLE_NEXT){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(+!ENUMERABLE_NEXT,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},"../../node_modules/core-js/internals/iterator-define.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),FunctionName=__webpack_require__("../../node_modules/core-js/internals/function-name.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),createIteratorConstructor=__webpack_require__("../../node_modules/core-js/internals/iterator-create-constructor.js"),getPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-get-prototype-of.js"),setPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-set-prototype-of.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),Iterators=__webpack_require__("../../node_modules/core-js/internals/iterators.js"),IteratorsCore=__webpack_require__("../../node_modules/core-js/internals/iterators-core.js"),PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var CurrentIteratorPrototype,methods,KEY,getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case"keys":return function keys(){return new IteratorConstructor(this,KIND)};case"values":return function values(){return new IteratorConstructor(this,KIND)};case"entries":return function entries(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}},TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator="Array"==NAME&&IterablePrototype.entries||nativeIterator;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)))!==Object.prototype&&CurrentIteratorPrototype.next&&(IS_PURE||getPrototypeOf(CurrentIteratorPrototype)===IteratorPrototype||(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):isCallable(CurrentIteratorPrototype[ITERATOR])||defineBuiltIn(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis)),PROPER_FUNCTION_NAME&&"values"==DEFAULT&&nativeIterator&&"values"!==nativeIterator.name&&(!IS_PURE&&CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty(IterablePrototype,"name","values"):(INCORRECT_VALUES_NAME=!0,defaultIterator=function values(){return call(nativeIterator,this)})),DEFAULT)if(methods={values:getIterationMethod("values"),keys:IS_SET?defaultIterator:getIterationMethod("keys"),entries:getIterationMethod("entries")},FORCED)for(KEY in methods)(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype))&&defineBuiltIn(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return IS_PURE&&!FORCED||IterablePrototype[ITERATOR]===defaultIterator||defineBuiltIn(IterablePrototype,ITERATOR,defaultIterator,{name:DEFAULT}),Iterators[NAME]=defaultIterator,methods}},"../../node_modules/core-js/internals/iterators-core.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),getPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-get-prototype-of.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),!isObject(IteratorPrototype)||fails((function(){var test={};return IteratorPrototype[ITERATOR].call(test)!==test}))?IteratorPrototype={}:IS_PURE&&(IteratorPrototype=create(IteratorPrototype)),isCallable(IteratorPrototype[ITERATOR])||defineBuiltIn(IteratorPrototype,ITERATOR,(function(){return this})),module.exports={IteratorPrototype,BUGGY_SAFARI_ITERATORS}},"../../node_modules/core-js/internals/iterators.js":module=>{module.exports={}},"../../node_modules/core-js/internals/length-of-array-like.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toLength=__webpack_require__("../../node_modules/core-js/internals/to-length.js");module.exports=function(obj){return toLength(obj.length)}},"../../node_modules/core-js/internals/make-built-in.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),CONFIGURABLE_FUNCTION_NAME=__webpack_require__("../../node_modules/core-js/internals/function-name.js").CONFIGURABLE,inspectSource=__webpack_require__("../../node_modules/core-js/internals/inspect-source.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,defineProperty=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS&&!fails((function(){return 8!==defineProperty((function(){}),"length",{value:8}).length})),TEMPLATE=String(String).split("String"),makeBuiltIn=module.exports=function(value,name,options){"Symbol("===String(name).slice(0,7)&&(name="["+String(name).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),options&&options.getter&&(name="get "+name),options&&options.setter&&(name="set "+name),(!hasOwn(value,"name")||CONFIGURABLE_FUNCTION_NAME&&value.name!==name)&&(DESCRIPTORS?defineProperty(value,"name",{value:name,configurable:!0}):value.name=name),CONFIGURABLE_LENGTH&&options&&hasOwn(options,"arity")&&value.length!==options.arity&&defineProperty(value,"length",{value:options.arity});try{options&&hasOwn(options,"constructor")&&options.constructor?DESCRIPTORS&&defineProperty(value,"prototype",{writable:!1}):value.prototype&&(value.prototype=void 0)}catch(error){}var state=enforceInternalState(value);return hasOwn(state,"source")||(state.source=TEMPLATE.join("string"==typeof name?name:"")),value};Function.prototype.toString=makeBuiltIn((function toString(){return isCallable(this)&&getInternalState(this).source||inspectSource(this)}),"toString")},"../../node_modules/core-js/internals/math-trunc.js":module=>{var ceil=Math.ceil,floor=Math.floor;module.exports=Math.trunc||function trunc(x){var n=+x;return(n>0?floor:ceil)(n)}},"../../node_modules/core-js/internals/microtask.js":(module,__unused_webpack_exports,__webpack_require__)=>{var flush,head,last,notify,toggle,node,promise,then,global=__webpack_require__("../../node_modules/core-js/internals/global.js"),bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),getOwnPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,macrotask=__webpack_require__("../../node_modules/core-js/internals/task.js").set,IS_IOS=__webpack_require__("../../node_modules/core-js/internals/engine-is-ios.js"),IS_IOS_PEBBLE=__webpack_require__("../../node_modules/core-js/internals/engine-is-ios-pebble.js"),IS_WEBOS_WEBKIT=__webpack_require__("../../node_modules/core-js/internals/engine-is-webos-webkit.js"),IS_NODE=__webpack_require__("../../node_modules/core-js/internals/engine-is-node.js"),MutationObserver=global.MutationObserver||global.WebKitMutationObserver,document=global.document,process=global.process,Promise=global.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;queueMicrotask||(flush=function(){var parent,fn;for(IS_NODE&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(error){throw head?notify():last=void 0,error}}last=void 0,parent&&parent.enter()},IS_IOS||IS_NODE||IS_WEBOS_WEBKIT||!MutationObserver||!document?!IS_IOS_PEBBLE&&Promise&&Promise.resolve?((promise=Promise.resolve(void 0)).constructor=Promise,then=bind(promise.then,promise),notify=function(){then(flush)}):IS_NODE?notify=function(){process.nextTick(flush)}:(macrotask=bind(macrotask,global),notify=function(){macrotask(flush)}):(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle})),module.exports=queueMicrotask||function(fn){var task={fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}},"../../node_modules/core-js/internals/new-promise-capability.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),$TypeError=TypeError,PromiseCapability=function(C){var resolve,reject;this.promise=new C((function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw $TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject})),this.resolve=aCallable(resolve),this.reject=aCallable(reject)};module.exports.f=function(C){return new PromiseCapability(C)}},"../../node_modules/core-js/internals/not-a-regexp.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isRegExp=__webpack_require__("../../node_modules/core-js/internals/is-regexp.js"),$TypeError=TypeError;module.exports=function(it){if(isRegExp(it))throw $TypeError("The method doesn't accept regular expressions");return it}},"../../node_modules/core-js/internals/object-assign.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),objectKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys.js"),getOwnPropertySymbolsModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-symbols.js"),propertyIsEnumerableModule=__webpack_require__("../../node_modules/core-js/internals/object-property-is-enumerable.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),IndexedObject=__webpack_require__("../../node_modules/core-js/internals/indexed-object.js"),$assign=Object.assign,defineProperty=Object.defineProperty,concat=uncurryThis([].concat);module.exports=!$assign||fails((function(){if(DESCRIPTORS&&1!==$assign({b:1},$assign(defineProperty({},"a",{enumerable:!0,get:function(){defineProperty(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var A={},B={},symbol=Symbol();return A[symbol]=7,"abcdefghijklmnopqrst".split("").forEach((function(chr){B[chr]=chr})),7!=$assign({},A)[symbol]||"abcdefghijklmnopqrst"!=objectKeys($assign({},B)).join("")}))?function assign(target,source){for(var T=toObject(target),argumentsLength=arguments.length,index=1,getOwnPropertySymbols=getOwnPropertySymbolsModule.f,propertyIsEnumerable=propertyIsEnumerableModule.f;argumentsLength>index;)for(var key,S=IndexedObject(arguments[index++]),keys=getOwnPropertySymbols?concat(objectKeys(S),getOwnPropertySymbols(S)):objectKeys(S),length=keys.length,j=0;length>j;)key=keys[j++],DESCRIPTORS&&!call(propertyIsEnumerable,S,key)||(T[key]=S[key]);return T}:$assign},"../../node_modules/core-js/internals/object-create.js":(module,__unused_webpack_exports,__webpack_require__)=>{var activeXDocument,anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),definePropertiesModule=__webpack_require__("../../node_modules/core-js/internals/object-define-properties.js"),enumBugKeys=__webpack_require__("../../node_modules/core-js/internals/enum-bug-keys.js"),hiddenKeys=__webpack_require__("../../node_modules/core-js/internals/hidden-keys.js"),html=__webpack_require__("../../node_modules/core-js/internals/html.js"),documentCreateElement=__webpack_require__("../../node_modules/core-js/internals/document-create-element.js"),sharedKey=__webpack_require__("../../node_modules/core-js/internals/shared-key.js"),IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(content){return"<script>"+content+"<\/script>"},NullProtoObjectViaActiveX=function(activeXDocument){activeXDocument.write(scriptTag("")),activeXDocument.close();var temp=activeXDocument.parentWindow.Object;return activeXDocument=null,temp},NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(error){}var iframeDocument,iframe;NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):((iframe=documentCreateElement("iframe")).style.display="none",html.appendChild(iframe),iframe.src=String("javascript:"),(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F):NullProtoObjectViaActiveX(activeXDocument);for(var length=enumBugKeys.length;length--;)delete NullProtoObject.prototype[enumBugKeys[length]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0,module.exports=Object.create||function create(O,Properties){var result;return null!==O?(EmptyConstructor.prototype=anObject(O),result=new EmptyConstructor,EmptyConstructor.prototype=null,result[IE_PROTO]=O):result=NullProtoObject(),void 0===Properties?result:definePropertiesModule.f(result,Properties)}},"../../node_modules/core-js/internals/object-define-properties.js":(__unused_webpack_module,exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),V8_PROTOTYPE_DEFINE_BUG=__webpack_require__("../../node_modules/core-js/internals/v8-prototype-define-bug.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),objectKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys.js");exports.f=DESCRIPTORS&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function defineProperties(O,Properties){anObject(O);for(var key,props=toIndexedObject(Properties),keys=objectKeys(Properties),length=keys.length,index=0;length>index;)definePropertyModule.f(O,key=keys[index++],props[key]);return O}},"../../node_modules/core-js/internals/object-define-property.js":(__unused_webpack_module,exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),IE8_DOM_DEFINE=__webpack_require__("../../node_modules/core-js/internals/ie8-dom-define.js"),V8_PROTOTYPE_DEFINE_BUG=__webpack_require__("../../node_modules/core-js/internals/v8-prototype-define-bug.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),toPropertyKey=__webpack_require__("../../node_modules/core-js/internals/to-property-key.js"),$TypeError=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?V8_PROTOTYPE_DEFINE_BUG?function defineProperty(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),"function"==typeof O&&"prototype"===P&&"value"in Attributes&&"writable"in Attributes&&!Attributes.writable){var current=$getOwnPropertyDescriptor(O,P);current&&current.writable&&(O[P]=Attributes.value,Attributes={configurable:"configurable"in Attributes?Attributes.configurable:current.configurable,enumerable:"enumerable"in Attributes?Attributes.enumerable:current.enumerable,writable:!1})}return $defineProperty(O,P,Attributes)}:$defineProperty:function defineProperty(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),IE8_DOM_DEFINE)try{return $defineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw $TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}},"../../node_modules/core-js/internals/object-get-own-property-descriptor.js":(__unused_webpack_module,exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),propertyIsEnumerableModule=__webpack_require__("../../node_modules/core-js/internals/object-property-is-enumerable.js"),createPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/create-property-descriptor.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),toPropertyKey=__webpack_require__("../../node_modules/core-js/internals/to-property-key.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),IE8_DOM_DEFINE=__webpack_require__("../../node_modules/core-js/internals/ie8-dom-define.js"),$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?$getOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){if(O=toIndexedObject(O),P=toPropertyKey(P),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(O,P)}catch(error){}if(hasOwn(O,P))return createPropertyDescriptor(!call(propertyIsEnumerableModule.f,O,P),O[P])}},"../../node_modules/core-js/internals/object-get-own-property-names-external.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),$getOwnPropertyNames=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names.js").f,arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice-simple.js"),windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function getOwnPropertyNames(it){return windowNames&&"Window"==classof(it)?function(it){try{return $getOwnPropertyNames(it)}catch(error){return arraySlice(windowNames)}}(it):$getOwnPropertyNames(toIndexedObject(it))}},"../../node_modules/core-js/internals/object-get-own-property-names.js":(__unused_webpack_module,exports,__webpack_require__)=>{var internalObjectKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys-internal.js"),hiddenKeys=__webpack_require__("../../node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys)}},"../../node_modules/core-js/internals/object-get-own-property-symbols.js":(__unused_webpack_module,exports)=>{exports.f=Object.getOwnPropertySymbols},"../../node_modules/core-js/internals/object-get-prototype-of.js":(module,__unused_webpack_exports,__webpack_require__)=>{var hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),sharedKey=__webpack_require__("../../node_modules/core-js/internals/shared-key.js"),CORRECT_PROTOTYPE_GETTER=__webpack_require__("../../node_modules/core-js/internals/correct-prototype-getter.js"),IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype=$Object.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(O){var object=toObject(O);if(hasOwn(object,IE_PROTO))return object[IE_PROTO];var constructor=object.constructor;return isCallable(constructor)&&object instanceof constructor?constructor.prototype:object instanceof $Object?ObjectPrototype:null}},"../../node_modules/core-js/internals/object-is-extensible.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),ARRAY_BUFFER_NON_EXTENSIBLE=__webpack_require__("../../node_modules/core-js/internals/array-buffer-non-extensible.js"),$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails((function(){$isExtensible(1)}));module.exports=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?function isExtensible(it){return!!isObject(it)&&((!ARRAY_BUFFER_NON_EXTENSIBLE||"ArrayBuffer"!=classof(it))&&(!$isExtensible||$isExtensible(it)))}:$isExtensible},"../../node_modules/core-js/internals/object-is-prototype-of.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js");module.exports=uncurryThis({}.isPrototypeOf)},"../../node_modules/core-js/internals/object-keys-internal.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),indexOf=__webpack_require__("../../node_modules/core-js/internals/array-includes.js").indexOf,hiddenKeys=__webpack_require__("../../node_modules/core-js/internals/hidden-keys.js"),push=uncurryThis([].push);module.exports=function(object,names){var key,O=toIndexedObject(object),i=0,result=[];for(key in O)!hasOwn(hiddenKeys,key)&&hasOwn(O,key)&&push(result,key);for(;names.length>i;)hasOwn(O,key=names[i++])&&(~indexOf(result,key)||push(result,key));return result}},"../../node_modules/core-js/internals/object-keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var internalObjectKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys-internal.js"),enumBugKeys=__webpack_require__("../../node_modules/core-js/internals/enum-bug-keys.js");module.exports=Object.keys||function keys(O){return internalObjectKeys(O,enumBugKeys)}},"../../node_modules/core-js/internals/object-property-is-enumerable.js":(__unused_webpack_module,exports)=>{"use strict";var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!$propertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:$propertyIsEnumerable},"../../node_modules/core-js/internals/object-set-prototype-of.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),aPossiblePrototype=__webpack_require__("../../node_modules/core-js/internals/a-possible-prototype.js");module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var setter,CORRECT_SETTER=!1,test={};try{(setter=uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(test,[]),CORRECT_SETTER=test instanceof Array}catch(error){}return function setPrototypeOf(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter(O,proto):O.__proto__=proto,O}}():void 0)},"../../node_modules/core-js/internals/object-to-array.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),objectKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),propertyIsEnumerable=uncurryThis(__webpack_require__("../../node_modules/core-js/internals/object-property-is-enumerable.js").f),push=uncurryThis([].push),createMethod=function(TO_ENTRIES){return function(it){for(var key,O=toIndexedObject(it),keys=objectKeys(O),length=keys.length,i=0,result=[];length>i;)key=keys[i++],DESCRIPTORS&&!propertyIsEnumerable(O,key)||push(result,TO_ENTRIES?[key,O[key]]:O[key]);return result}};module.exports={entries:createMethod(!0),values:createMethod(!1)}},"../../node_modules/core-js/internals/object-to-string.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var TO_STRING_TAG_SUPPORT=__webpack_require__("../../node_modules/core-js/internals/to-string-tag-support.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof.js");module.exports=TO_STRING_TAG_SUPPORT?{}.toString:function toString(){return"[object "+classof(this)+"]"}},"../../node_modules/core-js/internals/ordinary-to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),$TypeError=TypeError;module.exports=function(input,pref){var fn,val;if("string"===pref&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;if(isCallable(fn=input.valueOf)&&!isObject(val=call(fn,input)))return val;if("string"!==pref&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;throw $TypeError("Can't convert object to primitive value")}},"../../node_modules/core-js/internals/own-keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),getOwnPropertyNamesModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names.js"),getOwnPropertySymbolsModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-symbols.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),concat=uncurryThis([].concat);module.exports=getBuiltIn("Reflect","ownKeys")||function ownKeys(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?concat(keys,getOwnPropertySymbols(it)):keys}},"../../node_modules/core-js/internals/path.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js");module.exports=global},"../../node_modules/core-js/internals/perform.js":module=>{module.exports=function(exec){try{return{error:!1,value:exec()}}catch(error){return{error:!0,value:error}}}},"../../node_modules/core-js/internals/promise-constructor-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),NativePromiseConstructor=__webpack_require__("../../node_modules/core-js/internals/promise-native-constructor.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isForced=__webpack_require__("../../node_modules/core-js/internals/is-forced.js"),inspectSource=__webpack_require__("../../node_modules/core-js/internals/inspect-source.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),IS_BROWSER=__webpack_require__("../../node_modules/core-js/internals/engine-is-browser.js"),IS_DENO=__webpack_require__("../../node_modules/core-js/internals/engine-is-deno.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),V8_VERSION=__webpack_require__("../../node_modules/core-js/internals/engine-v8-version.js"),NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,SPECIES=wellKnownSymbol("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT=isCallable(global.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR=isForced("Promise",(function(){var PROMISE_CONSTRUCTOR_SOURCE=inspectSource(NativePromiseConstructor),GLOBAL_CORE_JS_PROMISE=PROMISE_CONSTRUCTOR_SOURCE!==String(NativePromiseConstructor);if(!GLOBAL_CORE_JS_PROMISE&&66===V8_VERSION)return!0;if(IS_PURE&&(!NativePromisePrototype.catch||!NativePromisePrototype.finally))return!0;if(!V8_VERSION||V8_VERSION<51||!/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)){var promise=new NativePromiseConstructor((function(resolve){resolve(1)})),FakePromise=function(exec){exec((function(){}),(function(){}))};if((promise.constructor={})[SPECIES]=FakePromise,!(SUBCLASSING=promise.then((function(){}))instanceof FakePromise))return!0}return!GLOBAL_CORE_JS_PROMISE&&(IS_BROWSER||IS_DENO)&&!NATIVE_PROMISE_REJECTION_EVENT}));module.exports={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT,SUBCLASSING}},"../../node_modules/core-js/internals/promise-native-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js");module.exports=global.Promise},"../../node_modules/core-js/internals/promise-resolve.js":(module,__unused_webpack_exports,__webpack_require__)=>{var anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),newPromiseCapability=__webpack_require__("../../node_modules/core-js/internals/new-promise-capability.js");module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},"../../node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(module,__unused_webpack_exports,__webpack_require__)=>{var NativePromiseConstructor=__webpack_require__("../../node_modules/core-js/internals/promise-native-constructor.js"),checkCorrectnessOfIteration=__webpack_require__("../../node_modules/core-js/internals/check-correctness-of-iteration.js"),FORCED_PROMISE_CONSTRUCTOR=__webpack_require__("../../node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;module.exports=FORCED_PROMISE_CONSTRUCTOR||!checkCorrectnessOfIteration((function(iterable){NativePromiseConstructor.all(iterable).then(void 0,(function(){}))}))},"../../node_modules/core-js/internals/proxy-accessor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f;module.exports=function(Target,Source,key){key in Target||defineProperty(Target,key,{configurable:!0,get:function(){return Source[key]},set:function(it){Source[key]=it}})}},"../../node_modules/core-js/internals/queue.js":module=>{var Queue=function(){this.head=null,this.tail=null};Queue.prototype={add:function(item){var entry={item,next:null};this.head?this.tail.next=entry:this.head=entry,this.tail=entry},get:function(){var entry=this.head;if(entry)return this.head=entry.next,this.tail===entry&&(this.tail=null),entry.item}},module.exports=Queue},"../../node_modules/core-js/internals/regexp-exec-abstract.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof-raw.js"),regexpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec.js"),$TypeError=TypeError;module.exports=function(R,S){var exec=R.exec;if(isCallable(exec)){var result=call(exec,R,S);return null!==result&&anObject(result),result}if("RegExp"===classof(R))return call(regexpExec,R,S);throw $TypeError("RegExp#exec called on incompatible receiver")}},"../../node_modules/core-js/internals/regexp-exec.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var re1,re2,call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),regexpFlags=__webpack_require__("../../node_modules/core-js/internals/regexp-flags.js"),stickyHelpers=__webpack_require__("../../node_modules/core-js/internals/regexp-sticky-helpers.js"),shared=__webpack_require__("../../node_modules/core-js/internals/shared.js"),create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),getInternalState=__webpack_require__("../../node_modules/core-js/internals/internal-state.js").get,UNSUPPORTED_DOT_ALL=__webpack_require__("../../node_modules/core-js/internals/regexp-unsupported-dot-all.js"),UNSUPPORTED_NCG=__webpack_require__("../../node_modules/core-js/internals/regexp-unsupported-ncg.js"),nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt=uncurryThis("".charAt),indexOf=uncurryThis("".indexOf),replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice),UPDATES_LAST_INDEX_WRONG=(re2=/b*/g,call(nativeExec,re1=/a/,"a"),call(nativeExec,re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),UNSUPPORTED_Y=stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG)&&(patchedExec=function exec(string){var result,reCopy,lastIndex,match,i,object,group,re=this,state=getInternalState(re),str=toString(string),raw=state.raw;if(raw)return raw.lastIndex=re.lastIndex,result=call(patchedExec,raw,str),re.lastIndex=raw.lastIndex,result;var groups=state.groups,sticky=UNSUPPORTED_Y&&re.sticky,flags=call(regexpFlags,re),source=re.source,charsAdded=0,strCopy=str;if(sticky&&(flags=replace(flags,"y",""),-1===indexOf(flags,"g")&&(flags+="g"),strCopy=stringSlice(str,re.lastIndex),re.lastIndex>0&&(!re.multiline||re.multiline&&"\n"!==charAt(str,re.lastIndex-1))&&(source="(?: "+source+")",strCopy=" "+strCopy,charsAdded++),reCopy=new RegExp("^(?:"+source+")",flags)),NPCG_INCLUDED&&(reCopy=new RegExp("^"+source+"$(?!\\s)",flags)),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=call(nativeExec,sticky?reCopy:re,strCopy),sticky?match?(match.input=stringSlice(match.input,charsAdded),match[0]=stringSlice(match[0],charsAdded),match.index=re.lastIndex,re.lastIndex+=match[0].length):re.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&call(nativeReplace,match[0],reCopy,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match&&groups)for(match.groups=object=create(null),i=0;i<groups.length;i++)object[(group=groups[i])[0]]=match[group[1]];return match}),module.exports=patchedExec},"../../node_modules/core-js/internals/regexp-flags.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js");module.exports=function(){var that=anObject(this),result="";return that.hasIndices&&(result+="d"),that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.unicodeSets&&(result+="v"),that.sticky&&(result+="y"),result}},"../../node_modules/core-js/internals/regexp-get-flags.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),regExpFlags=__webpack_require__("../../node_modules/core-js/internals/regexp-flags.js"),RegExpPrototype=RegExp.prototype;module.exports=function(R){var flags=R.flags;return void 0!==flags||"flags"in RegExpPrototype||hasOwn(R,"flags")||!isPrototypeOf(RegExpPrototype,R)?flags:call(regExpFlags,R)}},"../../node_modules/core-js/internals/regexp-sticky-helpers.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),$RegExp=__webpack_require__("../../node_modules/core-js/internals/global.js").RegExp,UNSUPPORTED_Y=fails((function(){var re=$RegExp("a","y");return re.lastIndex=2,null!=re.exec("abcd")})),MISSED_STICKY=UNSUPPORTED_Y||fails((function(){return!$RegExp("a","y").sticky})),BROKEN_CARET=UNSUPPORTED_Y||fails((function(){var re=$RegExp("^r","gy");return re.lastIndex=2,null!=re.exec("str")}));module.exports={BROKEN_CARET,MISSED_STICKY,UNSUPPORTED_Y}},"../../node_modules/core-js/internals/regexp-unsupported-dot-all.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),$RegExp=__webpack_require__("../../node_modules/core-js/internals/global.js").RegExp;module.exports=fails((function(){var re=$RegExp(".","s");return!(re.dotAll&&re.exec("\n")&&"s"===re.flags)}))},"../../node_modules/core-js/internals/regexp-unsupported-ncg.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),$RegExp=__webpack_require__("../../node_modules/core-js/internals/global.js").RegExp;module.exports=fails((function(){var re=$RegExp("(?<a>b)","g");return"b"!==re.exec("b").groups.a||"bc"!=="b".replace(re,"$<a>c")}))},"../../node_modules/core-js/internals/require-object-coercible.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),$TypeError=TypeError;module.exports=function(it){if(isNullOrUndefined(it))throw $TypeError("Can't call method on "+it);return it}},"../../node_modules/core-js/internals/same-value.js":module=>{module.exports=Object.is||function is(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},"../../node_modules/core-js/internals/set-species.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},"../../node_modules/core-js/internals/set-to-string-tag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),TO_STRING_TAG=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("toStringTag");module.exports=function(target,TAG,STATIC){target&&!STATIC&&(target=target.prototype),target&&!hasOwn(target,TO_STRING_TAG)&&defineProperty(target,TO_STRING_TAG,{configurable:!0,value:TAG})}},"../../node_modules/core-js/internals/shared-key.js":(module,__unused_webpack_exports,__webpack_require__)=>{var shared=__webpack_require__("../../node_modules/core-js/internals/shared.js"),uid=__webpack_require__("../../node_modules/core-js/internals/uid.js"),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}},"../../node_modules/core-js/internals/shared-store.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),defineGlobalProperty=__webpack_require__("../../node_modules/core-js/internals/define-global-property.js"),store=global["__core-js_shared__"]||defineGlobalProperty("__core-js_shared__",{});module.exports=store},"../../node_modules/core-js/internals/shared.js":(module,__unused_webpack_exports,__webpack_require__)=>{var IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),store=__webpack_require__("../../node_modules/core-js/internals/shared-store.js");(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:"3.25.0",mode:IS_PURE?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},"../../node_modules/core-js/internals/species-constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),aConstructor=__webpack_require__("../../node_modules/core-js/internals/a-constructor.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),SPECIES=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("species");module.exports=function(O,defaultConstructor){var S,C=anObject(O).constructor;return void 0===C||isNullOrUndefined(S=anObject(C)[SPECIES])?defaultConstructor:aConstructor(S)}},"../../node_modules/core-js/internals/string-multibyte.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),toIntegerOrInfinity=__webpack_require__("../../node_modules/core-js/internals/to-integer-or-infinity.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),charAt=uncurryThis("".charAt),charCodeAt=uncurryThis("".charCodeAt),stringSlice=uncurryThis("".slice),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var first,second,S=toString(requireObjectCoercible($this)),position=toIntegerOrInfinity(pos),size=S.length;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=charCodeAt(S,position))<55296||first>56319||position+1===size||(second=charCodeAt(S,position+1))<56320||second>57343?CONVERT_TO_STRING?charAt(S,position):first:CONVERT_TO_STRING?stringSlice(S,position,position+2):second-56320+(first-55296<<10)+65536}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},"../../node_modules/core-js/internals/string-punycode-to-ascii.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",$RangeError=RangeError,exec=uncurryThis(regexSeparators.exec),floor=Math.floor,fromCharCode=String.fromCharCode,charCodeAt=uncurryThis("".charCodeAt),join=uncurryThis([].join),push=uncurryThis([].push),replace=uncurryThis("".replace),split=uncurryThis("".split),toLowerCase=uncurryThis("".toLowerCase),digitToBasic=function(digit){return digit+22+75*(digit<26)},adapt=function(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);delta>455;)delta=floor(delta/35),k+=36;return floor(k+36*delta/(delta+38))},encode=function(input){var output=[];input=function(string){for(var output=[],counter=0,length=string.length;counter<length;){var value=charCodeAt(string,counter++);if(value>=55296&&value<=56319&&counter<length){var extra=charCodeAt(string,counter++);56320==(64512&extra)?push(output,((1023&value)<<10)+(1023&extra)+65536):(push(output,value),counter--)}else push(output,value)}return output}(input);var i,currentValue,inputLength=input.length,n=128,delta=0,bias=72;for(i=0;i<input.length;i++)(currentValue=input[i])<128&&push(output,fromCharCode(currentValue));var basicLength=output.length,handledCPCount=basicLength;for(basicLength&&push(output,"-");handledCPCount<inputLength;){var m=2147483647;for(i=0;i<input.length;i++)(currentValue=input[i])>=n&&currentValue<m&&(m=currentValue);var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((2147483647-delta)/handledCPCountPlusOne))throw $RangeError(OVERFLOW_ERROR);for(delta+=(m-n)*handledCPCountPlusOne,n=m,i=0;i<input.length;i++){if((currentValue=input[i])<n&&++delta>2147483647)throw $RangeError(OVERFLOW_ERROR);if(currentValue==n){for(var q=delta,k=36;;){var t=k<=bias?1:k>=bias+26?26:k-bias;if(q<t)break;var qMinusT=q-t,baseMinusT=36-t;push(output,fromCharCode(digitToBasic(t+qMinusT%baseMinusT))),q=floor(qMinusT/baseMinusT),k+=36}push(output,fromCharCode(digitToBasic(q))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,handledCPCount++}}delta++,n++}return join(output,"")};module.exports=function(input){var i,label,encoded=[],labels=split(replace(toLowerCase(input),regexSeparators,"."),".");for(i=0;i<labels.length;i++)label=labels[i],push(encoded,exec(regexNonASCII,label)?"xn--"+encode(label):label);return join(encoded,".")}},"../../node_modules/core-js/internals/string-trim-forced.js":(module,__unused_webpack_exports,__webpack_require__)=>{var PROPER_FUNCTION_NAME=__webpack_require__("../../node_modules/core-js/internals/function-name.js").PROPER,fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),whitespaces=__webpack_require__("../../node_modules/core-js/internals/whitespaces.js");module.exports=function(METHOD_NAME){return fails((function(){return!!whitespaces[METHOD_NAME]()||""!==""[METHOD_NAME]()||PROPER_FUNCTION_NAME&&whitespaces[METHOD_NAME].name!==METHOD_NAME}))}},"../../node_modules/core-js/internals/string-trim.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),whitespaces=__webpack_require__("../../node_modules/core-js/internals/whitespaces.js"),replace=uncurryThis("".replace),whitespace="["+whitespaces+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod=function(TYPE){return function($this){var string=toString(requireObjectCoercible($this));return 1&TYPE&&(string=replace(string,ltrim,"")),2&TYPE&&(string=replace(string,rtrim,"")),string}};module.exports={start:createMethod(1),end:createMethod(2),trim:createMethod(3)}},"../../node_modules/core-js/internals/symbol-constructor-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{var V8_VERSION=__webpack_require__("../../node_modules/core-js/internals/engine-v8-version.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=!!Object.getOwnPropertySymbols&&!fails((function(){var symbol=Symbol();return!String(symbol)||!(Object(symbol)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41}))},"../../node_modules/core-js/internals/symbol-define-to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js");module.exports=function(){var Symbol=getBuiltIn("Symbol"),SymbolPrototype=Symbol&&Symbol.prototype,valueOf=SymbolPrototype&&SymbolPrototype.valueOf,TO_PRIMITIVE=wellKnownSymbol("toPrimitive");SymbolPrototype&&!SymbolPrototype[TO_PRIMITIVE]&&defineBuiltIn(SymbolPrototype,TO_PRIMITIVE,(function(hint){return call(valueOf,this)}),{arity:1})}},"../../node_modules/core-js/internals/symbol-registry-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{var NATIVE_SYMBOL=__webpack_require__("../../node_modules/core-js/internals/symbol-constructor-detection.js");module.exports=NATIVE_SYMBOL&&!!Symbol.for&&!!Symbol.keyFor},"../../node_modules/core-js/internals/task.js":(module,__unused_webpack_exports,__webpack_require__)=>{var location,defer,channel,port,global=__webpack_require__("../../node_modules/core-js/internals/global.js"),apply=__webpack_require__("../../node_modules/core-js/internals/function-apply.js"),bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),html=__webpack_require__("../../node_modules/core-js/internals/html.js"),arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice.js"),createElement=__webpack_require__("../../node_modules/core-js/internals/document-create-element.js"),validateArgumentsLength=__webpack_require__("../../node_modules/core-js/internals/validate-arguments-length.js"),IS_IOS=__webpack_require__("../../node_modules/core-js/internals/engine-is-ios.js"),IS_NODE=__webpack_require__("../../node_modules/core-js/internals/engine-is-node.js"),set=global.setImmediate,clear=global.clearImmediate,process=global.process,Dispatch=global.Dispatch,Function=global.Function,MessageChannel=global.MessageChannel,String=global.String,counter=0,queue={};try{location=global.location}catch(error){}var run=function(id){if(hasOwn(queue,id)){var fn=queue[id];delete queue[id],fn()}},runner=function(id){return function(){run(id)}},listener=function(event){run(event.data)},post=function(id){global.postMessage(String(id),location.protocol+"//"+location.host)};set&&clear||(set=function setImmediate(handler){validateArgumentsLength(arguments.length,1);var fn=isCallable(handler)?handler:Function(handler),args=arraySlice(arguments,1);return queue[++counter]=function(){apply(fn,void 0,args)},defer(counter),counter},clear=function clearImmediate(id){delete queue[id]},IS_NODE?defer=function(id){process.nextTick(runner(id))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id))}:MessageChannel&&!IS_IOS?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port)):global.addEventListener&&isCallable(global.postMessage)&&!global.importScripts&&location&&"file:"!==location.protocol&&!fails(post)?(defer=post,global.addEventListener("message",listener,!1)):defer="onreadystatechange"in createElement("script")?function(id){html.appendChild(createElement("script")).onreadystatechange=function(){html.removeChild(this),run(id)}}:function(id){setTimeout(runner(id),0)}),module.exports={set,clear}},"../../node_modules/core-js/internals/this-number-value.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js");module.exports=uncurryThis(1..valueOf)},"../../node_modules/core-js/internals/to-absolute-index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toIntegerOrInfinity=__webpack_require__("../../node_modules/core-js/internals/to-integer-or-infinity.js"),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toIntegerOrInfinity(index);return integer<0?max(integer+length,0):min(integer,length)}},"../../node_modules/core-js/internals/to-indexed-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{var IndexedObject=__webpack_require__("../../node_modules/core-js/internals/indexed-object.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js");module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},"../../node_modules/core-js/internals/to-integer-or-infinity.js":(module,__unused_webpack_exports,__webpack_require__)=>{var trunc=__webpack_require__("../../node_modules/core-js/internals/math-trunc.js");module.exports=function(argument){var number=+argument;return number!=number||0===number?0:trunc(number)}},"../../node_modules/core-js/internals/to-length.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toIntegerOrInfinity=__webpack_require__("../../node_modules/core-js/internals/to-integer-or-infinity.js"),min=Math.min;module.exports=function(argument){return argument>0?min(toIntegerOrInfinity(argument),9007199254740991):0}},"../../node_modules/core-js/internals/to-object.js":(module,__unused_webpack_exports,__webpack_require__)=>{var requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),$Object=Object;module.exports=function(argument){return $Object(requireObjectCoercible(argument))}},"../../node_modules/core-js/internals/to-primitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),isSymbol=__webpack_require__("../../node_modules/core-js/internals/is-symbol.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js"),ordinaryToPrimitive=__webpack_require__("../../node_modules/core-js/internals/ordinary-to-primitive.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),$TypeError=TypeError,TO_PRIMITIVE=wellKnownSymbol("toPrimitive");module.exports=function(input,pref){if(!isObject(input)||isSymbol(input))return input;var result,exoticToPrim=getMethod(input,TO_PRIMITIVE);if(exoticToPrim){if(void 0===pref&&(pref="default"),result=call(exoticToPrim,input,pref),!isObject(result)||isSymbol(result))return result;throw $TypeError("Can't convert object to primitive value")}return void 0===pref&&(pref="number"),ordinaryToPrimitive(input,pref)}},"../../node_modules/core-js/internals/to-property-key.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toPrimitive=__webpack_require__("../../node_modules/core-js/internals/to-primitive.js"),isSymbol=__webpack_require__("../../node_modules/core-js/internals/is-symbol.js");module.exports=function(argument){var key=toPrimitive(argument,"string");return isSymbol(key)?key:key+""}},"../../node_modules/core-js/internals/to-string-tag-support.js":(module,__unused_webpack_exports,__webpack_require__)=>{var test={};test[__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",module.exports="[object z]"===String(test)},"../../node_modules/core-js/internals/to-string.js":(module,__unused_webpack_exports,__webpack_require__)=>{var classof=__webpack_require__("../../node_modules/core-js/internals/classof.js"),$String=String;module.exports=function(argument){if("Symbol"===classof(argument))throw TypeError("Cannot convert a Symbol value to a string");return $String(argument)}},"../../node_modules/core-js/internals/try-to-string.js":module=>{var $String=String;module.exports=function(argument){try{return $String(argument)}catch(error){return"Object"}}},"../../node_modules/core-js/internals/uid.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),id=0,postfix=Math.random(),toString=uncurryThis(1..toString);module.exports=function(key){return"Symbol("+(void 0===key?"":key)+")_"+toString(++id+postfix,36)}},"../../node_modules/core-js/internals/url-constructor-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{var fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),ITERATOR=wellKnownSymbol("iterator");module.exports=!fails((function(){var url=new URL("b?a=1&b=2&c=3","http://a"),searchParams=url.searchParams,result="";return url.pathname="c%20d",searchParams.forEach((function(value,key){searchParams.delete("b"),result+=key+value})),IS_PURE&&!url.toJSON||!searchParams.sort||"http://a/c%20d?a=1&c=3"!==url.href||"3"!==searchParams.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!searchParams[ITERATOR]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==result||"x"!==new URL("http://x",void 0).host}))},"../../node_modules/core-js/internals/use-symbol-as-uid.js":(module,__unused_webpack_exports,__webpack_require__)=>{var NATIVE_SYMBOL=__webpack_require__("../../node_modules/core-js/internals/symbol-constructor-detection.js");module.exports=NATIVE_SYMBOL&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"../../node_modules/core-js/internals/v8-prototype-define-bug.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js");module.exports=DESCRIPTORS&&fails((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},"../../node_modules/core-js/internals/validate-arguments-length.js":module=>{var $TypeError=TypeError;module.exports=function(passed,required){if(passed<required)throw $TypeError("Not enough arguments");return passed}},"../../node_modules/core-js/internals/weak-map-basic-detection.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),WeakMap=global.WeakMap;module.exports=isCallable(WeakMap)&&/native code/.test(String(WeakMap))},"../../node_modules/core-js/internals/well-known-symbol-define.js":(module,__unused_webpack_exports,__webpack_require__)=>{var path=__webpack_require__("../../node_modules/core-js/internals/path.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),wrappedWellKnownSymbolModule=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-wrapped.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f;module.exports=function(NAME){var Symbol=path.Symbol||(path.Symbol={});hasOwn(Symbol,NAME)||defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}},"../../node_modules/core-js/internals/well-known-symbol-wrapped.js":(__unused_webpack_module,exports,__webpack_require__)=>{var wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js");exports.f=wellKnownSymbol},"../../node_modules/core-js/internals/well-known-symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),shared=__webpack_require__("../../node_modules/core-js/internals/shared.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),uid=__webpack_require__("../../node_modules/core-js/internals/uid.js"),NATIVE_SYMBOL=__webpack_require__("../../node_modules/core-js/internals/symbol-constructor-detection.js"),USE_SYMBOL_AS_UID=__webpack_require__("../../node_modules/core-js/internals/use-symbol-as-uid.js"),WellKnownSymbolsStore=shared("wks"),Symbol=global.Symbol,symbolFor=Symbol&&Symbol.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol:Symbol&&Symbol.withoutSetter||uid;module.exports=function(name){if(!hasOwn(WellKnownSymbolsStore,name)||!NATIVE_SYMBOL&&"string"!=typeof WellKnownSymbolsStore[name]){var description="Symbol."+name;NATIVE_SYMBOL&&hasOwn(Symbol,name)?WellKnownSymbolsStore[name]=Symbol[name]:WellKnownSymbolsStore[name]=USE_SYMBOL_AS_UID&&symbolFor?symbolFor(description):createWellKnownSymbol(description)}return WellKnownSymbolsStore[name]}},"../../node_modules/core-js/internals/whitespaces.js":module=>{module.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"../../node_modules/core-js/modules/es.array.concat.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isArray=__webpack_require__("../../node_modules/core-js/internals/is-array.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),doesNotExceedSafeInteger=__webpack_require__("../../node_modules/core-js/internals/does-not-exceed-safe-integer.js"),createProperty=__webpack_require__("../../node_modules/core-js/internals/create-property.js"),arraySpeciesCreate=__webpack_require__("../../node_modules/core-js/internals/array-species-create.js"),arrayMethodHasSpeciesSupport=__webpack_require__("../../node_modules/core-js/internals/array-method-has-species-support.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),V8_VERSION=__webpack_require__("../../node_modules/core-js/internals/engine-v8-version.js"),IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails((function(){var array=[];return array[IS_CONCAT_SPREADABLE]=!1,array.concat()[0]!==array})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(O){if(!isObject(O))return!1;var spreadable=O[IS_CONCAT_SPREADABLE];return void 0!==spreadable?!!spreadable:isArray(O)};$({target:"Array",proto:!0,arity:1,forced:!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT},{concat:function concat(arg){var i,k,length,len,E,O=toObject(this),A=arraySpeciesCreate(O,0),n=0;for(i=-1,length=arguments.length;i<length;i++)if(isConcatSpreadable(E=-1===i?O:arguments[i]))for(len=lengthOfArrayLike(E),doesNotExceedSafeInteger(n+len),k=0;k<len;k++,n++)k in E&&createProperty(A,n,E[k]);else doesNotExceedSafeInteger(n+1),createProperty(A,n++,E);return A.length=n,A}})},"../../node_modules/core-js/modules/es.array.fill.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),fill=__webpack_require__("../../node_modules/core-js/internals/array-fill.js"),addToUnscopables=__webpack_require__("../../node_modules/core-js/internals/add-to-unscopables.js");$({target:"Array",proto:!0},{fill}),addToUnscopables("fill")},"../../node_modules/core-js/modules/es.array.filter.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$filter=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js").filter;$({target:"Array",proto:!0,forced:!__webpack_require__("../../node_modules/core-js/internals/array-method-has-species-support.js")("filter")},{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},"../../node_modules/core-js/modules/es.array.find-index.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$findIndex=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js").findIndex,addToUnscopables=__webpack_require__("../../node_modules/core-js/internals/add-to-unscopables.js"),SKIPS_HOLES=!0;"findIndex"in[]&&Array(1).findIndex((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function findIndex(callbackfn){return $findIndex(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("findIndex")},"../../node_modules/core-js/modules/es.array.find.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$find=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js").find,addToUnscopables=__webpack_require__("../../node_modules/core-js/internals/add-to-unscopables.js"),SKIPS_HOLES=!0;"find"in[]&&Array(1).find((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES},{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("find")},"../../node_modules/core-js/modules/es.array.from.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),from=__webpack_require__("../../node_modules/core-js/internals/array-from.js");$({target:"Array",stat:!0,forced:!__webpack_require__("../../node_modules/core-js/internals/check-correctness-of-iteration.js")((function(iterable){Array.from(iterable)}))},{from})},"../../node_modules/core-js/modules/es.array.includes.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$includes=__webpack_require__("../../node_modules/core-js/internals/array-includes.js").includes,fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),addToUnscopables=__webpack_require__("../../node_modules/core-js/internals/add-to-unscopables.js");$({target:"Array",proto:!0,forced:fails((function(){return!Array(1).includes()}))},{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes")},"../../node_modules/core-js/modules/es.array.iterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),addToUnscopables=__webpack_require__("../../node_modules/core-js/internals/add-to-unscopables.js"),Iterators=__webpack_require__("../../node_modules/core-js/internals/iterators.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,defineIterator=__webpack_require__("../../node_modules/core-js/internals/iterator-define.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Array Iterator");module.exports=defineIterator(Array,"Array",(function(iterated,kind){setInternalState(this,{type:"Array Iterator",target:toIndexedObject(iterated),index:0,kind})}),(function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):"keys"==kind?{value:index,done:!1}:"values"==kind?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}}),"values");var values=Iterators.Arguments=Iterators.Array;if(addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries"),!IS_PURE&&DESCRIPTORS&&"values"!==values.name)try{defineProperty(values,"name",{value:"values"})}catch(error){}},"../../node_modules/core-js/modules/es.array.join.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),IndexedObject=__webpack_require__("../../node_modules/core-js/internals/indexed-object.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),arrayMethodIsStrict=__webpack_require__("../../node_modules/core-js/internals/array-method-is-strict.js"),nativeJoin=uncurryThis([].join),ES3_STRINGS=IndexedObject!=Object,STRICT_METHOD=arrayMethodIsStrict("join",",");$({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD},{join:function join(separator){return nativeJoin(toIndexedObject(this),void 0===separator?",":separator)}})},"../../node_modules/core-js/modules/es.array.map.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$map=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js").map;$({target:"Array",proto:!0,forced:!__webpack_require__("../../node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function map(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},"../../node_modules/core-js/modules/es.array.slice.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),isArray=__webpack_require__("../../node_modules/core-js/internals/is-array.js"),isConstructor=__webpack_require__("../../node_modules/core-js/internals/is-constructor.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),toAbsoluteIndex=__webpack_require__("../../node_modules/core-js/internals/to-absolute-index.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),createProperty=__webpack_require__("../../node_modules/core-js/internals/create-property.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),arrayMethodHasSpeciesSupport=__webpack_require__("../../node_modules/core-js/internals/array-method-has-species-support.js"),nativeSlice=__webpack_require__("../../node_modules/core-js/internals/array-slice.js"),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("slice"),SPECIES=wellKnownSymbol("species"),$Array=Array,max=Math.max;$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{slice:function slice(start,end){var Constructor,result,n,O=toIndexedObject(this),length=lengthOfArrayLike(O),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(void 0===end?length:end,length);if(isArray(O)&&(Constructor=O.constructor,(isConstructor(Constructor)&&(Constructor===$Array||isArray(Constructor.prototype))||isObject(Constructor)&&null===(Constructor=Constructor[SPECIES]))&&(Constructor=void 0),Constructor===$Array||void 0===Constructor))return nativeSlice(O,k,fin);for(result=new(void 0===Constructor?$Array:Constructor)(max(fin-k,0)),n=0;k<fin;k++,n++)k in O&&createProperty(result,n,O[k]);return result.length=n,result}})},"../../node_modules/core-js/modules/es.array.sort.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),lengthOfArrayLike=__webpack_require__("../../node_modules/core-js/internals/length-of-array-like.js"),deletePropertyOrThrow=__webpack_require__("../../node_modules/core-js/internals/delete-property-or-throw.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),internalSort=__webpack_require__("../../node_modules/core-js/internals/array-sort.js"),arrayMethodIsStrict=__webpack_require__("../../node_modules/core-js/internals/array-method-is-strict.js"),FF=__webpack_require__("../../node_modules/core-js/internals/engine-ff-version.js"),IE_OR_EDGE=__webpack_require__("../../node_modules/core-js/internals/engine-is-ie-or-edge.js"),V8=__webpack_require__("../../node_modules/core-js/internals/engine-v8-version.js"),WEBKIT=__webpack_require__("../../node_modules/core-js/internals/engine-webkit-version.js"),test=[],nativeSort=uncurryThis(test.sort),push=uncurryThis(test.push),FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),STRICT_METHOD=arrayMethodIsStrict("sort"),STABLE_SORT=!fails((function(){if(V8)return V8<70;if(!(FF&&FF>3)){if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<603;var code,chr,value,index,result="";for(code=65;code<76;code++){switch(chr=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:value=3;break;case 68:case 71:value=4;break;default:value=2}for(index=0;index<47;index++)test.push({k:chr+index,v:value})}for(test.sort((function(a,b){return b.v-a.v})),index=0;index<test.length;index++)chr=test[index].k.charAt(0),result.charAt(result.length-1)!==chr&&(result+=chr);return"DGBEFHACIJK"!==result}}));$({target:"Array",proto:!0,forced:FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD||!STABLE_SORT},{sort:function sort(comparefn){void 0!==comparefn&&aCallable(comparefn);var array=toObject(this);if(STABLE_SORT)return void 0===comparefn?nativeSort(array):nativeSort(array,comparefn);var itemsLength,index,items=[],arrayLength=lengthOfArrayLike(array);for(index=0;index<arrayLength;index++)index in array&&push(items,array[index]);for(internalSort(items,function(comparefn){return function(x,y){return void 0===y?-1:void 0===x?1:void 0!==comparefn?+comparefn(x,y)||0:toString(x)>toString(y)?1:-1}}(comparefn)),itemsLength=lengthOfArrayLike(items),index=0;index<itemsLength;)array[index]=items[index++];for(;index<arrayLength;)deletePropertyOrThrow(array,index++);return array}})},"../../node_modules/core-js/modules/es.function.name.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),FUNCTION_NAME_EXISTS=__webpack_require__("../../node_modules/core-js/internals/function-name.js").EXISTS,uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,FunctionPrototype=Function.prototype,functionToString=uncurryThis(FunctionPrototype.toString),nameRE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,regExpExec=uncurryThis(nameRE.exec);DESCRIPTORS&&!FUNCTION_NAME_EXISTS&&defineProperty(FunctionPrototype,"name",{configurable:!0,get:function(){try{return regExpExec(nameRE,functionToString(this))[1]}catch(error){return""}}})},"../../node_modules/core-js/modules/es.json.stringify.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),apply=__webpack_require__("../../node_modules/core-js/internals/function-apply.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isArray=__webpack_require__("../../node_modules/core-js/internals/is-array.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),isSymbol=__webpack_require__("../../node_modules/core-js/internals/is-symbol.js"),arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice.js"),NATIVE_SYMBOL=__webpack_require__("../../node_modules/core-js/internals/symbol-constructor-detection.js"),$stringify=getBuiltIn("JSON","stringify"),exec=uncurryThis(/./.exec),charAt=uncurryThis("".charAt),charCodeAt=uncurryThis("".charCodeAt),replace=uncurryThis("".replace),numberToString=uncurryThis(1..toString),tester=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi=/^[\uDC00-\uDFFF]$/,WRONG_SYMBOLS_CONVERSION=!NATIVE_SYMBOL||fails((function(){var symbol=getBuiltIn("Symbol")();return"[null]"!=$stringify([symbol])||"{}"!=$stringify({a:symbol})||"{}"!=$stringify(Object(symbol))})),ILL_FORMED_UNICODE=fails((function(){return'"\\udf06\\ud834"'!==$stringify("\udf06\ud834")||'"\\udead"'!==$stringify("\udead")})),stringifyWithSymbolsFix=function(it,replacer){var args=arraySlice(arguments),$replacer=replacer;if((isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if(isCallable($replacer)&&(value=call($replacer,this,key,value)),!isSymbol(value))return value}),args[1]=replacer,apply($stringify,null,args)},fixIllFormed=function(match,offset,string){var prev=charAt(string,offset-1),next=charAt(string,offset+1);return exec(low,match)&&!exec(hi,next)||exec(hi,match)&&!exec(low,prev)?"\\u"+numberToString(charCodeAt(match,0),16):match};$stringify&&$({target:"JSON",stat:!0,arity:3,forced:WRONG_SYMBOLS_CONVERSION||ILL_FORMED_UNICODE},{stringify:function stringify(it,replacer,space){var args=arraySlice(arguments),result=apply(WRONG_SYMBOLS_CONVERSION?stringifyWithSymbolsFix:$stringify,null,args);return ILL_FORMED_UNICODE&&"string"==typeof result?replace(result,tester,fixIllFormed):result}})},"../../node_modules/core-js/modules/es.json.to-string-tag.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js");__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js")(global.JSON,"JSON",!0)},"../../node_modules/core-js/modules/es.map.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/core-js/internals/collection.js")("Map",(function(init){return function Map(){return init(this,arguments.length?arguments[0]:void 0)}}),__webpack_require__("../../node_modules/core-js/internals/collection-strong.js"))},"../../node_modules/core-js/modules/es.map.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/es.map.constructor.js")},"../../node_modules/core-js/modules/es.math.to-string-tag.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js")(Math,"Math",!0)},"../../node_modules/core-js/modules/es.number.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),isForced=__webpack_require__("../../node_modules/core-js/internals/is-forced.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),inheritIfRequired=__webpack_require__("../../node_modules/core-js/internals/inherit-if-required.js"),isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),isSymbol=__webpack_require__("../../node_modules/core-js/internals/is-symbol.js"),toPrimitive=__webpack_require__("../../node_modules/core-js/internals/to-primitive.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),getOwnPropertyNames=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names.js").f,getOwnPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,thisNumberValue=__webpack_require__("../../node_modules/core-js/internals/this-number-value.js"),trim=__webpack_require__("../../node_modules/core-js/internals/string-trim.js").trim,NativeNumber=global.Number,NumberPrototype=NativeNumber.prototype,TypeError=global.TypeError,arraySlice=uncurryThis("".slice),charCodeAt=uncurryThis("".charCodeAt),toNumeric=function(value){var primValue=toPrimitive(value,"number");return"bigint"==typeof primValue?primValue:toNumber(primValue)},toNumber=function(argument){var first,third,radix,maxCode,digits,length,index,code,it=toPrimitive(argument,"number");if(isSymbol(it))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof it&&it.length>2)if(it=trim(it),43===(first=charCodeAt(it,0))||45===first){if(88===(third=charCodeAt(it,2))||120===third)return NaN}else if(48===first){switch(charCodeAt(it,1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(length=(digits=arraySlice(it,2)).length,index=0;index<length;index++)if((code=charCodeAt(digits,index))<48||code>maxCode)return NaN;return parseInt(digits,radix)}return+it};if(isForced("Number",!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var key,NumberWrapper=function Number(value){var n=arguments.length<1?0:NativeNumber(toNumeric(value)),dummy=this;return isPrototypeOf(NumberPrototype,dummy)&&fails((function(){thisNumberValue(dummy)}))?inheritIfRequired(Object(n),dummy,NumberWrapper):n},keys=DESCRIPTORS?getOwnPropertyNames(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),j=0;keys.length>j;j++)hasOwn(NativeNumber,key=keys[j])&&!hasOwn(NumberWrapper,key)&&defineProperty(NumberWrapper,key,getOwnPropertyDescriptor(NativeNumber,key));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,defineBuiltIn(global,"Number",NumberWrapper,{constructor:!0})}},"../../node_modules/core-js/modules/es.number.is-integer.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{isInteger:__webpack_require__("../../node_modules/core-js/internals/is-integral-number.js")})},"../../node_modules/core-js/modules/es.object.assign.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),assign=__webpack_require__("../../node_modules/core-js/internals/object-assign.js");$({target:"Object",stat:!0,arity:2,forced:Object.assign!==assign},{assign})},"../../node_modules/core-js/modules/es.object.entries.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$entries=__webpack_require__("../../node_modules/core-js/internals/object-to-array.js").entries;$({target:"Object",stat:!0},{entries:function entries(O){return $entries(O)}})},"../../node_modules/core-js/modules/es.object.freeze.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),FREEZING=__webpack_require__("../../node_modules/core-js/internals/freezing.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),onFreeze=__webpack_require__("../../node_modules/core-js/internals/internal-metadata.js").onFreeze,$freeze=Object.freeze;$({target:"Object",stat:!0,forced:fails((function(){$freeze(1)})),sham:!FREEZING},{freeze:function freeze(it){return $freeze&&isObject(it)?$freeze(onFreeze(it)):it}})},"../../node_modules/core-js/modules/es.object.from-entries.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),iterate=__webpack_require__("../../node_modules/core-js/internals/iterate.js"),createProperty=__webpack_require__("../../node_modules/core-js/internals/create-property.js");$({target:"Object",stat:!0},{fromEntries:function fromEntries(iterable){var obj={};return iterate(iterable,(function(k,v){createProperty(obj,k,v)}),{AS_ENTRIES:!0}),obj}})},"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),nativeGetOwnPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),FAILS_ON_PRIMITIVES=fails((function(){nativeGetOwnPropertyDescriptor(1)}));$({target:"Object",stat:!0,forced:!DESCRIPTORS||FAILS_ON_PRIMITIVES,sham:!DESCRIPTORS},{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(it,key){return nativeGetOwnPropertyDescriptor(toIndexedObject(it),key)}})},"../../node_modules/core-js/modules/es.object.get-own-property-symbols.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),NATIVE_SYMBOL=__webpack_require__("../../node_modules/core-js/internals/symbol-constructor-detection.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),getOwnPropertySymbolsModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-symbols.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js");$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL||fails((function(){getOwnPropertySymbolsModule.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(it){var $getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return $getOwnPropertySymbols?$getOwnPropertySymbols(toObject(it)):[]}})},"../../node_modules/core-js/modules/es.object.get-prototype-of.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),nativeGetPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-get-prototype-of.js"),CORRECT_PROTOTYPE_GETTER=__webpack_require__("../../node_modules/core-js/internals/correct-prototype-getter.js");$({target:"Object",stat:!0,forced:fails((function(){nativeGetPrototypeOf(1)})),sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function getPrototypeOf(it){return nativeGetPrototypeOf(toObject(it))}})},"../../node_modules/core-js/modules/es.object.keys.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),toObject=__webpack_require__("../../node_modules/core-js/internals/to-object.js"),nativeKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys.js");$({target:"Object",stat:!0,forced:__webpack_require__("../../node_modules/core-js/internals/fails.js")((function(){nativeKeys(1)}))},{keys:function keys(it){return nativeKeys(toObject(it))}})},"../../node_modules/core-js/modules/es.object.to-string.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var TO_STRING_TAG_SUPPORT=__webpack_require__("../../node_modules/core-js/internals/to-string-tag-support.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),toString=__webpack_require__("../../node_modules/core-js/internals/object-to-string.js");TO_STRING_TAG_SUPPORT||defineBuiltIn(Object.prototype,"toString",toString,{unsafe:!0})},"../../node_modules/core-js/modules/es.object.values.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$values=__webpack_require__("../../node_modules/core-js/internals/object-to-array.js").values;$({target:"Object",stat:!0},{values:function values(O){return $values(O)}})},"../../node_modules/core-js/modules/es.promise.all.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),newPromiseCapabilityModule=__webpack_require__("../../node_modules/core-js/internals/new-promise-capability.js"),perform=__webpack_require__("../../node_modules/core-js/internals/perform.js"),iterate=__webpack_require__("../../node_modules/core-js/internals/iterate.js");$({target:"Promise",stat:!0,forced:__webpack_require__("../../node_modules/core-js/internals/promise-statics-incorrect-iteration.js")},{all:function all(iterable){var C=this,capability=newPromiseCapabilityModule.f(C),resolve=capability.resolve,reject=capability.reject,result=perform((function(){var $promiseResolve=aCallable(C.resolve),values=[],counter=0,remaining=1;iterate(iterable,(function(promise){var index=counter++,alreadyCalled=!1;remaining++,call($promiseResolve,C,promise).then((function(value){alreadyCalled||(alreadyCalled=!0,values[index]=value,--remaining||resolve(values))}),reject)})),--remaining||resolve(values)}));return result.error&&reject(result.value),capability.promise}})},"../../node_modules/core-js/modules/es.promise.catch.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),FORCED_PROMISE_CONSTRUCTOR=__webpack_require__("../../node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,NativePromiseConstructor=__webpack_require__("../../node_modules/core-js/internals/promise-native-constructor.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype;if($({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR,real:!0},{catch:function(onRejected){return this.then(void 0,onRejected)}}),!IS_PURE&&isCallable(NativePromiseConstructor)){var method=getBuiltIn("Promise").prototype.catch;NativePromisePrototype.catch!==method&&defineBuiltIn(NativePromisePrototype,"catch",method,{unsafe:!0})}},"../../node_modules/core-js/modules/es.promise.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Internal,OwnPromiseCapability,nativeThen,$=__webpack_require__("../../node_modules/core-js/internals/export.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),IS_NODE=__webpack_require__("../../node_modules/core-js/internals/engine-is-node.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),setPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-set-prototype-of.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),setSpecies=__webpack_require__("../../node_modules/core-js/internals/set-species.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),anInstance=__webpack_require__("../../node_modules/core-js/internals/an-instance.js"),speciesConstructor=__webpack_require__("../../node_modules/core-js/internals/species-constructor.js"),task=__webpack_require__("../../node_modules/core-js/internals/task.js").set,microtask=__webpack_require__("../../node_modules/core-js/internals/microtask.js"),hostReportErrors=__webpack_require__("../../node_modules/core-js/internals/host-report-errors.js"),perform=__webpack_require__("../../node_modules/core-js/internals/perform.js"),Queue=__webpack_require__("../../node_modules/core-js/internals/queue.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),NativePromiseConstructor=__webpack_require__("../../node_modules/core-js/internals/promise-native-constructor.js"),PromiseConstructorDetection=__webpack_require__("../../node_modules/core-js/internals/promise-constructor-detection.js"),newPromiseCapabilityModule=__webpack_require__("../../node_modules/core-js/internals/new-promise-capability.js"),FORCED_PROMISE_CONSTRUCTOR=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule.getterFor("Promise"),setInternalState=InternalStateModule.set,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,PromiseConstructor=NativePromiseConstructor,PromisePrototype=NativePromisePrototype,TypeError=global.TypeError,document=global.document,process=global.process,newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,DISPATCH_EVENT=!!(document&&document.createEvent&&global.dispatchEvent),isThenable=function(it){var then;return!(!isObject(it)||!isCallable(then=it.then))&&then},callReaction=function(reaction,state){var result,then,exited,value=state.value,ok=1==state.state,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2===state.rejection&&onHandleUnhandled(state),state.rejection=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?call(then,result,resolve,reject):resolve(result)):reject(value)}catch(error){domain&&!exited&&domain.exit(),reject(error)}},notify=function(state,isReject){state.notified||(state.notified=!0,microtask((function(){for(var reaction,reactions=state.reactions;reaction=reactions.get();)callReaction(reaction,state);state.notified=!1,isReject&&!state.rejection&&onUnhandled(state)})))},dispatchEvent=function(name,promise,reason){var event,handler;DISPATCH_EVENT?((event=document.createEvent("Event")).promise=promise,event.reason=reason,event.initEvent(name,!1,!0),global.dispatchEvent(event)):event={promise,reason},!NATIVE_PROMISE_REJECTION_EVENT&&(handler=global["on"+name])?handler(event):"unhandledrejection"===name&&hostReportErrors("Unhandled promise rejection",reason)},onUnhandled=function(state){call(task,global,(function(){var result,promise=state.facade,value=state.value;if(isUnhandled(state)&&(result=perform((function(){IS_NODE?process.emit("unhandledRejection",value,promise):dispatchEvent("unhandledrejection",promise,value)})),state.rejection=IS_NODE||isUnhandled(state)?2:1,result.error))throw result.value}))},isUnhandled=function(state){return 1!==state.rejection&&!state.parent},onHandleUnhandled=function(state){call(task,global,(function(){var promise=state.facade;IS_NODE?process.emit("rejectionHandled",promise):dispatchEvent("rejectionhandled",promise,state.value)}))},bind=function(fn,state,unwrap){return function(value){fn(state,value,unwrap)}},internalReject=function(state,value,unwrap){state.done||(state.done=!0,unwrap&&(state=unwrap),state.value=value,state.state=2,notify(state,!0))},internalResolve=function(state,value,unwrap){if(!state.done){state.done=!0,unwrap&&(state=unwrap);try{if(state.facade===value)throw TypeError("Promise can't be resolved itself");var then=isThenable(value);then?microtask((function(){var wrapper={done:!1};try{call(then,value,bind(internalResolve,wrapper,state),bind(internalReject,wrapper,state))}catch(error){internalReject(wrapper,error,state)}})):(state.value=value,state.state=1,notify(state,!1))}catch(error){internalReject({done:!1},error,state)}}};if(FORCED_PROMISE_CONSTRUCTOR&&(PromisePrototype=(PromiseConstructor=function Promise(executor){anInstance(this,PromisePrototype),aCallable(executor),call(Internal,this);var state=getInternalPromiseState(this);try{executor(bind(internalResolve,state),bind(internalReject,state))}catch(error){internalReject(state,error)}}).prototype,(Internal=function Promise(executor){setInternalState(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:0,value:void 0})}).prototype=defineBuiltIn(PromisePrototype,"then",(function then(onFulfilled,onRejected){var state=getInternalPromiseState(this),reaction=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return state.parent=!0,reaction.ok=!isCallable(onFulfilled)||onFulfilled,reaction.fail=isCallable(onRejected)&&onRejected,reaction.domain=IS_NODE?process.domain:void 0,0==state.state?state.reactions.add(reaction):microtask((function(){callReaction(reaction,state)})),reaction.promise})),OwnPromiseCapability=function(){var promise=new Internal,state=getInternalPromiseState(promise);this.promise=promise,this.resolve=bind(internalResolve,state),this.reject=bind(internalReject,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||undefined===C?new OwnPromiseCapability(C):newGenericPromiseCapability(C)},!IS_PURE&&isCallable(NativePromiseConstructor)&&NativePromisePrototype!==Object.prototype)){nativeThen=NativePromisePrototype.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn(NativePromisePrototype,"then",(function then(onFulfilled,onRejected){var that=this;return new PromiseConstructor((function(resolve,reject){call(nativeThen,that,resolve,reject)})).then(onFulfilled,onRejected)}),{unsafe:!0});try{delete NativePromisePrototype.constructor}catch(error){}setPrototypeOf&&setPrototypeOf(NativePromisePrototype,PromisePrototype)}$({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,"Promise",!1,!0),setSpecies("Promise")},"../../node_modules/core-js/modules/es.promise.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/es.promise.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.all.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.catch.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.race.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.reject.js"),__webpack_require__("../../node_modules/core-js/modules/es.promise.resolve.js")},"../../node_modules/core-js/modules/es.promise.race.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),aCallable=__webpack_require__("../../node_modules/core-js/internals/a-callable.js"),newPromiseCapabilityModule=__webpack_require__("../../node_modules/core-js/internals/new-promise-capability.js"),perform=__webpack_require__("../../node_modules/core-js/internals/perform.js"),iterate=__webpack_require__("../../node_modules/core-js/internals/iterate.js");$({target:"Promise",stat:!0,forced:__webpack_require__("../../node_modules/core-js/internals/promise-statics-incorrect-iteration.js")},{race:function race(iterable){var C=this,capability=newPromiseCapabilityModule.f(C),reject=capability.reject,result=perform((function(){var $promiseResolve=aCallable(C.resolve);iterate(iterable,(function(promise){call($promiseResolve,C,promise).then(capability.resolve,reject)}))}));return result.error&&reject(result.value),capability.promise}})},"../../node_modules/core-js/modules/es.promise.reject.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),newPromiseCapabilityModule=__webpack_require__("../../node_modules/core-js/internals/new-promise-capability.js");$({target:"Promise",stat:!0,forced:__webpack_require__("../../node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR},{reject:function reject(r){var capability=newPromiseCapabilityModule.f(this);return call(capability.reject,void 0,r),capability.promise}})},"../../node_modules/core-js/modules/es.promise.resolve.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),NativePromiseConstructor=__webpack_require__("../../node_modules/core-js/internals/promise-native-constructor.js"),FORCED_PROMISE_CONSTRUCTOR=__webpack_require__("../../node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,promiseResolve=__webpack_require__("../../node_modules/core-js/internals/promise-resolve.js"),PromiseConstructorWrapper=getBuiltIn("Promise"),CHECK_WRAPPER=IS_PURE&&!FORCED_PROMISE_CONSTRUCTOR;$({target:"Promise",stat:!0,forced:IS_PURE||FORCED_PROMISE_CONSTRUCTOR},{resolve:function resolve(x){return promiseResolve(CHECK_WRAPPER&&this===PromiseConstructorWrapper?NativePromiseConstructor:this,x)}})},"../../node_modules/core-js/modules/es.reflect.construct.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),apply=__webpack_require__("../../node_modules/core-js/internals/function-apply.js"),bind=__webpack_require__("../../node_modules/core-js/internals/function-bind.js"),aConstructor=__webpack_require__("../../node_modules/core-js/internals/a-constructor.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),nativeConstruct=getBuiltIn("Reflect","construct"),ObjectPrototype=Object.prototype,push=[].push,NEW_TARGET_BUG=fails((function(){function F(){}return!(nativeConstruct((function(){}),[],F)instanceof F)})),ARGS_BUG=!fails((function(){nativeConstruct((function(){}))})),FORCED=NEW_TARGET_BUG||ARGS_BUG;$({target:"Reflect",stat:!0,forced:FORCED,sham:FORCED},{construct:function construct(Target,args){aConstructor(Target),anObject(args);var newTarget=arguments.length<3?Target:aConstructor(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];return apply(push,$args,args),new(apply(bind,Target,$args))}var proto=newTarget.prototype,instance=create(isObject(proto)?proto:ObjectPrototype),result=apply(Target,instance,args);return isObject(result)?result:instance}})},"../../node_modules/core-js/modules/es.reflect.get.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isDataDescriptor=__webpack_require__("../../node_modules/core-js/internals/is-data-descriptor.js"),getOwnPropertyDescriptorModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js"),getPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-get-prototype-of.js");$({target:"Reflect",stat:!0},{get:function get(target,propertyKey){var descriptor,prototype,receiver=arguments.length<3?target:arguments[2];return anObject(target)===receiver?target[propertyKey]:(descriptor=getOwnPropertyDescriptorModule.f(target,propertyKey))?isDataDescriptor(descriptor)?descriptor.value:void 0===descriptor.get?void 0:call(descriptor.get,receiver):isObject(prototype=getPrototypeOf(target))?get(prototype,propertyKey,receiver):void 0}})},"../../node_modules/core-js/modules/es.reflect.to-string-tag.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js");$({global:!0},{Reflect:{}}),setToStringTag(global.Reflect,"Reflect",!0)},"../../node_modules/core-js/modules/es.regexp.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),isForced=__webpack_require__("../../node_modules/core-js/internals/is-forced.js"),inheritIfRequired=__webpack_require__("../../node_modules/core-js/internals/inherit-if-required.js"),createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),getOwnPropertyNames=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names.js").f,isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),isRegExp=__webpack_require__("../../node_modules/core-js/internals/is-regexp.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),getRegExpFlags=__webpack_require__("../../node_modules/core-js/internals/regexp-get-flags.js"),stickyHelpers=__webpack_require__("../../node_modules/core-js/internals/regexp-sticky-helpers.js"),proxyAccessor=__webpack_require__("../../node_modules/core-js/internals/proxy-accessor.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),enforceInternalState=__webpack_require__("../../node_modules/core-js/internals/internal-state.js").enforce,setSpecies=__webpack_require__("../../node_modules/core-js/internals/set-species.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),UNSUPPORTED_DOT_ALL=__webpack_require__("../../node_modules/core-js/internals/regexp-unsupported-dot-all.js"),UNSUPPORTED_NCG=__webpack_require__("../../node_modules/core-js/internals/regexp-unsupported-ncg.js"),MATCH=wellKnownSymbol("match"),NativeRegExp=global.RegExp,RegExpPrototype=NativeRegExp.prototype,SyntaxError=global.SyntaxError,exec=uncurryThis(RegExpPrototype.exec),charAt=uncurryThis("".charAt),replace=uncurryThis("".replace),stringIndexOf=uncurryThis("".indexOf),stringSlice=uncurryThis("".slice),IS_NCG=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,MISSED_STICKY=stickyHelpers.MISSED_STICKY,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,BASE_FORCED=DESCRIPTORS&&(!CORRECT_NEW||MISSED_STICKY||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG||fails((function(){return re2[MATCH]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||"/a/i"!=NativeRegExp(re1,"i")})));if(isForced("RegExp",BASE_FORCED)){for(var RegExpWrapper=function RegExp(pattern,flags){var rawFlags,dotAll,sticky,handled,result,state,thisIsRegExp=isPrototypeOf(RegExpPrototype,this),patternIsRegExp=isRegExp(pattern),flagsAreUndefined=void 0===flags,groups=[],rawPattern=pattern;if(!thisIsRegExp&&patternIsRegExp&&flagsAreUndefined&&pattern.constructor===RegExpWrapper)return pattern;if((patternIsRegExp||isPrototypeOf(RegExpPrototype,pattern))&&(pattern=pattern.source,flagsAreUndefined&&(flags=getRegExpFlags(rawPattern))),pattern=void 0===pattern?"":toString(pattern),flags=void 0===flags?"":toString(flags),rawPattern=pattern,UNSUPPORTED_DOT_ALL&&"dotAll"in re1&&(dotAll=!!flags&&stringIndexOf(flags,"s")>-1)&&(flags=replace(flags,/s/g,"")),rawFlags=flags,MISSED_STICKY&&"sticky"in re1&&(sticky=!!flags&&stringIndexOf(flags,"y")>-1)&&UNSUPPORTED_Y&&(flags=replace(flags,/y/g,"")),UNSUPPORTED_NCG&&(handled=function(string){for(var chr,length=string.length,index=0,result="",named=[],names={},brackets=!1,ncg=!1,groupid=0,groupname="";index<=length;index++){if("\\"===(chr=charAt(string,index)))chr+=charAt(string,++index);else if("]"===chr)brackets=!1;else if(!brackets)switch(!0){case"["===chr:brackets=!0;break;case"("===chr:exec(IS_NCG,stringSlice(string,index+1))&&(index+=2,ncg=!0),result+=chr,groupid++;continue;case">"===chr&&ncg:if(""===groupname||hasOwn(names,groupname))throw new SyntaxError("Invalid capture group name");names[groupname]=!0,named[named.length]=[groupname,groupid],ncg=!1,groupname="";continue}ncg?groupname+=chr:result+=chr}return[result,named]}(pattern),pattern=handled[0],groups=handled[1]),result=inheritIfRequired(NativeRegExp(pattern,flags),thisIsRegExp?this:RegExpPrototype,RegExpWrapper),(dotAll||sticky||groups.length)&&(state=enforceInternalState(result),dotAll&&(state.dotAll=!0,state.raw=RegExpWrapper(function(string){for(var chr,length=string.length,index=0,result="",brackets=!1;index<=length;index++)"\\"!==(chr=charAt(string,index))?brackets||"."!==chr?("["===chr?brackets=!0:"]"===chr&&(brackets=!1),result+=chr):result+="[\\s\\S]":result+=chr+charAt(string,++index);return result}(pattern),rawFlags)),sticky&&(state.sticky=!0),groups.length&&(state.groups=groups)),pattern!==rawPattern)try{createNonEnumerableProperty(result,"source",""===rawPattern?"(?:)":rawPattern)}catch(error){}return result},keys=getOwnPropertyNames(NativeRegExp),index=0;keys.length>index;)proxyAccessor(RegExpWrapper,NativeRegExp,keys[index++]);RegExpPrototype.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype,defineBuiltIn(global,"RegExp",RegExpWrapper,{constructor:!0})}setSpecies("RegExp")},"../../node_modules/core-js/modules/es.regexp.exec.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),exec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec.js");$({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec})},"../../node_modules/core-js/modules/es.regexp.to-string.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var PROPER_FUNCTION_NAME=__webpack_require__("../../node_modules/core-js/internals/function-name.js").PROPER,defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),$toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),getRegExpFlags=__webpack_require__("../../node_modules/core-js/internals/regexp-get-flags.js"),nativeToString=RegExp.prototype.toString,NOT_GENERIC=fails((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME=PROPER_FUNCTION_NAME&&"toString"!=nativeToString.name;(NOT_GENERIC||INCORRECT_NAME)&&defineBuiltIn(RegExp.prototype,"toString",(function toString(){var R=anObject(this);return"/"+$toString(R.source)+"/"+$toString(getRegExpFlags(R))}),{unsafe:!0})},"../../node_modules/core-js/modules/es.set.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/core-js/internals/collection.js")("Set",(function(init){return function Set(){return init(this,arguments.length?arguments[0]:void 0)}}),__webpack_require__("../../node_modules/core-js/internals/collection-strong.js"))},"../../node_modules/core-js/modules/es.set.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/es.set.constructor.js")},"../../node_modules/core-js/modules/es.string.ends-with.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var descriptor,$=__webpack_require__("../../node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),getOwnPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,toLength=__webpack_require__("../../node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),notARegExp=__webpack_require__("../../node_modules/core-js/internals/not-a-regexp.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),correctIsRegExpLogic=__webpack_require__("../../node_modules/core-js/internals/correct-is-regexp-logic.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),nativeEndsWith=uncurryThis("".endsWith),slice=uncurryThis("".slice),min=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic("endsWith");$({target:"String",proto:!0,forced:!!(IS_PURE||CORRECT_IS_REGEXP_LOGIC||(descriptor=getOwnPropertyDescriptor(String.prototype,"endsWith"),!descriptor||descriptor.writable))&&!CORRECT_IS_REGEXP_LOGIC},{endsWith:function endsWith(searchString){var that=toString(requireObjectCoercible(this));notARegExp(searchString);var endPosition=arguments.length>1?arguments[1]:void 0,len=that.length,end=void 0===endPosition?len:min(toLength(endPosition),len),search=toString(searchString);return nativeEndsWith?nativeEndsWith(that,search,end):slice(that,end-search.length,end)===search}})},"../../node_modules/core-js/modules/es.string.includes.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),notARegExp=__webpack_require__("../../node_modules/core-js/internals/not-a-regexp.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),correctIsRegExpLogic=__webpack_require__("../../node_modules/core-js/internals/correct-is-regexp-logic.js"),stringIndexOf=uncurryThis("".indexOf);$({target:"String",proto:!0,forced:!correctIsRegExpLogic("includes")},{includes:function includes(searchString){return!!~stringIndexOf(toString(requireObjectCoercible(this)),toString(notARegExp(searchString)),arguments.length>1?arguments[1]:void 0)}})},"../../node_modules/core-js/modules/es.string.iterator.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var charAt=__webpack_require__("../../node_modules/core-js/internals/string-multibyte.js").charAt,toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),defineIterator=__webpack_require__("../../node_modules/core-js/internals/iterator-define.js"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("String Iterator");defineIterator(String,"String",(function(iterated){setInternalState(this,{type:"String Iterator",string:toString(iterated),index:0})}),(function next(){var point,state=getInternalState(this),string=state.string,index=state.index;return index>=string.length?{value:void 0,done:!0}:(point=charAt(string,index),state.index+=point.length,{value:point,done:!1})}))},"../../node_modules/core-js/modules/es.string.match.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),fixRegExpWellKnownSymbolLogic=__webpack_require__("../../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),toLength=__webpack_require__("../../node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js"),advanceStringIndex=__webpack_require__("../../node_modules/core-js/internals/advance-string-index.js"),regExpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec-abstract.js");fixRegExpWellKnownSymbolLogic("match",(function(MATCH,nativeMatch,maybeCallNative){return[function match(regexp){var O=requireObjectCoercible(this),matcher=isNullOrUndefined(regexp)?void 0:getMethod(regexp,MATCH);return matcher?call(matcher,regexp,O):new RegExp(regexp)[MATCH](toString(O))},function(string){var rx=anObject(this),S=toString(string),res=maybeCallNative(nativeMatch,rx,S);if(res.done)return res.value;if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;for(var result,A=[],n=0;null!==(result=regExpExec(rx,S));){var matchStr=toString(result[0]);A[n]=matchStr,""===matchStr&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode)),n++}return 0===n?null:A}]}))},"../../node_modules/core-js/modules/es.string.replace.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var apply=__webpack_require__("../../node_modules/core-js/internals/function-apply.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),fixRegExpWellKnownSymbolLogic=__webpack_require__("../../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),toIntegerOrInfinity=__webpack_require__("../../node_modules/core-js/internals/to-integer-or-infinity.js"),toLength=__webpack_require__("../../node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),advanceStringIndex=__webpack_require__("../../node_modules/core-js/internals/advance-string-index.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js"),getSubstitution=__webpack_require__("../../node_modules/core-js/internals/get-substitution.js"),regExpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec-abstract.js"),REPLACE=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js")("replace"),max=Math.max,min=Math.min,concat=uncurryThis([].concat),push=uncurryThis([].push),stringIndexOf=uncurryThis("".indexOf),stringSlice=uncurryThis("".slice),REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0");fixRegExpWellKnownSymbolLogic("replace",(function(_,nativeReplace,maybeCallNative){var UNSAFE_SUBSTITUTE=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this),replacer=isNullOrUndefined(searchValue)?void 0:getMethod(searchValue,REPLACE);return replacer?call(replacer,searchValue,O,replaceValue):call(nativeReplace,toString(O),searchValue,replaceValue)},function(string,replaceValue){var rx=anObject(this),S=toString(string);if("string"==typeof replaceValue&&-1===stringIndexOf(replaceValue,UNSAFE_SUBSTITUTE)&&-1===stringIndexOf(replaceValue,"$<")){var res=maybeCallNative(nativeReplace,rx,S,replaceValue);if(res.done)return res.value}var functionalReplace=isCallable(replaceValue);functionalReplace||(replaceValue=toString(replaceValue));var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0}for(var results=[];;){var result=regExpExec(rx,S);if(null===result)break;if(push(results,result),!global)break;""===toString(result[0])&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var it,accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){for(var matched=toString((result=results[i])[0]),position=max(min(toIntegerOrInfinity(result.index),S.length),0),captures=[],j=1;j<result.length;j++)push(captures,void 0===(it=result[j])?it:String(it));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=concat([matched],captures,position,S);void 0!==namedCaptures&&push(replacerArgs,namedCaptures);var replacement=toString(apply(replaceValue,void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=stringSlice(S,nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+stringSlice(S,nextSourcePosition)}]}),!!fails((function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")}))||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE)},"../../node_modules/core-js/modules/es.string.search.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),fixRegExpWellKnownSymbolLogic=__webpack_require__("../../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),sameValue=__webpack_require__("../../node_modules/core-js/internals/same-value.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js"),regExpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec-abstract.js");fixRegExpWellKnownSymbolLogic("search",(function(SEARCH,nativeSearch,maybeCallNative){return[function search(regexp){var O=requireObjectCoercible(this),searcher=isNullOrUndefined(regexp)?void 0:getMethod(regexp,SEARCH);return searcher?call(searcher,regexp,O):new RegExp(regexp)[SEARCH](toString(O))},function(string){var rx=anObject(this),S=toString(string),res=maybeCallNative(nativeSearch,rx,S);if(res.done)return res.value;var previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),null===result?-1:result.index}]}))},"../../node_modules/core-js/modules/es.string.split.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var apply=__webpack_require__("../../node_modules/core-js/internals/function-apply.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),fixRegExpWellKnownSymbolLogic=__webpack_require__("../../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isNullOrUndefined=__webpack_require__("../../node_modules/core-js/internals/is-null-or-undefined.js"),isRegExp=__webpack_require__("../../node_modules/core-js/internals/is-regexp.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),speciesConstructor=__webpack_require__("../../node_modules/core-js/internals/species-constructor.js"),advanceStringIndex=__webpack_require__("../../node_modules/core-js/internals/advance-string-index.js"),toLength=__webpack_require__("../../node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),getMethod=__webpack_require__("../../node_modules/core-js/internals/get-method.js"),arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice-simple.js"),callRegExpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec-abstract.js"),regexpExec=__webpack_require__("../../node_modules/core-js/internals/regexp-exec.js"),stickyHelpers=__webpack_require__("../../node_modules/core-js/internals/regexp-sticky-helpers.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,min=Math.min,$push=[].push,exec=uncurryThis(/./.exec),push=uncurryThis($push),stringSlice=uncurryThis("".slice);fixRegExpWellKnownSymbolLogic("split",(function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;return internalSplit="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(separator,limit){var string=toString(requireObjectCoercible(this)),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(void 0===separator)return[string];if(!isRegExp(separator))return call(nativeSplit,string,separator,lim);for(var match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");(match=call(regexpExec,separatorCopy,string))&&!((lastIndex=separatorCopy.lastIndex)>lastLastIndex&&(push(output,stringSlice(string,lastLastIndex,match.index)),match.length>1&&match.index<string.length&&apply($push,output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=lim));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&exec(separatorCopy,"")||push(output,""):push(output,stringSlice(string,lastLastIndex)),output.length>lim?arraySlice(output,0,lim):output}:"0".split(void 0,0).length?function(separator,limit){return void 0===separator&&0===limit?[]:call(nativeSplit,this,separator,limit)}:nativeSplit,[function split(separator,limit){var O=requireObjectCoercible(this),splitter=isNullOrUndefined(separator)?void 0:getMethod(separator,SPLIT);return splitter?call(splitter,separator,O,limit):call(internalSplit,toString(O),separator,limit)},function(string,limit){var rx=anObject(this),S=toString(string),res=maybeCallNative(internalSplit,rx,S,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),splitter=new C(UNSUPPORTED_Y?"^(?:"+rx.source+")":rx,flags),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(0===S.length)return null===callRegExpExec(splitter,S)?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=UNSUPPORTED_Y?0:q;var e,z=callRegExpExec(splitter,UNSUPPORTED_Y?stringSlice(S,q):S);if(null===z||(e=min(toLength(splitter.lastIndex+(UNSUPPORTED_Y?q:0)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else{if(push(A,stringSlice(S,p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(push(A,z[i]),A.length===lim)return A;q=p=e}}return push(A,stringSlice(S,p)),A}]}),!!fails((function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return 2!==result.length||"a"!==result[0]||"b"!==result[1]})),UNSUPPORTED_Y)},"../../node_modules/core-js/modules/es.string.starts-with.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var descriptor,$=__webpack_require__("../../node_modules/core-js/internals/export.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),getOwnPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,toLength=__webpack_require__("../../node_modules/core-js/internals/to-length.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),notARegExp=__webpack_require__("../../node_modules/core-js/internals/not-a-regexp.js"),requireObjectCoercible=__webpack_require__("../../node_modules/core-js/internals/require-object-coercible.js"),correctIsRegExpLogic=__webpack_require__("../../node_modules/core-js/internals/correct-is-regexp-logic.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),nativeStartsWith=uncurryThis("".startsWith),stringSlice=uncurryThis("".slice),min=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic("startsWith");$({target:"String",proto:!0,forced:!!(IS_PURE||CORRECT_IS_REGEXP_LOGIC||(descriptor=getOwnPropertyDescriptor(String.prototype,"startsWith"),!descriptor||descriptor.writable))&&!CORRECT_IS_REGEXP_LOGIC},{startsWith:function startsWith(searchString){var that=toString(requireObjectCoercible(this));notARegExp(searchString);var index=toLength(min(arguments.length>1?arguments[1]:void 0,that.length)),search=toString(searchString);return nativeStartsWith?nativeStartsWith(that,search,index):stringSlice(that,index,index+search.length)===search}})},"../../node_modules/core-js/modules/es.string.trim.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),$trim=__webpack_require__("../../node_modules/core-js/internals/string-trim.js").trim;$({target:"String",proto:!0,forced:__webpack_require__("../../node_modules/core-js/internals/string-trim-forced.js")("trim")},{trim:function trim(){return $trim(this)}})},"../../node_modules/core-js/modules/es.symbol.async-iterator.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("asyncIterator")},"../../node_modules/core-js/modules/es.symbol.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),IS_PURE=__webpack_require__("../../node_modules/core-js/internals/is-pure.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),NATIVE_SYMBOL=__webpack_require__("../../node_modules/core-js/internals/symbol-constructor-detection.js"),fails=__webpack_require__("../../node_modules/core-js/internals/fails.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),toIndexedObject=__webpack_require__("../../node_modules/core-js/internals/to-indexed-object.js"),toPropertyKey=__webpack_require__("../../node_modules/core-js/internals/to-property-key.js"),$toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),createPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/create-property-descriptor.js"),nativeObjectCreate=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),objectKeys=__webpack_require__("../../node_modules/core-js/internals/object-keys.js"),getOwnPropertyNamesModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names.js"),getOwnPropertyNamesExternal=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-names-external.js"),getOwnPropertySymbolsModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-symbols.js"),getOwnPropertyDescriptorModule=__webpack_require__("../../node_modules/core-js/internals/object-get-own-property-descriptor.js"),definePropertyModule=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js"),definePropertiesModule=__webpack_require__("../../node_modules/core-js/internals/object-define-properties.js"),propertyIsEnumerableModule=__webpack_require__("../../node_modules/core-js/internals/object-property-is-enumerable.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),shared=__webpack_require__("../../node_modules/core-js/internals/shared.js"),sharedKey=__webpack_require__("../../node_modules/core-js/internals/shared-key.js"),hiddenKeys=__webpack_require__("../../node_modules/core-js/internals/hidden-keys.js"),uid=__webpack_require__("../../node_modules/core-js/internals/uid.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),wrappedWellKnownSymbolModule=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-wrapped.js"),defineWellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js"),defineSymbolToPrimitive=__webpack_require__("../../node_modules/core-js/internals/symbol-define-to-primitive.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),$forEach=__webpack_require__("../../node_modules/core-js/internals/array-iteration.js").forEach,HIDDEN=sharedKey("hidden"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Symbol"),ObjectPrototype=Object.prototype,$Symbol=global.Symbol,SymbolPrototype=$Symbol&&$Symbol.prototype,TypeError=global.TypeError,QObject=global.QObject,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,push=uncurryThis([].push),AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),WellKnownSymbolsStore=shared("wks"),USE_SETTER=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDescriptor=DESCRIPTORS&&fails((function(){return 7!=nativeObjectCreate(nativeDefineProperty({},"a",{get:function(){return nativeDefineProperty(this,"a",{value:7}).a}})).a}))?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor(ObjectPrototype,P);ObjectPrototypeDescriptor&&delete ObjectPrototype[P],nativeDefineProperty(O,P,Attributes),ObjectPrototypeDescriptor&&O!==ObjectPrototype&&nativeDefineProperty(ObjectPrototype,P,ObjectPrototypeDescriptor)}:nativeDefineProperty,wrap=function(tag,description){var symbol=AllSymbols[tag]=nativeObjectCreate(SymbolPrototype);return setInternalState(symbol,{type:"Symbol",tag,description}),DESCRIPTORS||(symbol.description=description),symbol},$defineProperty=function defineProperty(O,P,Attributes){O===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,P,Attributes),anObject(O);var key=toPropertyKey(P);return anObject(Attributes),hasOwn(AllSymbols,key)?(Attributes.enumerable?(hasOwn(O,HIDDEN)&&O[HIDDEN][key]&&(O[HIDDEN][key]=!1),Attributes=nativeObjectCreate(Attributes,{enumerable:createPropertyDescriptor(0,!1)})):(hasOwn(O,HIDDEN)||nativeDefineProperty(O,HIDDEN,createPropertyDescriptor(1,{})),O[HIDDEN][key]=!0),setSymbolDescriptor(O,key,Attributes)):nativeDefineProperty(O,key,Attributes)},$defineProperties=function defineProperties(O,Properties){anObject(O);var properties=toIndexedObject(Properties),keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));return $forEach(keys,(function(key){DESCRIPTORS&&!call($propertyIsEnumerable,properties,key)||$defineProperty(O,key,properties[key])})),O},$propertyIsEnumerable=function propertyIsEnumerable(V){var P=toPropertyKey(V),enumerable=call(nativePropertyIsEnumerable,this,P);return!(this===ObjectPrototype&&hasOwn(AllSymbols,P)&&!hasOwn(ObjectPrototypeSymbols,P))&&(!(enumerable||!hasOwn(this,P)||!hasOwn(AllSymbols,P)||hasOwn(this,HIDDEN)&&this[HIDDEN][P])||enumerable)},$getOwnPropertyDescriptor=function getOwnPropertyDescriptor(O,P){var it=toIndexedObject(O),key=toPropertyKey(P);if(it!==ObjectPrototype||!hasOwn(AllSymbols,key)||hasOwn(ObjectPrototypeSymbols,key)){var descriptor=nativeGetOwnPropertyDescriptor(it,key);return!descriptor||!hasOwn(AllSymbols,key)||hasOwn(it,HIDDEN)&&it[HIDDEN][key]||(descriptor.enumerable=!0),descriptor}},$getOwnPropertyNames=function getOwnPropertyNames(O){var names=nativeGetOwnPropertyNames(toIndexedObject(O)),result=[];return $forEach(names,(function(key){hasOwn(AllSymbols,key)||hasOwn(hiddenKeys,key)||push(result,key)})),result},$getOwnPropertySymbols=function(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype,names=nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O)),result=[];return $forEach(names,(function(key){!hasOwn(AllSymbols,key)||IS_OBJECT_PROTOTYPE&&!hasOwn(ObjectPrototype,key)||push(result,AllSymbols[key])})),result};NATIVE_SYMBOL||(defineBuiltIn(SymbolPrototype=($Symbol=function Symbol(){if(isPrototypeOf(SymbolPrototype,this))throw TypeError("Symbol is not a constructor");var description=arguments.length&&void 0!==arguments[0]?$toString(arguments[0]):void 0,tag=uid(description),setter=function(value){this===ObjectPrototype&&call(setter,ObjectPrototypeSymbols,value),hasOwn(this,HIDDEN)&&hasOwn(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};return DESCRIPTORS&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,tag,{configurable:!0,set:setter}),wrap(tag,description)}).prototype,"toString",(function toString(){return getInternalState(this).tag})),defineBuiltIn($Symbol,"withoutSetter",(function(description){return wrap(uid(description),description)})),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule.f=$defineProperty,definePropertiesModule.f=$defineProperties,getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(name){return wrap(wellKnownSymbol(name),name)},DESCRIPTORS&&(nativeDefineProperty(SymbolPrototype,"description",{configurable:!0,get:function description(){return getInternalState(this).description}}),IS_PURE||defineBuiltIn(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0}))),$({global:!0,constructor:!0,wrap:!0,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol}),$forEach(objectKeys(WellKnownSymbolsStore),(function(name){defineWellKnownSymbol(name)})),$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL},{useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS},{create:function create(O,Properties){return void 0===Properties?nativeObjectCreate(O):$defineProperties(nativeObjectCreate(O),Properties)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames}),defineSymbolToPrimitive(),setToStringTag($Symbol,"Symbol"),hiddenKeys[HIDDEN]=!0},"../../node_modules/core-js/modules/es.symbol.description.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),isPrototypeOf=__webpack_require__("../../node_modules/core-js/internals/object-is-prototype-of.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),defineProperty=__webpack_require__("../../node_modules/core-js/internals/object-define-property.js").f,copyConstructorProperties=__webpack_require__("../../node_modules/core-js/internals/copy-constructor-properties.js"),NativeSymbol=global.Symbol,SymbolPrototype=NativeSymbol&&NativeSymbol.prototype;if(DESCRIPTORS&&isCallable(NativeSymbol)&&(!("description"in SymbolPrototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function Symbol(){var description=arguments.length<1||void 0===arguments[0]?void 0:toString(arguments[0]),result=isPrototypeOf(SymbolPrototype,this)?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol),SymbolWrapper.prototype=SymbolPrototype,SymbolPrototype.constructor=SymbolWrapper;var NATIVE_SYMBOL="Symbol(test)"==String(NativeSymbol("test")),thisSymbolValue=uncurryThis(SymbolPrototype.valueOf),symbolDescriptiveString=uncurryThis(SymbolPrototype.toString),regexp=/^Symbol\((.*)\)[^)]+$/,replace=uncurryThis("".replace),stringSlice=uncurryThis("".slice);defineProperty(SymbolPrototype,"description",{configurable:!0,get:function description(){var symbol=thisSymbolValue(this);if(hasOwn(EmptyStringDescriptionStore,symbol))return"";var string=symbolDescriptiveString(symbol),desc=NATIVE_SYMBOL?stringSlice(string,7,-1):replace(string,regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,constructor:!0,forced:!0},{Symbol:SymbolWrapper})}},"../../node_modules/core-js/modules/es.symbol.for.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),shared=__webpack_require__("../../node_modules/core-js/internals/shared.js"),NATIVE_SYMBOL_REGISTRY=__webpack_require__("../../node_modules/core-js/internals/symbol-registry-detection.js"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry");$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY},{for:function(key){var string=toString(key);if(hasOwn(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=getBuiltIn("Symbol")(string);return StringToSymbolRegistry[string]=symbol,SymbolToStringRegistry[symbol]=string,symbol}})},"../../node_modules/core-js/modules/es.symbol.has-instance.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("hasInstance")},"../../node_modules/core-js/modules/es.symbol.is-concat-spreadable.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("isConcatSpreadable")},"../../node_modules/core-js/modules/es.symbol.iterator.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("iterator")},"../../node_modules/core-js/modules/es.symbol.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/es.symbol.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.for.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.key-for.js"),__webpack_require__("../../node_modules/core-js/modules/es.json.stringify.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.get-own-property-symbols.js")},"../../node_modules/core-js/modules/es.symbol.key-for.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),isSymbol=__webpack_require__("../../node_modules/core-js/internals/is-symbol.js"),tryToString=__webpack_require__("../../node_modules/core-js/internals/try-to-string.js"),shared=__webpack_require__("../../node_modules/core-js/internals/shared.js"),NATIVE_SYMBOL_REGISTRY=__webpack_require__("../../node_modules/core-js/internals/symbol-registry-detection.js"),SymbolToStringRegistry=shared("symbol-to-string-registry");$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY},{keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(tryToString(sym)+" is not a symbol");if(hasOwn(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym]}})},"../../node_modules/core-js/modules/es.symbol.match-all.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("matchAll")},"../../node_modules/core-js/modules/es.symbol.match.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("match")},"../../node_modules/core-js/modules/es.symbol.replace.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("replace")},"../../node_modules/core-js/modules/es.symbol.search.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("search")},"../../node_modules/core-js/modules/es.symbol.species.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("species")},"../../node_modules/core-js/modules/es.symbol.split.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("split")},"../../node_modules/core-js/modules/es.symbol.to-primitive.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var defineWellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js"),defineSymbolToPrimitive=__webpack_require__("../../node_modules/core-js/internals/symbol-define-to-primitive.js");defineWellKnownSymbol("toPrimitive"),defineSymbolToPrimitive()},"../../node_modules/core-js/modules/es.symbol.to-string-tag.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var getBuiltIn=__webpack_require__("../../node_modules/core-js/internals/get-built-in.js"),defineWellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js");defineWellKnownSymbol("toStringTag"),setToStringTag(getBuiltIn("Symbol"),"Symbol")},"../../node_modules/core-js/modules/es.symbol.unscopables.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("unscopables")},"../../node_modules/core-js/modules/es.weak-map.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var InternalWeakMap,global=__webpack_require__("../../node_modules/core-js/internals/global.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),defineBuiltIns=__webpack_require__("../../node_modules/core-js/internals/define-built-ins.js"),InternalMetadataModule=__webpack_require__("../../node_modules/core-js/internals/internal-metadata.js"),collection=__webpack_require__("../../node_modules/core-js/internals/collection.js"),collectionWeak=__webpack_require__("../../node_modules/core-js/internals/collection-weak.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),isExtensible=__webpack_require__("../../node_modules/core-js/internals/object-is-extensible.js"),enforceInternalState=__webpack_require__("../../node_modules/core-js/internals/internal-state.js").enforce,NATIVE_WEAK_MAP=__webpack_require__("../../node_modules/core-js/internals/weak-map-basic-detection.js"),IS_IE11=!global.ActiveXObject&&"ActiveXObject"in global,wrapper=function(init){return function WeakMap(){return init(this,arguments.length?arguments[0]:void 0)}},$WeakMap=collection("WeakMap",wrapper,collectionWeak);if(NATIVE_WEAK_MAP&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.enable();var WeakMapPrototype=$WeakMap.prototype,nativeDelete=uncurryThis(WeakMapPrototype.delete),nativeHas=uncurryThis(WeakMapPrototype.has),nativeGet=uncurryThis(WeakMapPrototype.get),nativeSet=uncurryThis(WeakMapPrototype.set);defineBuiltIns(WeakMapPrototype,{delete:function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeDelete(this,key)||state.frozen.delete(key)}return nativeDelete(this,key)},has:function has(key){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas(this,key)||state.frozen.has(key)}return nativeHas(this,key)},get:function get(key){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);return state.frozen||(state.frozen=new InternalWeakMap),nativeHas(this,key)?nativeGet(this,key):state.frozen.get(key)}return nativeGet(this,key)},set:function set(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceInternalState(this);state.frozen||(state.frozen=new InternalWeakMap),nativeHas(this,key)?nativeSet(this,key,value):state.frozen.set(key,value)}else nativeSet(this,key,value);return this}})}},"../../node_modules/core-js/modules/es.weak-map.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/es.weak-map.constructor.js")},"../../node_modules/core-js/modules/esnext.symbol.async-dispose.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("asyncDispose")},"../../node_modules/core-js/modules/esnext.symbol.dispose.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("dispose")},"../../node_modules/core-js/modules/esnext.symbol.matcher.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("matcher")},"../../node_modules/core-js/modules/esnext.symbol.metadata-key.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("metadataKey")},"../../node_modules/core-js/modules/esnext.symbol.metadata.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("metadata")},"../../node_modules/core-js/modules/esnext.symbol.observable.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("observable")},"../../node_modules/core-js/modules/esnext.symbol.pattern-match.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("patternMatch")},"../../node_modules/core-js/modules/esnext.symbol.replace-all.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/internals/well-known-symbol-define.js")("replaceAll")},"../../node_modules/core-js/modules/web.clear-immediate.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),clearImmediate=__webpack_require__("../../node_modules/core-js/internals/task.js").clear;$({global:!0,bind:!0,enumerable:!0,forced:global.clearImmediate!==clearImmediate},{clearImmediate})},"../../node_modules/core-js/modules/web.dom-collections.for-each.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),DOMIterables=__webpack_require__("../../node_modules/core-js/internals/dom-iterables.js"),DOMTokenListPrototype=__webpack_require__("../../node_modules/core-js/internals/dom-token-list-prototype.js"),forEach=__webpack_require__("../../node_modules/core-js/internals/array-for-each.js"),createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),handlePrototype=function(CollectionPrototype){if(CollectionPrototype&&CollectionPrototype.forEach!==forEach)try{createNonEnumerableProperty(CollectionPrototype,"forEach",forEach)}catch(error){CollectionPrototype.forEach=forEach}};for(var COLLECTION_NAME in DOMIterables)DOMIterables[COLLECTION_NAME]&&handlePrototype(global[COLLECTION_NAME]&&global[COLLECTION_NAME].prototype);handlePrototype(DOMTokenListPrototype)},"../../node_modules/core-js/modules/web.dom-collections.iterator.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../../node_modules/core-js/internals/global.js"),DOMIterables=__webpack_require__("../../node_modules/core-js/internals/dom-iterables.js"),DOMTokenListPrototype=__webpack_require__("../../node_modules/core-js/internals/dom-token-list-prototype.js"),ArrayIteratorMethods=__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),createNonEnumerableProperty=__webpack_require__("../../node_modules/core-js/internals/create-non-enumerable-property.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(CollectionPrototype,COLLECTION_NAME){if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR,ArrayValues)}catch(error){CollectionPrototype[ITERATOR]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME),DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global[COLLECTION_NAME]&&global[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList")},"../../node_modules/core-js/modules/web.immediate.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/web.clear-immediate.js"),__webpack_require__("../../node_modules/core-js/modules/web.set-immediate.js")},"../../node_modules/core-js/modules/web.set-immediate.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),setImmediate=__webpack_require__("../../node_modules/core-js/internals/task.js").set;$({global:!0,bind:!0,enumerable:!0,forced:global.setImmediate!==setImmediate},{setImmediate})},"../../node_modules/core-js/modules/web.url-search-params.constructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js");var $=__webpack_require__("../../node_modules/core-js/internals/export.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),call=__webpack_require__("../../node_modules/core-js/internals/function-call.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),USE_NATIVE_URL=__webpack_require__("../../node_modules/core-js/internals/url-constructor-detection.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),defineBuiltIns=__webpack_require__("../../node_modules/core-js/internals/define-built-ins.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),createIteratorConstructor=__webpack_require__("../../node_modules/core-js/internals/iterator-create-constructor.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),anInstance=__webpack_require__("../../node_modules/core-js/internals/an-instance.js"),isCallable=__webpack_require__("../../node_modules/core-js/internals/is-callable.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),classof=__webpack_require__("../../node_modules/core-js/internals/classof.js"),anObject=__webpack_require__("../../node_modules/core-js/internals/an-object.js"),isObject=__webpack_require__("../../node_modules/core-js/internals/is-object.js"),$toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),create=__webpack_require__("../../node_modules/core-js/internals/object-create.js"),createPropertyDescriptor=__webpack_require__("../../node_modules/core-js/internals/create-property-descriptor.js"),getIterator=__webpack_require__("../../node_modules/core-js/internals/get-iterator.js"),getIteratorMethod=__webpack_require__("../../node_modules/core-js/internals/get-iterator-method.js"),validateArgumentsLength=__webpack_require__("../../node_modules/core-js/internals/validate-arguments-length.js"),wellKnownSymbol=__webpack_require__("../../node_modules/core-js/internals/well-known-symbol.js"),arraySort=__webpack_require__("../../node_modules/core-js/internals/array-sort.js"),ITERATOR=wellKnownSymbol("iterator"),setInternalState=InternalStateModule.set,getInternalParamsState=InternalStateModule.getterFor("URLSearchParams"),getInternalIteratorState=InternalStateModule.getterFor("URLSearchParamsIterator"),getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,safeGetBuiltIn=function(name){if(!DESCRIPTORS)return global[name];var descriptor=getOwnPropertyDescriptor(global,name);return descriptor&&descriptor.value},nativeFetch=safeGetBuiltIn("fetch"),NativeRequest=safeGetBuiltIn("Request"),Headers=safeGetBuiltIn("Headers"),RequestPrototype=NativeRequest&&NativeRequest.prototype,HeadersPrototype=Headers&&Headers.prototype,RegExp=global.RegExp,TypeError=global.TypeError,decodeURIComponent=global.decodeURIComponent,encodeURIComponent=global.encodeURIComponent,charAt=uncurryThis("".charAt),join=uncurryThis([].join),push=uncurryThis([].push),replace=uncurryThis("".replace),shift=uncurryThis([].shift),splice=uncurryThis([].splice),split=uncurryThis("".split),stringSlice=uncurryThis("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(bytes){return sequences[bytes-1]||(sequences[bytes-1]=RegExp("((?:%[\\da-f]{2}){"+bytes+"})","gi"))},percentDecode=function(sequence){try{return decodeURIComponent(sequence)}catch(error){return sequence}},deserialize=function(it){var result=replace(it,plus," "),bytes=4;try{return decodeURIComponent(result)}catch(error){for(;bytes;)result=replace(result,percentSequence(bytes--),percentDecode);return result}},find=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(match){return replacements[match]},serialize=function(it){return replace(encodeURIComponent(it),find,replacer)},URLSearchParamsIterator=createIteratorConstructor((function Iterator(params,kind){setInternalState(this,{type:"URLSearchParamsIterator",iterator:getIterator(getInternalParamsState(params).entries),kind})}),"Iterator",(function next(){var state=getInternalIteratorState(this),kind=state.kind,step=state.iterator.next(),entry=step.value;return step.done||(step.value="keys"===kind?entry.key:"values"===kind?entry.value:[entry.key,entry.value]),step}),!0),URLSearchParamsState=function(init){this.entries=[],this.url=null,void 0!==init&&(isObject(init)?this.parseObject(init):this.parseQuery("string"==typeof init?"?"===charAt(init,0)?stringSlice(init,1):init:$toString(init)))};URLSearchParamsState.prototype={type:"URLSearchParams",bindURL:function(url){this.url=url,this.update()},parseObject:function(object){var iterator,next,step,entryIterator,entryNext,first,second,iteratorMethod=getIteratorMethod(object);if(iteratorMethod)for(next=(iterator=getIterator(object,iteratorMethod)).next;!(step=call(next,iterator)).done;){if(entryNext=(entryIterator=getIterator(anObject(step.value))).next,(first=call(entryNext,entryIterator)).done||(second=call(entryNext,entryIterator)).done||!call(entryNext,entryIterator).done)throw TypeError("Expected sequence with length 2");push(this.entries,{key:$toString(first.value),value:$toString(second.value)})}else for(var key in object)hasOwn(object,key)&&push(this.entries,{key,value:$toString(object[key])})},parseQuery:function(query){if(query)for(var attribute,entry,attributes=split(query,"&"),index=0;index<attributes.length;)(attribute=attributes[index++]).length&&(entry=split(attribute,"="),push(this.entries,{key:deserialize(shift(entry)),value:deserialize(join(entry,"="))}))},serialize:function(){for(var entry,entries=this.entries,result=[],index=0;index<entries.length;)entry=entries[index++],push(result,serialize(entry.key)+"="+serialize(entry.value));return join(result,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function URLSearchParams(){anInstance(this,URLSearchParamsPrototype);var init=arguments.length>0?arguments[0]:void 0;setInternalState(this,new URLSearchParamsState(init))},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;if(defineBuiltIns(URLSearchParamsPrototype,{append:function append(name,value){validateArgumentsLength(arguments.length,2);var state=getInternalParamsState(this);push(state.entries,{key:$toString(name),value:$toString(value)}),state.updateURL()},delete:function(name){validateArgumentsLength(arguments.length,1);for(var state=getInternalParamsState(this),entries=state.entries,key=$toString(name),index=0;index<entries.length;)entries[index].key===key?splice(entries,index,1):index++;state.updateURL()},get:function get(name){validateArgumentsLength(arguments.length,1);for(var entries=getInternalParamsState(this).entries,key=$toString(name),index=0;index<entries.length;index++)if(entries[index].key===key)return entries[index].value;return null},getAll:function getAll(name){validateArgumentsLength(arguments.length,1);for(var entries=getInternalParamsState(this).entries,key=$toString(name),result=[],index=0;index<entries.length;index++)entries[index].key===key&&push(result,entries[index].value);return result},has:function has(name){validateArgumentsLength(arguments.length,1);for(var entries=getInternalParamsState(this).entries,key=$toString(name),index=0;index<entries.length;)if(entries[index++].key===key)return!0;return!1},set:function set(name,value){validateArgumentsLength(arguments.length,1);for(var entry,state=getInternalParamsState(this),entries=state.entries,found=!1,key=$toString(name),val=$toString(value),index=0;index<entries.length;index++)(entry=entries[index]).key===key&&(found?splice(entries,index--,1):(found=!0,entry.value=val));found||push(entries,{key,value:val}),state.updateURL()},sort:function sort(){var state=getInternalParamsState(this);arraySort(state.entries,(function(a,b){return a.key>b.key?1:-1})),state.updateURL()},forEach:function forEach(callback){for(var entry,entries=getInternalParamsState(this).entries,boundFunction=bind(callback,arguments.length>1?arguments[1]:void 0),index=0;index<entries.length;)boundFunction((entry=entries[index++]).value,entry.key,this)},keys:function keys(){return new URLSearchParamsIterator(this,"keys")},values:function values(){return new URLSearchParamsIterator(this,"values")},entries:function entries(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0}),defineBuiltIn(URLSearchParamsPrototype,ITERATOR,URLSearchParamsPrototype.entries,{name:"entries"}),defineBuiltIn(URLSearchParamsPrototype,"toString",(function toString(){return getInternalParamsState(this).serialize()}),{enumerable:!0}),setToStringTag(URLSearchParamsConstructor,"URLSearchParams"),$({global:!0,constructor:!0,forced:!USE_NATIVE_URL},{URLSearchParams:URLSearchParamsConstructor}),!USE_NATIVE_URL&&isCallable(Headers)){var headersHas=uncurryThis(HeadersPrototype.has),headersSet=uncurryThis(HeadersPrototype.set),wrapRequestOptions=function(init){if(isObject(init)){var headers,body=init.body;if("URLSearchParams"===classof(body))return headers=init.headers?new Headers(init.headers):new Headers,headersHas(headers,"content-type")||headersSet(headers,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),create(init,{body:createPropertyDescriptor(0,$toString(body)),headers:createPropertyDescriptor(0,headers)})}return init};if(isCallable(nativeFetch)&&$({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function fetch(input){return nativeFetch(input,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable(NativeRequest)){var RequestConstructor=function Request(input){return anInstance(this,RequestPrototype),new NativeRequest(input,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,$({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RequestConstructor})}}module.exports={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState}},"../../node_modules/core-js/modules/web.url-search-params.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/web.url-search-params.constructor.js")},"../../node_modules/core-js/modules/web.url.constructor.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js");var EOF,$=__webpack_require__("../../node_modules/core-js/internals/export.js"),DESCRIPTORS=__webpack_require__("../../node_modules/core-js/internals/descriptors.js"),USE_NATIVE_URL=__webpack_require__("../../node_modules/core-js/internals/url-constructor-detection.js"),global=__webpack_require__("../../node_modules/core-js/internals/global.js"),bind=__webpack_require__("../../node_modules/core-js/internals/function-bind-context.js"),uncurryThis=__webpack_require__("../../node_modules/core-js/internals/function-uncurry-this.js"),defineBuiltIn=__webpack_require__("../../node_modules/core-js/internals/define-built-in.js"),defineBuiltInAccessor=__webpack_require__("../../node_modules/core-js/internals/define-built-in-accessor.js"),anInstance=__webpack_require__("../../node_modules/core-js/internals/an-instance.js"),hasOwn=__webpack_require__("../../node_modules/core-js/internals/has-own-property.js"),assign=__webpack_require__("../../node_modules/core-js/internals/object-assign.js"),arrayFrom=__webpack_require__("../../node_modules/core-js/internals/array-from.js"),arraySlice=__webpack_require__("../../node_modules/core-js/internals/array-slice-simple.js"),codeAt=__webpack_require__("../../node_modules/core-js/internals/string-multibyte.js").codeAt,toASCII=__webpack_require__("../../node_modules/core-js/internals/string-punycode-to-ascii.js"),$toString=__webpack_require__("../../node_modules/core-js/internals/to-string.js"),setToStringTag=__webpack_require__("../../node_modules/core-js/internals/set-to-string-tag.js"),validateArgumentsLength=__webpack_require__("../../node_modules/core-js/internals/validate-arguments-length.js"),URLSearchParamsModule=__webpack_require__("../../node_modules/core-js/modules/web.url-search-params.constructor.js"),InternalStateModule=__webpack_require__("../../node_modules/core-js/internals/internal-state.js"),setInternalState=InternalStateModule.set,getInternalURLState=InternalStateModule.getterFor("URL"),URLSearchParams=URLSearchParamsModule.URLSearchParams,getInternalSearchParamsState=URLSearchParamsModule.getState,NativeURL=global.URL,TypeError=global.TypeError,parseInt=global.parseInt,floor=Math.floor,pow=Math.pow,charAt=uncurryThis("".charAt),exec=uncurryThis(/./.exec),join=uncurryThis([].join),numberToString=uncurryThis(1..toString),pop=uncurryThis([].pop),push=uncurryThis([].push),replace=uncurryThis("".replace),shift=uncurryThis([].shift),split=uncurryThis("".split),stringSlice=uncurryThis("".slice),toLowerCase=uncurryThis("".toLowerCase),unshift=uncurryThis([].unshift),ALPHA=/[a-z]/i,ALPHANUMERIC=/[\d+-.a-z]/i,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\da-f]+$/i,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,TAB_AND_NEW_LINE=/[\t\n\r]/g,serializeHost=function(host){var result,index,compress,ignore0;if("number"==typeof host){for(result=[],index=0;index<4;index++)unshift(result,host%256),host=floor(host/256);return join(result,".")}if("object"==typeof host){for(result="",compress=function(ipv6){for(var maxIndex=null,maxLength=1,currStart=null,currLength=0,index=0;index<8;index++)0!==ipv6[index]?(currLength>maxLength&&(maxIndex=currStart,maxLength=currLength),currStart=null,currLength=0):(null===currStart&&(currStart=index),++currLength);return currLength>maxLength&&(maxIndex=currStart,maxLength=currLength),maxIndex}(host),index=0;index<8;index++)ignore0&&0===host[index]||(ignore0&&(ignore0=!1),compress===index?(result+=index?":":"::",ignore0=!0):(result+=numberToString(host[index],16),index<7&&(result+=":")));return"["+result+"]"}return host},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=assign({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=assign({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=assign({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(chr,set){var code=codeAt(chr,0);return code>32&&code<127&&!hasOwn(set,chr)?chr:encodeURIComponent(chr)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(string,normalized){var second;return 2==string.length&&exec(ALPHA,charAt(string,0))&&(":"==(second=charAt(string,1))||!normalized&&"|"==second)},startsWithWindowsDriveLetter=function(string){var third;return string.length>1&&isWindowsDriveLetter(stringSlice(string,0,2))&&(2==string.length||"/"===(third=charAt(string,2))||"\\"===third||"?"===third||"#"===third)},isSingleDot=function(segment){return"."===segment||"%2e"===toLowerCase(segment)},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},URLState=function(url,isBase,base){var baseState,failure,searchParams,urlString=$toString(url);if(isBase){if(failure=this.parse(urlString))throw TypeError(failure);this.searchParams=null}else{if(void 0!==base&&(baseState=new URLState(base,!0)),failure=this.parse(urlString,null,baseState))throw TypeError(failure);(searchParams=getInternalSearchParamsState(new URLSearchParams)).bindURL(this),this.searchParams=searchParams}};URLState.prototype={type:"URL",parse:function(input,stateOverride,base){var codePoints,chr,bufferCodePoints,failure,segment,url=this,state=stateOverride||SCHEME_START,pointer=0,buffer="",seenAt=!1,seenBracket=!1,seenPasswordToken=!1;for(input=$toString(input),stateOverride||(url.scheme="",url.username="",url.password="",url.host=null,url.port=null,url.path=[],url.query=null,url.fragment=null,url.cannotBeABaseURL=!1,input=replace(input,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,"")),input=replace(input,TAB_AND_NEW_LINE,""),codePoints=arrayFrom(input);pointer<=codePoints.length;){switch(chr=codePoints[pointer],state){case SCHEME_START:if(!chr||!exec(ALPHA,chr)){if(stateOverride)return"Invalid scheme";state=NO_SCHEME;continue}buffer+=toLowerCase(chr),state=SCHEME;break;case SCHEME:if(chr&&(exec(ALPHANUMERIC,chr)||"+"==chr||"-"==chr||"."==chr))buffer+=toLowerCase(chr);else{if(":"!=chr){if(stateOverride)return"Invalid scheme";buffer="",state=NO_SCHEME,pointer=0;continue}if(stateOverride&&(url.isSpecial()!=hasOwn(specialSchemes,buffer)||"file"==buffer&&(url.includesCredentials()||null!==url.port)||"file"==url.scheme&&!url.host))return;if(url.scheme=buffer,stateOverride)return void(url.isSpecial()&&specialSchemes[url.scheme]==url.port&&(url.port=null));buffer="","file"==url.scheme?state=FILE:url.isSpecial()&&base&&base.scheme==url.scheme?state=SPECIAL_RELATIVE_OR_AUTHORITY:url.isSpecial()?state=SPECIAL_AUTHORITY_SLASHES:"/"==codePoints[pointer+1]?(state=PATH_OR_AUTHORITY,pointer++):(url.cannotBeABaseURL=!0,push(url.path,""),state=CANNOT_BE_A_BASE_URL_PATH)}break;case NO_SCHEME:if(!base||base.cannotBeABaseURL&&"#"!=chr)return"Invalid scheme";if(base.cannotBeABaseURL&&"#"==chr){url.scheme=base.scheme,url.path=arraySlice(base.path),url.query=base.query,url.fragment="",url.cannotBeABaseURL=!0,state=FRAGMENT;break}state="file"==base.scheme?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if("/"!=chr||"/"!=codePoints[pointer+1]){state=RELATIVE;continue}state=SPECIAL_AUTHORITY_IGNORE_SLASHES,pointer++;break;case PATH_OR_AUTHORITY:if("/"==chr){state=AUTHORITY;break}state=PATH;continue;case RELATIVE:if(url.scheme=base.scheme,chr==EOF)url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.query=base.query;else if("/"==chr||"\\"==chr&&url.isSpecial())state=RELATIVE_SLASH;else if("?"==chr)url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.query="",state=QUERY;else{if("#"!=chr){url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.path.length--,state=PATH;continue}url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,url.path=arraySlice(base.path),url.query=base.query,url.fragment="",state=FRAGMENT}break;case RELATIVE_SLASH:if(!url.isSpecial()||"/"!=chr&&"\\"!=chr){if("/"!=chr){url.username=base.username,url.password=base.password,url.host=base.host,url.port=base.port,state=PATH;continue}state=AUTHORITY}else state=SPECIAL_AUTHORITY_IGNORE_SLASHES;break;case SPECIAL_AUTHORITY_SLASHES:if(state=SPECIAL_AUTHORITY_IGNORE_SLASHES,"/"!=chr||"/"!=charAt(buffer,pointer+1))continue;pointer++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if("/"!=chr&&"\\"!=chr){state=AUTHORITY;continue}break;case AUTHORITY:if("@"==chr){seenAt&&(buffer="%40"+buffer),seenAt=!0,bufferCodePoints=arrayFrom(buffer);for(var i=0;i<bufferCodePoints.length;i++){var codePoint=bufferCodePoints[i];if(":"!=codePoint||seenPasswordToken){var encodedCodePoints=percentEncode(codePoint,userinfoPercentEncodeSet);seenPasswordToken?url.password+=encodedCodePoints:url.username+=encodedCodePoints}else seenPasswordToken=!0}buffer=""}else if(chr==EOF||"/"==chr||"?"==chr||"#"==chr||"\\"==chr&&url.isSpecial()){if(seenAt&&""==buffer)return"Invalid authority";pointer-=arrayFrom(buffer).length+1,buffer="",state=HOST}else buffer+=chr;break;case HOST:case HOSTNAME:if(stateOverride&&"file"==url.scheme){state=FILE_HOST;continue}if(":"!=chr||seenBracket){if(chr==EOF||"/"==chr||"?"==chr||"#"==chr||"\\"==chr&&url.isSpecial()){if(url.isSpecial()&&""==buffer)return"Invalid host";if(stateOverride&&""==buffer&&(url.includesCredentials()||null!==url.port))return;if(failure=url.parseHost(buffer))return failure;if(buffer="",state=PATH_START,stateOverride)return;continue}"["==chr?seenBracket=!0:"]"==chr&&(seenBracket=!1),buffer+=chr}else{if(""==buffer)return"Invalid host";if(failure=url.parseHost(buffer))return failure;if(buffer="",state=PORT,stateOverride==HOSTNAME)return}break;case PORT:if(!exec(DIGIT,chr)){if(chr==EOF||"/"==chr||"?"==chr||"#"==chr||"\\"==chr&&url.isSpecial()||stateOverride){if(""!=buffer){var port=parseInt(buffer,10);if(port>65535)return"Invalid port";url.port=url.isSpecial()&&port===specialSchemes[url.scheme]?null:port,buffer=""}if(stateOverride)return;state=PATH_START;continue}return"Invalid port"}buffer+=chr;break;case FILE:if(url.scheme="file","/"==chr||"\\"==chr)state=FILE_SLASH;else{if(!base||"file"!=base.scheme){state=PATH;continue}if(chr==EOF)url.host=base.host,url.path=arraySlice(base.path),url.query=base.query;else if("?"==chr)url.host=base.host,url.path=arraySlice(base.path),url.query="",state=QUERY;else{if("#"!=chr){startsWithWindowsDriveLetter(join(arraySlice(codePoints,pointer),""))||(url.host=base.host,url.path=arraySlice(base.path),url.shortenPath()),state=PATH;continue}url.host=base.host,url.path=arraySlice(base.path),url.query=base.query,url.fragment="",state=FRAGMENT}}break;case FILE_SLASH:if("/"==chr||"\\"==chr){state=FILE_HOST;break}base&&"file"==base.scheme&&!startsWithWindowsDriveLetter(join(arraySlice(codePoints,pointer),""))&&(isWindowsDriveLetter(base.path[0],!0)?push(url.path,base.path[0]):url.host=base.host),state=PATH;continue;case FILE_HOST:if(chr==EOF||"/"==chr||"\\"==chr||"?"==chr||"#"==chr){if(!stateOverride&&isWindowsDriveLetter(buffer))state=PATH;else if(""==buffer){if(url.host="",stateOverride)return;state=PATH_START}else{if(failure=url.parseHost(buffer))return failure;if("localhost"==url.host&&(url.host=""),stateOverride)return;buffer="",state=PATH_START}continue}buffer+=chr;break;case PATH_START:if(url.isSpecial()){if(state=PATH,"/"!=chr&&"\\"!=chr)continue}else if(stateOverride||"?"!=chr)if(stateOverride||"#"!=chr){if(chr!=EOF&&(state=PATH,"/"!=chr))continue}else url.fragment="",state=FRAGMENT;else url.query="",state=QUERY;break;case PATH:if(chr==EOF||"/"==chr||"\\"==chr&&url.isSpecial()||!stateOverride&&("?"==chr||"#"==chr)){if(".."===(segment=toLowerCase(segment=buffer))||"%2e."===segment||".%2e"===segment||"%2e%2e"===segment?(url.shortenPath(),"/"==chr||"\\"==chr&&url.isSpecial()||push(url.path,"")):isSingleDot(buffer)?"/"==chr||"\\"==chr&&url.isSpecial()||push(url.path,""):("file"==url.scheme&&!url.path.length&&isWindowsDriveLetter(buffer)&&(url.host&&(url.host=""),buffer=charAt(buffer,0)+":"),push(url.path,buffer)),buffer="","file"==url.scheme&&(chr==EOF||"?"==chr||"#"==chr))for(;url.path.length>1&&""===url.path[0];)shift(url.path);"?"==chr?(url.query="",state=QUERY):"#"==chr&&(url.fragment="",state=FRAGMENT)}else buffer+=percentEncode(chr,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:"?"==chr?(url.query="",state=QUERY):"#"==chr?(url.fragment="",state=FRAGMENT):chr!=EOF&&(url.path[0]+=percentEncode(chr,C0ControlPercentEncodeSet));break;case QUERY:stateOverride||"#"!=chr?chr!=EOF&&("'"==chr&&url.isSpecial()?url.query+="%27":url.query+="#"==chr?"%23":percentEncode(chr,C0ControlPercentEncodeSet)):(url.fragment="",state=FRAGMENT);break;case FRAGMENT:chr!=EOF&&(url.fragment+=percentEncode(chr,fragmentPercentEncodeSet))}pointer++}},parseHost:function(input){var result,codePoints,index;if("["==charAt(input,0)){if("]"!=charAt(input,input.length-1))return"Invalid host";if(result=function(input){var value,length,numbersSeen,ipv4Piece,number,swaps,swap,address=[0,0,0,0,0,0,0,0],pieceIndex=0,compress=null,pointer=0,chr=function(){return charAt(input,pointer)};if(":"==chr()){if(":"!=charAt(input,1))return;pointer+=2,compress=++pieceIndex}for(;chr();){if(8==pieceIndex)return;if(":"!=chr()){for(value=length=0;length<4&&exec(HEX,chr());)value=16*value+parseInt(chr(),16),pointer++,length++;if("."==chr()){if(0==length)return;if(pointer-=length,pieceIndex>6)return;for(numbersSeen=0;chr();){if(ipv4Piece=null,numbersSeen>0){if(!("."==chr()&&numbersSeen<4))return;pointer++}if(!exec(DIGIT,chr()))return;for(;exec(DIGIT,chr());){if(number=parseInt(chr(),10),null===ipv4Piece)ipv4Piece=number;else{if(0==ipv4Piece)return;ipv4Piece=10*ipv4Piece+number}if(ipv4Piece>255)return;pointer++}address[pieceIndex]=256*address[pieceIndex]+ipv4Piece,2!=++numbersSeen&&4!=numbersSeen||pieceIndex++}if(4!=numbersSeen)return;break}if(":"==chr()){if(pointer++,!chr())return}else if(chr())return;address[pieceIndex++]=value}else{if(null!==compress)return;pointer++,compress=++pieceIndex}}if(null!==compress)for(swaps=pieceIndex-compress,pieceIndex=7;0!=pieceIndex&&swaps>0;)swap=address[pieceIndex],address[pieceIndex--]=address[compress+swaps-1],address[compress+--swaps]=swap;else if(8!=pieceIndex)return;return address}(stringSlice(input,1,-1)),!result)return"Invalid host";this.host=result}else if(this.isSpecial()){if(input=toASCII(input),exec(FORBIDDEN_HOST_CODE_POINT,input))return"Invalid host";if(result=function(input){var partsLength,numbers,index,part,radix,number,ipv4,parts=split(input,".");if(parts.length&&""==parts[parts.length-1]&&parts.length--,(partsLength=parts.length)>4)return input;for(numbers=[],index=0;index<partsLength;index++){if(""==(part=parts[index]))return input;if(radix=10,part.length>1&&"0"==charAt(part,0)&&(radix=exec(HEX_START,part)?16:8,part=stringSlice(part,8==radix?1:2)),""===part)number=0;else{if(!exec(10==radix?DEC:8==radix?OCT:HEX,part))return input;number=parseInt(part,radix)}push(numbers,number)}for(index=0;index<partsLength;index++)if(number=numbers[index],index==partsLength-1){if(number>=pow(256,5-partsLength))return null}else if(number>255)return null;for(ipv4=pop(numbers),index=0;index<numbers.length;index++)ipv4+=numbers[index]*pow(256,3-index);return ipv4}(input),null===result)return"Invalid host";this.host=result}else{if(exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT,input))return"Invalid host";for(result="",codePoints=arrayFrom(input),index=0;index<codePoints.length;index++)result+=percentEncode(codePoints[index],C0ControlPercentEncodeSet);this.host=result}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return hasOwn(specialSchemes,this.scheme)},shortenPath:function(){var path=this.path,pathSize=path.length;!pathSize||"file"==this.scheme&&1==pathSize&&isWindowsDriveLetter(path[0],!0)||path.length--},serialize:function(){var url=this,scheme=url.scheme,username=url.username,password=url.password,host=url.host,port=url.port,path=url.path,query=url.query,fragment=url.fragment,output=scheme+":";return null!==host?(output+="//",url.includesCredentials()&&(output+=username+(password?":"+password:"")+"@"),output+=serializeHost(host),null!==port&&(output+=":"+port)):"file"==scheme&&(output+="//"),output+=url.cannotBeABaseURL?path[0]:path.length?"/"+join(path,"/"):"",null!==query&&(output+="?"+query),null!==fragment&&(output+="#"+fragment),output},setHref:function(href){var failure=this.parse(href);if(failure)throw TypeError(failure);this.searchParams.update()},getOrigin:function(){var scheme=this.scheme,port=this.port;if("blob"==scheme)try{return new URLConstructor(scheme.path[0]).origin}catch(error){return"null"}return"file"!=scheme&&this.isSpecial()?scheme+"://"+serializeHost(this.host)+(null!==port?":"+port:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(protocol){this.parse($toString(protocol)+":",SCHEME_START)},getUsername:function(){return this.username},setUsername:function(username){var codePoints=arrayFrom($toString(username));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<codePoints.length;i++)this.username+=percentEncode(codePoints[i],userinfoPercentEncodeSet)}},getPassword:function(){return this.password},setPassword:function(password){var codePoints=arrayFrom($toString(password));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<codePoints.length;i++)this.password+=percentEncode(codePoints[i],userinfoPercentEncodeSet)}},getHost:function(){var host=this.host,port=this.port;return null===host?"":null===port?serializeHost(host):serializeHost(host)+":"+port},setHost:function(host){this.cannotBeABaseURL||this.parse(host,HOST)},getHostname:function(){var host=this.host;return null===host?"":serializeHost(host)},setHostname:function(hostname){this.cannotBeABaseURL||this.parse(hostname,HOSTNAME)},getPort:function(){var port=this.port;return null===port?"":$toString(port)},setPort:function(port){this.cannotHaveUsernamePasswordPort()||(""==(port=$toString(port))?this.port=null:this.parse(port,PORT))},getPathname:function(){var path=this.path;return this.cannotBeABaseURL?path[0]:path.length?"/"+join(path,"/"):""},setPathname:function(pathname){this.cannotBeABaseURL||(this.path=[],this.parse(pathname,PATH_START))},getSearch:function(){var query=this.query;return query?"?"+query:""},setSearch:function(search){""==(search=$toString(search))?this.query=null:("?"==charAt(search,0)&&(search=stringSlice(search,1)),this.query="",this.parse(search,QUERY)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var fragment=this.fragment;return fragment?"#"+fragment:""},setHash:function(hash){""!=(hash=$toString(hash))?("#"==charAt(hash,0)&&(hash=stringSlice(hash,1)),this.fragment="",this.parse(hash,FRAGMENT)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var URLConstructor=function URL(url){var that=anInstance(this,URLPrototype),base=validateArgumentsLength(arguments.length,1)>1?arguments[1]:void 0,state=setInternalState(that,new URLState(url,!1,base));DESCRIPTORS||(that.href=state.serialize(),that.origin=state.getOrigin(),that.protocol=state.getProtocol(),that.username=state.getUsername(),that.password=state.getPassword(),that.host=state.getHost(),that.hostname=state.getHostname(),that.port=state.getPort(),that.pathname=state.getPathname(),that.search=state.getSearch(),that.searchParams=state.getSearchParams(),that.hash=state.getHash())},URLPrototype=URLConstructor.prototype,accessorDescriptor=function(getter,setter){return{get:function(){return getInternalURLState(this)[getter]()},set:setter&&function(value){return getInternalURLState(this)[setter](value)},configurable:!0,enumerable:!0}};if(DESCRIPTORS&&(defineBuiltInAccessor(URLPrototype,"href",accessorDescriptor("serialize","setHref")),defineBuiltInAccessor(URLPrototype,"origin",accessorDescriptor("getOrigin")),defineBuiltInAccessor(URLPrototype,"protocol",accessorDescriptor("getProtocol","setProtocol")),defineBuiltInAccessor(URLPrototype,"username",accessorDescriptor("getUsername","setUsername")),defineBuiltInAccessor(URLPrototype,"password",accessorDescriptor("getPassword","setPassword")),defineBuiltInAccessor(URLPrototype,"host",accessorDescriptor("getHost","setHost")),defineBuiltInAccessor(URLPrototype,"hostname",accessorDescriptor("getHostname","setHostname")),defineBuiltInAccessor(URLPrototype,"port",accessorDescriptor("getPort","setPort")),defineBuiltInAccessor(URLPrototype,"pathname",accessorDescriptor("getPathname","setPathname")),defineBuiltInAccessor(URLPrototype,"search",accessorDescriptor("getSearch","setSearch")),defineBuiltInAccessor(URLPrototype,"searchParams",accessorDescriptor("getSearchParams")),defineBuiltInAccessor(URLPrototype,"hash",accessorDescriptor("getHash","setHash"))),defineBuiltIn(URLPrototype,"toJSON",(function toJSON(){return getInternalURLState(this).serialize()}),{enumerable:!0}),defineBuiltIn(URLPrototype,"toString",(function toString(){return getInternalURLState(this).serialize()}),{enumerable:!0}),NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&defineBuiltIn(URLConstructor,"createObjectURL",bind(nativeCreateObjectURL,NativeURL)),nativeRevokeObjectURL&&defineBuiltIn(URLConstructor,"revokeObjectURL",bind(nativeRevokeObjectURL,NativeURL))}setToStringTag(URLConstructor,"URL"),$({global:!0,constructor:!0,forced:!USE_NATIVE_URL,sham:!DESCRIPTORS},{URL:URLConstructor})},"../../node_modules/core-js/modules/web.url.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../../node_modules/core-js/modules/web.url.constructor.js")},"../../node_modules/core-js/stable/symbol/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var parent=__webpack_require__("../../node_modules/core-js/es/symbol/index.js");__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),module.exports=parent},"../../node_modules/define-properties/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var keys=__webpack_require__("../../node_modules/object-keys/index.js"),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,hasPropertyDescriptors=__webpack_require__("../../node_modules/has-property-descriptors/index.js")(),supportsDescriptors=origDefineProperty&&hasPropertyDescriptors,defineProperty=function(object,name,value,predicate){var fn;(!(name in object)||"function"==typeof(fn=predicate)&&"[object Function]"===toStr.call(fn)&&predicate())&&(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},"../../node_modules/entities/lib/decode.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeHTML=exports.decodeHTMLStrict=exports.decodeXML=void 0;var entities_json_1=__importDefault(__webpack_require__("../../node_modules/entities/lib/maps/entities.json")),legacy_json_1=__importDefault(__webpack_require__("../../node_modules/entities/lib/maps/legacy.json")),xml_json_1=__importDefault(__webpack_require__("../../node_modules/entities/lib/maps/xml.json")),decode_codepoint_1=__importDefault(__webpack_require__("../../node_modules/entities/lib/decode_codepoint.js")),strictEntityRe=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function getStrictDecoder(map){var replace=getReplacer(map);return function(str){return String(str).replace(strictEntityRe,replace)}}exports.decodeXML=getStrictDecoder(xml_json_1.default),exports.decodeHTMLStrict=getStrictDecoder(entities_json_1.default);var sorter=function(a,b){return a<b?1:-1};function getReplacer(map){return function replace(str){if("#"===str.charAt(1)){var secondChar=str.charAt(2);return"X"===secondChar||"x"===secondChar?decode_codepoint_1.default(parseInt(str.substr(3),16)):decode_codepoint_1.default(parseInt(str.substr(2),10))}return map[str.slice(1,-1)]||str}}exports.decodeHTML=function(){for(var legacy=Object.keys(legacy_json_1.default).sort(sorter),keys=Object.keys(entities_json_1.default).sort(sorter),i=0,j=0;i<keys.length;i++)legacy[j]===keys[i]?(keys[i]+=";?",j++):keys[i]+=";";var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),replace=getReplacer(entities_json_1.default);function replacer(str){return";"!==str.substr(-1)&&(str+=";"),replace(str)}return function(str){return String(str).replace(re,replacer)}}()},"../../node_modules/entities/lib/decode_codepoint.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var decode_json_1=__importDefault(__webpack_require__("../../node_modules/entities/lib/maps/decode.json")),fromCodePoint=String.fromCodePoint||function(codePoint){var output="";return codePoint>65535&&(codePoint-=65536,output+=String.fromCharCode(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),output+=String.fromCharCode(codePoint)};exports.default=function decodeCodePoint(codePoint){return codePoint>=55296&&codePoint<=57343||codePoint>1114111?"":(codePoint in decode_json_1.default&&(codePoint=decode_json_1.default[codePoint]),fromCodePoint(codePoint))}},"../../node_modules/entities/lib/encode.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeUTF8=exports.escape=exports.encodeNonAsciiHTML=exports.encodeHTML=exports.encodeXML=void 0;var inverseXML=getInverseObj(__importDefault(__webpack_require__("../../node_modules/entities/lib/maps/xml.json")).default),xmlReplacer=getInverseReplacer(inverseXML);exports.encodeXML=getASCIIEncoder(inverseXML);var inverseHTML=getInverseObj(__importDefault(__webpack_require__("../../node_modules/entities/lib/maps/entities.json")).default),htmlReplacer=getInverseReplacer(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce((function(inverse,name){return inverse[obj[name]]="&"+name+";",inverse}),{})}function getInverseReplacer(inverse){for(var single=[],multiple=[],_i=0,_a=Object.keys(inverse);_i<_a.length;_i++){var k=_a[_i];1===k.length?single.push("\\"+k):multiple.push(k)}single.sort();for(var start=0;start<single.length-1;start++){for(var end=start;end<single.length-1&&single[end].charCodeAt(1)+1===single[end+1].charCodeAt(1);)end+=1;var count=1+end-start;count<3||single.splice(start,count,single[start]+"-"+single[end])}return multiple.unshift("["+single.join("")+"]"),new RegExp(multiple.join("|"),"g")}exports.encodeHTML=function getInverse(inverse,re){return function(data){return data.replace(re,(function(name){return inverse[name]})).replace(reNonASCII,singleCharReplacer)}}(inverseHTML,htmlReplacer),exports.encodeNonAsciiHTML=getASCIIEncoder(inverseHTML);var reNonASCII=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,getCodePoint=null!=String.prototype.codePointAt?function(str){return str.codePointAt(0)}:function(c){return 1024*(c.charCodeAt(0)-55296)+c.charCodeAt(1)-56320+65536};function singleCharReplacer(c){return"&#x"+(c.length>1?getCodePoint(c):c.charCodeAt(0)).toString(16).toUpperCase()+";"}var reEscapeChars=new RegExp(xmlReplacer.source+"|"+reNonASCII.source,"g");function getASCIIEncoder(obj){return function(data){return data.replace(reEscapeChars,(function(c){return obj[c]||singleCharReplacer(c)}))}}exports.escape=function escape(data){return data.replace(reEscapeChars,singleCharReplacer)},exports.escapeUTF8=function escapeUTF8(data){return data.replace(xmlReplacer,singleCharReplacer)}},"../../node_modules/entities/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeXMLStrict=exports.decodeHTML5Strict=exports.decodeHTML4Strict=exports.decodeHTML5=exports.decodeHTML4=exports.decodeHTMLStrict=exports.decodeHTML=exports.decodeXML=exports.encodeHTML5=exports.encodeHTML4=exports.escapeUTF8=exports.escape=exports.encodeNonAsciiHTML=exports.encodeHTML=exports.encodeXML=exports.encode=exports.decodeStrict=exports.decode=void 0;var decode_1=__webpack_require__("../../node_modules/entities/lib/decode.js"),encode_1=__webpack_require__("../../node_modules/entities/lib/encode.js");exports.decode=function decode(data,level){return(!level||level<=0?decode_1.decodeXML:decode_1.decodeHTML)(data)},exports.decodeStrict=function decodeStrict(data,level){return(!level||level<=0?decode_1.decodeXML:decode_1.decodeHTMLStrict)(data)},exports.encode=function encode(data,level){return(!level||level<=0?encode_1.encodeXML:encode_1.encodeHTML)(data)};var encode_2=__webpack_require__("../../node_modules/entities/lib/encode.js");Object.defineProperty(exports,"encodeXML",{enumerable:!0,get:function(){return encode_2.encodeXML}}),Object.defineProperty(exports,"encodeHTML",{enumerable:!0,get:function(){return encode_2.encodeHTML}}),Object.defineProperty(exports,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return encode_2.encodeNonAsciiHTML}}),Object.defineProperty(exports,"escape",{enumerable:!0,get:function(){return encode_2.escape}}),Object.defineProperty(exports,"escapeUTF8",{enumerable:!0,get:function(){return encode_2.escapeUTF8}}),Object.defineProperty(exports,"encodeHTML4",{enumerable:!0,get:function(){return encode_2.encodeHTML}}),Object.defineProperty(exports,"encodeHTML5",{enumerable:!0,get:function(){return encode_2.encodeHTML}});var decode_2=__webpack_require__("../../node_modules/entities/lib/decode.js");Object.defineProperty(exports,"decodeXML",{enumerable:!0,get:function(){return decode_2.decodeXML}}),Object.defineProperty(exports,"decodeHTML",{enumerable:!0,get:function(){return decode_2.decodeHTML}}),Object.defineProperty(exports,"decodeHTMLStrict",{enumerable:!0,get:function(){return decode_2.decodeHTMLStrict}}),Object.defineProperty(exports,"decodeHTML4",{enumerable:!0,get:function(){return decode_2.decodeHTML}}),Object.defineProperty(exports,"decodeHTML5",{enumerable:!0,get:function(){return decode_2.decodeHTML}}),Object.defineProperty(exports,"decodeHTML4Strict",{enumerable:!0,get:function(){return decode_2.decodeHTMLStrict}}),Object.defineProperty(exports,"decodeHTML5Strict",{enumerable:!0,get:function(){return decode_2.decodeHTMLStrict}}),Object.defineProperty(exports,"decodeXMLStrict",{enumerable:!0,get:function(){return decode_2.decodeXML}})},"../../node_modules/es-array-method-boxes-properly/index.js":module=>{module.exports=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if("function"==typeof method){try{method.call("f",(function(_,__,O){"object"!=typeof O&&(properlyBoxesNonStrict=!1)})),method.call([null],(function(){"use strict";properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict}return!1}},"../../node_modules/es-get-iterator/node_modules/isarray/index.js":module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},"../../node_modules/es-shim-unscopables/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has=__webpack_require__("../../node_modules/has/src/index.js"),hasUnscopables="function"==typeof Symbol&&"symbol"==typeof Symbol.unscopables,map=hasUnscopables&&Array.prototype[Symbol.unscopables],$TypeError=TypeError;module.exports=function shimUnscopables(method){if("string"!=typeof method||!method)throw new $TypeError("method must be a non-empty string");if(!has(Array.prototype,method))throw new $TypeError("method must be on Array.prototype");hasUnscopables&&(map[method]=!0)}},"../../node_modules/es-to-primitive/es2015.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,isPrimitive=__webpack_require__("../../node_modules/es-to-primitive/helpers/isPrimitive.js"),isCallable=__webpack_require__("../../node_modules/is-callable/index.js"),isDate=__webpack_require__("../../node_modules/is-date-object/index.js"),isSymbol=__webpack_require__("../../node_modules/is-symbol/index.js"),ordinaryToPrimitive=function OrdinaryToPrimitive(O,hint){if(null==O)throw new TypeError("Cannot call method on "+O);if("string"!=typeof hint||"number"!==hint&&"string"!==hint)throw new TypeError('hint must be "string" or "number"');var method,result,i,methodNames="string"===hint?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methodNames.length;++i)if(method=O[methodNames[i]],isCallable(method)&&(result=method.call(O),isPrimitive(result)))return result;throw new TypeError("No default value")},GetMethod=function GetMethod(O,P){var func=O[P];if(null!=func){if(!isCallable(func))throw new TypeError(func+" returned for property "+P+" of object "+O+" is not a function");return func}};module.exports=function ToPrimitive(input){if(isPrimitive(input))return input;var exoticToPrim,hint="default";if(arguments.length>1&&(arguments[1]===String?hint="string":arguments[1]===Number&&(hint="number")),hasSymbols&&(Symbol.toPrimitive?exoticToPrim=GetMethod(input,Symbol.toPrimitive):isSymbol(input)&&(exoticToPrim=Symbol.prototype.valueOf)),void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(isPrimitive(result))return result;throw new TypeError("unable to convert exotic object to primitive")}return"default"===hint&&(isDate(input)||isSymbol(input))&&(hint="string"),ordinaryToPrimitive(input,"default"===hint?"number":hint)}},"../../node_modules/es-to-primitive/helpers/isPrimitive.js":module=>{"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},"../../node_modules/es5-shim/es5-sham.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),isEnumerable=call.bind(prototypeOfObject.propertyIsEnumerable),toStr=call.bind(prototypeOfObject.toString),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__));var isPrimitive=function isPrimitive(o){return null==o||"object"!=typeof o&&"function"!=typeof o};Object.getPrototypeOf||(Object.getPrototypeOf=function getPrototypeOf(object){var proto=object.__proto__;return proto||null==proto?proto:"[object Function]"===toStr(object.constructor)?object.constructor.prototype:object instanceof Object?prototypeOfObject:null});if(Object.defineProperty){var doesGetOwnPropertyDescriptorWork=function doesGetOwnPropertyDescriptorWork(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){return!1}},getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({});if(!("undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div")))||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(isPrimitive(object))throw new TypeError(ERR_NON_OBJECT+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}var descriptor;if(!owns(object,property))return descriptor;if(descriptor={enumerable:isEnumerable(object,property),configurable:!0},supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)});if(!Object.create){var createEmpty,shouldUseActiveX=function shouldUseActiveX(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(exception){return!1}},getEmptyViaActiveX=function getEmptyViaActiveX(){var empty,xDoc,script="script";return(xDoc=new ActiveXObject("htmlfile")).write("<"+script+"></"+script+">"),xDoc.close(),empty=xDoc.parentWindow.Object.prototype,xDoc=null,empty},getEmptyViaIFrame=function getEmptyViaIFrame(){var empty,iframe=document.createElement("iframe"),parent=document.body||document.documentElement;return iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:",empty=iframe.contentWindow.Object.prototype,parent.removeChild(iframe),iframe=null,empty};createEmpty=!({__proto__:null}instanceof Object)||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var empty=shouldUseActiveX()?getEmptyViaActiveX():getEmptyViaIFrame();delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf;var Empty=function Empty(){};return Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function create(prototype,properties){var object,Type=function Type(){};if(null===prototype)object=createEmpty();else{if(isPrimitive(prototype))throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,(object=new Type).__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}var doesDefinePropertyWork=function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){return!1}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function defineProperty(object,property,descriptor){if(isPrimitive(object))throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(isPrimitive(descriptor))throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if("value"in descriptor)if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{var hasGetter="get"in descriptor,hasSetter="set"in descriptor;if(!supportsAccessors&&(hasGetter||hasSetter))throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);hasGetter&&defineGetter(object,property,descriptor.get),hasSetter&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties&&!definePropertiesFallback||(Object.defineProperties=function defineProperties(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}return Object.keys(properties).forEach((function(property){"__proto__"!==property&&Object.defineProperty(object,property,properties[property])})),object});Object.seal||(Object.seal=function seal(object){if(Object(object)!==object)throw new TypeError("Object.seal can only be called on Objects.");return object});Object.freeze||(Object.freeze=function freeze(object){if(Object(object)!==object)throw new TypeError("Object.freeze can only be called on Objects.");return object});try{Object.freeze((function(){}))}catch(exception){Object.freeze=(freezeObject=Object.freeze,function freeze(object){return"function"==typeof object?object:freezeObject(object)})}var freezeObject;Object.preventExtensions||(Object.preventExtensions=function preventExtensions(object){if(Object(object)!==object)throw new TypeError("Object.preventExtensions can only be called on Objects.");return object});Object.isSealed||(Object.isSealed=function isSealed(object){if(Object(object)!==object)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function isFrozen(object){if(Object(object)!==object)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function isExtensible(object){if(Object(object)!==object)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"../../node_modules/es5-shim/es5-shim.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";__WEBPACK_AMD_DEFINE_FACTORY__=function(){var isRegex,isString,$Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,floor=Math.floor,abs=Math.abs,pow=Math.pow,round=Math.round,log=Math.log,LOG10E=Math.LOG10E,log10=Math.log10||function log10(value){return log(value)*LOG10E},to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function isES6ClassFn(value){try{var spaceStripped=fnToStr.call(value).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},tryFunctionObject=function tryFunctionObject(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},fnClass="[object Function]",genClass="[object GeneratorFunction]",isCallable=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return strClass===fnClass||strClass===genClass},regexExec=RegExp.prototype.exec,tryRegexExec=function tryRegexExec(value){try{return regexExec.call(value),!0}catch(e){return!1}},regexClass="[object RegExp]";isRegex=function isRegex(value){return"object"==typeof value&&(hasToStringTag?tryRegexExec(value):to_string.call(value)===regexClass)};var strValue=String.prototype.valueOf,tryStringObject=function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}},stringClass="[object String]";isString=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?tryStringObject(value):to_string.call(value)===stringClass)};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function defineProperties(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)});var has,defineProperty;if($Object.defineProperty&&supportsDescriptors){var F=function(){},toStringSentinel={},sentinel={toString:toStringSentinel};if($Object.defineProperty(F,"prototype",{value:sentinel,writable:!1}),(new F).toString!==toStringSentinel){var $dP=$Object.defineProperty,$gOPD=$Object.getOwnPropertyDescriptor;defineProperties($Object,{defineProperty:function defineProperty(o,k,d){var key=$String(k);if("function"==typeof o&&"prototype"===key){var desc=$gOPD(o,key);if(desc.writable&&!d.writable&&"value"in d)try{o[key]=d.value}catch(e){}return $dP(o,key,{configurable:"configurable"in d?d.configurable:desc.configurable,enumerable:"enumerable"in d?d.enumerable:desc.enumerable,writable:d.writable})}return $dP(o,key,d)}},!0)}}var isPrimitive=function isPrimitive(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function isActualNaN(x){return x!=x},ES={ToInteger:function ToInteger(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*floor(abs(n))),n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function ToUint32(x){return x>>>0}},Empty=function Empty(){};defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=array_slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))},boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(binder),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice);if("object"==typeof document&&document&&document.documentElement)try{arraySlice(document.documentElement.childNodes)}catch(e){var origArraySlice=arraySlice,origArraySliceApply=arraySliceApply;arraySlice=function arraySliceIE(arr){for(var r=[],i=arr.length;i-- >0;)r[i]=arr[i];return origArraySliceApply(r,origArraySlice(arguments,1))},arraySliceApply=function arraySliceApplyIE(arr,args){return origArraySliceApply(arraySlice(arr),args)}}var strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function isArray(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",(function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)})),method.call([1],(function(){properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function map(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var value,T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[];if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function every(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function some(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",(function(_,__,___,list){return list})));defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var result,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(a=[1,2],result=a.splice(),2===a.length&&isArray(result)&&0===result.length);var a,result;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=(obj={},ArrayPrototype.splice.call(obj,0,0,1),1===obj.length),hasES6Defaults=3===[0,1,2].splice(0).length;var obj;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject||!hasES6Defaults);var spliceWorksWithLargeSparseArrays=(arr=new $Array(1e5),arr[8]="x",arr.splice(1,1),7===arr.indexOf("x")),spliceWorksWithSmallSparseArrays=function(){var n=256,arr=[];return arr[n]="a",arr.splice(n+1,0,"b"),"a"===arr[n]}();var arr;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){for(var from,O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=0===arguments.length?0:1===arguments.length?len-actualStart:min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var to,items=arraySlice(arguments,2),itemCount=items.length;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var hasStringJoinBug,originalJoin=ArrayPrototype.join;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function push(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={};return 1!==Array.prototype.push.call(obj,void 0)||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function push(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[];return 1!==arr.push(void 0)||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e2){return!1}}return!0}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function sort(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum((function(){}),"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!excludedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function isArguments(value){return"[object Arguments]"===toStr(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments;defineProperties($Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function keys(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasToDateStringFormatBug,hasToStringFormatBug,hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString();aNegativeTestDate.getTimezoneOffset()<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate))):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate)));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function daysInMonth(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function getFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function getMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function getDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function getUTCFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function getUTCMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function getUTCDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function toUTCString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function toDateString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function toString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=floor(abs(timezoneOffset)/60),minutesOffset=floor(abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var negativeDate=-621987552e5,negativeYearString="-000001",hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(negativeDate).toISOString().indexOf(negativeYearString),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=floor(month/12);var result=[(month=(month%12+12)%12)+1,originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(negativeDate).toJSON().indexOf(negativeYearString)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function toJSON(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var date,length=arguments.length;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}var parsed=DateShim.parse(Y),hasNegTimestampParseBug=isNaN(parsed);date=1!==length||$String(Y)!==Y||hasNegTimestampParseBug?length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate:new NativeDate(parsed)}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+floor((year-1969+t)/4)-floor((year-1901+t)/100)+floor((year-1601+t)/400)+365*(year-1970)},toUTC=function toUTC(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))};for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0);var parseShim=function parse(string){var match=isoDateExpression.exec(string);if(match){var result,year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0);return hour<(minute>0||second>0||millisecond>0?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=toUTC(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)};return defineProperties(DateShim,{parse:parseShim}),DateShim}(Date)}Date.now||(Date.now=function now(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=floor(c2/toFixedHelpers.base)},divide:function divide(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=floor(c/n),c=c%n*toFixedHelpers.base},numToString:function numToString(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}};defineProperties(NumberPrototype,{toFixed:function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(z=(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69)<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return m=f>0?(k=m.length)<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f):s+m}},hasToFixedBugs);var hasToExponentialRoundingBug=function(){try{return"-6.9000e-11"!==(-69e-12).toExponential(4)}catch(e){return!1}}(),toExponentialAllowsInfiniteDigits=function(){try{return 1..toExponential(1/0),1..toExponential(-1/0),!0}catch(e){return!1}}(),originalToExponential=call.bind(NumberPrototype.toExponential),numberToString=call.bind(NumberPrototype.toString),numberValueOf=call.bind(NumberPrototype.valueOf);defineProperties(NumberPrototype,{toExponential:function toExponential(fractionDigits){var x=numberValueOf(this);if(void 0===fractionDigits)return originalToExponential(x);var f=ES.ToInteger(fractionDigits);if(isActualNaN(x))return"NaN";if(f<0||f>20){if(!isFinite(f))throw new RangeError("toExponential() argument must be between 0 and 20");return originalToExponential(x,f)}var s="";if(x<0&&(s="-",x=-x),x===1/0)return s+"Infinity";if(void 0!==fractionDigits&&(f<0||f>20))throw new RangeError("Fraction digits "+fractionDigits+" out of range");var m="",e=0,c="",d="";if(0===x)e=0,f=0,m="0";else{var L=log10(x);e=floor(L);var n=0;if(void 0!==fractionDigits){var w=pow(10,e-f);2*x>=(2*(n=round(x/w))+1)*w&&(n+=1),n>=pow(10,f+1)&&(n/=10,e+=1)}else for(var guess_n=round(pow(10,L-e+(f=16))),target_f=f;f-- >0;)guess_n=round(pow(10,L-e+f)),abs(guess_n*pow(10,e-f)-x)<=abs(n*pow(10,e-target_f)-x)&&(target_f=f,n=guess_n);if(m=numberToString(n,10),void 0===fractionDigits)for(;"0"===strSlice(m,-1);)m=strSlice(m,0,-1),d+=1}return 0!==f&&(m=strSlice(m,0,1)+"."+strSlice(m,1)),0===e?(c="+",d="0"):(c=e>0?"+":"-",d=numberToString(abs(e),10)),s+(m+="e"+c+d)}},hasToExponentialRoundingBug||toExponentialAllowsInfiniteDigits);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=call.bind(NumberPrototype.toPrecision);defineProperties(NumberPrototype,{toPrecision:function toPrecision(precision){return void 0===precision?originalToPrecision(this):originalToPrecision(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=pow(2,32)-1,StringPrototype.split=function split(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,(function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function split(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var compliantExecNpcg,maxSafe32BitInt;var str_replace=StringPrototype.replace;groups=[],"x".replace(/x(.)?/g,(function(match,group){pushCall(groups,group)})),(1!==groups.length||void 0!==groups[0])&&(StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(!isFn||!hasCapturingGroups)return str_replace.call(this,searchValue,replaceValue);var wrappedReplaceValue=function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)};return str_replace.call(this,searchValue,wrappedReplaceValue)});var groups;var hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1),string_substr=hasNegativeSubstrBug&&call.bind(StringPrototype.substr);defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr(this,normalizedStart,length)}},hasNegativeSubstrBug);var mvs="",mvsIsWS=/\s/.test(mvs),ws="\t\n\v\f\r \u2028\u2029\ufeff".replace(/\S/g,""),zeroWidth="",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(""!==ws.trim()||""===zeroWidth.trim()||mvs.trim()!==(mvsIsWS?"":mvs));defineProperties(StringPrototype,{trim:function trim(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abc".lastIndexOf("",2);defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf;defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length);var hexRegex=/^[-+]?0[xX]/;8===parseInt(ws+"08")&&22===parseInt(ws+"0x16")&&(mvsIsWS?1===parseInt(mvs+1):isNaN(parseInt(mvs+1)))||(parseInt=(origParseInt=parseInt,function parseInt(str,radix){this instanceof parseInt&&new origParseInt;var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}));var origParseInt;if(function(){if("function"!=typeof Symbol)return!1;try{return parseInt(Object(Symbol.iterator)),!0}catch(e){}try{return parseInt(Symbol.iterator),!0}catch(e){}return!1}()){var symbolValueOf=Symbol.prototype.valueOf;parseInt=function(origParseInt){return function parseInt(str,radix){this instanceof parseInt&&new origParseInt;var isSym="symbol"==typeof str;if(!isSym&&str&&"object"==typeof str)try{symbolValueOf.call(str),isSym=!0}catch(e){}var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}}(parseInt)}1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function parseFloat(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result}));var origParseFloat;if("RangeError: test"!==String(new RangeError("test"))){var errorToStringShim=function toString(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;return void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg)),name?msg?name+": "+msg:name:msg};Error.prototype.toString=errorToStringShim}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var regexToString=function toString(){var str="/"+this.source+"/";return this.global&&(str+="g"),this.ignoreCase&&(str+="i"),this.multiline&&(str+="m"),str};RegExp.prototype.toString=regexToString}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"../../node_modules/es6-shim/es6-shim.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,process=__webpack_require__("../../node_modules/process/browser.js");__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";var ArrayIterator,_apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,not=function notThunker(func){return function notThunk(){return!_apply(func,this,arguments)}},throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function valueOrFalseIfThrows(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=not(throwsError),arePropertyDescriptorsSupported=function(){return!throwsError((function(){return Object.defineProperty({},"x",{get:function(){}})}))},supportsDescriptors=!!Object.defineProperty&&arePropertyDescriptorsSupported(),functionsHaveNames="foo"===function foo(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),(function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)}))},_toString=Function.call.bind(Object.prototype.toString),isCallable=function IsCallableFast(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function getKey(){return originalObject[key]},set:function setKey(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function Prototype(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach((function(key){Value.defineByDescriptor(object,key,properties[key])})),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows((function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)}))},globals=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==__webpack_require__.g)return __webpack_require__.g;throw new Error("unable to locate global object")}(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_join=Function.call.bind(Array.prototype.join),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function isNaN(value){return value!=value},numberIsFinite=Number.isFinite||function isFinite(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function sign(value){var number=Number(value);return 0===number||numberIsNaN(number)?number:number<0?-1:1},_log1p=function log1p(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},isStandardArguments=function isArguments(value){return"[object Arguments]"===_toString(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments,Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function overrideNative(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var o,Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function isNullOrUndefined(x){return null==x}:function isNullOrUndefinedAndNotDocumentAll(x){return null==x&&x!==domAll},ES={Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if(hasSymbols&&"[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it);return!ES.IteratorComplete(result)&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+ES.ToString(value).replace(/"/g,"&quot;")+'"'),p1+">"+S+"</"+tag+">"},IsRegExp:function IsRegExp(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function ToString(string){if(hasSymbols&&"[object Symbol]"===_toString(string))throw new TypeError("Cannot convert a Symbol value to a number");return $String(string)}};if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function defineWellKnownSymbol(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,(function search(string){return ES.Call(originalSearch,string,[this])}));var searchShim=function search(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"search",searchShim)}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,(function replace(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}));var replaceShim=function replace(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])};overrideNative(String.prototype,"replace",replaceShim)}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,(function split(string,limit){return ES.Call(originalSplit,string,[this,limit])}));var splitShim=function split(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])};overrideNative(String.prototype,"split",splitShim)}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,(function match(string){return ES.Call(originalMatch,string,[this])}));var matchShim=function match(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"match",matchShim)}}var wrapConstructor=function wrapConstructor(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),(function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)})):_forEach(Object.keys(original),(function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])})),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function iterator(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataProperty=function createDataProperty(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value}):object[name]=value},createDataPropertyOrThrow=function createDataPropertyOrThrow(object,name,value){if(createDataProperty(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",(function fromCodePoint(codePoints){return ES.Call(originalFromCodePoint,this,arguments)}))}var StringShims={fromCodePoint:function fromCodePoint(codePoints){for(var next,result=[],i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return _join(result,"")},raw:function raw(template){var cooked=ES.ToObject(template,"bad template"),raw=ES.ToObject(cooked.raw,"bad raw value"),len=raw.length,literalSegments=ES.ToLength(len);if(literalSegments<=0)return"";for(var nextKey,next,nextSeg,nextSub,stringElements=[],nextIndex=0;nextIndex<literalSegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(raw[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalSegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return _join(stringElements,"")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringRepeat=function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half},stringMaxLength=1/0,StringPrototypeShims={repeat:function repeat(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return stringRepeat(thisStr,numTimes)},startsWith:function startsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var position,searchStr=ES.ToString(searchString);arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function endsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var endPosition,searchStr=ES.ToString(searchString),len=S.length;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function includes(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var position,searchStr=ES.ToString(searchString);return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function codePointAt(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position);if(first<55296||first>56319||position+1===length)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError((function(){return"/a/".startsWith(/a/)})),startsWithHandlesInfinity=valueOrFalseIfThrows((function(){return!1==="abc".startsWith("a",1/0)}));startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}hasSymbols&&(valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)}))||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)}))||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith),valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)}))||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)),defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function trim(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","",""].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var second,len,first=s.charCodeAt(i);return len=first<55296||first>56319||i+1===s.length||(second=s.charCodeAt(i+1))<56320||second>57343?1:2,this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,(function(){return new StringIterator(this)}));var ArrayShims={from:function from(items){var mapFn,mapping,T,length,result,i,C=this;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}if(void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$))){result=ES.IsConstructor(C)?Object(new C):[];var next,nextValue,iterator=ES.GetIterator(items);for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var value,arrayLike=ES.ToObject(items);for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function of(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array&&i<ES.ToLength(array.length)){var retval,kind=this.kind;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype),Array.of===ArrayShims.of||function(){var Foo=function Foo(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}()||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function copyWithin(target,start){var end,o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len);arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function fill(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start);for(var relativeEnd=(end=ES.ToInteger(void 0===end?len:end))<0?len+end:end,i=start<0?_max(len+start,0):_min(start,len);i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function find(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var value,thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function findIndex(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function keys(){return new ArrayIterator(this,"key")},values:function values(){return new ArrayIterator(this,"value")},entries:function entries(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",(function values(){return ES.Call(originalArrayPrototypeValues,this,arguments)})),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",(function indexOf(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value}),!0),addIterator(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arr,arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows((function(){return 0===Array.from({length:-1}).length})),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1];if(arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from),!valueOrFalseIfThrows((function(){return Array.from([0],void 0)}))){var origArrayFrom=Array.from;overrideNative(Array,"from",(function from(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)}))}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows((function(){return _call(method,obj,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",(function forEach(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)}))}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",(function map(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)}))}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",(function filter(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)}))}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",(function some(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)}))}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",(function every(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)}))}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",(function reduce(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)}))}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",(function reduceRight(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)}))}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,(function(c){return 0===Number(c+0+c)}));if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),toPrimitive=function(O,hint){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")},hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function Number(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:toPrimitive(value,"number"):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows((function(){return OrigNumber.prototype.valueOf.call(receiver),!0}));return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2220446049250313e-31,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function isInteger(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function isSafeInteger(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find((function(){return!0}))&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex((function(){return!0}))&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var FAKENULL,gpo,spo,isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function ensureEnumerable(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function sliceArgs(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function assignTo(source){return function assignToSource(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var symbols,sourceKeys=keys(Object(source));return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function is(a,b){return ES.SameValue(a,b)}};if(Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}()&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,checkArgs=function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)},setPrototypeOf=function(O,proto){return checkArgs(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,magic).set,_call(set,{},null)}catch(e){if(Object.prototype!=={}[magic])return;set=function(proto){this[magic]=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object,"__proto__")};defineProperties(Object,ES5ObjectShims)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){return spo(o,null===p?FAKENULL:p)},Object.setPrototypeOf.polyfill=!1),throwsError((function(){return Object.keys("foo")}))){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){return originalObjectKeys(ES.ToObject(value))})),keys=Object.keys}if(throwsError((function(){return Object.keys(/a/g)}))){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)})),keys=Object.keys}if(Object.getOwnPropertyNames&&throwsError((function(){return Object.getOwnPropertyNames("foo")}))){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",(function getOwnPropertyNames(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)}))}if(Object.getOwnPropertyDescriptor&&throwsError((function(){return Object.getOwnPropertyDescriptor("foo","bar")}))){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",(function getOwnPropertyDescriptor(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)}))}if(Object.seal&&throwsError((function(){return Object.seal("foo")}))){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",(function seal(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value}))}if(Object.isSealed&&throwsError((function(){return Object.isSealed("foo")}))){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",(function isSealed(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)}))}if(Object.freeze&&throwsError((function(){return Object.freeze("foo")}))){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",(function freeze(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value}))}if(Object.isFrozen&&throwsError((function(){return Object.isFrozen("foo")}))){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",(function isFrozen(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)}))}if(Object.preventExtensions&&throwsError((function(){return Object.preventExtensions("foo")}))){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",(function preventExtensions(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value}))}if(Object.isExtensible&&throwsError((function(){return Object.isExtensible("foo")}))){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",(function isExtensible(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)}))}if(Object.getPrototypeOf&&throwsError((function(){return Object.getPrototypeOf("foo")}))){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",(function getPrototypeOf(value){return originalGetProto(ES.ToObject(value))}))}var desc,hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get));if(supportsDescriptors&&!hasFlags){var regExpFlagsGetter=function flags(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result};Value.getter(RegExp.prototype,"flags",regExpFlagsGetter)}var regex,regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regexToStringIsGeneric=valueOrFalseIfThrows((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",(function toString(){var R=ES.RequireObjectCoercible(this);return Type.regex(R)?_call(origRegExpToString,R):"/"+$String(R.source)+"/"+$String(R.flags)}),!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},legacySourceGetter=function(){return this.source},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:legacySourceGetter,OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern);return this instanceof RegExp||!patternIsRegExp||void 0!==flags||pattern.constructor!==RegExp?Type.regex(pattern)?new RegExp(ES.Call(sourceGetter,pattern),void 0===flags?ES.Call(flagsGetter,pattern):flags):(patternIsRegExp&&(pattern.source,void 0===flags&&pattern.flags),new OrigRegExp(pattern,flags)):pattern};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),(function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],(function get(){return RegExp[prop]}))}))}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,roundTiesToEven=function roundTiesToEven(n){return n+inverseEpsilon-inverseEpsilon},BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function acosh(value){var x=Number(value);if(numberIsNaN(x)||value<1)return NaN;if(1===x)return 0;if(x===1/0)return x;var xInvSquared=1/(x*x);if(x<2)return _log1p(x-1+_sqrt(1-xInvSquared)*x);var halfX=x/2;return _log1p(halfX+_sqrt(1-xInvSquared)*halfX-1)+1/LOG2E},asinh:function asinh(value){var x=Number(value);if(0===x||!globalIsFinite(x))return x;var a=_abs(x),aSquared=a*a,s=_sign(x);return a<1?s*_log1p(a+aSquared/(_sqrt(aSquared+1)+1)):s*(_log1p(a/2+_sqrt(1+1/aSquared)*a/2-1)+1/LOG2E)},atanh:function atanh(value){var x=Number(value);if(0===x)return x;if(-1===x)return-1/0;if(1===x)return 1/0;if(numberIsNaN(x)||x<-1||x>1)return NaN;var a=_abs(x);return _sign(x)*_log1p(2*a/(1-a))/2},cbrt:function cbrt(value){var x=Number(value);if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),result=x===1/0?1/0:(x/((result=_exp(_log(x)/3))*result)+2*result)/3,negate?-result:result},clz32:function clz32(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function cosh(value){var x=Number(value);if(0===x)return 1;if(numberIsNaN(x))return NaN;if(!globalIsFinite(x))return 1/0;var t=_exp(_abs(x)-1);return(t+1/(t*E*E))*(E/2)},expm1:function expm1(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function hypot(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function log2(value){return _log(value)*LOG2E},log10:function log10(value){return _log(value)*LOG10E},log1p:_log1p,sign:_sign,sinh:function sinh(value){var x=Number(value);if(!globalIsFinite(x)||0===x)return x;var a=_abs(x);if(a<1){var u=Math.expm1(a);return _sign(x)*u*(1+1/(u+1))/2}var t=_exp(a-1);return _sign(x)*(t-1/(t*E*E))*(E/2)},tanh:function tanh(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function trunc(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function imul(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),al=65535&a,bl=65535&b;return al*bl+((a>>>16&65535)*bl+al*(b>>>16&65535)<<16>>>0)|0},fround:function fround(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*roundTiesToEven(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}},withinULPDistance=function withinULPDistance(result,expected,distance){return _abs(1-result/expected)/Number.EPSILON<(distance||8)};defineProperties(Math,MathShims),defineProperty(Math,"sinh",MathShims.sinh,Math.sinh(710)===1/0),defineProperty(Math,"cosh",MathShims.cosh,Math.cosh(710)===1/0),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(1e300)===1/0),defineProperty(Math,"atanh",MathShims.atanh,0===Math.atanh(1e-300)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"acosh",MathShims.acosh,!withinULPDistance(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),defineProperty(Math,"cbrt",MathShims.cbrt,!withinULPDistance(Math.cbrt(1e-300),1e-100)),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718),defineProperty(Math,"hypot",MathShims.hypot,Math.hypot(1/0,NaN)!==1/0);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),roundDoesNotIncreaseIntegers=[inverseEpsilon+1,2*inverseEpsilon-1].every((function(num){return Math.round(num)===num}));defineProperty(Math,"round",(function round(x){var floor=_floor(x);return x-floor<.5?floor:-1===floor?-0:floor+1}),!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",(function imul(x,y){return ES.Call(origImul,Math,arguments)}));var count,thenable,PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var makeZeroTimeout,PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this,resolver=function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject};if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C(resolver),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[],messageName="zero-timeout-message",setZeroTimeout=function(fn){_push(timeouts,fn),window.postMessage(messageName,"*")},handleMessage=function(event){if(event.source===window&&event.data===messageName){if(event.stopPropagation(),0===timeouts.length)return;_shift(timeouts)()}};return window.addEventListener("message",handleMessage,!0),setZeroTimeout});var Promise$prototype,Promise$prototype$then,makePromiseAsap=function(){var P=globals.Promise,pr=P&&P.resolve&&P.resolve();return pr&&function(task){return pr.then(task)}},enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:makePromiseAsap()||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)}),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_PENDING=0,PROMISE_FULFILLED=1,PROMISE_REJECTED=2,PROMISE_FULFILL_OFFSET=0,PROMISE_REJECT_OFFSET=1,PROMISE_CAPABILITY_OFFSET=2,PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue((function(){promiseReactionJob(handler,capability,argument)}))},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+PROMISE_FULFILL_OFFSET],_promise[idx+PROMISE_CAPABILITY_OFFSET],value),promise[idx+PROMISE_FULFILL_OFFSET]=void 0,promise[idx+PROMISE_REJECT_OFFSET]=void 0,promise[idx+PROMISE_CAPABILITY_OFFSET]=void 0;_promise.result=value,_promise.state=PROMISE_FULFILLED,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+PROMISE_REJECT_OFFSET],_promise[idx+PROMISE_CAPABILITY_OFFSET],reason),promise[idx+PROMISE_FULFILL_OFFSET]=void 0,promise[idx+PROMISE_REJECT_OFFSET]=void 0,promise[idx+PROMISE_CAPABILITY_OFFSET]=void 0;_promise.result=reason,_promise.state=PROMISE_REJECTED,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue((function(){promiseResolveThenableJob(promise,resolution,then)}))}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise=function(){var PromiseShim=function Promise(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:PROMISE_PENDING,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};return PromiseShim}();Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){alreadyCalled||(alreadyCalled=!0,values[index]=x,0==--remaining.count&&(0,capability.resolve)(values))}},performPromiseAll=function(iteratorRecord,C,resultCapability){for(var next,nextValue,it=iteratorRecord.iterator,values=[],remaining={count:1},index=0;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}return 0==--remaining.count&&(0,resultCapability.resolve)(values),resultCapability.promise},performPromiseRace=function(iteratorRecord,C,resultCapability){for(var next,nextValue,nextPromise,it=iteratorRecord.iterator;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise};return defineProperties(Promise,{all:function all(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return iterator=ES.GetIterator(iterable),performPromiseAll(iteratorRecord={iterator,done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},race:function race(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return iterator=ES.GetIterator(iterable),performPromiseRace(iteratorRecord={iterator,done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},reject:function reject(reason){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(C);return(0,capability.reject)(reason),capability.promise},resolve:function resolve(v){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)&&v.constructor===C)return v;var capability=new PromiseCapability(C);return(0,capability.resolve)(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function then(onFulfilled,onRejected){var promise=this;if(!ES.IsPromise(promise))throw new TypeError("not a promise");var resultCapability,C=ES.SpeciesConstructor(promise,Promise);resultCapability=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var value,fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=promise._promise;if(_promise.state===PROMISE_PENDING){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+PROMISE_FULFILL_OFFSET]=fulfillReactionHandler,_promise[idx+PROMISE_REJECT_OFFSET]=rejectReactionHandler,_promise[idx+PROMISE_CAPABILITY_OFFSET]=resultCapability}_promise.reactionLength+=1}else if(_promise.state===PROMISE_FULFILLED)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(_promise.state!==PROMISE_REJECTED)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}();if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,(function(S){return S.resolve(42).then((function(){}))instanceof S})),promiseIgnoresNonFunctionThenCallbacks=!throwsError((function(){return globals.Promise.reject(42).then(null,5).then(null,noop)})),promiseRequiresObjectContext=throwsError((function(){return globals.Promise.call(3,noop)})),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,(function(){})),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows((function(){return!!BadResolverPromise.all([1,2])}));if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",(function all(iterable){return ES.Call(origAll,this,arguments)}))}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",(function race(iterable){return ES.Call(origRace,this,arguments)}))}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",(function resolve(x){return ES.Call(origResolve,this,arguments)}))}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",(function reject(r){return ES.Call(origReject,this,arguments)}))}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var s,m,testOrder=function(a){var b=keys(_reduce(a,(function(o,k){return o[k]=!0,o}),{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]);if(supportsDescriptors){var fastkey=function fastkey(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function emptyObject(){return Object.create?Object.create(null):{}},addIterableToMap=function addIterableToMap(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])}));else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,(function(value,key){map.set(key,value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function addIterableToSet(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(value){set.add(value)}));else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,(function(value){set.add(value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function MapEntry(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function isRemoved(){return this.key===empty};var Map$prototype,isMap=function isMap(map){return!!map._es6map},requireMapSlot=function requireMapSlot(map,method){if(!ES.TypeIsObject(map)||!isMap(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function MapIterator(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind};MapIterator.prototype={isMapIterator:!0,next:function next(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var result,i=this.i,kind=this.kind,head=this.head;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}},addIterator(MapIterator.prototype);var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Map$prototype=MapShim.prototype,Value.getter(Map$prototype,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),defineProperties(Map$prototype,{get:function get(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function has(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function set(key,value){requireMapSlot(this,"set");var entry,head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function clear(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function keys(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function values(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function entries(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function forEach(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var Set$prototype,isSet=function isSet(set){return set._es6set&&void 0!==set._storage},requireSetSlot=function requireSetSlot(set,method){if(!ES.TypeIsObject(set)||!isSet(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var decodeKey=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}},ensureMap=function ensureMap(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),(function(key){var k=decodeKey(key);m.set(k,k)})),set["[[SetData]]"]=m}set._storage=null};Value.getter(SetShim.prototype,"size",(function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)})),defineProperties(SetShim.prototype,{has:function has(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function add(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function clear(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function values(){return requireSetSlot(this,"values"),ensureMap(this),new SetIterator(this["[[SetData]]"].values())},entries:function entries(){return requireSetSlot(this,"entries"),ensureMap(this),new SetIterator(this["[[SetData]]"].entries())},forEach:function forEach(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach((function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)}))}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values);var SetIterator=function SetIterator(it){this.it=it};return SetIterator.prototype={isSetIterator:!0,next:function next(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},addIterator(SetIterator.prototype),SetShim}()};if(globals.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(globals.Set=collectionShims.Set),globals.Map||globals.Set){valueOrFalseIfThrows((function(){return 2===new Map([[1,2]]).get(1)}))||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",(function set(k,v){return _call(origMapSet,this,0===k?0:k,v),this})),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function get(k){return _call(origMapGet,this,0===k?0:k)},has:function has(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function add(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function has(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function SetDelete(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,(function(M){var m=new M([]);return m.set(42,42),m instanceof M})),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,(function(S){var s=new S([]);return s.add(42,42),s instanceof S})),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows((function(){return newMap.keys().next().done}));if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",(function has(key){return _call(anonymousSetHas,this,key)}))}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function throwUnlessTargetIsObject(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function apply(){return ES.Call(ES.Call,null,arguments)},construct:function construct(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function deleteProperty(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function has(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function ownKeys(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function ConvertExceptionToBoolean(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function isExtensible(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function preventExtensions(target){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.preventExtensions(target)}))}}),supportsDescriptors){var internalGet=function get(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function set(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in desc?!!desc.writable&&!!ES.TypeIsObject(receiver)&&(Object.getOwnPropertyDescriptor(receiver,key)?Reflect.defineProperty(receiver,key,{value}):Reflect.defineProperty(receiver,key,{value,writable:!0,enumerable:!0,configurable:!0})):!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function defineProperty(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException((function(){return Object.defineProperty(target,propertyKey,attributes)}))},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function get(target,key){return throwUnlessTargetIsObject(target),internalGet(target,key,arguments.length>2?arguments[2]:target)},set:function set(target,key,value){return throwUnlessTargetIsObject(target),internalSet(target,key,value,arguments.length>3?arguments[3]:target)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function getPrototypeOf(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}if(Object.setPrototypeOf&&ReflectShims.getPrototypeOf){var willCreateCircularPrototype=function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1};Object.assign(ReflectShims,{setPrototypeOf:function setPrototypeOf(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&!willCreateCircularPrototype(object,proto)&&(Object.setPrototypeOf(object,proto),!0)}})}var defineOrOverrideReflectProperty=function(key,shim){ES.IsCallable(globals.Reflect[key])?valueOrFalseIfThrows((function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0}))&&overrideNative(globals.Reflect,key,shim):defineProperty(globals.Reflect,key,shim)};Object.keys(ReflectShims).forEach((function(key){defineOrOverrideReflectProperty(key,ReflectShims[key])}));var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",(function getPrototypeOf(target){return _call(originalReflectGetProto,globals.Reflect,target)})),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows((function(){return globals.Reflect.setPrototypeOf(1,{}),!0}))&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows((function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible}))||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows((function(){var F=function F(){};return globals.Reflect.construct((function(){}),[],F)instanceof F}))||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString,shimmedDateToString=function toString(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)};overrideNative(Date.prototype,"toString",shimmedDateToString)}var stringHTMLshims={anchor:function anchor(name){return ES.CreateHTML(this,"a","name",name)},big:function big(){return ES.CreateHTML(this,"big","","")},blink:function blink(){return ES.CreateHTML(this,"blink","","")},bold:function bold(){return ES.CreateHTML(this,"b","","")},fixed:function fixed(){return ES.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function fontsize(size){return ES.CreateHTML(this,"font","size",size)},italics:function italics(){return ES.CreateHTML(this,"i","","")},link:function link(url){return ES.CreateHTML(this,"a","href",url)},small:function small(){return ES.CreateHTML(this,"small","","")},strike:function strike(){return ES.CreateHTML(this,"strike","","")},sub:function sub(){return ES.CreateHTML(this,"sub","","")},sup:function sub(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),(function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])}));var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows((function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])}));if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",(function stringify(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null,wrappedReplacer=function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue};args.push(wrappedReplacer)}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}}))}return globals},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},"../../node_modules/fast-deep-equal/index.js":module=>{"use strict";module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}},"../../node_modules/fast-json-stable-stringify/index.js":module=>{"use strict";module.exports=function(data,opts){opts||(opts={}),"function"==typeof opts&&(opts={cmp:opts});var f,cycles="boolean"==typeof opts.cycles&&opts.cycles,cmp=opts.cmp&&(f=opts.cmp,function(node){return function(a,b){var aobj={key:a,value:node[a]},bobj={key:b,value:node[b]};return f(aobj,bobj)}}),seen=[];return function stringify(node){if(node&&node.toJSON&&"function"==typeof node.toJSON&&(node=node.toJSON()),void 0!==node){if("number"==typeof node)return isFinite(node)?""+node:"null";if("object"!=typeof node)return JSON.stringify(node);var i,out;if(Array.isArray(node)){for(out="[",i=0;i<node.length;i++)i&&(out+=","),out+=stringify(node[i])||"null";return out+"]"}if(null===node)return"null";if(-1!==seen.indexOf(node)){if(cycles)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var seenIndex=seen.push(node)-1,keys=Object.keys(node).sort(cmp&&cmp(node));for(out="",i=0;i<keys.length;i++){var key=keys[i],value=stringify(node[key]);value&&(out&&(out+=","),out+=JSON.stringify(key)+":"+value)}return seen.splice(seenIndex,1),"{"+out+"}"}}(data)}},"../../node_modules/function-bind/implementation.js":module=>{"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},"../../node_modules/function-bind/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/function-bind/implementation.js");module.exports=Function.prototype.bind||implementation},"../../node_modules/function.prototype.name/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),functionsHaveNames=__webpack_require__("../../node_modules/functions-have-names/index.js")(),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),$functionToString=callBound("Function.prototype.toString"),$stringMatch=callBound("String.prototype.match"),classRegex=/^class /,regex=/\s*function\s+([^(\s]*)\s*/,functionProto=Function.prototype;module.exports=function getName(){if(!function isClassConstructor(fn){if(IsCallable(fn))return!1;if("function"!=typeof fn)return!1;try{return!!$stringMatch($functionToString(fn),classRegex)}catch(e){}return!1}(this)&&!IsCallable(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(functionsHaveNames)return this.name;if(this===functionProto)return"";var str=$functionToString(this),match=$stringMatch(str,regex);return match&&match[1]}},"../../node_modules/function.prototype.name/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/function.prototype.name/implementation.js");module.exports=function getPolyfill(){return implementation}},"../../node_modules/function.prototype.name/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var supportsDescriptors=__webpack_require__("../../node_modules/define-properties/index.js").supportsDescriptors,functionsHaveNames=__webpack_require__("../../node_modules/functions-have-names/index.js")(),getPolyfill=__webpack_require__("../../node_modules/function.prototype.name/polyfill.js"),defineProperty=Object.defineProperty,TypeErr=TypeError;module.exports=function shimName(){var polyfill=getPolyfill();if(functionsHaveNames)return polyfill;if(!supportsDescriptors)throw new TypeErr("Shimming Function.prototype.name support requires ES5 property descriptor support.");var functionProto=Function.prototype;return defineProperty(functionProto,"name",{configurable:!0,enumerable:!1,get:function(){var name=polyfill.call(this);return this!==functionProto&&defineProperty(this,"name",{configurable:!0,enumerable:!1,value:name,writable:!1}),name}}),polyfill}},"../../node_modules/functions-have-names/index.js":module=>{"use strict";var functionsHaveNames=function functionsHaveNames(){return"string"==typeof function f(){}.name},gOPD=Object.getOwnPropertyDescriptor;if(gOPD)try{gOPD([],"length")}catch(e){gOPD=null}functionsHaveNames.functionsHaveConfigurableNames=function functionsHaveConfigurableNames(){if(!functionsHaveNames()||!gOPD)return!1;var desc=gOPD((function(){}),"name");return!!desc&&!!desc.configurable};var $bind=Function.prototype.bind;functionsHaveNames.boundFunctionsHaveNames=function boundFunctionsHaveNames(){return functionsHaveNames()&&"function"==typeof $bind&&""!==function f(){}.bind().name},module.exports=functionsHaveNames},"../../node_modules/get-intrinsic/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},needsEval={},TypedArray="undefined"==typeof Uint8Array?undefined:getProto(Uint8Array),INTRINSICS={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},doEval=function doEval(name){var value;if("%AsyncFunction%"===name)value=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===name)value=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===name)value=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===name){var fn=doEval("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if("%AsyncIteratorPrototype%"===name){var gen=doEval("%AsyncGenerator%");gen&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=__webpack_require__("../../node_modules/function-bind/index.js"),hasOwn=__webpack_require__("../../node_modules/has/src/index.js"),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function stringToPath(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if("%"===first&&"%"!==last)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===last&&"%"!==first)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result},getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var alias,intrinsicName=name;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(intrinsicName="%"+(alias=LEGACY_ALIASES[intrinsicName])[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=doEval(intrinsicName)),void 0===value&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias,name:intrinsicName,value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function GetIntrinsic(name,allowMissing){if("string"!=typeof name||0===name.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new $TypeError('"allowMissing" argument must be a boolean');if(null===$exec(/^%?[^%]*%?$/g,name))throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var parts=stringToPath(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if(('"'===first||"'"===first||"`"===first||'"'===last||"'"===last||"`"===last)&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==part&&isOwn||(skipFurtherCaching=!0),hasOwn(INTRINSICS,intrinsicRealName="%"+(intrinsicBaseName+="."+part)+"%"))value=INTRINSICS[intrinsicRealName];else if(null!=value){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);value=(isOwn=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}},"../../node_modules/get-symbol-description/getInferredName.js":module=>{"use strict";var getInferredName;try{getInferredName=Function("s","return { [s]() {} }[s].name;")}catch(e){}module.exports=getInferredName&&"inferred"===function(){}.name?getInferredName:null},"../../node_modules/get-symbol-description/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),$SyntaxError=GetIntrinsic("%SyntaxError%"),getGlobalSymbolDescription=GetIntrinsic("%Symbol.keyFor%",!0),thisSymbolValue=callBound("%Symbol.prototype.valueOf%",!0),symToStr=callBound("Symbol.prototype.toString",!0),getInferredName=__webpack_require__("../../node_modules/get-symbol-description/getInferredName.js");module.exports=callBound("%Symbol.prototype.description%",!0)||function getSymbolDescription(symbol){if(!thisSymbolValue)throw new $SyntaxError("Symbols are not supported in this environment");var desc,sym=thisSymbolValue(symbol);if(getInferredName){var name=getInferredName(sym);if(""===name)return;return name.slice(1,-1)}return getGlobalSymbolDescription&&"string"==typeof(desc=getGlobalSymbolDescription(sym))?desc:(desc=symToStr(sym).slice(7,-1))||void 0}},"../../node_modules/global/window.js":(module,__unused_webpack_exports,__webpack_require__)=>{var win;win="undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},module.exports=win},"../../node_modules/globalthis/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/globalthis/shim.js")()},"../../node_modules/globalthis/implementation.browser.js":module=>{"use strict";"undefined"!=typeof self?module.exports=self:"undefined"!=typeof window?module.exports=window:module.exports=Function("return this")()},"../../node_modules/globalthis/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/globalthis/implementation.browser.js");module.exports=function getPolyfill(){return"object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Math===Math&&__webpack_require__.g.Array===Array?__webpack_require__.g:implementation}},"../../node_modules/globalthis/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),getPolyfill=__webpack_require__("../../node_modules/globalthis/polyfill.js");module.exports=function shimGlobal(){var polyfill=getPolyfill();if(define.supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(polyfill,"globalThis");descriptor&&(!descriptor.configurable||!descriptor.enumerable&&descriptor.writable&&globalThis===polyfill)||Object.defineProperty(polyfill,"globalThis",{configurable:!0,enumerable:!1,value:polyfill,writable:!0})}else"object"==typeof globalThis&&globalThis===polyfill||(polyfill.globalThis=polyfill);return polyfill}},"../../node_modules/has-property-descriptors/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $defineProperty=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%Object.defineProperty%",!0),hasPropertyDescriptors=function hasPropertyDescriptors(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch(e){return!1}return!1};hasPropertyDescriptors.hasArrayLengthDefineBug=function hasArrayLengthDefineBug(){if(!hasPropertyDescriptors())return null;try{return 1!==$defineProperty([],"length",{value:1}).length}catch(e){return!0}},module.exports=hasPropertyDescriptors},"../../node_modules/has-symbols/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol,hasSymbolSham=__webpack_require__("../../node_modules/has-symbols/shams.js");module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}},"../../node_modules/has-symbols/shams.js":module=>{"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},"../../node_modules/has-tostringtag/shams.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__("../../node_modules/has-symbols/shams.js");module.exports=function hasToStringTagShams(){return hasSymbols()&&!!Symbol.toStringTag}},"../../node_modules/has/src/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__("../../node_modules/function-bind/index.js");module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},"../../node_modules/internal-slot/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),has=__webpack_require__("../../node_modules/has/src/index.js"),channel=__webpack_require__("../../node_modules/side-channel/index.js")(),$TypeError=GetIntrinsic("%TypeError%"),SLOT={assert:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");channel.assert(O)},get:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);return slots&&slots["$"+slot]},has:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);return!!slots&&has(slots,"$"+slot)},set:function(O,slot,V){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);slots||(slots={},channel.set(O,slots)),slots["$"+slot]=V}};Object.freeze&&Object.freeze(SLOT),module.exports=SLOT},"../../node_modules/is-arguments/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasToStringTag=__webpack_require__("../../node_modules/has-tostringtag/shams.js")(),$toString=__webpack_require__("../../node_modules/call-bind/callBound.js")("Object.prototype.toString"),isStandardArguments=function isArguments(value){return!(hasToStringTag&&value&&"object"==typeof value&&Symbol.toStringTag in value)&&"[object Arguments]"===$toString(value)},isLegacyArguments=function isArguments(value){return!!isStandardArguments(value)||null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==$toString(value)&&"[object Function]"===$toString(value.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},"../../node_modules/is-callable/index.js":module=>{"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply((function(){throw 42}),null,badArrayLike)}catch(_){_!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&!!Symbol.toStringTag,documentDotAll="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};module.exports=reflectApply?function isCallable(value){if(value===documentDotAll)return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(value)}:function isCallable(value){if(value===documentDotAll)return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function tryFunctionToStr(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},"../../node_modules/is-date-object/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag=__webpack_require__("../../node_modules/has-tostringtag/shams.js")();module.exports=function isDateObject(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function tryDateGetDayCall(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},"../../node_modules/is-function/index.js":module=>{module.exports=function isFunction(fn){if(!fn)return!1;var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)};var toString=Object.prototype.toString},"../../node_modules/is-map/index.js":module=>{"use strict";var exported,$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null;$Map||(exported=function isMap(x){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$mapHas||(exported=function isMap(x){return!1}),module.exports=exported||function isMap(x){if(!x||"object"!=typeof x)return!1;try{if($mapHas.call(x),$setHas)try{$setHas.call(x)}catch(e){return!0}return x instanceof $Map}catch(e){}return!1}},"../../node_modules/is-regex/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has,$exec,isRegexMarker,badStringifier,callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),hasToStringTag=__webpack_require__("../../node_modules/has-tostringtag/shams.js")();if(hasToStringTag){has=callBound("Object.prototype.hasOwnProperty"),$exec=callBound("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString=callBound("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor;module.exports=hasToStringTag?function isRegex(value){if(!value||"object"!=typeof value)return!1;var descriptor=gOPD(value,"lastIndex");if(!(descriptor&&has(descriptor,"value")))return!1;try{$exec(value,badStringifier)}catch(e){return e===isRegexMarker}}:function isRegex(value){return!(!value||"object"!=typeof value&&"function"!=typeof value)&&"[object RegExp]"===$toString(value)}},"../../node_modules/is-set/index.js":module=>{"use strict";var exported,$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null;$Set||(exported=function isSet(x){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$setHas||(exported=function isSet(x){return!1}),module.exports=exported||function isSet(x){if(!x||"object"!=typeof x)return!1;try{if($setHas.call(x),$mapHas)try{$mapHas.call(x)}catch(e){return!0}return x instanceof $Set}catch(e){}return!1}},"../../node_modules/is-string/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var strValue=String.prototype.valueOf,toStr=Object.prototype.toString,hasToStringTag=__webpack_require__("../../node_modules/has-tostringtag/shams.js")();module.exports=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}}(value):"[object String]"===toStr.call(value))}},"../../node_modules/is-symbol/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toStr=Object.prototype.toString;if(__webpack_require__("../../node_modules/has-symbols/index.js")()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function isSymbol(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function isRealSymbolObject(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function isSymbol(value){return!1}},"../../node_modules/iterate-iterator/index.js":module=>{"use strict";var $TypeError=TypeError;module.exports=function iterateIterator(iterator){if(!iterator||"function"!=typeof iterator.next)throw new $TypeError("iterator must be an object with a `next` method");if(arguments.length>1){var callback=arguments[1];if("function"!=typeof callback)throw new $TypeError("`callback`, if provided, must be a function")}for(var result,values=callback||[];(result=iterator.next())&&!result.done;)callback?callback(result.value):values.push(result.value);if(!callback)return values}},"../../node_modules/lodash/_DataView.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DataView=__webpack_require__("../../node_modules/lodash/_getNative.js")(__webpack_require__("../../node_modules/lodash/_root.js"),"DataView");module.exports=DataView},"../../node_modules/lodash/_Hash.js":(module,__unused_webpack_exports,__webpack_require__)=>{var hashClear=__webpack_require__("../../node_modules/lodash/_hashClear.js"),hashDelete=__webpack_require__("../../node_modules/lodash/_hashDelete.js"),hashGet=__webpack_require__("../../node_modules/lodash/_hashGet.js"),hashHas=__webpack_require__("../../node_modules/lodash/_hashHas.js"),hashSet=__webpack_require__("../../node_modules/lodash/_hashSet.js");function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},"../../node_modules/lodash/_ListCache.js":(module,__unused_webpack_exports,__webpack_require__)=>{var listCacheClear=__webpack_require__("../../node_modules/lodash/_listCacheClear.js"),listCacheDelete=__webpack_require__("../../node_modules/lodash/_listCacheDelete.js"),listCacheGet=__webpack_require__("../../node_modules/lodash/_listCacheGet.js"),listCacheHas=__webpack_require__("../../node_modules/lodash/_listCacheHas.js"),listCacheSet=__webpack_require__("../../node_modules/lodash/_listCacheSet.js");function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},"../../node_modules/lodash/_Map.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Map=__webpack_require__("../../node_modules/lodash/_getNative.js")(__webpack_require__("../../node_modules/lodash/_root.js"),"Map");module.exports=Map},"../../node_modules/lodash/_MapCache.js":(module,__unused_webpack_exports,__webpack_require__)=>{var mapCacheClear=__webpack_require__("../../node_modules/lodash/_mapCacheClear.js"),mapCacheDelete=__webpack_require__("../../node_modules/lodash/_mapCacheDelete.js"),mapCacheGet=__webpack_require__("../../node_modules/lodash/_mapCacheGet.js"),mapCacheHas=__webpack_require__("../../node_modules/lodash/_mapCacheHas.js"),mapCacheSet=__webpack_require__("../../node_modules/lodash/_mapCacheSet.js");function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},"../../node_modules/lodash/_Promise.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Promise=__webpack_require__("../../node_modules/lodash/_getNative.js")(__webpack_require__("../../node_modules/lodash/_root.js"),"Promise");module.exports=Promise},"../../node_modules/lodash/_Set.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Set=__webpack_require__("../../node_modules/lodash/_getNative.js")(__webpack_require__("../../node_modules/lodash/_root.js"),"Set");module.exports=Set},"../../node_modules/lodash/_SetCache.js":(module,__unused_webpack_exports,__webpack_require__)=>{var MapCache=__webpack_require__("../../node_modules/lodash/_MapCache.js"),setCacheAdd=__webpack_require__("../../node_modules/lodash/_setCacheAdd.js"),setCacheHas=__webpack_require__("../../node_modules/lodash/_setCacheHas.js");function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},"../../node_modules/lodash/_Stack.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ListCache=__webpack_require__("../../node_modules/lodash/_ListCache.js"),stackClear=__webpack_require__("../../node_modules/lodash/_stackClear.js"),stackDelete=__webpack_require__("../../node_modules/lodash/_stackDelete.js"),stackGet=__webpack_require__("../../node_modules/lodash/_stackGet.js"),stackHas=__webpack_require__("../../node_modules/lodash/_stackHas.js"),stackSet=__webpack_require__("../../node_modules/lodash/_stackSet.js");function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},"../../node_modules/lodash/_Symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_root.js").Symbol;module.exports=Symbol},"../../node_modules/lodash/_Uint8Array.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Uint8Array=__webpack_require__("../../node_modules/lodash/_root.js").Uint8Array;module.exports=Uint8Array},"../../node_modules/lodash/_WeakMap.js":(module,__unused_webpack_exports,__webpack_require__)=>{var WeakMap=__webpack_require__("../../node_modules/lodash/_getNative.js")(__webpack_require__("../../node_modules/lodash/_root.js"),"WeakMap");module.exports=WeakMap},"../../node_modules/lodash/_apply.js":module=>{module.exports=function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},"../../node_modules/lodash/_arrayFilter.js":module=>{module.exports=function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},"../../node_modules/lodash/_arrayLikeKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseTimes=__webpack_require__("../../node_modules/lodash/_baseTimes.js"),isArguments=__webpack_require__("../../node_modules/lodash/isArguments.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isBuffer=__webpack_require__("../../node_modules/lodash/isBuffer.js"),isIndex=__webpack_require__("../../node_modules/lodash/_isIndex.js"),isTypedArray=__webpack_require__("../../node_modules/lodash/isTypedArray.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},"../../node_modules/lodash/_arrayMap.js":module=>{module.exports=function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},"../../node_modules/lodash/_arrayPush.js":module=>{module.exports=function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},"../../node_modules/lodash/_arrayReduce.js":module=>{module.exports=function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},"../../node_modules/lodash/_arraySome.js":module=>{module.exports=function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},"../../node_modules/lodash/_asciiToArray.js":module=>{module.exports=function asciiToArray(string){return string.split("")}},"../../node_modules/lodash/_asciiWords.js":module=>{var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;module.exports=function asciiWords(string){return string.match(reAsciiWord)||[]}},"../../node_modules/lodash/_assignValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseAssignValue=__webpack_require__("../../node_modules/lodash/_baseAssignValue.js"),eq=__webpack_require__("../../node_modules/lodash/eq.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}},"../../node_modules/lodash/_assocIndexOf.js":(module,__unused_webpack_exports,__webpack_require__)=>{var eq=__webpack_require__("../../node_modules/lodash/eq.js");module.exports=function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},"../../node_modules/lodash/_baseAssignValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{var defineProperty=__webpack_require__("../../node_modules/lodash/_defineProperty.js");module.exports=function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value,writable:!0}):object[key]=value}},"../../node_modules/lodash/_baseFlatten.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayPush=__webpack_require__("../../node_modules/lodash/_arrayPush.js"),isFlattenable=__webpack_require__("../../node_modules/lodash/_isFlattenable.js");module.exports=function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}},"../../node_modules/lodash/_baseFor.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFor=__webpack_require__("../../node_modules/lodash/_createBaseFor.js")();module.exports=baseFor},"../../node_modules/lodash/_baseForOwn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFor=__webpack_require__("../../node_modules/lodash/_baseFor.js"),keys=__webpack_require__("../../node_modules/lodash/keys.js");module.exports=function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}},"../../node_modules/lodash/_baseGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},"../../node_modules/lodash/_baseGetAllKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayPush=__webpack_require__("../../node_modules/lodash/_arrayPush.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js");module.exports=function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},"../../node_modules/lodash/_baseGetTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_Symbol.js"),getRawTag=__webpack_require__("../../node_modules/lodash/_getRawTag.js"),objectToString=__webpack_require__("../../node_modules/lodash/_objectToString.js"),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},"../../node_modules/lodash/_baseHasIn.js":module=>{module.exports=function baseHasIn(object,key){return null!=object&&key in Object(object)}},"../../node_modules/lodash/_baseIsArguments.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("../../node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("../../node_modules/lodash/isObjectLike.js");module.exports=function baseIsArguments(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},"../../node_modules/lodash/_baseIsEqual.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsEqualDeep=__webpack_require__("../../node_modules/lodash/_baseIsEqualDeep.js"),isObjectLike=__webpack_require__("../../node_modules/lodash/isObjectLike.js");module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},"../../node_modules/lodash/_baseIsEqualDeep.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Stack=__webpack_require__("../../node_modules/lodash/_Stack.js"),equalArrays=__webpack_require__("../../node_modules/lodash/_equalArrays.js"),equalByTag=__webpack_require__("../../node_modules/lodash/_equalByTag.js"),equalObjects=__webpack_require__("../../node_modules/lodash/_equalObjects.js"),getTag=__webpack_require__("../../node_modules/lodash/_getTag.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isBuffer=__webpack_require__("../../node_modules/lodash/isBuffer.js"),isTypedArray=__webpack_require__("../../node_modules/lodash/isTypedArray.js"),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},"../../node_modules/lodash/_baseIsMatch.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Stack=__webpack_require__("../../node_modules/lodash/_Stack.js"),baseIsEqual=__webpack_require__("../../node_modules/lodash/_baseIsEqual.js");module.exports=function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}},"../../node_modules/lodash/_baseIsNative.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isFunction=__webpack_require__("../../node_modules/lodash/isFunction.js"),isMasked=__webpack_require__("../../node_modules/lodash/_isMasked.js"),isObject=__webpack_require__("../../node_modules/lodash/isObject.js"),toSource=__webpack_require__("../../node_modules/lodash/_toSource.js"),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},"../../node_modules/lodash/_baseIsTypedArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("../../node_modules/lodash/_baseGetTag.js"),isLength=__webpack_require__("../../node_modules/lodash/isLength.js"),isObjectLike=__webpack_require__("../../node_modules/lodash/isObjectLike.js"),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},"../../node_modules/lodash/_baseIteratee.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseMatches=__webpack_require__("../../node_modules/lodash/_baseMatches.js"),baseMatchesProperty=__webpack_require__("../../node_modules/lodash/_baseMatchesProperty.js"),identity=__webpack_require__("../../node_modules/lodash/identity.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),property=__webpack_require__("../../node_modules/lodash/property.js");module.exports=function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}},"../../node_modules/lodash/_baseKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isPrototype=__webpack_require__("../../node_modules/lodash/_isPrototype.js"),nativeKeys=__webpack_require__("../../node_modules/lodash/_nativeKeys.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},"../../node_modules/lodash/_baseKeysIn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("../../node_modules/lodash/isObject.js"),isPrototype=__webpack_require__("../../node_modules/lodash/_isPrototype.js"),nativeKeysIn=__webpack_require__("../../node_modules/lodash/_nativeKeysIn.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}},"../../node_modules/lodash/_baseMatches.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsMatch=__webpack_require__("../../node_modules/lodash/_baseIsMatch.js"),getMatchData=__webpack_require__("../../node_modules/lodash/_getMatchData.js"),matchesStrictComparable=__webpack_require__("../../node_modules/lodash/_matchesStrictComparable.js");module.exports=function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}},"../../node_modules/lodash/_baseMatchesProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsEqual=__webpack_require__("../../node_modules/lodash/_baseIsEqual.js"),get=__webpack_require__("../../node_modules/lodash/get.js"),hasIn=__webpack_require__("../../node_modules/lodash/hasIn.js"),isKey=__webpack_require__("../../node_modules/lodash/_isKey.js"),isStrictComparable=__webpack_require__("../../node_modules/lodash/_isStrictComparable.js"),matchesStrictComparable=__webpack_require__("../../node_modules/lodash/_matchesStrictComparable.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}},"../../node_modules/lodash/_basePick.js":(module,__unused_webpack_exports,__webpack_require__)=>{var basePickBy=__webpack_require__("../../node_modules/lodash/_basePickBy.js"),hasIn=__webpack_require__("../../node_modules/lodash/hasIn.js");module.exports=function basePick(object,paths){return basePickBy(object,paths,(function(value,path){return hasIn(object,path)}))}},"../../node_modules/lodash/_basePickBy.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGet=__webpack_require__("../../node_modules/lodash/_baseGet.js"),baseSet=__webpack_require__("../../node_modules/lodash/_baseSet.js"),castPath=__webpack_require__("../../node_modules/lodash/_castPath.js");module.exports=function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}},"../../node_modules/lodash/_baseProperty.js":module=>{module.exports=function baseProperty(key){return function(object){return null==object?void 0:object[key]}}},"../../node_modules/lodash/_basePropertyDeep.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGet=__webpack_require__("../../node_modules/lodash/_baseGet.js");module.exports=function basePropertyDeep(path){return function(object){return baseGet(object,path)}}},"../../node_modules/lodash/_basePropertyOf.js":module=>{module.exports=function basePropertyOf(object){return function(key){return null==object?void 0:object[key]}}},"../../node_modules/lodash/_baseSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assignValue=__webpack_require__("../../node_modules/lodash/_assignValue.js"),castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),isIndex=__webpack_require__("../../node_modules/lodash/_isIndex.js"),isObject=__webpack_require__("../../node_modules/lodash/isObject.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function baseSet(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if("__proto__"===key||"constructor"===key||"prototype"===key)return object;if(index!=lastIndex){var objValue=nested[key];void 0===(newValue=customizer?customizer(objValue,key,nested):void 0)&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}},"../../node_modules/lodash/_baseSetToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var constant=__webpack_require__("../../node_modules/lodash/constant.js"),defineProperty=__webpack_require__("../../node_modules/lodash/_defineProperty.js"),identity=__webpack_require__("../../node_modules/lodash/identity.js"),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},"../../node_modules/lodash/_baseSlice.js":module=>{module.exports=function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},"../../node_modules/lodash/_baseTimes.js":module=>{module.exports=function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},"../../node_modules/lodash/_baseToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_Symbol.js"),arrayMap=__webpack_require__("../../node_modules/lodash/_arrayMap.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isSymbol=__webpack_require__("../../node_modules/lodash/isSymbol.js"),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},"../../node_modules/lodash/_baseUnary.js":module=>{module.exports=function baseUnary(func){return function(value){return func(value)}}},"../../node_modules/lodash/_cacheHas.js":module=>{module.exports=function cacheHas(cache,key){return cache.has(key)}},"../../node_modules/lodash/_castPath.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isKey=__webpack_require__("../../node_modules/lodash/_isKey.js"),stringToPath=__webpack_require__("../../node_modules/lodash/_stringToPath.js"),toString=__webpack_require__("../../node_modules/lodash/toString.js");module.exports=function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},"../../node_modules/lodash/_castSlice.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseSlice=__webpack_require__("../../node_modules/lodash/_baseSlice.js");module.exports=function castSlice(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}},"../../node_modules/lodash/_coreJsData.js":(module,__unused_webpack_exports,__webpack_require__)=>{var coreJsData=__webpack_require__("../../node_modules/lodash/_root.js")["__core-js_shared__"];module.exports=coreJsData},"../../node_modules/lodash/_createBaseFor.js":module=>{module.exports=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},"../../node_modules/lodash/_createCaseFirst.js":(module,__unused_webpack_exports,__webpack_require__)=>{var castSlice=__webpack_require__("../../node_modules/lodash/_castSlice.js"),hasUnicode=__webpack_require__("../../node_modules/lodash/_hasUnicode.js"),stringToArray=__webpack_require__("../../node_modules/lodash/_stringToArray.js"),toString=__webpack_require__("../../node_modules/lodash/toString.js");module.exports=function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):void 0,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}},"../../node_modules/lodash/_createCompounder.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayReduce=__webpack_require__("../../node_modules/lodash/_arrayReduce.js"),deburr=__webpack_require__("../../node_modules/lodash/deburr.js"),words=__webpack_require__("../../node_modules/lodash/words.js"),reApos=RegExp("[']","g");module.exports=function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}},"../../node_modules/lodash/_deburrLetter.js":(module,__unused_webpack_exports,__webpack_require__)=>{var deburrLetter=__webpack_require__("../../node_modules/lodash/_basePropertyOf.js")({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"});module.exports=deburrLetter},"../../node_modules/lodash/_defineProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getNative=__webpack_require__("../../node_modules/lodash/_getNative.js"),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},"../../node_modules/lodash/_equalArrays.js":(module,__unused_webpack_exports,__webpack_require__)=>{var SetCache=__webpack_require__("../../node_modules/lodash/_SetCache.js"),arraySome=__webpack_require__("../../node_modules/lodash/_arraySome.js"),cacheHas=__webpack_require__("../../node_modules/lodash/_cacheHas.js");module.exports=function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},"../../node_modules/lodash/_equalByTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_Symbol.js"),Uint8Array=__webpack_require__("../../node_modules/lodash/_Uint8Array.js"),eq=__webpack_require__("../../node_modules/lodash/eq.js"),equalArrays=__webpack_require__("../../node_modules/lodash/_equalArrays.js"),mapToArray=__webpack_require__("../../node_modules/lodash/_mapToArray.js"),setToArray=__webpack_require__("../../node_modules/lodash/_setToArray.js"),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},"../../node_modules/lodash/_equalObjects.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getAllKeys=__webpack_require__("../../node_modules/lodash/_getAllKeys.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},"../../node_modules/lodash/_flatRest.js":(module,__unused_webpack_exports,__webpack_require__)=>{var flatten=__webpack_require__("../../node_modules/lodash/flatten.js"),overRest=__webpack_require__("../../node_modules/lodash/_overRest.js"),setToString=__webpack_require__("../../node_modules/lodash/_setToString.js");module.exports=function flatRest(func){return setToString(overRest(func,void 0,flatten),func+"")}},"../../node_modules/lodash/_freeGlobal.js":(module,__unused_webpack_exports,__webpack_require__)=>{var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g;module.exports=freeGlobal},"../../node_modules/lodash/_getAllKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetAllKeys=__webpack_require__("../../node_modules/lodash/_baseGetAllKeys.js"),getSymbols=__webpack_require__("../../node_modules/lodash/_getSymbols.js"),keys=__webpack_require__("../../node_modules/lodash/keys.js");module.exports=function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}},"../../node_modules/lodash/_getAllKeysIn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetAllKeys=__webpack_require__("../../node_modules/lodash/_baseGetAllKeys.js"),getSymbolsIn=__webpack_require__("../../node_modules/lodash/_getSymbolsIn.js"),keysIn=__webpack_require__("../../node_modules/lodash/keysIn.js");module.exports=function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}},"../../node_modules/lodash/_getMapData.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isKeyable=__webpack_require__("../../node_modules/lodash/_isKeyable.js");module.exports=function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},"../../node_modules/lodash/_getMatchData.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isStrictComparable=__webpack_require__("../../node_modules/lodash/_isStrictComparable.js"),keys=__webpack_require__("../../node_modules/lodash/keys.js");module.exports=function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}},"../../node_modules/lodash/_getNative.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsNative=__webpack_require__("../../node_modules/lodash/_baseIsNative.js"),getValue=__webpack_require__("../../node_modules/lodash/_getValue.js");module.exports=function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},"../../node_modules/lodash/_getPrototype.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getPrototype=__webpack_require__("../../node_modules/lodash/_overArg.js")(Object.getPrototypeOf,Object);module.exports=getPrototype},"../../node_modules/lodash/_getRawTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_Symbol.js"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},"../../node_modules/lodash/_getSymbols.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayFilter=__webpack_require__("../../node_modules/lodash/_arrayFilter.js"),stubArray=__webpack_require__("../../node_modules/lodash/stubArray.js"),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},"../../node_modules/lodash/_getSymbolsIn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayPush=__webpack_require__("../../node_modules/lodash/_arrayPush.js"),getPrototype=__webpack_require__("../../node_modules/lodash/_getPrototype.js"),getSymbols=__webpack_require__("../../node_modules/lodash/_getSymbols.js"),stubArray=__webpack_require__("../../node_modules/lodash/stubArray.js"),getSymbolsIn=Object.getOwnPropertySymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray;module.exports=getSymbolsIn},"../../node_modules/lodash/_getTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var DataView=__webpack_require__("../../node_modules/lodash/_DataView.js"),Map=__webpack_require__("../../node_modules/lodash/_Map.js"),Promise=__webpack_require__("../../node_modules/lodash/_Promise.js"),Set=__webpack_require__("../../node_modules/lodash/_Set.js"),WeakMap=__webpack_require__("../../node_modules/lodash/_WeakMap.js"),baseGetTag=__webpack_require__("../../node_modules/lodash/_baseGetTag.js"),toSource=__webpack_require__("../../node_modules/lodash/_toSource.js"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},"../../node_modules/lodash/_getValue.js":module=>{module.exports=function getValue(object,key){return null==object?void 0:object[key]}},"../../node_modules/lodash/_hasPath.js":(module,__unused_webpack_exports,__webpack_require__)=>{var castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),isArguments=__webpack_require__("../../node_modules/lodash/isArguments.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isIndex=__webpack_require__("../../node_modules/lodash/_isIndex.js"),isLength=__webpack_require__("../../node_modules/lodash/isLength.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}},"../../node_modules/lodash/_hasUnicode.js":module=>{var reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");module.exports=function hasUnicode(string){return reHasUnicode.test(string)}},"../../node_modules/lodash/_hasUnicodeWord.js":module=>{var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;module.exports=function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}},"../../node_modules/lodash/_hashClear.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("../../node_modules/lodash/_nativeCreate.js");module.exports=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},"../../node_modules/lodash/_hashDelete.js":module=>{module.exports=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},"../../node_modules/lodash/_hashGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("../../node_modules/lodash/_nativeCreate.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},"../../node_modules/lodash/_hashHas.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("../../node_modules/lodash/_nativeCreate.js"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},"../../node_modules/lodash/_hashSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("../../node_modules/lodash/_nativeCreate.js");module.exports=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},"../../node_modules/lodash/_isFlattenable.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("../../node_modules/lodash/_Symbol.js"),isArguments=__webpack_require__("../../node_modules/lodash/isArguments.js"),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;module.exports=function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}},"../../node_modules/lodash/_isIndex.js":module=>{var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},"../../node_modules/lodash/_isKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isSymbol=__webpack_require__("../../node_modules/lodash/isSymbol.js"),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},"../../node_modules/lodash/_isKeyable.js":module=>{module.exports=function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},"../../node_modules/lodash/_isMasked.js":(module,__unused_webpack_exports,__webpack_require__)=>{var uid,coreJsData=__webpack_require__("../../node_modules/lodash/_coreJsData.js"),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}},"../../node_modules/lodash/_isPrototype.js":module=>{var objectProto=Object.prototype;module.exports=function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},"../../node_modules/lodash/_isStrictComparable.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("../../node_modules/lodash/isObject.js");module.exports=function isStrictComparable(value){return value==value&&!isObject(value)}},"../../node_modules/lodash/_listCacheClear.js":module=>{module.exports=function listCacheClear(){this.__data__=[],this.size=0}},"../../node_modules/lodash/_listCacheDelete.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("../../node_modules/lodash/_assocIndexOf.js"),splice=Array.prototype.splice;module.exports=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},"../../node_modules/lodash/_listCacheGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("../../node_modules/lodash/_assocIndexOf.js");module.exports=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},"../../node_modules/lodash/_listCacheHas.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("../../node_modules/lodash/_assocIndexOf.js");module.exports=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}},"../../node_modules/lodash/_listCacheSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var assocIndexOf=__webpack_require__("../../node_modules/lodash/_assocIndexOf.js");module.exports=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},"../../node_modules/lodash/_mapCacheClear.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Hash=__webpack_require__("../../node_modules/lodash/_Hash.js"),ListCache=__webpack_require__("../../node_modules/lodash/_ListCache.js"),Map=__webpack_require__("../../node_modules/lodash/_Map.js");module.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},"../../node_modules/lodash/_mapCacheDelete.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("../../node_modules/lodash/_getMapData.js");module.exports=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},"../../node_modules/lodash/_mapCacheGet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("../../node_modules/lodash/_getMapData.js");module.exports=function mapCacheGet(key){return getMapData(this,key).get(key)}},"../../node_modules/lodash/_mapCacheHas.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("../../node_modules/lodash/_getMapData.js");module.exports=function mapCacheHas(key){return getMapData(this,key).has(key)}},"../../node_modules/lodash/_mapCacheSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var getMapData=__webpack_require__("../../node_modules/lodash/_getMapData.js");module.exports=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},"../../node_modules/lodash/_mapToArray.js":module=>{module.exports=function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},"../../node_modules/lodash/_matchesStrictComparable.js":module=>{module.exports=function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}},"../../node_modules/lodash/_memoizeCapped.js":(module,__unused_webpack_exports,__webpack_require__)=>{var memoize=__webpack_require__("../../node_modules/lodash/memoize.js");module.exports=function memoizeCapped(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}},"../../node_modules/lodash/_nativeCreate.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeCreate=__webpack_require__("../../node_modules/lodash/_getNative.js")(Object,"create");module.exports=nativeCreate},"../../node_modules/lodash/_nativeKeys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var nativeKeys=__webpack_require__("../../node_modules/lodash/_overArg.js")(Object.keys,Object);module.exports=nativeKeys},"../../node_modules/lodash/_nativeKeysIn.js":module=>{module.exports=function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}},"../../node_modules/lodash/_nodeUtil.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var freeGlobal=__webpack_require__("../../node_modules/lodash/_freeGlobal.js"),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},"../../node_modules/lodash/_objectToString.js":module=>{var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},"../../node_modules/lodash/_overArg.js":module=>{module.exports=function overArg(func,transform){return function(arg){return func(transform(arg))}}},"../../node_modules/lodash/_overRest.js":(module,__unused_webpack_exports,__webpack_require__)=>{var apply=__webpack_require__("../../node_modules/lodash/_apply.js"),nativeMax=Math.max;module.exports=function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},"../../node_modules/lodash/_root.js":(module,__unused_webpack_exports,__webpack_require__)=>{var freeGlobal=__webpack_require__("../../node_modules/lodash/_freeGlobal.js"),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},"../../node_modules/lodash/_setCacheAdd.js":module=>{module.exports=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},"../../node_modules/lodash/_setCacheHas.js":module=>{module.exports=function setCacheHas(value){return this.__data__.has(value)}},"../../node_modules/lodash/_setToArray.js":module=>{module.exports=function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},"../../node_modules/lodash/_setToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseSetToString=__webpack_require__("../../node_modules/lodash/_baseSetToString.js"),setToString=__webpack_require__("../../node_modules/lodash/_shortOut.js")(baseSetToString);module.exports=setToString},"../../node_modules/lodash/_shortOut.js":module=>{var nativeNow=Date.now;module.exports=function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=800)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},"../../node_modules/lodash/_stackClear.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ListCache=__webpack_require__("../../node_modules/lodash/_ListCache.js");module.exports=function stackClear(){this.__data__=new ListCache,this.size=0}},"../../node_modules/lodash/_stackDelete.js":module=>{module.exports=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},"../../node_modules/lodash/_stackGet.js":module=>{module.exports=function stackGet(key){return this.__data__.get(key)}},"../../node_modules/lodash/_stackHas.js":module=>{module.exports=function stackHas(key){return this.__data__.has(key)}},"../../node_modules/lodash/_stackSet.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ListCache=__webpack_require__("../../node_modules/lodash/_ListCache.js"),Map=__webpack_require__("../../node_modules/lodash/_Map.js"),MapCache=__webpack_require__("../../node_modules/lodash/_MapCache.js");module.exports=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},"../../node_modules/lodash/_stringToArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var asciiToArray=__webpack_require__("../../node_modules/lodash/_asciiToArray.js"),hasUnicode=__webpack_require__("../../node_modules/lodash/_hasUnicode.js"),unicodeToArray=__webpack_require__("../../node_modules/lodash/_unicodeToArray.js");module.exports=function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}},"../../node_modules/lodash/_stringToPath.js":(module,__unused_webpack_exports,__webpack_require__)=>{var memoizeCapped=__webpack_require__("../../node_modules/lodash/_memoizeCapped.js"),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},"../../node_modules/lodash/_toKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isSymbol=__webpack_require__("../../node_modules/lodash/isSymbol.js");module.exports=function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},"../../node_modules/lodash/_toSource.js":module=>{var funcToString=Function.prototype.toString;module.exports=function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},"../../node_modules/lodash/_unicodeToArray.js":module=>{var rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");module.exports=function unicodeToArray(string){return string.match(reUnicode)||[]}},"../../node_modules/lodash/_unicodeWords.js":module=>{var rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsBreak="["+rsBreakRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g");module.exports=function unicodeWords(string){return string.match(reUnicodeWord)||[]}},"../../node_modules/lodash/constant.js":module=>{module.exports=function constant(value){return function(){return value}}},"../../node_modules/lodash/deburr.js":(module,__unused_webpack_exports,__webpack_require__)=>{var deburrLetter=__webpack_require__("../../node_modules/lodash/_deburrLetter.js"),toString=__webpack_require__("../../node_modules/lodash/toString.js"),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reComboMark=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");module.exports=function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}},"../../node_modules/lodash/eq.js":module=>{module.exports=function eq(value,other){return value===other||value!=value&&other!=other}},"../../node_modules/lodash/flatten.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFlatten=__webpack_require__("../../node_modules/lodash/_baseFlatten.js");module.exports=function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}},"../../node_modules/lodash/get.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGet=__webpack_require__("../../node_modules/lodash/_baseGet.js");module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},"../../node_modules/lodash/hasIn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseHasIn=__webpack_require__("../../node_modules/lodash/_baseHasIn.js"),hasPath=__webpack_require__("../../node_modules/lodash/_hasPath.js");module.exports=function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}},"../../node_modules/lodash/identity.js":module=>{module.exports=function identity(value){return value}},"../../node_modules/lodash/isArguments.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsArguments=__webpack_require__("../../node_modules/lodash/_baseIsArguments.js"),isObjectLike=__webpack_require__("../../node_modules/lodash/isObjectLike.js"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},"../../node_modules/lodash/isArray.js":module=>{var isArray=Array.isArray;module.exports=isArray},"../../node_modules/lodash/isArrayLike.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isFunction=__webpack_require__("../../node_modules/lodash/isFunction.js"),isLength=__webpack_require__("../../node_modules/lodash/isLength.js");module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},"../../node_modules/lodash/isBuffer.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var root=__webpack_require__("../../node_modules/lodash/_root.js"),stubFalse=__webpack_require__("../../node_modules/lodash/stubFalse.js"),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer},"../../node_modules/lodash/isEqual.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsEqual=__webpack_require__("../../node_modules/lodash/_baseIsEqual.js");module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},"../../node_modules/lodash/isFunction.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("../../node_modules/lodash/_baseGetTag.js"),isObject=__webpack_require__("../../node_modules/lodash/isObject.js");module.exports=function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},"../../node_modules/lodash/isLength.js":module=>{module.exports=function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},"../../node_modules/lodash/isObject.js":module=>{module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},"../../node_modules/lodash/isObjectLike.js":module=>{module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},"../../node_modules/lodash/isPlainObject.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("../../node_modules/lodash/_baseGetTag.js"),getPrototype=__webpack_require__("../../node_modules/lodash/_getPrototype.js"),isObjectLike=__webpack_require__("../../node_modules/lodash/isObjectLike.js"),funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=function isPlainObject(value){if(!isObjectLike(value)||"[object Object]"!=baseGetTag(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},"../../node_modules/lodash/isSymbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("../../node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("../../node_modules/lodash/isObjectLike.js");module.exports=function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},"../../node_modules/lodash/isTypedArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseIsTypedArray=__webpack_require__("../../node_modules/lodash/_baseIsTypedArray.js"),baseUnary=__webpack_require__("../../node_modules/lodash/_baseUnary.js"),nodeUtil=__webpack_require__("../../node_modules/lodash/_nodeUtil.js"),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},"../../node_modules/lodash/keys.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayLikeKeys=__webpack_require__("../../node_modules/lodash/_arrayLikeKeys.js"),baseKeys=__webpack_require__("../../node_modules/lodash/_baseKeys.js"),isArrayLike=__webpack_require__("../../node_modules/lodash/isArrayLike.js");module.exports=function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},"../../node_modules/lodash/keysIn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayLikeKeys=__webpack_require__("../../node_modules/lodash/_arrayLikeKeys.js"),baseKeysIn=__webpack_require__("../../node_modules/lodash/_baseKeysIn.js"),isArrayLike=__webpack_require__("../../node_modules/lodash/isArrayLike.js");module.exports=function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}},"../../node_modules/lodash/mapValues.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseAssignValue=__webpack_require__("../../node_modules/lodash/_baseAssignValue.js"),baseForOwn=__webpack_require__("../../node_modules/lodash/_baseForOwn.js"),baseIteratee=__webpack_require__("../../node_modules/lodash/_baseIteratee.js");module.exports=function mapValues(object,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object,(function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))})),result}},"../../node_modules/lodash/memoize.js":(module,__unused_webpack_exports,__webpack_require__)=>{var MapCache=__webpack_require__("../../node_modules/lodash/_MapCache.js");function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},"../../node_modules/lodash/pick.js":(module,__unused_webpack_exports,__webpack_require__)=>{var basePick=__webpack_require__("../../node_modules/lodash/_basePick.js"),pick=__webpack_require__("../../node_modules/lodash/_flatRest.js")((function(object,paths){return null==object?{}:basePick(object,paths)}));module.exports=pick},"../../node_modules/lodash/pickBy.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayMap=__webpack_require__("../../node_modules/lodash/_arrayMap.js"),baseIteratee=__webpack_require__("../../node_modules/lodash/_baseIteratee.js"),basePickBy=__webpack_require__("../../node_modules/lodash/_basePickBy.js"),getAllKeysIn=__webpack_require__("../../node_modules/lodash/_getAllKeysIn.js");module.exports=function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),(function(prop){return[prop]}));return predicate=baseIteratee(predicate),basePickBy(object,props,(function(value,path){return predicate(value,path[0])}))}},"../../node_modules/lodash/property.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseProperty=__webpack_require__("../../node_modules/lodash/_baseProperty.js"),basePropertyDeep=__webpack_require__("../../node_modules/lodash/_basePropertyDeep.js"),isKey=__webpack_require__("../../node_modules/lodash/_isKey.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}},"../../node_modules/lodash/startCase.js":(module,__unused_webpack_exports,__webpack_require__)=>{var createCompounder=__webpack_require__("../../node_modules/lodash/_createCompounder.js"),upperFirst=__webpack_require__("../../node_modules/lodash/upperFirst.js"),startCase=createCompounder((function(result,word,index){return result+(index?" ":"")+upperFirst(word)}));module.exports=startCase},"../../node_modules/lodash/stubArray.js":module=>{module.exports=function stubArray(){return[]}},"../../node_modules/lodash/stubFalse.js":module=>{module.exports=function stubFalse(){return!1}},"../../node_modules/lodash/toString.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseToString=__webpack_require__("../../node_modules/lodash/_baseToString.js");module.exports=function toString(value){return null==value?"":baseToString(value)}},"../../node_modules/lodash/upperFirst.js":(module,__unused_webpack_exports,__webpack_require__)=>{var upperFirst=__webpack_require__("../../node_modules/lodash/_createCaseFirst.js")("toUpperCase");module.exports=upperFirst},"../../node_modules/lodash/words.js":(module,__unused_webpack_exports,__webpack_require__)=>{var asciiWords=__webpack_require__("../../node_modules/lodash/_asciiWords.js"),hasUnicodeWord=__webpack_require__("../../node_modules/lodash/_hasUnicodeWord.js"),toString=__webpack_require__("../../node_modules/lodash/toString.js"),unicodeWords=__webpack_require__("../../node_modules/lodash/_unicodeWords.js");module.exports=function words(string,pattern,guard){return string=toString(string),void 0===(pattern=guard?void 0:pattern)?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}},"../../node_modules/memoizerific/memoizerific.js":module=>{module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=function(forceSimilar){return"function"!=typeof Map||forceSimilar?new(_dereq_("./similar")):new Map}},{"./similar":2}],2:[function(_dereq_,module,exports){function Similar(){return this.list=[],this.lastItem=void 0,this.size=0,this}Similar.prototype.get=function(key){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?this.lastItem.val:(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val):void 0},Similar.prototype.set=function(key,val){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?(this.lastItem.val=val,this):(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val=val,this):(this.lastItem={key,val},this.list.push(this.lastItem),this.size++,this)},Similar.prototype.delete=function(key){var index;if(this.lastItem&&this.isEqual(this.lastItem.key,key)&&(this.lastItem=void 0),(index=this.indexOf(key))>=0)return this.size--,this.list.splice(index,1)[0]},Similar.prototype.has=function(key){var index;return!(!this.lastItem||!this.isEqual(this.lastItem.key,key))||(index=this.indexOf(key))>=0&&(this.lastItem=this.list[index],!0)},Similar.prototype.forEach=function(callback,thisArg){var i;for(i=0;i<this.size;i++)callback.call(thisArg||this,this.list[i].val,this.list[i].key,this)},Similar.prototype.indexOf=function(key){var i;for(i=0;i<this.size;i++)if(this.isEqual(this.list[i].key,key))return i;return-1},Similar.prototype.isEqual=function(val1,val2){return val1===val2||val1!=val1&&val2!=val2},module.exports=Similar},{}],3:[function(_dereq_,module,exports){var MapOrSimilar=_dereq_("map-or-similar");function moveToMostRecentLru(lru,lruPath){var isMatch,i,ii,lruLen=lru.length,lruPathLen=lruPath.length;for(i=0;i<lruLen;i++){for(isMatch=!0,ii=0;ii<lruPathLen;ii++)if(!isEqual(lru[i][ii].arg,lruPath[ii].arg)){isMatch=!1;break}if(isMatch)break}lru.push(lru.splice(i,1)[0])}function removeCachedResult(removedLru){var tmp,i,removedLruLen=removedLru.length,currentLru=removedLru[removedLruLen-1];for(currentLru.cacheItem.delete(currentLru.arg),i=removedLruLen-2;i>=0&&(!(tmp=(currentLru=removedLru[i]).cacheItem.get(currentLru.arg))||!tmp.size);i--)currentLru.cacheItem.delete(currentLru.arg)}function isEqual(val1,val2){return val1===val2||val1!=val1&&val2!=val2}module.exports=function(limit){var cache=new MapOrSimilar(!1),lru=[];return function(fn){var memoizerific=function(){var newMap,fnResult,i,currentCache=cache,argsLengthMinusOne=arguments.length-1,lruPath=Array(argsLengthMinusOne+1),isMemoized=!0;if((memoizerific.numArgs||0===memoizerific.numArgs)&&memoizerific.numArgs!==argsLengthMinusOne+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(i=0;i<argsLengthMinusOne;i++)lruPath[i]={cacheItem:currentCache,arg:arguments[i]},currentCache.has(arguments[i])?currentCache=currentCache.get(arguments[i]):(isMemoized=!1,newMap=new MapOrSimilar(!1),currentCache.set(arguments[i],newMap),currentCache=newMap);return isMemoized&&(currentCache.has(arguments[argsLengthMinusOne])?fnResult=currentCache.get(arguments[argsLengthMinusOne]):isMemoized=!1),isMemoized||(fnResult=fn.apply(null,arguments),currentCache.set(arguments[argsLengthMinusOne],fnResult)),limit>0&&(lruPath[argsLengthMinusOne]={cacheItem:currentCache,arg:arguments[argsLengthMinusOne]},isMemoized?moveToMostRecentLru(lru,lruPath):lru.push(lruPath),lru.length>limit&&removeCachedResult(lru.shift())),memoizerific.wasMemoized=isMemoized,memoizerific.numArgs=argsLengthMinusOne+1,fnResult};return memoizerific.limit=limit,memoizerific.wasMemoized=!1,memoizerific.cache=cache,memoizerific.lru=lru,memoizerific}}},{"map-or-similar":1}]},{},[3])(3)},"../../node_modules/object-assign/index.js":module=>{"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},"../../node_modules/object-inspect/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,weakMapHas="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,weakSetHas="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,weakRefDeref="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf="function"==typeof BigInt?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,hasShammedSymbols="function"==typeof Symbol&&"object"==typeof Symbol.iterator,toStringTag="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(O){return O.__proto__}:null);function addNumericSeparator(num,str){if(num===1/0||num===-1/0||num!=num||num&&num>-1e3&&num<1e3||$test.call(/e/,str))return str;var sepRegex=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof num){var int=num<0?-$floor(-num):$floor(num);if(int!==num){var intStr=String(int),dec=$slice.call(str,intStr.length+1);return $replace.call(intStr,sepRegex,"$&_")+"."+$replace.call($replace.call(dec,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(str,sepRegex,"$&_")}var utilInspect=__webpack_require__("?c95a"),inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null;function wrapQuotes(s,defaultStyle,opts){var quoteChar="double"===(opts.quoteStyle||defaultStyle)?'"':"'";return quoteChar+s+quoteChar}function quote(s){return $replace.call(String(s),/"/g,"&quot;")}function isArray(obj){return!("[object Array]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}function isRegExp(obj){return!("[object RegExp]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}function isSymbol(obj){if(hasShammedSymbols)return obj&&"object"==typeof obj&&obj instanceof Symbol;if("symbol"==typeof obj)return!0;if(!obj||"object"!=typeof obj||!symToString)return!1;try{return symToString.call(obj),!0}catch(e){}return!1}module.exports=function inspect_(obj,options,depth,seen){var opts=options||{};if(has(opts,"quoteStyle")&&"single"!==opts.quoteStyle&&"double"!==opts.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has(opts,"maxStringLength")&&("number"==typeof opts.maxStringLength?opts.maxStringLength<0&&opts.maxStringLength!==1/0:null!==opts.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var customInspect=!has(opts,"customInspect")||opts.customInspect;if("boolean"!=typeof customInspect&&"symbol"!==customInspect)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has(opts,"indent")&&null!==opts.indent&&"\t"!==opts.indent&&!(parseInt(opts.indent,10)===opts.indent&&opts.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has(opts,"numericSeparator")&&"boolean"!=typeof opts.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var numericSeparator=opts.numericSeparator;if(void 0===obj)return"undefined";if(null===obj)return"null";if("boolean"==typeof obj)return obj?"true":"false";if("string"==typeof obj)return inspectString(obj,opts);if("number"==typeof obj){if(0===obj)return 1/0/obj>0?"0":"-0";var str=String(obj);return numericSeparator?addNumericSeparator(obj,str):str}if("bigint"==typeof obj){var bigIntStr=String(obj)+"n";return numericSeparator?addNumericSeparator(obj,bigIntStr):bigIntStr}var maxDepth=void 0===opts.depth?5:opts.depth;if(void 0===depth&&(depth=0),depth>=maxDepth&&maxDepth>0&&"object"==typeof obj)return isArray(obj)?"[Array]":"[Object]";var indent=function getIndent(opts,depth){var baseIndent;if("\t"===opts.indent)baseIndent="\t";else{if(!("number"==typeof opts.indent&&opts.indent>0))return null;baseIndent=$join.call(Array(opts.indent+1)," ")}return{base:baseIndent,prev:$join.call(Array(depth+1),baseIndent)}}(opts,depth);if(void 0===seen)seen=[];else if(indexOf(seen,obj)>=0)return"[Circular]";function inspect(value,from,noIndent){if(from&&(seen=$arrSlice.call(seen)).push(from),noIndent){var newOpts={depth:opts.depth};return has(opts,"quoteStyle")&&(newOpts.quoteStyle=opts.quoteStyle),inspect_(value,newOpts,depth+1,seen)}return inspect_(value,opts,depth+1,seen)}if("function"==typeof obj&&!isRegExp(obj)){var name=function nameOf(f){if(f.name)return f.name;var m=$match.call(functionToString.call(f),/^function\s*([\w$]+)/);if(m)return m[1];return null}(obj),keys=arrObjKeys(obj,inspect);return"[Function"+(name?": "+name:" (anonymous)")+"]"+(keys.length>0?" { "+$join.call(keys,", ")+" }":"")}if(isSymbol(obj)){var symString=hasShammedSymbols?$replace.call(String(obj),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(obj);return"object"!=typeof obj||hasShammedSymbols?symString:markBoxed(symString)}if(function isElement(x){if(!x||"object"!=typeof x)return!1;if("undefined"!=typeof HTMLElement&&x instanceof HTMLElement)return!0;return"string"==typeof x.nodeName&&"function"==typeof x.getAttribute}(obj)){for(var s="<"+$toLowerCase.call(String(obj.nodeName)),attrs=obj.attributes||[],i=0;i<attrs.length;i++)s+=" "+attrs[i].name+"="+wrapQuotes(quote(attrs[i].value),"double",opts);return s+=">",obj.childNodes&&obj.childNodes.length&&(s+="..."),s+="</"+$toLowerCase.call(String(obj.nodeName))+">"}if(isArray(obj)){if(0===obj.length)return"[]";var xs=arrObjKeys(obj,inspect);return indent&&!function singleLineValues(xs){for(var i=0;i<xs.length;i++)if(indexOf(xs[i],"\n")>=0)return!1;return!0}(xs)?"["+indentedJoin(xs,indent)+"]":"[ "+$join.call(xs,", ")+" ]"}if(function isError(obj){return!("[object Error]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj)){var parts=arrObjKeys(obj,inspect);return"cause"in Error.prototype||!("cause"in obj)||isEnumerable.call(obj,"cause")?0===parts.length?"["+String(obj)+"]":"{ ["+String(obj)+"] "+$join.call(parts,", ")+" }":"{ ["+String(obj)+"] "+$join.call($concat.call("[cause]: "+inspect(obj.cause),parts),", ")+" }"}if("object"==typeof obj&&customInspect){if(inspectSymbol&&"function"==typeof obj[inspectSymbol]&&utilInspect)return utilInspect(obj,{depth:maxDepth-depth});if("symbol"!==customInspect&&"function"==typeof obj.inspect)return obj.inspect()}if(function isMap(x){if(!mapSize||!x||"object"!=typeof x)return!1;try{mapSize.call(x);try{setSize.call(x)}catch(s){return!0}return x instanceof Map}catch(e){}return!1}(obj)){var mapParts=[];return mapForEach.call(obj,(function(value,key){mapParts.push(inspect(key,obj,!0)+" => "+inspect(value,obj))})),collectionOf("Map",mapSize.call(obj),mapParts,indent)}if(function isSet(x){if(!setSize||!x||"object"!=typeof x)return!1;try{setSize.call(x);try{mapSize.call(x)}catch(m){return!0}return x instanceof Set}catch(e){}return!1}(obj)){var setParts=[];return setForEach.call(obj,(function(value){setParts.push(inspect(value,obj))})),collectionOf("Set",setSize.call(obj),setParts,indent)}if(function isWeakMap(x){if(!weakMapHas||!x||"object"!=typeof x)return!1;try{weakMapHas.call(x,weakMapHas);try{weakSetHas.call(x,weakSetHas)}catch(s){return!0}return x instanceof WeakMap}catch(e){}return!1}(obj))return weakCollectionOf("WeakMap");if(function isWeakSet(x){if(!weakSetHas||!x||"object"!=typeof x)return!1;try{weakSetHas.call(x,weakSetHas);try{weakMapHas.call(x,weakMapHas)}catch(s){return!0}return x instanceof WeakSet}catch(e){}return!1}(obj))return weakCollectionOf("WeakSet");if(function isWeakRef(x){if(!weakRefDeref||!x||"object"!=typeof x)return!1;try{return weakRefDeref.call(x),!0}catch(e){}return!1}(obj))return weakCollectionOf("WeakRef");if(function isNumber(obj){return!("[object Number]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(inspect(Number(obj)));if(function isBigInt(obj){if(!obj||"object"!=typeof obj||!bigIntValueOf)return!1;try{return bigIntValueOf.call(obj),!0}catch(e){}return!1}(obj))return markBoxed(inspect(bigIntValueOf.call(obj)));if(function isBoolean(obj){return!("[object Boolean]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(booleanValueOf.call(obj));if(function isString(obj){return!("[object String]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(inspect(String(obj)));if(!function isDate(obj){return!("[object Date]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj)&&!isRegExp(obj)){var ys=arrObjKeys(obj,inspect),isPlainObject=gPO?gPO(obj)===Object.prototype:obj instanceof Object||obj.constructor===Object,protoTag=obj instanceof Object?"":"null prototype",stringTag=!isPlainObject&&toStringTag&&Object(obj)===obj&&toStringTag in obj?$slice.call(toStr(obj),8,-1):protoTag?"Object":"",tag=(isPlainObject||"function"!=typeof obj.constructor?"":obj.constructor.name?obj.constructor.name+" ":"")+(stringTag||protoTag?"["+$join.call($concat.call([],stringTag||[],protoTag||[]),": ")+"] ":"");return 0===ys.length?tag+"{}":indent?tag+"{"+indentedJoin(ys,indent)+"}":tag+"{ "+$join.call(ys,", ")+" }"}return String(obj)};var hasOwn=Object.prototype.hasOwnProperty||function(key){return key in this};function has(obj,key){return hasOwn.call(obj,key)}function toStr(obj){return objectToString.call(obj)}function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}function inspectString(str,opts){if(str.length>opts.maxStringLength){var remaining=str.length-opts.maxStringLength,trailer="... "+remaining+" more character"+(remaining>1?"s":"");return inspectString($slice.call(str,0,opts.maxStringLength),opts)+trailer}return wrapQuotes($replace.call($replace.call(str,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte),"single",opts)}function lowbyte(c){var n=c.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return x?"\\"+x:"\\x"+(n<16?"0":"")+$toUpperCase.call(n.toString(16))}function markBoxed(str){return"Object("+str+")"}function weakCollectionOf(type){return type+" { ? }"}function collectionOf(type,size,entries,indent){return type+" ("+size+") {"+(indent?indentedJoin(entries,indent):$join.call(entries,", "))+"}"}function indentedJoin(xs,indent){if(0===xs.length)return"";var lineJoiner="\n"+indent.prev+indent.base;return lineJoiner+$join.call(xs,","+lineJoiner)+"\n"+indent.prev}function arrObjKeys(obj,inspect){var isArr=isArray(obj),xs=[];if(isArr){xs.length=obj.length;for(var i=0;i<obj.length;i++)xs[i]=has(obj,i)?inspect(obj[i],obj):""}var symMap,syms="function"==typeof gOPS?gOPS(obj):[];if(hasShammedSymbols){symMap={};for(var k=0;k<syms.length;k++)symMap["$"+syms[k]]=syms[k]}for(var key in obj)has(obj,key)&&(isArr&&String(Number(key))===key&&key<obj.length||hasShammedSymbols&&symMap["$"+key]instanceof Symbol||($test.call(/[^\w$]/,key)?xs.push(inspect(key,obj)+": "+inspect(obj[key],obj)):xs.push(key+": "+inspect(obj[key],obj))));if("function"==typeof gOPS)for(var j=0;j<syms.length;j++)isEnumerable.call(obj,syms[j])&&xs.push("["+inspect(syms[j])+"]: "+inspect(obj[syms[j]],obj));return xs}},"../../node_modules/object-keys/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__("../../node_modules/object-keys/isArguments.js"),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function keys(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},"../../node_modules/object-keys/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__("../../node_modules/object-keys/isArguments.js"),origKeys=Object.keys,keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__("../../node_modules/object-keys/implementation.js"),originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);keysWorksWithArguments||(Object.keys=function keys(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)})}else Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},"../../node_modules/object-keys/isArguments.js":module=>{"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},"../../node_modules/object.entries/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),$push=callBound("Array.prototype.push");module.exports=function entries(O){var obj=RequireObjectCoercible(O),entrys=[];for(var key in obj)$isEnumerable(obj,key)&&$push(entrys,[key,obj[key]]);return entrys}},"../../node_modules/object.entries/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/object.entries/implementation.js");module.exports=function getPolyfill(){return"function"==typeof Object.entries?Object.entries:implementation}},"../../node_modules/object.entries/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("../../node_modules/object.entries/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{entries:polyfill},{entries:function testEntries(){return Object.entries!==polyfill}}),polyfill}},"../../node_modules/object.fromentries/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/object.fromentries/shim.js")()},"../../node_modules/object.fromentries/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var AddEntriesFromIterable=__webpack_require__("../../node_modules/es-abstract/2021/AddEntriesFromIterable.js"),CreateDataPropertyOrThrow=__webpack_require__("../../node_modules/es-abstract/2021/CreateDataPropertyOrThrow.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),ToPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/ToPropertyKey.js"),adder=function addDataProperty(key,value){var propertyKey=ToPropertyKey(key);CreateDataPropertyOrThrow(this,propertyKey,value)};module.exports=function fromEntries(iterable){return RequireObjectCoercible(iterable),AddEntriesFromIterable({},iterable,adder)}},"../../node_modules/object.fromentries/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/object.fromentries/implementation.js");module.exports=function getPolyfill(){return"function"==typeof Object.fromEntries?Object.fromEntries:implementation}},"../../node_modules/object.fromentries/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("../../node_modules/object.fromentries/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{fromEntries:polyfill},{fromEntries:function testEntries(){return Object.fromEntries!==polyfill}}),polyfill}},"../../node_modules/object.getownpropertydescriptors/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var CreateDataProperty=__webpack_require__("../../node_modules/es-abstract/2021/CreateDataProperty.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),reduce=__webpack_require__("../../node_modules/array.prototype.reduce/index.js"),$gOPD=Object.getOwnPropertyDescriptor,$getOwnNames=Object.getOwnPropertyNames,$getSymbols=Object.getOwnPropertySymbols,$concat=callBound("Array.prototype.concat"),getAll=$getSymbols?function(obj){return $concat($getOwnNames(obj),$getSymbols(obj))}:$getOwnNames,isES5=IsCallable($gOPD)&&IsCallable($getOwnNames);module.exports=function getOwnPropertyDescriptors(value){if(RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ToObject(value);return reduce(getAll(O),(function(acc,key){var descriptor=$gOPD(O,key);return void 0!==descriptor&&CreateDataProperty(acc,key,descriptor),acc}),{})}},"../../node_modules/object.getownpropertydescriptors/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/object.getownpropertydescriptors/implementation.js");module.exports=function getPolyfill(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},"../../node_modules/object.getownpropertydescriptors/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("../../node_modules/object.getownpropertydescriptors/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimGetOwnPropertyDescriptors(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},"../../node_modules/object.values/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),$push=callBound("Array.prototype.push");module.exports=function values(O){var obj=RequireObjectCoercible(O),vals=[];for(var key in obj)$isEnumerable(obj,key)&&$push(vals,obj[key]);return vals}},"../../node_modules/object.values/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/object.values/implementation.js");module.exports=function getPolyfill(){return"function"==typeof Object.values?Object.values:implementation}},"../../node_modules/object.values/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("../../node_modules/object.values/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimValues(){var polyfill=getPolyfill();return define(Object,{values:polyfill},{values:function testValues(){return Object.values!==polyfill}}),polyfill}},"../../node_modules/process/browser.js":module=>{var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},"../../node_modules/promise.allsettled/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/promise.allsettled/shim.js")()},"../../node_modules/promise.allsettled/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/promise.allsettled/requirePromise.js")();var PromiseResolve=__webpack_require__("../../node_modules/es-abstract/2021/PromiseResolve.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),iterate=__webpack_require__("../../node_modules/iterate-value/index.js"),map=__webpack_require__("../../node_modules/array.prototype.map/index.js"),GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBind=__webpack_require__("../../node_modules/call-bind/index.js"),all=callBind(GetIntrinsic("%Promise.all%")),reject=callBind(GetIntrinsic("%Promise.reject%"));module.exports=function allSettled(iterable){var C=this;if("Object"!==Type(C))throw new TypeError("`this` value must be an object");var values=iterate(iterable);return all(C,map(values,(function(item){var itemPromise=PromiseResolve(C,item);try{return itemPromise.then((function(value){return{status:"fulfilled",value}}),(function(reason){return{status:"rejected",reason}}))}catch(e){return reject(C,e)}})))}},"../../node_modules/promise.allsettled/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var requirePromise=__webpack_require__("../../node_modules/promise.allsettled/requirePromise.js"),implementation=__webpack_require__("../../node_modules/promise.allsettled/implementation.js");module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.allSettled?Promise.allSettled:implementation}},"../../node_modules/promise.allsettled/requirePromise.js":module=>{"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.")}},"../../node_modules/promise.allsettled/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var requirePromise=__webpack_require__("../../node_modules/promise.allsettled/requirePromise.js"),getPolyfill=__webpack_require__("../../node_modules/promise.allsettled/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimAllSettled(){requirePromise();var polyfill=getPolyfill();return define(Promise,{allSettled:polyfill},{allSettled:function testAllSettled(){return Promise.allSettled!==polyfill}}),polyfill}},"../../node_modules/promise.prototype.finally/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/promise.prototype.finally/shim.js")()},"../../node_modules/promise.prototype.finally/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/promise.prototype.finally/requirePromise.js")();var IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),SpeciesConstructor=__webpack_require__("../../node_modules/es-abstract/2021/SpeciesConstructor.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),promiseResolve=function PromiseResolve(C,value){return new C((function(resolve){resolve(value)}))},OriginalPromise=Promise,promiseFinally=function finally_(onFinally){if("Object"!==Type(this))throw new TypeError("receiver is not an Object");var C=SpeciesConstructor(this,OriginalPromise),thenFinally=onFinally,catchFinally=onFinally;return IsCallable(onFinally)&&(thenFinally=function CreateThenFinally(C,onFinally){return function(value){var result=onFinally();return promiseResolve(C,result).then((function(){return value}))}}(C,onFinally),catchFinally=function CreateCatchFinally(C,onFinally){return function(reason){var result=onFinally();return promiseResolve(C,result).then((function(){throw reason}))}}(C,onFinally)),this.then(thenFinally,catchFinally)};if(Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(promiseFinally,"name");descriptor&&descriptor.configurable&&Object.defineProperty(promiseFinally,"name",{configurable:!0,value:"finally"})}module.exports=promiseFinally},"../../node_modules/promise.prototype.finally/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var requirePromise=__webpack_require__("../../node_modules/promise.prototype.finally/requirePromise.js"),implementation=__webpack_require__("../../node_modules/promise.prototype.finally/implementation.js");module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:implementation}},"../../node_modules/promise.prototype.finally/requirePromise.js":module=>{"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},"../../node_modules/promise.prototype.finally/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var requirePromise=__webpack_require__("../../node_modules/promise.prototype.finally/requirePromise.js"),getPolyfill=__webpack_require__("../../node_modules/promise.prototype.finally/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimPromiseFinally(){requirePromise();var polyfill=getPolyfill();return define(Promise.prototype,{finally:polyfill},{finally:function testFinally(){return Promise.prototype.finally!==polyfill}}),polyfill}},"../../node_modules/qs/lib/formats.js":module=>{"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g,Format_RFC1738="RFC1738",Format_RFC3986="RFC3986";module.exports={default:Format_RFC3986,formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return String(value)}},RFC1738:Format_RFC1738,RFC3986:Format_RFC3986}},"../../node_modules/qs/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var stringify=__webpack_require__("../../node_modules/qs/lib/stringify.js"),parse=__webpack_require__("../../node_modules/qs/lib/parse.js"),formats=__webpack_require__("../../node_modules/qs/lib/formats.js");module.exports={formats,parse,stringify}},"../../node_modules/qs/lib/parse.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var utils=__webpack_require__("../../node_modules/qs/lib/utils.js"),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,(function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))}))},parseArrayValue=function(val,options){return val&&"string"==typeof val&&options.comma&&val.indexOf(",")>-1?val.split(","):val},parseKeys=function parseQueryStringKeys(givenKey,val,options,valuesParsed){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=options.depth>0&&/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;options.depth>0&&null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options,valuesParsed){for(var leaf=valuesParsed?val:parseArrayValue(val,options),i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:"__proto__"!==cleanRoot&&(obj[cleanRoot]=leaf):obj={0:leaf}}leaf=obj}return leaf}(keys,val,options,valuesParsed)}};module.exports=function(str,opts){var options=function normalizeParseOptions(opts){if(!opts)return defaults;if(null!==opts.decoder&&void 0!==opts.decoder&&"function"!=typeof opts.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var charset=void 0===opts.charset?defaults.charset:opts.charset;return{allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,allowPrototypes:"boolean"==typeof opts.allowPrototypes?opts.allowPrototypes:defaults.allowPrototypes,allowSparse:"boolean"==typeof opts.allowSparse?opts.allowSparse:defaults.allowSparse,arrayLimit:"number"==typeof opts.arrayLimit?opts.arrayLimit:defaults.arrayLimit,charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof opts.comma?opts.comma:defaults.comma,decoder:"function"==typeof opts.decoder?opts.decoder:defaults.decoder,delimiter:"string"==typeof opts.delimiter||utils.isRegExp(opts.delimiter)?opts.delimiter:defaults.delimiter,depth:"number"==typeof opts.depth||!1===opts.depth?+opts.depth:defaults.depth,ignoreQueryPrefix:!0===opts.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof opts.interpretNumericEntities?opts.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof opts.parameterLimit?opts.parameterLimit:defaults.parameterLimit,parseArrays:!1!==opts.parseArrays,plainObjects:"boolean"==typeof opts.plainObjects?opts.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);if(""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function parseQueryStringValues(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===parts[i]?charset="utf-8":"utf8=%26%2310003%3B"===parts[i]&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder,charset,"key"),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset,"key"),val=utils.maybeMap(parseArrayValue(part.slice(pos+1),options),(function(encodedVal){return options.decoder(encodedVal,defaults.decoder,charset,"value")}))),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),part.indexOf("[]=")>-1&&(val=isArray(val)?[val]:val),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options,"string"==typeof str);obj=utils.merge(obj,newObj,options)}return!0===options.allowSparse?obj:utils.compact(obj)}},"../../node_modules/qs/lib/stringify.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getSideChannel=__webpack_require__("../../node_modules/side-channel/index.js"),utils=__webpack_require__("../../node_modules/qs/lib/utils.js"),formats=__webpack_require__("../../node_modules/qs/lib/formats.js"),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},comma:"comma",indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}},isArray=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},sentinel={},stringify=function stringify(object,prefix,generateArrayPrefix,commaRoundTrip,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,format,formatter,encodeValuesOnly,charset,sideChannel){for(var obj=object,tmpSc=sideChannel,step=0,findFlag=!1;void 0!==(tmpSc=tmpSc.get(sentinel))&&!findFlag;){var pos=tmpSc.get(object);if(step+=1,void 0!==pos){if(pos===step)throw new RangeError("Cyclic object value");findFlag=!0}void 0===tmpSc.get(sentinel)&&(step=0)}if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date?obj=serializeDate(obj):"comma"===generateArrayPrefix&&isArray(obj)&&(obj=utils.maybeMap(obj,(function(value){return value instanceof Date?serializeDate(value):value}))),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset,"key",format):prefix;obj=""}if(function isNonNullishPrimitive(v){return"string"==typeof v||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v}(obj)||utils.isBuffer(obj)){if(encoder){var keyValue=encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset,"key",format);if("comma"===generateArrayPrefix&&encodeValuesOnly){for(var valuesArray=split.call(String(obj),","),valuesJoined="",i=0;i<valuesArray.length;++i)valuesJoined+=(0===i?"":",")+formatter(encoder(valuesArray[i],defaults.encoder,charset,"value",format));return[formatter(keyValue)+(commaRoundTrip&&isArray(obj)&&1===valuesArray.length?"[]":"")+"="+valuesJoined]}return[formatter(keyValue)+"="+formatter(encoder(obj,defaults.encoder,charset,"value",format))]}return[formatter(prefix)+"="+formatter(String(obj))]}var objKeys,values=[];if(void 0===obj)return values;if("comma"===generateArrayPrefix&&isArray(obj))objKeys=[{value:obj.length>0?obj.join(",")||null:void 0}];else if(isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var adjustedPrefix=commaRoundTrip&&isArray(obj)&&1===obj.length?prefix+"[]":prefix,j=0;j<objKeys.length;++j){var key=objKeys[j],value="object"==typeof key&&void 0!==key.value?key.value:obj[key];if(!skipNulls||null!==value){var keyPrefix=isArray(obj)?"function"==typeof generateArrayPrefix?generateArrayPrefix(adjustedPrefix,key):adjustedPrefix:adjustedPrefix+(allowDots?"."+key:"["+key+"]");sideChannel.set(object,step);var valueSideChannel=getSideChannel();valueSideChannel.set(sentinel,sideChannel),pushToArray(values,stringify(value,keyPrefix,generateArrayPrefix,commaRoundTrip,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,format,formatter,encodeValuesOnly,charset,valueSideChannel))}}return values};module.exports=function(object,opts){var objKeys,obj=object,options=function normalizeStringifyOptions(opts){if(!opts)return defaults;if(null!==opts.encoder&&void 0!==opts.encoder&&"function"!=typeof opts.encoder)throw new TypeError("Encoder has to be a function.");var charset=opts.charset||defaults.charset;if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var format=formats.default;if(void 0!==opts.format){if(!has.call(formats.formatters,opts.format))throw new TypeError("Unknown format option provided.");format=opts.format}var formatter=formats.formatters[format],filter=defaults.filter;return("function"==typeof opts.filter||isArray(opts.filter))&&(filter=opts.filter),{addQueryPrefix:"boolean"==typeof opts.addQueryPrefix?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===opts.delimiter?defaults.delimiter:opts.delimiter,encode:"boolean"==typeof opts.encode?opts.encode:defaults.encode,encoder:"function"==typeof opts.encoder?opts.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof opts.encodeValuesOnly?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter,format,formatter,serializeDate:"function"==typeof opts.serializeDate?opts.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof opts.skipNulls?opts.skipNulls:defaults.skipNulls,sort:"function"==typeof opts.sort?opts.sort:null,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);"function"==typeof options.filter?obj=(0,options.filter)("",obj):isArray(options.filter)&&(objKeys=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=opts&&opts.arrayFormat in arrayPrefixGenerators?opts.arrayFormat:opts&&"indices"in opts?opts.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];if(opts&&"commaRoundTrip"in opts&&"boolean"!=typeof opts.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var commaRoundTrip="comma"===generateArrayPrefix&&opts&&opts.commaRoundTrip;objKeys||(objKeys=Object.keys(obj)),options.sort&&objKeys.sort(options.sort);for(var sideChannel=getSideChannel(),i=0;i<objKeys.length;++i){var key=objKeys[i];options.skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,commaRoundTrip,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:null,options.filter,options.sort,options.allowDots,options.serializeDate,options.format,options.formatter,options.encodeValuesOnly,options.charset,sideChannel))}var joined=keys.join(options.delimiter),prefix=!0===options.addQueryPrefix?"?":"";return options.charsetSentinel&&("iso-8859-1"===options.charset?prefix+="utf8=%26%2310003%3B&":prefix+="utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},"../../node_modules/qs/lib/utils.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var formats=__webpack_require__("../../node_modules/qs/lib/formats.js"),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function arrayToObject(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject,assign:function assignSingleSource(target,source){return Object.keys(source).reduce((function(acc,key){return acc[key]=source[key],acc}),target)},combine:function combine(a,b){return[].concat(a,b)},compact:function compact(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj,prop:key}),refs.push(val))}return function compactQueue(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}}(queue),value},decode:function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode:function encode(str,defaultEncoder,charset,kind,format){if(0===str.length)return str;var string=str;if("symbol"==typeof str?string=Symbol.prototype.toString.call(str):"string"!=typeof str&&(string=String(str)),"iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,(function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"}));for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||format===formats.RFC1738&&(40===c||41===c)?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function isBuffer(obj){return!(!obj||"object"!=typeof obj)&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function isRegExp(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},maybeMap:function maybeMap(val,fn){if(isArray(val)){for(var mapped=[],i=0;i<val.length;i+=1)mapped.push(fn(val[i]));return mapped}return fn(val)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(isArray(target))target.push(source);else{if(!target||"object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if(!target||"object"!=typeof target)return[target].concat(source);var mergeTarget=target;return isArray(target)&&!isArray(source)&&(mergeTarget=arrayToObject(target,options)),isArray(target)&&isArray(source)?(source.forEach((function(item,i){if(has.call(target,i)){var targetItem=target[i];targetItem&&"object"==typeof targetItem&&item&&"object"==typeof item?target[i]=merge(targetItem,item,options):target.push(item)}else target[i]=item})),target):Object.keys(source).reduce((function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc}),mergeTarget)}}},"../../node_modules/react/cjs/react.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var l=__webpack_require__("../../node_modules/object-assign/index.js"),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,z=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,B="function"==typeof Symbol&&Symbol.iterator;function C(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a,this.context=b,this.refs=E,this.updater=c||D}function G(){}function H(a,b,c){this.props=a,this.context=b,this.refs=E,this.updater=c||D}F.prototype.isReactComponent={},F.prototype.setState=function(a,b){if("object"!=typeof a&&"function"!=typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,"setState")},F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},G.prototype=F.prototype;var I=H.prototype=new G;I.constructor=H,l(I,F.prototype),I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=""+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}function O(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var P=/\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();return d.result=a,d.keyPrefix=b,d.func=c,d.context=e,d.count=0,d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}function S(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>Q.length&&Q.push(a)}function T(a,b,c,e){var d=typeof a;"undefined"!==d&&"boolean"!==d||(a=null);var g=!1;if(null===a)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,""===b?"."+U(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var k=0;k<a.length;k++){var f=b+U(d=a[k],k);g+=T(d,f,c,e)}else if(null===a||"object"!=typeof a?f=null:f="function"==typeof(f=B&&a[B]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),k=0;!(d=a.next()).done;)g+=T(d=d.value,f=b+U(d,k++),c,e);else if("object"===d)throw c=""+a,Error(C(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return g}function V(a,b,c){return null==a?0:T(a,"",b,c)}function U(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function escape(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,(function(a){return b[a]}))}(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}function aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?X(a,e,c,(function(a){return a})):null!=a&&(O(a)&&(a=function N(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,d+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+c)),e.push(a))}function X(a,b,c,e,d){var g="";null!=c&&(g=(""+c).replace(P,"$&/")+"/"),V(a,aa,b=R(b,g,e,d)),S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}var ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];return X(a,e,null,b,c),e},forEach:function(a,b,c){if(null==a)return a;V(a,W,b=R(null,null,b,c)),S(b)},count:function(a){return V(a,(function(){return null}),null)},toArray:function(a){var b=[];return X(a,b,null,(function(a){return a})),b},only:function(a){if(!O(a))throw Error(C(143));return a}},exports.Component=F,exports.Fragment=r,exports.Profiler=u,exports.PureComponent=H,exports.StrictMode=t,exports.Suspense=y,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba,exports.cloneElement=function(a,b,c){if(null==a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){if(void 0!==b.ref&&(g=b.ref,k=J.current),void 0!==b.key&&(d=""+b.key),a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,key:d,ref:g,props:e,_owner:k}},exports.createContext=function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},exports.createElement=M,exports.createFactory=function(a){var b=M.bind(null,a);return b.type=a,b},exports.createRef=function(){return{current:null}},exports.forwardRef=function(a){return{$$typeof:x,render:a}},exports.isValidElement=O,exports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}},exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}},exports.useCallback=function(a,b){return Z().useCallback(a,b)},exports.useContext=function(a,b){return Z().useContext(a,b)},exports.useDebugValue=function(){},exports.useEffect=function(a,b){return Z().useEffect(a,b)},exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)},exports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)},exports.useMemo=function(a,b){return Z().useMemo(a,b)},exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)},exports.useRef=function(a){return Z().useRef(a)},exports.useState=function(a){return Z().useState(a)},exports.version="16.14.0"},"../../node_modules/react/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("../../node_modules/react/cjs/react.production.min.js")},"../../node_modules/regenerator-runtime/runtime.js":module=>{var runtime=function(exports){"use strict";var Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function invoke(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(undefined===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}},exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}},"../../node_modules/regexp.prototype.flags/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var functionsHaveConfigurableNames=__webpack_require__("../../node_modules/functions-have-names/index.js").functionsHaveConfigurableNames(),$Object=Object,$TypeError=TypeError;module.exports=function flags(){if(null!=this&&this!==$Object(this))throw new $TypeError("RegExp.prototype.flags getter called on non-object");var result="";return this.hasIndices&&(result+="d"),this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result},functionsHaveConfigurableNames&&Object.defineProperty&&Object.defineProperty(module.exports,"name",{value:"get flags"})},"../../node_modules/regexp.prototype.flags/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),callBind=__webpack_require__("../../node_modules/call-bind/index.js"),implementation=__webpack_require__("../../node_modules/regexp.prototype.flags/implementation.js"),getPolyfill=__webpack_require__("../../node_modules/regexp.prototype.flags/polyfill.js"),shim=__webpack_require__("../../node_modules/regexp.prototype.flags/shim.js"),flagsBound=callBind(getPolyfill());define(flagsBound,{getPolyfill,implementation,shim}),module.exports=flagsBound},"../../node_modules/regexp.prototype.flags/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/regexp.prototype.flags/implementation.js"),supportsDescriptors=__webpack_require__("../../node_modules/define-properties/index.js").supportsDescriptors,$gOPD=Object.getOwnPropertyDescriptor;module.exports=function getPolyfill(){if(supportsDescriptors&&"gim"===/a/gim.flags){var descriptor=$gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var calls="",o={};if(Object.defineProperty(o,"hasIndices",{get:function(){calls+="d"}}),Object.defineProperty(o,"sticky",{get:function(){calls+="y"}}),"dy"===calls)return descriptor.get}}return implementation}},"../../node_modules/regexp.prototype.flags/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var supportsDescriptors=__webpack_require__("../../node_modules/define-properties/index.js").supportsDescriptors,getPolyfill=__webpack_require__("../../node_modules/regexp.prototype.flags/polyfill.js"),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function shimFlags(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},"../../node_modules/side-channel/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),inspect=__webpack_require__("../../node_modules/object-inspect/index.js"),$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(list,key){for(var curr,prev=list;null!==(curr=prev.next);prev=curr)if(curr.key===key)return prev.next=curr.next,curr.next=list.next,list.next=curr,curr};module.exports=function getSideChannel(){var $wm,$m,$o,channel={assert:function(key){if(!channel.has(key))throw new $TypeError("Side channel does not contain "+inspect(key))},get:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapGet($wm,key)}else if($Map){if($m)return $mapGet($m,key)}else if($o)return function(objects,key){var node=listGetNode(objects,key);return node&&node.value}($o,key)},has:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapHas($wm,key)}else if($Map){if($m)return $mapHas($m,key)}else if($o)return function(objects,key){return!!listGetNode(objects,key)}($o,key);return!1},set:function(key,value){$WeakMap&&key&&("object"==typeof key||"function"==typeof key)?($wm||($wm=new $WeakMap),$weakMapSet($wm,key,value)):$Map?($m||($m=new $Map),$mapSet($m,key,value)):($o||($o={key:{},next:null}),function(objects,key,value){var node=listGetNode(objects,key);node?node.value=value:objects.next={key,next:objects.next,value}}($o,key,value))}};return channel}},"../../node_modules/stable/stable.js":function(module){module.exports=function(){"use strict";var stable=function(arr,comp){return exec(arr.slice(),comp)};function exec(arr,comp){"function"!=typeof comp&&(comp=function(a,b){return String(a).localeCompare(b)});var len=arr.length;if(len<=1)return arr;for(var buffer=new Array(len),chk=1;chk<len;chk*=2){pass(arr,comp,chk,buffer);var tmp=arr;arr=buffer,buffer=tmp}return arr}stable.inplace=function(arr,comp){var result=exec(arr,comp);return result!==arr&&pass(result,null,arr.length,arr),arr};var pass=function(arr,comp,chk,result){var l,r,e,li,ri,len=arr.length,i=0,dbl=2*chk;for(l=0;l<len;l+=dbl)for(e=(r=l+chk)+chk,r>len&&(r=len),e>len&&(e=len),li=l,ri=r;;)if(li<r&&ri<e)comp(arr[li],arr[ri])<=0?result[i++]=arr[li++]:result[i++]=arr[ri++];else if(li<r)result[i++]=arr[li++];else{if(!(ri<e))break;result[i++]=arr[ri++]}};return stable}()},"../../node_modules/string.prototype.matchall/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/string.prototype.matchall/shim.js")()},"../../node_modules/string.prototype.matchall/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),GetMethod=__webpack_require__("../../node_modules/es-abstract/2021/GetMethod.js"),IsRegExp=__webpack_require__("../../node_modules/es-abstract/2021/IsRegExp.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),flagsGetter=__webpack_require__("../../node_modules/regexp.prototype.flags/index.js"),$indexOf=callBound("String.prototype.indexOf"),regexpMatchAllPolyfill=__webpack_require__("../../node_modules/string.prototype.matchall/polyfill-regexp-matchall.js"),getMatcher=function getMatcher(regexp){var matcherPolyfill=regexpMatchAllPolyfill();if(hasSymbols&&"symbol"==typeof Symbol.matchAll){var matcher=GetMethod(regexp,Symbol.matchAll);return matcher===RegExp.prototype[Symbol.matchAll]&&matcher!==matcherPolyfill?matcherPolyfill:matcher}if(IsRegExp(regexp))return matcherPolyfill};module.exports=function matchAll(regexp){var O=RequireObjectCoercible(this);if(null!=regexp){if(IsRegExp(regexp)){var flags="flags"in regexp?Get(regexp,"flags"):flagsGetter(regexp);if(RequireObjectCoercible(flags),$indexOf(ToString(flags),"g")<0)throw new TypeError("matchAll requires a global regular expression")}var matcher=getMatcher(regexp);if(void 0!==matcher)return Call(matcher,regexp,[O])}var S=ToString(O),rx=new RegExp(regexp,"g");return Call(getMatcher(rx),rx,[S])}},"../../node_modules/string.prototype.matchall/polyfill-regexp-matchall.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),regexpMatchAll=__webpack_require__("../../node_modules/string.prototype.matchall/regexp-matchall.js");module.exports=function getRegExpMatchAllPolyfill(){return hasSymbols&&"symbol"==typeof Symbol.matchAll&&"function"==typeof RegExp.prototype[Symbol.matchAll]?RegExp.prototype[Symbol.matchAll]:regexpMatchAll}},"../../node_modules/string.prototype.matchall/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/string.prototype.matchall/implementation.js");module.exports=function getPolyfill(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch(e){return String.prototype.matchAll}return implementation}},"../../node_modules/string.prototype.matchall/regexp-matchall.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var CreateRegExpStringIterator=__webpack_require__("../../node_modules/es-abstract/2021/CreateRegExpStringIterator.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),Set=__webpack_require__("../../node_modules/es-abstract/2021/Set.js"),SpeciesConstructor=__webpack_require__("../../node_modules/es-abstract/2021/SpeciesConstructor.js"),ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),flagsGetter=__webpack_require__("../../node_modules/regexp.prototype.flags/index.js"),$indexOf=__webpack_require__("../../node_modules/call-bind/callBound.js")("String.prototype.indexOf"),OrigRegExp=RegExp,supportsConstructingWithFlags="flags"in RegExp.prototype,regexMatchAll=function SymbolMatchAll(string){var R=this;if("Object"!==Type(R))throw new TypeError('"this" value must be an Object');var S=ToString(string),tmp=function constructRegex(C,R){var flags="flags"in R?Get(R,"flags"):ToString(flagsGetter(R));return{flags,matcher:new C(supportsConstructingWithFlags&&"string"==typeof flags?R:C===OrigRegExp?R.source:R,flags)}}(SpeciesConstructor(R,OrigRegExp),R),flags=tmp.flags,matcher=tmp.matcher,lastIndex=ToLength(Get(R,"lastIndex"));Set(matcher,"lastIndex",lastIndex,!0);var global=$indexOf(flags,"g")>-1,fullUnicode=$indexOf(flags,"u")>-1;return CreateRegExpStringIterator(matcher,S,global,fullUnicode)},defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;if(defineP&&gOPD){var desc=gOPD(regexMatchAll,"name");desc&&desc.configurable&&defineP(regexMatchAll,"name",{value:"[Symbol.matchAll]"})}module.exports=regexMatchAll},"../../node_modules/string.prototype.matchall/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__("../../node_modules/define-properties/index.js"),hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),getPolyfill=__webpack_require__("../../node_modules/string.prototype.matchall/polyfill.js"),regexpMatchAllPolyfill=__webpack_require__("../../node_modules/string.prototype.matchall/polyfill-regexp-matchall.js"),defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;module.exports=function shimMatchAll(){var polyfill=getPolyfill();if(define(String.prototype,{matchAll:polyfill},{matchAll:function(){return String.prototype.matchAll!==polyfill}}),hasSymbols){var symbol=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(define(Symbol,{matchAll:symbol},{matchAll:function(){return Symbol.matchAll!==symbol}}),defineP&&gOPD){var desc=gOPD(Symbol,symbol);desc&&!desc.configurable||defineP(Symbol,symbol,{configurable:!1,enumerable:!1,value:symbol,writable:!1})}var regexpMatchAll=regexpMatchAllPolyfill(),func={};func[symbol]=regexpMatchAll;var predicate={};predicate[symbol]=function(){return RegExp.prototype[symbol]!==regexpMatchAll},define(RegExp.prototype,func,predicate)}return polyfill}},"../../node_modules/string.prototype.padend/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),$slice=__webpack_require__("../../node_modules/call-bind/callBound.js")("String.prototype.slice");module.exports=function padEnd(maxLength){var fillString,O=RequireObjectCoercible(this),S=ToString(O),stringLength=ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?$slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?$slice(filler,0,fillLen):filler;return S+truncatedStringFiller}},"../../node_modules/string.prototype.padend/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/string.prototype.padend/implementation.js");module.exports=function getPolyfill(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:implementation}},"../../node_modules/string.prototype.padend/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("../../node_modules/string.prototype.padend/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimPadEnd(){var polyfill=getPolyfill();return define(String.prototype,{padEnd:polyfill},{padEnd:function testPadEnd(){return String.prototype.padEnd!==polyfill}}),polyfill}},"../../node_modules/string.prototype.padstart/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js"),$slice=__webpack_require__("../../node_modules/call-bind/callBound.js")("String.prototype.slice");module.exports=function padStart(maxLength){var fillString,O=RequireObjectCoercible(this),S=ToString(O),stringLength=ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?$slice(filler,0,remainingCodeUnits):filler}var truncatedStringFiller=filler.length>fillLen?$slice(filler,0,fillLen):filler;return truncatedStringFiller+S}},"../../node_modules/string.prototype.padstart/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__("../../node_modules/string.prototype.padstart/implementation.js");module.exports=function getPolyfill(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:implementation}},"../../node_modules/string.prototype.padstart/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__("../../node_modules/string.prototype.padstart/polyfill.js"),define=__webpack_require__("../../node_modules/define-properties/index.js");module.exports=function shimPadStart(){var polyfill=getPolyfill();return define(String.prototype,{padStart:polyfill},{padStart:function testPadStart(){return String.prototype.padStart!==polyfill}}),polyfill}},"../../node_modules/symbol.prototype.description/auto.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";__webpack_require__("../../node_modules/symbol.prototype.description/shim.js")()},"../../node_modules/symbol.prototype.description/implementation.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getSymbolDescription=__webpack_require__("../../node_modules/get-symbol-description/index.js");module.exports=function description(){return getSymbolDescription(this)}},"../../node_modules/symbol.prototype.description/polyfill.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),implementation=__webpack_require__("../../node_modules/symbol.prototype.description/implementation.js"),gOPD=Object.getOwnPropertyDescriptor;module.exports=function descriptionPolyfill(){if(!hasSymbols||"function"!=typeof gOPD)return null;var desc=gOPD(Symbol.prototype,"description");if(!desc||"function"!=typeof desc.get)return implementation;var emptySymbolDesc=desc.get.call(Symbol());return(void 0===emptySymbolDesc||""===emptySymbolDesc)&&"a"===desc.get.call(Symbol("a"))?desc.get:implementation}},"../../node_modules/symbol.prototype.description/shim.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),polyfill=__webpack_require__("../../node_modules/symbol.prototype.description/polyfill.js"),getInferredName=__webpack_require__("../../node_modules/get-symbol-description/getInferredName.js"),gOPD=Object.getOwnPropertyDescriptor,gOPDs=__webpack_require__("../../node_modules/object.getownpropertydescriptors/polyfill.js")(),dP=Object.defineProperty,dPs=Object.defineProperties,setProto=Object.setPrototypeOf,define=function defineGetter(getter){dP(Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:getter})};module.exports=function shimSymbolDescription(){if(!hasSymbols)return!1;var desc=gOPD(Symbol.prototype,"description"),getter=polyfill(),isMissing=!desc||"function"!=typeof desc.get,isBroken=!isMissing&&(void 0!==Symbol().description||""!==Symbol("").description);if(isMissing||isBroken){if(!getInferredName)return function shimGlobalSymbol(getter){var origSym=Function.apply.bind(Symbol),emptyStrings=Object.create?Object.create(null):{},SymNew=function Symbol(){var sym=origSym(this,arguments);return arguments.length>0&&""===arguments[0]&&(emptyStrings[sym]=!0),sym};SymNew.prototype=Symbol.prototype,setProto(SymNew,Symbol);var props=gOPDs(Symbol);delete props.length,delete props.arguments,delete props.caller,dPs(SymNew,props),Symbol=SymNew;var boundGetter=Function.call.bind(getter),wrappedGetter=function description(){var symbolDescription=boundGetter(this);return emptyStrings[this]?"":symbolDescription};return define(wrappedGetter),wrappedGetter}(getter);define(getter)}return getter}},"../../node_modules/synchronous-promise/index.js":module=>{"use strict";function makeArrayFrom(obj){return Array.prototype.slice.apply(obj)}function SynchronousPromise(handler){this.status="pending",this._continuations=[],this._parent=null,this._paused=!1,handler&&handler.call(this,this._continueWith.bind(this),this._failWith.bind(this))}function looksLikeAPromise(obj){return obj&&"function"==typeof obj.then}function passThrough(value){return value}function createAggregateErrorFrom(errors){return"undefined"!=typeof window&&"AggregateError"in window?new window.AggregateError(errors):{errors}}if(SynchronousPromise.prototype={then:function(nextFn,catchFn){var next=SynchronousPromise.unresolved()._setParent(this);if(this._isRejected()){if(this._paused)return this._continuations.push({promise:next,nextFn,catchFn}),next;if(catchFn)try{var catchResult=catchFn(this._error);return looksLikeAPromise(catchResult)?(this._chainPromiseData(catchResult,next),next):SynchronousPromise.resolve(catchResult)._setParent(this)}catch(e){return SynchronousPromise.reject(e)._setParent(this)}return SynchronousPromise.reject(this._error)._setParent(this)}return this._continuations.push({promise:next,nextFn,catchFn}),this._runResolutions(),next},catch:function(handler){if(this._isResolved())return SynchronousPromise.resolve(this._data)._setParent(this);var next=SynchronousPromise.unresolved()._setParent(this);return this._continuations.push({promise:next,catchFn:handler}),this._runRejections(),next},finally:function(callback){var ran=!1;function runFinally(result,err){if(!ran){ran=!0,callback||(callback=passThrough);var callbackResult=callback(result);return looksLikeAPromise(callbackResult)?callbackResult.then((function(){if(err)throw err;return result})):result}}return this.then((function(result){return runFinally(result)})).catch((function(err){return runFinally(null,err)}))},pause:function(){return this._paused=!0,this},resume:function(){var firstPaused=this._findFirstPaused();return firstPaused&&(firstPaused._paused=!1,firstPaused._runResolutions(),firstPaused._runRejections()),this},_findAncestry:function(){return this._continuations.reduce((function(acc,cur){if(cur.promise){var node={promise:cur.promise,children:cur.promise._findAncestry()};acc.push(node)}return acc}),[])},_setParent:function(parent){if(this._parent)throw new Error("parent already set");return this._parent=parent,this},_continueWith:function(data){var firstPending=this._findFirstPending();firstPending&&(firstPending._data=data,firstPending._setResolved())},_findFirstPending:function(){return this._findFirstAncestor((function(test){return test._isPending&&test._isPending()}))},_findFirstPaused:function(){return this._findFirstAncestor((function(test){return test._paused}))},_findFirstAncestor:function(matching){for(var result,test=this;test;)matching(test)&&(result=test),test=test._parent;return result},_failWith:function(error){var firstRejected=this._findFirstPending();firstRejected&&(firstRejected._error=error,firstRejected._setRejected())},_takeContinuations:function(){return this._continuations.splice(0,this._continuations.length)},_runRejections:function(){if(!this._paused&&this._isRejected()){var error=this._error,continuations=this._takeContinuations(),self=this;continuations.forEach((function(cont){if(cont.catchFn)try{var catchResult=cont.catchFn(error);self._handleUserFunctionResult(catchResult,cont.promise)}catch(e){cont.promise.reject(e)}else cont.promise.reject(error)}))}},_runResolutions:function(){if(!this._paused&&this._isResolved()&&!this._isPending()){var continuations=this._takeContinuations();if(looksLikeAPromise(this._data))return this._handleWhenResolvedDataIsPromise(this._data);var data=this._data,self=this;continuations.forEach((function(cont){if(cont.nextFn)try{var result=cont.nextFn(data);self._handleUserFunctionResult(result,cont.promise)}catch(e){self._handleResolutionError(e,cont)}else cont.promise&&cont.promise.resolve(data)}))}},_handleResolutionError:function(e,continuation){if(this._setRejected(),continuation.catchFn)try{return void continuation.catchFn(e)}catch(e2){e=e2}continuation.promise&&continuation.promise.reject(e)},_handleWhenResolvedDataIsPromise:function(data){var self=this;return data.then((function(result){self._data=result,self._runResolutions()})).catch((function(error){self._error=error,self._setRejected(),self._runRejections()}))},_handleUserFunctionResult:function(data,nextSynchronousPromise){looksLikeAPromise(data)?this._chainPromiseData(data,nextSynchronousPromise):nextSynchronousPromise.resolve(data)},_chainPromiseData:function(promiseData,nextSynchronousPromise){promiseData.then((function(newData){nextSynchronousPromise.resolve(newData)})).catch((function(newError){nextSynchronousPromise.reject(newError)}))},_setResolved:function(){this.status="resolved",this._paused||this._runResolutions()},_setRejected:function(){this.status="rejected",this._paused||this._runRejections()},_isPending:function(){return"pending"===this.status},_isResolved:function(){return"resolved"===this.status},_isRejected:function(){return"rejected"===this.status}},SynchronousPromise.resolve=function(result){return new SynchronousPromise((function(resolve,reject){looksLikeAPromise(result)?result.then((function(newResult){resolve(newResult)})).catch((function(error){reject(error)})):resolve(result)}))},SynchronousPromise.reject=function(result){return new SynchronousPromise((function(resolve,reject){reject(result)}))},SynchronousPromise.unresolved=function(){return new SynchronousPromise((function(resolve,reject){this.resolve=resolve,this.reject=reject}))},SynchronousPromise.all=function(){var args=makeArrayFrom(arguments);return Array.isArray(args[0])&&(args=args[0]),args.length?new SynchronousPromise((function(resolve,reject){var allData=[],numResolved=0,rejected=!1;args.forEach((function(arg,idx){SynchronousPromise.resolve(arg).then((function(thisResult){allData[idx]=thisResult,(numResolved+=1)===args.length&&resolve(allData)})).catch((function(err){!function(err){rejected||(rejected=!0,reject(err))}(err)}))}))})):SynchronousPromise.resolve([])},SynchronousPromise.any=function(){var args=makeArrayFrom(arguments);return Array.isArray(args[0])&&(args=args[0]),args.length?new SynchronousPromise((function(resolve,reject){var allErrors=[],numRejected=0,resolved=!1;args.forEach((function(arg,idx){SynchronousPromise.resolve(arg).then((function(thisResult){var result;result=thisResult,resolved||(resolved=!0,resolve(result))})).catch((function(err){allErrors[idx]=err,(numRejected+=1)===args.length&&reject(createAggregateErrorFrom(allErrors))}))}))})):SynchronousPromise.reject(createAggregateErrorFrom([]))},SynchronousPromise.allSettled=function(){var args=makeArrayFrom(arguments);return Array.isArray(args[0])&&(args=args[0]),args.length?new SynchronousPromise((function(resolve){var allData=[],numSettled=0,doSettled=function(){(numSettled+=1)===args.length&&resolve(allData)};args.forEach((function(arg,idx){SynchronousPromise.resolve(arg).then((function(thisResult){allData[idx]={status:"fulfilled",value:thisResult},doSettled()})).catch((function(err){allData[idx]={status:"rejected",reason:err},doSettled()}))}))})):SynchronousPromise.resolve([])},Promise===SynchronousPromise)throw new Error("Please use SynchronousPromise.installGlobally() to install globally");var RealPromise=Promise;SynchronousPromise.installGlobally=function(__awaiter){if(Promise===SynchronousPromise)return __awaiter;var result=function patchAwaiterIfRequired(__awaiter){if(void 0===__awaiter||__awaiter.__patched)return __awaiter;var originalAwaiter=__awaiter;return __awaiter=function(){originalAwaiter.apply(this,makeArrayFrom(arguments))},__awaiter.__patched=!0,__awaiter}(__awaiter);return Promise=SynchronousPromise,result},SynchronousPromise.uninstallGlobally=function(){Promise===SynchronousPromise&&(Promise=RealPromise)},module.exports={SynchronousPromise}},"../../node_modules/telejson/dist/esm/dom-event.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,{_:()=>extractEventHiddenProperties});var eventProperties=["bubbles","cancelBubble","cancelable","composed","currentTarget","defaultPrevented","eventPhase","isTrusted","returnValue","srcElement","target","timeStamp","type"],customEventSpecificProperties=["detail"];function extractEventHiddenProperties(event){var rebuildEvent=eventProperties.filter((function(value){return void 0!==event[value]})).reduce((function(acc,value){return _objectSpread(_objectSpread({},acc),{},_defineProperty({},value,event[value]))}),{});return event instanceof CustomEvent&&customEventSpecificProperties.filter((function(value){return void 0!==event[value]})).forEach((function(value){rebuildEvent[value]=event[value]})),rebuildEvent}},"../../node_modules/telejson/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Pz:()=>stringify,Qc:()=>parse,pM:()=>isJSON});var is_regex__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/is-regex/index.js"),is_regex__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(is_regex__WEBPACK_IMPORTED_MODULE_0__),is_function__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/is-function/index.js"),is_function__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(is_function__WEBPACK_IMPORTED_MODULE_1__),is_symbol__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/is-symbol/index.js"),is_symbol__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(is_symbol__WEBPACK_IMPORTED_MODULE_2__),isobject__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/telejson/node_modules/isobject/index.js"),lodash_get__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/lodash/get.js"),lodash_get__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_3__),memoizerific__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/memoizerific/memoizerific.js"),memoizerific__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(memoizerific__WEBPACK_IMPORTED_MODULE_4__),_dom_event__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/telejson/dist/esm/dom-event.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var isRunningInBrowser="undefined"!=typeof window&&void 0!==window.document,isObject=isobject__WEBPACK_IMPORTED_MODULE_5__.Z,removeCodeComments=function removeCodeComments(code){var inQuoteChar=null,inBlockComment=!1,inLineComment=!1,inRegexLiteral=!1,newCode="";if(code.indexOf("//")>=0||code.indexOf("/*")>=0)for(var i=0;i<code.length;i+=1)inQuoteChar||inBlockComment||inLineComment||inRegexLiteral?(inQuoteChar&&(code[i]===inQuoteChar&&"\\"!==code[i-1]||"\n"===code[i]&&"`"!==inQuoteChar)&&(inQuoteChar=null),inRegexLiteral&&("/"===code[i]&&"\\"!==code[i-1]||"\n"===code[i])&&(inRegexLiteral=!1),inBlockComment&&"/"===code[i-1]&&"*"===code[i-2]&&(inBlockComment=!1),inLineComment&&"\n"===code[i]&&(inLineComment=!1)):'"'===code[i]||"'"===code[i]||"`"===code[i]?inQuoteChar=code[i]:"/"===code[i]&&"*"===code[i+1]?inBlockComment=!0:"/"===code[i]&&"/"===code[i+1]?inLineComment=!0:"/"===code[i]&&"/"!==code[i+1]&&(inRegexLiteral=!0),inBlockComment||inLineComment||(newCode+=code[i]);else newCode=code;return newCode},cleanCode=memoizerific__WEBPACK_IMPORTED_MODULE_4___default()(1e4)((function(code){return removeCodeComments(code).replace(/\n\s*/g,"").trim()})),convertShorthandMethods=function convertShorthandMethods(key,stringified){var fnHead=stringified.slice(0,stringified.indexOf("{")),fnBody=stringified.slice(stringified.indexOf("{"));if(fnHead.includes("=>"))return stringified;if(fnHead.includes("function"))return stringified;var modifiedHead=fnHead;return(modifiedHead=modifiedHead.replace(key,"function"))+fnBody},dateFormat=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,isJSON=function isJSON(input){return input.match(/^[\[\{\"\}].*[\]\}\"]$/)};function convertUnconventionalData(data){if(!isObject(data))return data;var result=data,wasMutated=!1;return isRunningInBrowser&&data instanceof Event&&(result=(0,_dom_event__WEBPACK_IMPORTED_MODULE_6__._)(result),wasMutated=!0),result=Object.keys(result).reduce((function(acc,key){try{var _result$key;null===(_result$key=result[key])||void 0===_result$key||_result$key.toJSON,acc[key]=result[key]}catch(err){wasMutated=!0}return acc}),{}),wasMutated?result:data}var replacer=function replacer(options){var objects,map,stack,keys;return function replace(key,value){try{if(""===key)return keys=[],objects=new Map([[value,"[]"]]),map=new Map,stack=[],value;for(var origin=map.get(this)||this;stack.length&&origin!==stack[0];)stack.shift(),keys.pop();if("boolean"==typeof value)return value;if(void 0===value){if(!options.allowUndefined)return;return"_undefined_"}if(null===value)return null;if("number"==typeof value)return value===-1/0?"_-Infinity_":value===1/0?"_Infinity_":Number.isNaN(value)?"_NaN_":value;if("bigint"==typeof value)return"_bigint_".concat(value.toString());if("string"==typeof value){if(dateFormat.test(value)){if(!options.allowDate)return;return"_date_".concat(value)}return value}if(is_regex__WEBPACK_IMPORTED_MODULE_0___default()(value)){if(!options.allowRegExp)return;return"_regexp_".concat(value.flags,"|").concat(value.source)}if(is_function__WEBPACK_IMPORTED_MODULE_1___default()(value)){if(!options.allowFunction)return;var name=value.name,stringified=value.toString();return stringified.match(/(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/)?"_function_".concat(name,"|").concat(function(){}.toString()):"_function_".concat(name,"|").concat(cleanCode(convertShorthandMethods(key,stringified)))}if(is_symbol__WEBPACK_IMPORTED_MODULE_2___default()(value)){if(!options.allowSymbol)return;var globalRegistryKey=Symbol.keyFor(value);return void 0!==globalRegistryKey?"_gsymbol_".concat(globalRegistryKey):"_symbol_".concat(value.toString().slice(7,-1))}if(stack.length>=options.maxDepth)return Array.isArray(value)?"[Array(".concat(value.length,")]"):"[Object]";if(value===this)return"_duplicate_".concat(JSON.stringify(keys));if(value.constructor&&value.constructor.name&&"Object"!==value.constructor.name&&!Array.isArray(value)&&!options.allowClass)return;var found=objects.get(value);if(!found){var converted=Array.isArray(value)?value:convertUnconventionalData(value);if(value.constructor&&value.constructor.name&&"Object"!==value.constructor.name&&!Array.isArray(value)&&options.allowClass)try{Object.assign(converted,{"_constructor-name_":value.constructor.name})}catch(e){}return keys.push(key),stack.unshift(converted),objects.set(value,JSON.stringify(keys)),value!==converted&&map.set(value,converted),converted}return"_duplicate_".concat(found)}catch(e){return}}},reviver=function reviver(options){var refs=[],root;return function revive(key,value){if(""===key&&(root=value,refs.forEach((function(_ref){var target=_ref.target,container=_ref.container,replacement=_ref.replacement,replacementArr=isJSON(replacement)?JSON.parse(replacement):replacement.split(".");0===replacementArr.length?container[target]=root:container[target]=lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(root,replacementArr)}))),"_constructor-name_"===key)return value;if(isObject(value)&&value["_constructor-name_"]&&options.allowFunction){var name=value["_constructor-name_"];if("Object"!==name){var Fn=new Function("return function ".concat(name.replace(/[\W_]+/g,""),"(){}"))();Object.setPrototypeOf(value,new Fn)}return delete value["_constructor-name_"],value}if("string"==typeof value&&value.startsWith("_function_")&&options.allowFunction){var _ref2=value.match(/_function_([^|]*)\|(.*)/)||[],_ref3=_slicedToArray(_ref2,3),_name=_ref3[1],source=_ref3[2],sourceSanitized=source.replace(/[(\(\))|\\| |\]|`]*$/,"");if(!options.lazyEval)return eval("(".concat(sourceSanitized,")"));var result=function result(){var f=eval("(".concat(sourceSanitized,")"));return f.apply(void 0,arguments)};return Object.defineProperty(result,"toString",{value:function value(){return sourceSanitized}}),Object.defineProperty(result,"name",{value:_name}),result}if("string"==typeof value&&value.startsWith("_regexp_")&&options.allowRegExp){var _ref4=value.match(/_regexp_([^|]*)\|(.*)/)||[],_ref5=_slicedToArray(_ref4,3),flags=_ref5[1],_source=_ref5[2];return new RegExp(_source,flags)}return"string"==typeof value&&value.startsWith("_date_")&&options.allowDate?new Date(value.replace("_date_","")):"string"==typeof value&&value.startsWith("_duplicate_")?(refs.push({target:key,container:this,replacement:value.replace(/^_duplicate_/,"")}),null):"string"==typeof value&&value.startsWith("_symbol_")&&options.allowSymbol?Symbol(value.replace("_symbol_","")):"string"==typeof value&&value.startsWith("_gsymbol_")&&options.allowSymbol?Symbol.for(value.replace("_gsymbol_","")):"string"==typeof value&&"_-Infinity_"===value?-1/0:"string"==typeof value&&"_Infinity_"===value?1/0:"string"==typeof value&&"_NaN_"===value?NaN:"string"==typeof value&&value.startsWith("_bigint_")&&"function"==typeof BigInt?BigInt(value.replace("_bigint_","")):value}},defaultOptions={maxDepth:10,space:void 0,allowFunction:!0,allowRegExp:!0,allowDate:!0,allowClass:!0,allowUndefined:!0,allowSymbol:!0,lazyEval:!0},stringify=function stringify(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=_objectSpread(_objectSpread({},defaultOptions),options);return JSON.stringify(convertUnconventionalData(data),replacer(mergedOptions),options.space)},mutator=function mutator(){var mutated=new Map;return function mutateUndefined(value){isObject(value)&&Object.entries(value).forEach((function(_ref6){var _ref7=_slicedToArray(_ref6,2),k=_ref7[0],v=_ref7[1];"_undefined_"===v?value[k]=void 0:mutated.get(v)||(mutated.set(v,!0),mutateUndefined(v))})),Array.isArray(value)&&value.forEach((function(v,index){"_undefined_"===v?(mutated.set(v,!0),value[index]=void 0):mutated.get(v)||(mutated.set(v,!0),mutateUndefined(v))}))}},parse=function parse(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=_objectSpread(_objectSpread({},defaultOptions),options),result=JSON.parse(data,reviver(mergedOptions));return mutator()(result),result}},"../../node_modules/telejson/node_modules/isobject/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}__webpack_require__.d(__webpack_exports__,{Z:()=>isObject})},"../../node_modules/ts-dedent/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function dedent(templ){for(var values=[],_i=1;_i<arguments.length;_i++)values[_i-1]=arguments[_i];var strings=Array.from("string"==typeof templ?[templ]:templ);strings[strings.length-1]=strings[strings.length-1].replace(/\r?\n([\t ]*)$/,"");var indentLengths=strings.reduce((function(arr,str){var matches=str.match(/\n([\t ]+|(?!\s).)/g);return matches?arr.concat(matches.map((function(match){var _a,_b;return null!==(_b=null===(_a=match.match(/[\t ]/g))||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0}))):arr}),[]);if(indentLengths.length){var pattern_1=new RegExp("\n[\t ]{"+Math.min.apply(Math,indentLengths)+"}","g");strings=strings.map((function(str){return str.replace(pattern_1,"\n")}))}strings[0]=strings[0].replace(/^\r?\n/,"");var string=strings[0];return values.forEach((function(value,i){var endentations=string.match(/(?:^|\n)( *)$/),endentation=endentations?endentations[1]:"",indentedValue=value;"string"==typeof value&&value.includes("\n")&&(indentedValue=String(value).split("\n").map((function(str,i){return 0===i?str:""+endentation+str})).join("\n")),string+=indentedValue+strings[i+1]})),string}},"../../node_modules/util-deprecate/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{function config(name){try{if(!__webpack_require__.g.localStorage)return!1}catch(_){return!1}var val=__webpack_require__.g.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}},"../../node_modules/vega-embed/build/vega-embed.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>vega_embed_module_embed,OU:()=>vega});var core_namespaceObject={};__webpack_require__.r(core_namespaceObject),__webpack_require__.d(core_namespaceObject,{JsonPatchError:()=>JsonPatchError,_areEquals:()=>_areEquals,applyOperation:()=>applyOperation,applyPatch:()=>applyPatch,applyReducer:()=>applyReducer,deepClone:()=>deepClone,getValueByPointer:()=>getValueByPointer,validate:()=>validate,validator:()=>validator});var duplex_namespaceObject={};__webpack_require__.r(duplex_namespaceObject),__webpack_require__.d(duplex_namespaceObject,{compare:()=>compare,generate:()=>generate,observe:()=>observe,unobserve:()=>unobserve});var vega_transforms_module_namespaceObject={};__webpack_require__.r(vega_transforms_module_namespaceObject),__webpack_require__.d(vega_transforms_module_namespaceObject,{aggregate:()=>Aggregate,bin:()=>Bin,collect:()=>Collect,compare:()=>Compare,countpattern:()=>CountPattern,cross:()=>Cross,density:()=>Density,dotbin:()=>DotBin,expression:()=>Expression,extent:()=>Extent,facet:()=>Facet,field:()=>Field,filter:()=>Filter,flatten:()=>Flatten,fold:()=>Fold,formula:()=>Formula,generate:()=>Generate,impute:()=>Impute,joinaggregate:()=>JoinAggregate,kde:()=>KDE,key:()=>Key,load:()=>Load,lookup:()=>Lookup,multiextent:()=>MultiExtent,multivalues:()=>MultiValues,params:()=>Params,pivot:()=>Pivot,prefacet:()=>PreFacet,project:()=>Project,proxy:()=>Proxy,quantile:()=>Quantile,relay:()=>Relay,sample:()=>Sample,sequence:()=>Sequence,sieve:()=>Sieve,subflow:()=>Subflow,timeunit:()=>TimeUnit,tupleindex:()=>TupleIndex,values:()=>Values,window:()=>Window});var d3_interpolate_src_namespaceObject={};__webpack_require__.r(d3_interpolate_src_namespaceObject),__webpack_require__.d(d3_interpolate_src_namespaceObject,{interpolate:()=>value,interpolateArray:()=>d3_interpolate_src_array,interpolateBasis:()=>src_basis,interpolateBasisClosed:()=>src_basisClosed,interpolateCubehelix:()=>src_cubehelix,interpolateCubehelixLong:()=>cubehelixLong,interpolateDate:()=>date,interpolateDiscrete:()=>discrete,interpolateHcl:()=>src_hcl,interpolateHclLong:()=>hclLong,interpolateHsl:()=>src_hsl,interpolateHslLong:()=>hslLong,interpolateHue:()=>src_hue,interpolateLab:()=>lab_lab,interpolateNumber:()=>src_number,interpolateNumberArray:()=>numberArray,interpolateObject:()=>src_object,interpolateRgb:()=>rgb,interpolateRgbBasis:()=>rgbBasis,interpolateRgbBasisClosed:()=>rgbBasisClosed,interpolateRound:()=>src_round,interpolateString:()=>string,interpolateTransformCss:()=>interpolateTransformCss,interpolateTransformSvg:()=>interpolateTransformSvg,interpolateZoom:()=>src_zoom,piecewise:()=>piecewise,quantize:()=>src_quantize});var vega_view_transforms_module_namespaceObject={};__webpack_require__.r(vega_view_transforms_module_namespaceObject),__webpack_require__.d(vega_view_transforms_module_namespaceObject,{bound:()=>Bound,identifier:()=>Identifier,mark:()=>Mark,overlap:()=>Overlap,render:()=>Render,viewlayout:()=>ViewLayout});var vega_encode_module_namespaceObject={};__webpack_require__.r(vega_encode_module_namespaceObject),__webpack_require__.d(vega_encode_module_namespaceObject,{axisticks:()=>AxisTicks,datajoin:()=>DataJoin,encode:()=>Encode,legendentries:()=>LegendEntries,linkpath:()=>LinkPath,pie:()=>Pie,scale:()=>Scale,sortitems:()=>SortItems,stack:()=>Stack});var vega_geo_module_namespaceObject={};__webpack_require__.r(vega_geo_module_namespaceObject),__webpack_require__.d(vega_geo_module_namespaceObject,{contour:()=>Contour,geojson:()=>GeoJSON,geopath:()=>GeoPath,geopoint:()=>GeoPoint,geoshape:()=>GeoShape,graticule:()=>Graticule,heatmap:()=>Heatmap,isocontour:()=>Isocontour,kde2d:()=>KDE2D,projection:()=>Projection});var vega_force_module_namespaceObject={};__webpack_require__.r(vega_force_module_namespaceObject),__webpack_require__.d(vega_force_module_namespaceObject,{force:()=>Force});var vega_hierarchy_module_namespaceObject={};__webpack_require__.r(vega_hierarchy_module_namespaceObject),__webpack_require__.d(vega_hierarchy_module_namespaceObject,{nest:()=>Nest,pack:()=>Pack,partition:()=>Partition,stratify:()=>Stratify,tree:()=>Tree,treelinks:()=>TreeLinks,treemap:()=>Treemap});var vega_label_module_namespaceObject={};__webpack_require__.r(vega_label_module_namespaceObject),__webpack_require__.d(vega_label_module_namespaceObject,{label:()=>Label});var vega_regression_module_namespaceObject={};__webpack_require__.r(vega_regression_module_namespaceObject),__webpack_require__.d(vega_regression_module_namespaceObject,{loess:()=>Loess,regression:()=>Regression});var vega_voronoi_module_namespaceObject={};__webpack_require__.r(vega_voronoi_module_namespaceObject),__webpack_require__.d(vega_voronoi_module_namespaceObject,{voronoi:()=>vega_voronoi_module_Voronoi});var vega_wordcloud_module_namespaceObject={};__webpack_require__.r(vega_wordcloud_module_namespaceObject),__webpack_require__.d(vega_wordcloud_module_namespaceObject,{wordcloud:()=>Wordcloud});var vega_crossfilter_module_namespaceObject={};__webpack_require__.r(vega_crossfilter_module_namespaceObject),__webpack_require__.d(vega_crossfilter_module_namespaceObject,{crossfilter:()=>CrossFilter,resolvefilter:()=>ResolveFilter});var vega_module_namespaceObject={};__webpack_require__.r(vega_module_namespaceObject),__webpack_require__.d(vega_module_namespaceObject,{Bounds:()=>Bounds,CanvasHandler:()=>CanvasHandler,CanvasRenderer:()=>CanvasRenderer,DATE:()=>DATE,DAY:()=>DAY,DAYOFYEAR:()=>DAYOFYEAR,Dataflow:()=>Dataflow,Debug:()=>vega_util_module_Debug,Error:()=>Error$1,EventStream:()=>EventStream,Gradient:()=>Gradient,GroupItem:()=>GroupItem,HOURS:()=>HOURS,Handler:()=>Handler,Info:()=>vega_util_module_Info,Item:()=>Item,MILLISECONDS:()=>MILLISECONDS,MINUTES:()=>MINUTES,MONTH:()=>MONTH,Marks:()=>Marks,MultiPulse:()=>MultiPulse,None:()=>None,Operator:()=>Operator,Parameters:()=>Parameters,Pulse:()=>Pulse,QUARTER:()=>QUARTER,RenderType:()=>RenderType,Renderer:()=>Renderer,ResourceLoader:()=>ResourceLoader,SECONDS:()=>SECONDS,SVGHandler:()=>SVGHandler,SVGRenderer:()=>SVGRenderer,SVGStringRenderer:()=>SVGStringRenderer,Scenegraph:()=>Scenegraph,TIME_UNITS:()=>TIME_UNITS,Transform:()=>Transform,View:()=>View,WEEK:()=>WEEK,Warn:()=>vega_util_module_Warn,YEAR:()=>YEAR,accessor:()=>accessor,accessorFields:()=>accessorFields,accessorName:()=>accessorName,array:()=>array,ascending:()=>ascending,bandwidthNRD:()=>estimateBandwidth,bin:()=>vega_statistics_module_bin,bootstrapCI:()=>bootstrapCI,boundClip:()=>boundClip,boundContext:()=>boundContext,boundItem:()=>boundItem,boundMark:()=>boundMark,boundStroke:()=>boundStroke,changeset:()=>changeset,clampRange:()=>clampRange,codegenExpression:()=>codegen,compare:()=>vega_util_module_compare,constant:()=>vega_util_module_constant,cumulativeLogNormal:()=>cumulativeLogNormal,cumulativeNormal:()=>cumulativeNormal,cumulativeUniform:()=>cumulativeUniform,dayofyear:()=>dayofyear,debounce:()=>debounce,defaultLocale:()=>vega_format_module_defaultLocale,definition:()=>definition,densityLogNormal:()=>densityLogNormal,densityNormal:()=>densityNormal,densityUniform:()=>densityUniform,domChild:()=>domChild,domClear:()=>domClear,domCreate:()=>domCreate,domFind:()=>domFind,dotbin:()=>dotbin,error:()=>error,expressionFunction:()=>expressionFunction,extend:()=>extend,extent:()=>extent,extentIndex:()=>extentIndex,falsy:()=>falsy,fastmap:()=>fastmap,field:()=>field,flush:()=>flush,font:()=>font,fontFamily:()=>fontFamily,fontSize:()=>fontSize,format:()=>vega_loader_browser_module_format,formatLocale:()=>numberFormatDefaultLocale,formats:()=>formats,hasOwnProperty:()=>has,id:()=>id,identity:()=>identity,inferType:()=>inferType,inferTypes:()=>inferTypes,ingest:()=>ingest$1,inherits:()=>inherits,inrange:()=>inrange,interpolate:()=>interpolate,interpolateColors:()=>interpolateColors,interpolateRange:()=>interpolateRange,intersect:()=>vega_scenegraph_module_intersect,intersectBoxLine:()=>intersectBoxLine,intersectPath:()=>intersectPath,intersectPoint:()=>intersectPoint,intersectRule:()=>intersectRule,isArray:()=>isArray,isBoolean:()=>isBoolean,isDate:()=>isDate,isFunction:()=>isFunction,isIterable:()=>isIterable,isNumber:()=>isNumber,isObject:()=>isObject,isRegExp:()=>isRegExp,isString:()=>isString,isTuple:()=>isTuple,key:()=>key,lerp:()=>lerp,lineHeight:()=>lineHeight,loader:()=>loader,locale:()=>vega_format_module_locale,logger:()=>logger,lruCache:()=>lruCache,markup:()=>markup,merge:()=>merge,mergeConfig:()=>mergeConfig,multiLineOffset:()=>multiLineOffset,one:()=>one,pad:()=>pad,panLinear:()=>panLinear,panLog:()=>panLog,panPow:()=>panPow,panSymlog:()=>panSymlog,parse:()=>vega_parser_module_parse,parseExpression:()=>parser,parseSelector:()=>eventSelector,path:()=>src_path,pathCurves:()=>curves,pathEqual:()=>pathEqual,pathParse:()=>vega_scenegraph_module_parse,pathRectangle:()=>vg_rect,pathRender:()=>pathRender,pathSymbols:()=>vega_scenegraph_module_symbols,pathTrail:()=>vg_trail,peek:()=>peek,point:()=>vega_scenegraph_module_point,projection:()=>vega_projection_module_projection,quantileLogNormal:()=>quantileLogNormal,quantileNormal:()=>quantileNormal,quantileUniform:()=>quantileUniform,quantiles:()=>quantiles,quantizeInterpolator:()=>quantizeInterpolator,quarter:()=>quarter,quartiles:()=>quartiles,random:()=>random,randomInteger:()=>integer,randomKDE:()=>kde,randomLCG:()=>vega_statistics_module_lcg,randomLogNormal:()=>lognormal,randomMixture:()=>mixture,randomNormal:()=>gaussian,randomUniform:()=>uniform,read:()=>read,regressionExp:()=>vega_statistics_module_exp,regressionLinear:()=>linear,regressionLoess:()=>loess,regressionLog:()=>vega_statistics_module_log,regressionPoly:()=>poly,regressionPow:()=>vega_statistics_module_pow,regressionQuad:()=>quad,renderModule:()=>renderModule,repeat:()=>repeat,resetDefaultLocale:()=>resetDefaultLocale,resetSVGClipId:()=>resetSVGClipId,resetSVGDefIds:()=>resetSVGDefIds,responseType:()=>responseType,runtimeContext:()=>vega_runtime_module_context,sampleCurve:()=>sampleCurve,sampleLogNormal:()=>sampleLogNormal,sampleNormal:()=>sampleNormal,sampleUniform:()=>sampleUniform,scale:()=>vega_scale_module_scale,sceneEqual:()=>sceneEqual,sceneFromJSON:()=>sceneFromJSON,scenePickVisit:()=>pickVisit,sceneToJSON:()=>sceneToJSON,sceneVisit:()=>visit,sceneZOrder:()=>zorder,scheme:()=>scheme,serializeXML:()=>serializeXML,setRandom:()=>setRandom,span:()=>span,splitAccessPath:()=>splitAccessPath,stringValue:()=>$,textMetrics:()=>textMetrics,timeBin:()=>bin,timeFloor:()=>timeFloor,timeFormatLocale:()=>timeFormatDefaultLocale,timeInterval:()=>timeInterval,timeOffset:()=>timeOffset,timeSequence:()=>timeSequence,timeUnitSpecifier:()=>timeUnitSpecifier,timeUnits:()=>timeUnits,toBoolean:()=>toBoolean,toDate:()=>toDate,toNumber:()=>toNumber,toSet:()=>toSet,toString:()=>vega_util_module_toString,transform:()=>vega_dataflow_module_transform,transforms:()=>transforms,truncate:()=>truncate,truthy:()=>truthy,tupleid:()=>tupleid,typeParsers:()=>typeParsers,utcFloor:()=>utcFloor,utcInterval:()=>utcInterval,utcOffset:()=>utcOffset,utcSequence:()=>utcSequence,utcdayofyear:()=>utcdayofyear,utcquarter:()=>utcquarter,utcweek:()=>utcweek,version:()=>version,visitArray:()=>visitArray,week:()=>week,writeConfig:()=>writeConfig,zero:()=>zero,zoomLinear:()=>zoomLinear,zoomLog:()=>zoomLog,zoomPow:()=>zoomPow,zoomSymlog:()=>zoomSymlog});var build_src_namespaceObject={};__webpack_require__.r(build_src_namespaceObject),__webpack_require__.d(build_src_namespaceObject,{accessPathDepth:()=>accessPathDepth,accessPathWithDatum:()=>accessPathWithDatum,compile:()=>compile,contains:()=>util_contains,deepEqual:()=>deepEqual,deleteNestedProperty:()=>deleteNestedProperty,duplicate:()=>duplicate,entries:()=>entries,every:()=>every,fieldIntersection:()=>fieldIntersection,flatAccessWithDatum:()=>flatAccessWithDatum,getFirstDefined:()=>getFirstDefined,hasIntersection:()=>hasIntersection,hash:()=>hash,internalField:()=>internalField,isBoolean:()=>util_isBoolean,isEmpty:()=>isEmpty,isEqual:()=>isEqual,isInternalField:()=>isInternalField,isNullOrFalse:()=>isNullOrFalse,isNumeric:()=>isNumeric,keys:()=>util_keys,logicalExpr:()=>logicalExpr,mergeDeep:()=>mergeDeep,never:()=>never,normalize:()=>normalize_normalize,normalizeAngle:()=>normalizeAngle,omit:()=>omit,pick:()=>util_pick,prefixGenerator:()=>prefixGenerator,removePathFromField:()=>removePathFromField,replaceAll:()=>replaceAll,replacePathInField:()=>replacePathInField,resetIdCounter:()=>resetIdCounter,setEqual:()=>setEqual,some:()=>some,stringify:()=>stringify,titleCase:()=>titleCase,unique:()=>unique,uniqueId:()=>uniqueId,vals:()=>vals,varName:()=>varName,version:()=>src_version});var vega_themes_module_namespaceObject={};__webpack_require__.r(vega_themes_module_namespaceObject),__webpack_require__.d(vega_themes_module_namespaceObject,{dark:()=>darkTheme,excel:()=>excelTheme,fivethirtyeight:()=>fiveThirtyEightTheme,ggplot2:()=>ggplot2Theme,googlecharts:()=>googlechartsTheme,latimes:()=>latimesTheme,powerbi:()=>powerbiTheme,quartz:()=>quartzTheme,urbaninstitute:()=>urbanInstituteTheme,version:()=>vega_themes_module_version,vox:()=>voxTheme});var extendStatics,__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),_hasOwnProperty=Object.prototype.hasOwnProperty;function helpers_hasOwnProperty(obj,key){return _hasOwnProperty.call(obj,key)}function _objectKeys(obj){if(Array.isArray(obj)){for(var keys_1=new Array(obj.length),k=0;k<keys_1.length;k++)keys_1[k]=""+k;return keys_1}if(Object.keys)return Object.keys(obj);var keys=[];for(var i in obj)helpers_hasOwnProperty(obj,i)&&keys.push(i);return keys}function _deepClone(obj){switch(typeof obj){case"object":return JSON.parse(JSON.stringify(obj));case"undefined":return null;default:return obj}}function isInteger(str){for(var charCode,i=0,len=str.length;i<len;){if(!((charCode=str.charCodeAt(i))>=48&&charCode<=57))return!1;i++}return!0}function escapePathComponent(path){return-1===path.indexOf("/")&&-1===path.indexOf("~")?path:path.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(path){return path.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(obj){if(void 0===obj)return!0;if(obj)if(Array.isArray(obj)){for(var i_1=0,len=obj.length;i_1<len;i_1++)if(hasUndefined(obj[i_1]))return!0}else if("object"==typeof obj)for(var objKeys=_objectKeys(obj),objKeysLength=objKeys.length,i=0;i<objKeysLength;i++)if(hasUndefined(obj[objKeys[i]]))return!0;return!1}function patchErrorMessageFormatter(message,args){var messageParts=[message];for(var key in args){var value="object"==typeof args[key]?JSON.stringify(args[key],null,2):args[key];void 0!==value&&messageParts.push(key+": "+value)}return messageParts.join("\n")}var PatchError=function(_super){function PatchError(message,name,index,operation,tree){var _newTarget=this.constructor,_this=_super.call(this,patchErrorMessageFormatter(message,{name,index,operation,tree}))||this;return _this.name=name,_this.index=index,_this.operation=operation,_this.tree=tree,Object.setPrototypeOf(_this,_newTarget.prototype),_this.message=patchErrorMessageFormatter(message,{name,index,operation,tree}),_this}return __extends(PatchError,_super),PatchError}(Error),JsonPatchError=PatchError,deepClone=_deepClone,objOps={add:function(obj,key,document){return obj[key]=this.value,{newDocument:document}},remove:function(obj,key,document){var removed=obj[key];return delete obj[key],{newDocument:document,removed}},replace:function(obj,key,document){var removed=obj[key];return obj[key]=this.value,{newDocument:document,removed}},move:function(obj,key,document){var removed=getValueByPointer(document,this.path);removed&&(removed=_deepClone(removed));var originalValue=applyOperation(document,{op:"remove",path:this.from}).removed;return applyOperation(document,{op:"add",path:this.path,value:originalValue}),{newDocument:document,removed}},copy:function(obj,key,document){var valueToCopy=getValueByPointer(document,this.from);return applyOperation(document,{op:"add",path:this.path,value:_deepClone(valueToCopy)}),{newDocument:document}},test:function(obj,key,document){return{newDocument:document,test:_areEquals(obj[key],this.value)}},_get:function(obj,key,document){return this.value=obj[key],{newDocument:document}}},arrOps={add:function(arr,i,document){return isInteger(i)?arr.splice(i,0,this.value):arr[i]=this.value,{newDocument:document,index:i}},remove:function(arr,i,document){return{newDocument:document,removed:arr.splice(i,1)[0]}},replace:function(arr,i,document){var removed=arr[i];return arr[i]=this.value,{newDocument:document,removed}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(document,pointer){if(""==pointer)return document;var getOriginalDestination={op:"_get",path:pointer};return applyOperation(document,getOriginalDestination),getOriginalDestination.value}function applyOperation(document,operation,validateOperation,mutateDocument,banPrototypeModifications,index){if(void 0===validateOperation&&(validateOperation=!1),void 0===mutateDocument&&(mutateDocument=!0),void 0===banPrototypeModifications&&(banPrototypeModifications=!0),void 0===index&&(index=0),validateOperation&&("function"==typeof validateOperation?validateOperation(operation,0,document,operation.path):validator(operation,0)),""===operation.path){var returnValue={newDocument:document};if("add"===operation.op)return returnValue.newDocument=operation.value,returnValue;if("replace"===operation.op)return returnValue.newDocument=operation.value,returnValue.removed=document,returnValue;if("move"===operation.op||"copy"===operation.op)return returnValue.newDocument=getValueByPointer(document,operation.from),"move"===operation.op&&(returnValue.removed=document),returnValue;if("test"===operation.op){if(returnValue.test=_areEquals(document,operation.value),!1===returnValue.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return returnValue.newDocument=document,returnValue}if("remove"===operation.op)return returnValue.removed=document,returnValue.newDocument=null,returnValue;if("_get"===operation.op)return operation.value=document,returnValue;if(validateOperation)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",index,operation,document);return returnValue}mutateDocument||(document=_deepClone(document));var keys=(operation.path||"").split("/"),obj=document,t=1,len=keys.length,existingPathFragment=void 0,key=void 0,validateFunction=void 0;for(validateFunction="function"==typeof validateOperation?validateOperation:validator;;){if((key=keys[t])&&-1!=key.indexOf("~")&&(key=unescapePathComponent(key)),banPrototypeModifications&&("__proto__"==key||"prototype"==key&&t>0&&"constructor"==keys[t-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(validateOperation&&void 0===existingPathFragment&&(void 0===obj[key]?existingPathFragment=keys.slice(0,t).join("/"):t==len-1&&(existingPathFragment=operation.path),void 0!==existingPathFragment&&validateFunction(operation,0,document,existingPathFragment)),t++,Array.isArray(obj)){if("-"===key)key=obj.length;else{if(validateOperation&&!isInteger(key))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",index,operation,document);isInteger(key)&&(key=~~key)}if(t>=len){if(validateOperation&&"add"===operation.op&&key>obj.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",index,operation,document);if(!1===(returnValue=arrOps[operation.op].call(operation,obj,key,document)).test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return returnValue}}else if(t>=len){if(!1===(returnValue=objOps[operation.op].call(operation,obj,key,document)).test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return returnValue}if(obj=obj[key],validateOperation&&t<len&&(!obj||"object"!=typeof obj))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",index,operation,document)}}function applyPatch(document,patch,validateOperation,mutateDocument,banPrototypeModifications){if(void 0===mutateDocument&&(mutateDocument=!0),void 0===banPrototypeModifications&&(banPrototypeModifications=!0),validateOperation&&!Array.isArray(patch))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");mutateDocument||(document=_deepClone(document));for(var results=new Array(patch.length),i=0,length_1=patch.length;i<length_1;i++)results[i]=applyOperation(document,patch[i],validateOperation,!0,banPrototypeModifications,i),document=results[i].newDocument;return results.newDocument=document,results}function applyReducer(document,operation,index){var operationResult=applyOperation(document,operation);if(!1===operationResult.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",index,operation,document);return operationResult.newDocument}function validator(operation,index,document,existingPathFragment){if("object"!=typeof operation||null===operation||Array.isArray(operation))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",index,operation,document);if(!objOps[operation.op])throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",index,operation,document);if("string"!=typeof operation.path)throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",index,operation,document);if(0!==operation.path.indexOf("/")&&operation.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",index,operation,document);if(("move"===operation.op||"copy"===operation.op)&&"string"!=typeof operation.from)throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",index,operation,document);if(("add"===operation.op||"replace"===operation.op||"test"===operation.op)&&void 0===operation.value)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",index,operation,document);if(("add"===operation.op||"replace"===operation.op||"test"===operation.op)&&hasUndefined(operation.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",index,operation,document);if(document)if("add"==operation.op){var pathLen=operation.path.split("/").length,existingPathLen=existingPathFragment.split("/").length;if(pathLen!==existingPathLen+1&&pathLen!==existingPathLen)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",index,operation,document)}else if("replace"===operation.op||"remove"===operation.op||"_get"===operation.op){if(operation.path!==existingPathFragment)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",index,operation,document)}else if("move"===operation.op||"copy"===operation.op){var error=validate([{op:"_get",path:operation.from,value:void 0}],document);if(error&&"OPERATION_PATH_UNRESOLVABLE"===error.name)throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",index,operation,document)}}function validate(sequence,document,externalValidator){try{if(!Array.isArray(sequence))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(document)applyPatch(_deepClone(document),_deepClone(sequence),externalValidator||!0);else{externalValidator=externalValidator||validator;for(var i=0;i<sequence.length;i++)externalValidator(sequence[i],i,document,void 0)}}catch(e){if(e instanceof JsonPatchError)return e;throw e}}function _areEquals(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){var i,length,key,arrA=Array.isArray(a),arrB=Array.isArray(b);if(arrA&&arrB){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!_areEquals(a[i],b[i]))return!1;return!0}if(arrA!=arrB)return!1;var keys=Object.keys(a);if((length=keys.length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!b.hasOwnProperty(keys[i]))return!1;for(i=length;0!=i--;)if(!_areEquals(a[key=keys[i]],b[key]))return!1;return!0}return a!=a&&b!=b}var beforeDict=new WeakMap,Mirror=function Mirror(obj){this.observers=new Map,this.obj=obj},ObserverInfo=function ObserverInfo(callback,observer){this.callback=callback,this.observer=observer};function unobserve(root,observer){observer.unobserve()}function observe(obj,callback){var observer,mirror=function getMirror(obj){return beforeDict.get(obj)}(obj);if(mirror){var observerInfo=function getObserverFromMirror(mirror,callback){return mirror.observers.get(callback)}(mirror,callback);observer=observerInfo&&observerInfo.observer}else mirror=new Mirror(obj),beforeDict.set(obj,mirror);if(observer)return observer;if(observer={},mirror.value=_deepClone(obj),callback){observer.callback=callback,observer.next=null;var dirtyCheck=function(){generate(observer)},fastCheck=function(){clearTimeout(observer.next),observer.next=setTimeout(dirtyCheck)};"undefined"!=typeof window&&(window.addEventListener("mouseup",fastCheck),window.addEventListener("keyup",fastCheck),window.addEventListener("mousedown",fastCheck),window.addEventListener("keydown",fastCheck),window.addEventListener("change",fastCheck))}return observer.patches=[],observer.object=obj,observer.unobserve=function(){generate(observer),clearTimeout(observer.next),function removeObserverFromMirror(mirror,observer){mirror.observers.delete(observer.callback)}(mirror,observer),"undefined"!=typeof window&&(window.removeEventListener("mouseup",fastCheck),window.removeEventListener("keyup",fastCheck),window.removeEventListener("mousedown",fastCheck),window.removeEventListener("keydown",fastCheck),window.removeEventListener("change",fastCheck))},mirror.observers.set(callback,new ObserverInfo(callback,observer)),observer}function generate(observer,invertible){void 0===invertible&&(invertible=!1);var mirror=beforeDict.get(observer.object);_generate(mirror.value,observer.object,observer.patches,"",invertible),observer.patches.length&&applyPatch(mirror.value,observer.patches);var temp=observer.patches;return temp.length>0&&(observer.patches=[],observer.callback&&observer.callback(temp)),temp}function _generate(mirror,obj,patches,path,invertible){if(obj!==mirror){"function"==typeof obj.toJSON&&(obj=obj.toJSON());for(var newKeys=_objectKeys(obj),oldKeys=_objectKeys(mirror),deleted=!1,t=oldKeys.length-1;t>=0;t--){var oldVal=mirror[key=oldKeys[t]];if(!helpers_hasOwnProperty(obj,key)||void 0===obj[key]&&void 0!==oldVal&&!1===Array.isArray(obj))Array.isArray(mirror)===Array.isArray(obj)?(invertible&&patches.push({op:"test",path:path+"/"+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:"remove",path:path+"/"+escapePathComponent(key)}),deleted=!0):(invertible&&patches.push({op:"test",path,value:mirror}),patches.push({op:"replace",path,value:obj}),!0);else{var newVal=obj[key];"object"==typeof oldVal&&null!=oldVal&&"object"==typeof newVal&&null!=newVal&&Array.isArray(oldVal)===Array.isArray(newVal)?_generate(oldVal,newVal,patches,path+"/"+escapePathComponent(key),invertible):oldVal!==newVal&&(!0,invertible&&patches.push({op:"test",path:path+"/"+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:"replace",path:path+"/"+escapePathComponent(key),value:_deepClone(newVal)}))}}if(deleted||newKeys.length!=oldKeys.length)for(t=0;t<newKeys.length;t++){var key;helpers_hasOwnProperty(mirror,key=newKeys[t])||void 0===obj[key]||patches.push({op:"add",path:path+"/"+escapePathComponent(key),value:_deepClone(obj[key])})}}}function compare(tree1,tree2,invertible){void 0===invertible&&(invertible=!1);var patches=[];return _generate(tree1,tree2,patches,"",invertible),patches}Object.assign({},core_namespaceObject,duplex_namespaceObject,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent,unescapePathComponent});var json_stringify_pretty_compact=__webpack_require__("../../node_modules/json-stringify-pretty-compact/index.js"),json_stringify_pretty_compact_default=__webpack_require__.n(json_stringify_pretty_compact);function accessor(fn,fields,name){return fn.fields=fields||[],fn.fname=name,fn}function accessorName(fn){return null==fn?null:fn.fname}function accessorFields(fn){return null==fn?null:fn.fields}function getter(path){return 1===path.length?get1(path[0]):getN(path)}const get1=field=>function(obj){return obj[field]},getN=path=>{const len=path.length;return function(obj){for(let i=0;i<len;++i)obj=obj[path[i]];return obj}};function error(message){throw Error(message)}function splitAccessPath(p){const path=[],n=p.length;let i,j,c,q=null,b=0,s="";function push(){path.push(s+p.substring(i,j)),s="",i=j+1}for(p+="",i=j=0;j<n;++j)if(c=p[j],"\\"===c)s+=p.substring(i,j),s+=p.substring(++j,++j),i=j;else if(c===q)push(),q=null,b=-1;else{if(q)continue;i===b&&'"'===c||i===b&&"'"===c?(i=j+1,q=c):"."!==c||b?"["===c?(j>i&&push(),b=i=j+1):"]"===c&&(b||error("Access path missing open bracket: "+p),b>0&&push(),b=0,i=j+1):j>i?push():i=j+1}return b&&error("Access path missing closing bracket: "+p),q&&error("Access path missing closing quote: "+p),j>i&&(j++,push()),path}function field(field,name,opt){const path=splitAccessPath(field);return field=1===path.length?path[0]:field,accessor((opt&&opt.get||getter)(path),[field],name||field)}const id=field("id"),identity=accessor((_=>_),[],"identity"),zero=accessor((()=>0),[],"zero"),one=accessor((()=>1),[],"one"),truthy=accessor((()=>!0),[],"true"),falsy=accessor((()=>!1),[],"false");function log$1(method,level,input){const args=[level].concat([].slice.call(input));console[method].apply(console,args)}const None=0,Error$1=1,vega_util_module_Warn=2,vega_util_module_Info=3,vega_util_module_Debug=4;function logger(_,method,handler=log$1){let level=_||None;return{level(_){return arguments.length?(level=+_,this):level},error(){return level>=Error$1&&handler(method||"error","ERROR",arguments),this},warn(){return level>=vega_util_module_Warn&&handler(method||"warn","WARN",arguments),this},info(){return level>=vega_util_module_Info&&handler(method||"log","INFO",arguments),this},debug(){return level>=vega_util_module_Debug&&handler(method||"log","DEBUG",arguments),this}}}var isArray=Array.isArray;function isObject(_){return _===Object(_)}const isLegalKey=key=>"__proto__"!==key;function mergeConfig(...configs){return configs.reduce(((out,source)=>{for(const key in source)if("signals"===key)out.signals=mergeNamed(out.signals,source.signals);else{const r="legend"===key?{layout:1}:"style"===key||null;writeConfig(out,key,source[key],r)}return out}),{})}function writeConfig(output,key,value,recurse){if(!isLegalKey(key))return;let k,o;if(isObject(value)&&!isArray(value))for(k in o=isObject(output[key])?output[key]:output[key]={},value)recurse&&(!0===recurse||recurse[k])?writeConfig(o,k,value[k]):isLegalKey(k)&&(o[k]=value[k]);else output[key]=value}function mergeNamed(a,b){if(null==a)return b;const map={},out=[];function add(_){map[_.name]||(map[_.name]=1,out.push(_))}return b.forEach(add),a.forEach(add),out}function peek(array){return array[array.length-1]}function toNumber(_){return null==_||""===_?null:+_}const exp=sign=>x=>sign*Math.exp(x),log=sign=>x=>Math.log(sign*x),symlog=c=>x=>Math.sign(x)*Math.log1p(Math.abs(x/c)),symexp=c=>x=>Math.sign(x)*Math.expm1(Math.abs(x))*c,pow=exponent=>x=>x<0?-Math.pow(-x,exponent):Math.pow(x,exponent);function pan(domain,delta,lift,ground){const d0=lift(domain[0]),d1=lift(peek(domain)),dd=(d1-d0)*delta;return[ground(d0-dd),ground(d1-dd)]}function panLinear(domain,delta){return pan(domain,delta,toNumber,identity)}function panLog(domain,delta){var sign=Math.sign(domain[0]);return pan(domain,delta,log(sign),exp(sign))}function panPow(domain,delta,exponent){return pan(domain,delta,pow(exponent),pow(1/exponent))}function panSymlog(domain,delta,constant){return pan(domain,delta,symlog(constant),symexp(constant))}function zoom(domain,anchor,scale,lift,ground){const d0=lift(domain[0]),d1=lift(peek(domain)),da=null!=anchor?lift(anchor):(d0+d1)/2;return[ground(da+(d0-da)*scale),ground(da+(d1-da)*scale)]}function zoomLinear(domain,anchor,scale){return zoom(domain,anchor,scale,toNumber,identity)}function zoomLog(domain,anchor,scale){const sign=Math.sign(domain[0]);return zoom(domain,anchor,scale,log(sign),exp(sign))}function zoomPow(domain,anchor,scale,exponent){return zoom(domain,anchor,scale,pow(exponent),pow(1/exponent))}function zoomSymlog(domain,anchor,scale,constant){return zoom(domain,anchor,scale,symlog(constant),symexp(constant))}function quarter(date){return 1+~~(new Date(date).getMonth()/3)}function utcquarter(date){return 1+~~(new Date(date).getUTCMonth()/3)}function array(_){return null!=_?isArray(_)?_:[_]:[]}function clampRange(range,min,max){let span,lo=range[0],hi=range[1];return hi<lo&&(span=hi,hi=lo,lo=span),span=hi-lo,span>=max-min?[min,max]:[lo=Math.min(Math.max(lo,min),max-span),lo+span]}function isFunction(_){return"function"==typeof _}function vega_util_module_compare(fields,orders,opt){opt=opt||{},orders=array(orders)||[];const ord=[],get=[],fmap={},gen=opt.comparator||comparator;return array(fields).forEach(((f,i)=>{null!=f&&(ord.push("descending"===orders[i]?-1:1),get.push(f=isFunction(f)?f:field(f,null,opt)),(accessorFields(f)||[]).forEach((_=>fmap[_]=1)))})),0===get.length?null:accessor(gen(get,ord),Object.keys(fmap))}const ascending=(u,v)=>(u<v||null==u)&&null!=v?-1:(u>v||null==v)&&null!=u?1:(v=v instanceof Date?+v:v,(u=u instanceof Date?+u:u)!==u&&v==v?-1:v!=v&&u==u?1:0),comparator=(fields,orders)=>1===fields.length?compare1(fields[0],orders[0]):compareN(fields,orders,fields.length),compare1=(field,order)=>function(a,b){return ascending(field(a),field(b))*order},compareN=(fields,orders,n)=>(orders.push(0),function(a,b){let f,c=0,i=-1;for(;0===c&&++i<n;)f=fields[i],c=ascending(f(a),f(b));return c*orders[i]});function vega_util_module_constant(_){return isFunction(_)?_:()=>_}function debounce(delay,handler){let tid;return e=>{tid&&clearTimeout(tid),tid=setTimeout((()=>(handler(e),tid=null)),delay)}}function extend(_){for(let x,k,i=1,len=arguments.length;i<len;++i)for(k in x=arguments[i],x)_[k]=x[k];return _}function extent(array,f){let n,v,min,max,i=0;if(array&&(n=array.length))if(null==f){for(v=array[i];i<n&&(null==v||v!=v);v=array[++i]);for(min=max=v;i<n;++i)v=array[i],null!=v&&(v<min&&(min=v),v>max&&(max=v))}else{for(v=f(array[i]);i<n&&(null==v||v!=v);v=f(array[++i]));for(min=max=v;i<n;++i)v=f(array[i]),null!=v&&(v<min&&(min=v),v>max&&(max=v))}return[min,max]}function extentIndex(array,f){const n=array.length;let a,b,c,u,v,i=-1;if(null==f){for(;++i<n;)if(b=array[i],null!=b&&b>=b){a=c=b;break}if(i===n)return[-1,-1];for(u=v=i;++i<n;)b=array[i],null!=b&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}else{for(;++i<n;)if(b=f(array[i],i,array),null!=b&&b>=b){a=c=b;break}if(i===n)return[-1,-1];for(u=v=i;++i<n;)b=f(array[i],i,array),null!=b&&(a>b&&(a=b,u=i),c<b&&(c=b,v=i))}return[u,v]}const hop=Object.prototype.hasOwnProperty;function has(object,property){return hop.call(object,property)}const NULL={};function fastmap(input){let test,obj={};function has$1(key){return has(obj,key)&&obj[key]!==NULL}const map={size:0,empty:0,object:obj,has:has$1,get:key=>has$1(key)?obj[key]:void 0,set(key,value){return has$1(key)||(++map.size,obj[key]===NULL&&--map.empty),obj[key]=value,this},delete(key){return has$1(key)&&(--map.size,++map.empty,obj[key]=NULL),this},clear(){map.size=map.empty=0,map.object=obj={}},test(_){return arguments.length?(test=_,map):test},clean(){const next={};let size=0;for(const key in obj){const value=obj[key];value===NULL||test&&test(value)||(next[key]=value,++size)}map.size=size,map.empty=0,map.object=obj=next}};return input&&Object.keys(input).forEach((key=>{map.set(key,input[key])})),map}function flush(range,value,threshold,left,right,center){if(!threshold&&0!==threshold)return center;const t=+threshold;let l,a=range[0],b=peek(range);b<a&&(l=a,a=b,b=l),l=Math.abs(value-a);const r=Math.abs(b-value);return l<r&&l<=t?left:r<=t?right:center}function inherits(child,parent,members){const proto=child.prototype=Object.create(parent.prototype);return Object.defineProperty(proto,"constructor",{value:child,writable:!0,enumerable:!0,configurable:!0}),extend(proto,members)}function inrange(value,range,left,right){let t,r0=range[0],r1=range[range.length-1];return r0>r1&&(t=r0,r0=r1,r1=t),right=void 0===right||right,((left=void 0===left||left)?r0<=value:r0<value)&&(right?value<=r1:value<r1)}function isBoolean(_){return"boolean"==typeof _}function isDate(_){return"[object Date]"===Object.prototype.toString.call(_)}function isIterable(_){return _&&isFunction(_[Symbol.iterator])}function isNumber(_){return"number"==typeof _}function isRegExp(_){return"[object RegExp]"===Object.prototype.toString.call(_)}function isString(_){return"string"==typeof _}function key(fields,flat,opt){fields&&(fields=flat?array(fields).map((f=>f.replace(/\\(.)/g,"$1"))):array(fields));const len=fields&&fields.length,gen=opt&&opt.get||getter,map=f=>gen(flat?[f]:splitAccessPath(f));let fn;if(len)if(1===len){const get=map(fields[0]);fn=function(_){return""+get(_)}}else{const get=fields.map(map);fn=function(_){let s=""+get[0](_),i=0;for(;++i<len;)s+="|"+get[i](_);return s}}else fn=function(){return""};return accessor(fn,fields,"key")}function lerp(array,frac){const lo=array[0],hi=peek(array),f=+frac;return f?1===f?hi:lo+f*(hi-lo):lo}function lruCache(maxsize){let curr,prev,size;maxsize=+maxsize||1e4;const clear=()=>{curr={},prev={},size=0},update=(key,value)=>(++size>maxsize&&(prev=curr,curr={},size=1),curr[key]=value);return clear(),{clear,has:key=>has(curr,key)||has(prev,key),get:key=>has(curr,key)?curr[key]:has(prev,key)?update(key,prev[key]):void 0,set:(key,value)=>has(curr,key)?curr[key]=value:update(key,value)}}function merge(compare,array0,array1,output){const n0=array0.length,n1=array1.length;if(!n1)return array0;if(!n0)return array1;const merged=output||new array0.constructor(n0+n1);let i0=0,i1=0,i=0;for(;i0<n0&&i1<n1;++i)merged[i]=compare(array0[i0],array1[i1])>0?array1[i1++]:array0[i0++];for(;i0<n0;++i0,++i)merged[i]=array0[i0];for(;i1<n1;++i1,++i)merged[i]=array1[i1];return merged}function repeat(str,reps){let s="";for(;--reps>=0;)s+=str;return s}function pad(str,length,padchar,align){const c=padchar||" ",s=str+"",n=length-s.length;return n<=0?s:"left"===align?repeat(c,n)+s:"center"===align?repeat(c,~~(n/2))+s+repeat(c,Math.ceil(n/2)):s+repeat(c,n)}function span(array){return array&&peek(array)-array[0]||0}function $(x){return isArray(x)?"["+x.map($)+"]":isObject(x)||isString(x)?JSON.stringify(x).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):x}function toBoolean(_){return null==_||""===_?null:!(!_||"false"===_||"0"===_)&&!!_}const defaultParser=_=>isNumber(_)||isDate(_)?_:Date.parse(_);function toDate(_,parser){return parser=parser||defaultParser,null==_||""===_?null:parser(_)}function vega_util_module_toString(_){return null==_||""===_?null:_+""}function toSet(_){const s={},n=_.length;for(let i=0;i<n;++i)s[_[i]]=!0;return s}function truncate(str,length,align,ellipsis){const e=null!=ellipsis?ellipsis:"",s=str+"",n=s.length,l=Math.max(0,length-e.length);return n<=length?s:"left"===align?e+s.slice(n-l):"center"===align?s.slice(0,Math.ceil(l/2))+e+s.slice(n-~~(l/2)):s.slice(0,l)+e}function visitArray(array,filter,visitor){if(array)if(filter){const n=array.length;for(let i=0;i<n;++i){const t=filter(array[i]);t&&visitor(t,i,array)}}else array.forEach(visitor)}var EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'})).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}function dsv_pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+dsv_pad(-year,6):year>9999?"+"+dsv_pad(year,6):dsv_pad(year,4)}(date.getUTCFullYear())+"-"+dsv_pad(date.getUTCMonth()+1,2)+"-"+dsv_pad(date.getUTCDate(),2)+(milliseconds?"T"+dsv_pad(hours,2)+":"+dsv_pad(minutes,2)+":"+dsv_pad(seconds,2)+"."+dsv_pad(milliseconds,3)+"Z":seconds?"T"+dsv_pad(hours,2)+":"+dsv_pad(minutes,2)+":"+dsv_pad(seconds,2)+"Z":minutes||hours?"T"+dsv_pad(hours,2)+":"+dsv_pad(minutes,2)+"Z":"")}function dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")},formatRow,formatValue}}function src_identity(x){return x}function feature(topology,o){return"string"==typeof o&&(o=topology.objects[o]),"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map((function(o){return feature_feature(topology,o)}))}:feature_feature(topology,o)}function feature_feature(topology,o){var id=o.id,bbox=o.bbox,properties=null==o.properties?{}:o.properties,geometry=object(topology,o);return null==id&&null==bbox?{type:"Feature",properties,geometry}:null==bbox?{type:"Feature",id,properties,geometry}:{type:"Feature",id,bbox,properties,geometry}}function object(topology,o){var transformPoint=function transform(transform){if(null==transform)return src_identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){i||(x0=y0=0);var j=2,n=input.length,output=new Array(n);for(output[0]=(x0+=input[0])*kx+dx,output[1]=(y0+=input[1])*ky+dy;j<n;)output[j]=input[j],++j;return output}}(topology.transform),arcs=topology.arcs;function arc(i,points){points.length&&points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length;k<n;++k)points.push(transformPoint(a[k],k));i<0&&function reverse(array,n){for(var t,j=array.length,i=j-n;i<--j;)t=array[i],array[i++]=array[j],array[j]=t}(points,n)}function point(p){return transformPoint(p)}function line(arcs){for(var points=[],i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);return points.length<2&&points.push(points[0]),points}function ring(arcs){for(var points=line(arcs);points.length<4;)points.push(points[0]);return points}function polygon(arcs){return arcs.map(ring)}return function geometry(o){var coordinates,type=o.type;switch(type){case"GeometryCollection":return{type,geometries:o.geometries.map(geometry)};case"Point":coordinates=point(o.coordinates);break;case"MultiPoint":coordinates=o.coordinates.map(point);break;case"LineString":coordinates=line(o.arcs);break;case"MultiLineString":coordinates=o.arcs.map(line);break;case"Polygon":coordinates=polygon(o.arcs);break;case"MultiPolygon":coordinates=o.arcs.map(polygon);break;default:return null}return{type,coordinates}}(o)}function stitch(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start],delete f.start,delete f.end,f.forEach((function(i){stitchedArcs[i<0?~i:i]=1})),fragments.push(f)}}return arcs.forEach((function(i,j){var t,arc=topology.arcs[i<0?~i:i];arc.length<3&&!arc[1][0]&&!arc[1][1]&&(t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t)})),arcs.forEach((function(i){var f,g,e=function ends(i){var p1,arc=topology.arcs[i<0?~i:i],p0=arc[0];topology.transform?(p1=[0,0],arc.forEach((function(dp){p1[0]+=dp[0],p1[1]+=dp[1]}))):p1=arc[arc.length-1];return i<0?[p1,p0]:[p0,p1]}(i),start=e[0],end=e[1];if(f=fragmentByEnd[start])if(delete fragmentByEnd[f.end],f.push(i),f.end=end,g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else if(f=fragmentByStart[end])if(delete fragmentByStart[f.start],f.unshift(i),f.start=start,g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else fragmentByStart[f.start]=fragmentByEnd[f.end]=f;else fragmentByStart[(f=[i]).start=start]=fragmentByEnd[f.end=end]=f})),flush(fragmentByEnd,fragmentByStart),flush(fragmentByStart,fragmentByEnd),arcs.forEach((function(i){stitchedArcs[i<0?~i:i]||fragments.push([i])})),fragments}function mesh(topology){return object(topology,meshArcs.apply(this,arguments))}function meshArcs(topology,object,filter){var arcs,i,n;if(arguments.length>1)arcs=extractArcs(topology,object,filter);else for(i=0,arcs=new Array(n=topology.arcs.length);i<n;++i)arcs[i]=i;return{type:"MultiLineString",arcs:stitch(topology,arcs)}}function extractArcs(topology,object,filter){var geom,arcs=[],geomsByArc=[];function extract0(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}return function geometry(o){switch(geom=o,o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"LineString":extract1(o.arcs);break;case"MultiLineString":case"Polygon":extract2(o.arcs);break;case"MultiPolygon":!function extract3(arcs){arcs.forEach(extract2)}(o.arcs)}}(object),geomsByArc.forEach(null==filter?function(geoms){arcs.push(geoms[0].i)}:function(geoms){filter(geoms[0].g,geoms[geoms.length-1].g)&&arcs.push(geoms[0].i)}),arcs}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0){let r0=Math.round(start/step),r1=Math.round(stop/step);for(r0*step<start&&++r0,r1*step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)*step}else{step=-step;let r0=Math.round(start*step),r1=Math.round(stop*step);for(r0/step<start&&++r0,r1/step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)/step}return reverse&&ticks.reverse(),ticks}function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN}function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))}function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent(max)-exponent(step))+1}function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const formatTypes={"%":(x,p)=>(100*x).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(100*x,p),r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)};function d3_format_src_identity(x){return x}var defaultLocale_locale,format,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function locale(locale){var group=void 0===locale.grouping||void 0===locale.thousands?d3_format_src_identity:function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?d3_format_src_identity:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}!function defaultLocale(definition){return defaultLocale_locale=locale(definition),format=defaultLocale_locale.format,formatPrefix=defaultLocale_locale.formatPrefix,defaultLocale_locale}({thousands:",",grouping:[3],currency:["$",""]});var t0=new Date,t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return t0.setTime(+start),t1.setTime(+end),floori(t0),floori(t1),Math.floor(count(t0,t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var day=newInterval((date=>date.setHours(0,0,0,0)),((date,step)=>date.setDate(date.getDate()+step)),((start,end)=>(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5),(date=>date.getDate()-1));const src_day=day;day.range;function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),utcDay=(sunday.range,monday.range,tuesday.range,wednesday.range,thursday.range,friday.range,saturday.range,newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1})));const src_utcDay=utcDay;utcDay.range;function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),year=(utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range,newInterval((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()})));year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null};const src_year=year;year.range;var month=newInterval((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()}));const src_month=month;month.range;var hour=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()}));const src_hour=hour;hour.range;var minute=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()}));const src_minute=minute;minute.range;var second=newInterval((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()}));const src_second=second;second.range;var millisecond=newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond:null};const src_millisecond=millisecond;millisecond.range;var utcYear=newInterval((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null};const src_utcYear=utcYear;utcYear.range;var utcMonth=newInterval((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()}));const src_utcMonth=utcMonth;utcMonth.range;var utcHour=newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()}));const src_utcHour=utcHour;utcHour.range;var utcMinute=newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()}));const src_utcMinute=utcMinute;utcMinute.range;function ascending_ascending(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function descending(a,b){return null==a||null==b?NaN:b<a?-1:b>a?1:b>=a?0:NaN}function bisector(f){let compare1,compare2,delta;function left(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;compare2(a[mid],x)<0?lo=mid+1:hi=mid}while(lo<hi)}return lo}return 2!==f.length?(compare1=ascending_ascending,compare2=(d,x)=>ascending_ascending(f(d),x),delta=(d,x)=>f(d)-x):(compare1=f===ascending_ascending||f===descending?f:bisector_zero,compare2=f,delta=f),{left,center:function center(a,x,lo=0,hi=a.length){const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i},right:function right(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;compare2(a[mid],x)<=0?lo=mid+1:hi=mid}while(lo<hi)}return lo}}}function bisector_zero(){return 0}const YEAR="year",QUARTER="quarter",MONTH="month",WEEK="week",DATE="date",DAY="day",DAYOFYEAR="dayofyear",HOURS="hours",MINUTES="minutes",SECONDS="seconds",MILLISECONDS="milliseconds",TIME_UNITS=[YEAR,QUARTER,MONTH,WEEK,DATE,DAY,DAYOFYEAR,HOURS,MINUTES,SECONDS,MILLISECONDS],UNITS=TIME_UNITS.reduce(((o,u,i)=>(o[u]=1+i,o)),{});function timeUnits(units){const u=array(units).slice(),m={};u.length||error("Missing time unit."),u.forEach((unit=>{has(UNITS,unit)?m[unit]=1:error("Invalid time unit: ".concat(unit,"."))}));return(m[WEEK]||m[DAY]?1:0)+(m[QUARTER]||m[MONTH]||m[DATE]?1:0)+(m[DAYOFYEAR]?1:0)>1&&error("Incompatible time units: ".concat(units)),u.sort(((a,b)=>UNITS[a]-UNITS[b])),u}const defaultSpecifiers={[YEAR]:"%Y ",[QUARTER]:"Q%q ",[MONTH]:"%b ",[DATE]:"%d ",[WEEK]:"W%U ",[DAY]:"%a ",[DAYOFYEAR]:"%j ",[HOURS]:"%H:00",[MINUTES]:"00:%M",[SECONDS]:":%S",[MILLISECONDS]:".%L",["".concat(YEAR,"-").concat(MONTH)]:"%Y-%m ",["".concat(YEAR,"-").concat(MONTH,"-").concat(DATE)]:"%Y-%m-%d ",["".concat(HOURS,"-").concat(MINUTES)]:"%H:%M"};function timeUnitSpecifier(units,specifiers){const s=extend({},defaultSpecifiers,specifiers),u=timeUnits(units),n=u.length;let end,key,fmt="",start=0;for(start=0;start<n;)for(end=u.length;end>start;--end)if(key=u.slice(start,end).join("-"),null!=s[key]){fmt+=s[key],start=end;break}return fmt.trim()}const vega_time_module_t0=new Date;function localYear(y){return vega_time_module_t0.setFullYear(y),vega_time_module_t0.setMonth(0),vega_time_module_t0.setDate(1),vega_time_module_t0.setHours(0,0,0,0),vega_time_module_t0}function dayofyear(d){return localDayOfYear(new Date(d))}function week(d){return localWeekNum(new Date(d))}function localDayOfYear(d){return src_day.count(localYear(d.getFullYear())-1,d)}function localWeekNum(d){return sunday.count(localYear(d.getFullYear())-1,d)}function localFirst(y){return localYear(y).getDay()}function localDate(y,m,d,H,M,S,L){if(0<=y&&y<100){const date=new Date(-1,m,d,H,M,S,L);return date.setFullYear(y),date}return new Date(y,m,d,H,M,S,L)}function utcdayofyear(d){return utcDayOfYear(new Date(d))}function utcweek(d){return utcWeekNum(new Date(d))}function utcDayOfYear(d){const y=Date.UTC(d.getUTCFullYear(),0,1);return src_utcDay.count(y-1,d)}function utcWeekNum(d){const y=Date.UTC(d.getUTCFullYear(),0,1);return utcSunday.count(y-1,d)}function utcFirst(y){return vega_time_module_t0.setTime(Date.UTC(y,0,1)),vega_time_module_t0.getUTCDay()}function utcDate(y,m,d,H,M,S,L){if(0<=y&&y<100){const date=new Date(Date.UTC(-1,m,d,H,M,S,L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(y,m,d,H,M,S,L))}function floor(units,step,get,inv,newDate){const s=step||1,b=peek(units),_=(unit,p,key)=>function getUnit(f,inv,step,phase){const u=step<=1?f:phase?(d,y)=>phase+step*Math.floor((f(d,y)-phase)/step):(d,y)=>step*Math.floor(f(d,y)/step);return inv?(d,y)=>inv(u(d,y),y):u}(get[key=key||unit],inv[key],unit===b&&s,p),t=new Date,u=toSet(units),y=u[YEAR]?_(YEAR):vega_util_module_constant(2012),m=u[MONTH]?_(MONTH):u[QUARTER]?_(QUARTER):zero,d=u[WEEK]&&u[DAY]?_(DAY,1,WEEK+DAY):u[WEEK]?_(WEEK,1):u[DAY]?_(DAY,1):u[DATE]?_(DATE,1):u[DAYOFYEAR]?_(DAYOFYEAR,1):one,H=u[HOURS]?_(HOURS):zero,M=u[MINUTES]?_(MINUTES):zero,S=u[SECONDS]?_(SECONDS):zero,L=u[MILLISECONDS]?_(MILLISECONDS):zero;return function(v){t.setTime(+v);const year=y(t);return newDate(year,m(t),d(t,year),H(t),M(t),S(t),L(t))}}function vega_time_module_weekday(week,day,firstDay){return day+7*week-(firstDay+6)%7}const localGet={[YEAR]:d=>d.getFullYear(),[QUARTER]:d=>Math.floor(d.getMonth()/3),[MONTH]:d=>d.getMonth(),[DATE]:d=>d.getDate(),[HOURS]:d=>d.getHours(),[MINUTES]:d=>d.getMinutes(),[SECONDS]:d=>d.getSeconds(),[MILLISECONDS]:d=>d.getMilliseconds(),[DAYOFYEAR]:d=>localDayOfYear(d),[WEEK]:d=>localWeekNum(d),[WEEK+DAY]:(d,y)=>vega_time_module_weekday(localWeekNum(d),d.getDay(),localFirst(y)),[DAY]:(d,y)=>vega_time_module_weekday(1,d.getDay(),localFirst(y))},localInv={[QUARTER]:q=>3*q,[WEEK]:(w,y)=>vega_time_module_weekday(w,0,localFirst(y))};function timeFloor(units,step){return floor(units,step||1,localGet,localInv,localDate)}const utcGet={[YEAR]:d=>d.getUTCFullYear(),[QUARTER]:d=>Math.floor(d.getUTCMonth()/3),[MONTH]:d=>d.getUTCMonth(),[DATE]:d=>d.getUTCDate(),[HOURS]:d=>d.getUTCHours(),[MINUTES]:d=>d.getUTCMinutes(),[SECONDS]:d=>d.getUTCSeconds(),[MILLISECONDS]:d=>d.getUTCMilliseconds(),[DAYOFYEAR]:d=>utcDayOfYear(d),[WEEK]:d=>utcWeekNum(d),[DAY]:(d,y)=>vega_time_module_weekday(1,d.getUTCDay(),utcFirst(y)),[WEEK+DAY]:(d,y)=>vega_time_module_weekday(utcWeekNum(d),d.getUTCDay(),utcFirst(y))},utcInv={[QUARTER]:q=>3*q,[WEEK]:(w,y)=>vega_time_module_weekday(w,0,utcFirst(y))};function utcFloor(units,step){return floor(units,step||1,utcGet,utcInv,utcDate)}const timeIntervals={[YEAR]:src_year,[QUARTER]:src_month.every(3),[MONTH]:src_month,[WEEK]:sunday,[DATE]:src_day,[DAY]:src_day,[DAYOFYEAR]:src_day,[HOURS]:src_hour,[MINUTES]:src_minute,[SECONDS]:src_second,[MILLISECONDS]:src_millisecond},utcIntervals={[YEAR]:src_utcYear,[QUARTER]:src_utcMonth.every(3),[MONTH]:src_utcMonth,[WEEK]:utcSunday,[DATE]:src_utcDay,[DAY]:src_utcDay,[DAYOFYEAR]:src_utcDay,[HOURS]:src_utcHour,[MINUTES]:src_utcMinute,[SECONDS]:src_second,[MILLISECONDS]:src_millisecond};function timeInterval(unit){return timeIntervals[unit]}function utcInterval(unit){return utcIntervals[unit]}function offset(ival,date,step){return ival?ival.offset(date,step):void 0}function timeOffset(unit,date,step){return offset(timeInterval(unit),date,step)}function utcOffset(unit,date,step){return offset(utcInterval(unit),date,step)}function sequence(ival,start,stop,step){return ival?ival.range(start,stop,step):void 0}function timeSequence(unit,start,stop,step){return sequence(timeInterval(unit),start,stop,step)}function utcSequence(unit,start,stop,step){return sequence(utcInterval(unit),start,stop,step)}const Milli=[YEAR,MONTH,DATE,HOURS,MINUTES,SECONDS,MILLISECONDS],Seconds=Milli.slice(0,-1),Minutes=Seconds.slice(0,-1),Hours=Minutes.slice(0,-1),Day=Hours.slice(0,-1),Month=[YEAR,MONTH],Year=[YEAR],intervals=[[Seconds,1,1e3],[Seconds,5,5e3],[Seconds,15,15e3],[Seconds,30,3e4],[Minutes,1,6e4],[Minutes,5,3e5],[Minutes,15,9e5],[Minutes,30,18e5],[Hours,1,36e5],[Hours,3,108e5],[Hours,6,216e5],[Hours,12,432e5],[Day,1,864e5],[[YEAR,WEEK],1,6048e5],[Month,1,2592e6],[Month,3,7776e6],[Year,1,31536e6]];function bin(opt){const ext=opt.extent,max=opt.maxbins||40,target=Math.abs(span(ext))/max;let units,step,i=bisector((i=>i[2])).right(intervals,target);return i===intervals.length?(units=Year,step=tickStep(ext[0]/31536e6,ext[1]/31536e6,max)):i?(i=intervals[target/intervals[i-1][2]<intervals[i][2]/target?i-1:i],units=i[0],step=i[1]):(units=Milli,step=Math.max(tickStep(ext[0],ext[1],max),1)),{units,step}}function locale_localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function locale_utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y,m,d,H:0,M:0,S:0,L:0}}function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},q:function formatQuarter(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup.get(n[0].toLowerCase()),i+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(Z&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=locale_utcDate(newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=locale_localDate(newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?locale_utcDate(newDate(d.y,0,1)).getUTCDay():locale_localDate(newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,locale_utcDate(d)):locale_localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}}}var src_defaultLocale_locale,timeFormat,timeParse,utcFormat,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){return new Map(names.map(((name,i)=>[name.toLowerCase(),i])))}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return locale_pad(d.getDate(),p,2)}function formatHour24(d,p){return locale_pad(d.getHours(),p,2)}function formatHour12(d,p){return locale_pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return locale_pad(1+src_day.count(src_year(d),d),p,3)}function formatMilliseconds(d,p){return locale_pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return locale_pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return locale_pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return locale_pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return locale_pad(sunday.count(src_year(d)-1,d),p,2)}function dISO(d){var day=d.getDay();return day>=4||0===day?thursday(d):thursday.ceil(d)}function formatWeekNumberISO(d,p){return d=dISO(d),locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return locale_pad(monday.count(src_year(d)-1,d),p,2)}function locale_formatYear(d,p){return locale_pad(d.getFullYear()%100,p,2)}function formatYearISO(d,p){return locale_pad((d=dISO(d)).getFullYear()%100,p,2)}function formatFullYear(d,p){return locale_pad(d.getFullYear()%1e4,p,4)}function formatFullYearISO(d,p){var day=d.getDay();return locale_pad((d=day>=4||0===day?thursday(d):thursday.ceil(d)).getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+locale_pad(z/60|0,"0",2)+locale_pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return locale_pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return locale_pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return locale_pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return locale_pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return locale_pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return locale_pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return locale_pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return locale_pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function UTCdISO(d){var day=d.getUTCDay();return day>=4||0===day?utcThursday(d):utcThursday.ceil(d)}function formatUTCWeekNumberISO(d,p){return d=UTCdISO(d),locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return locale_pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return locale_pad(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO(d,p){return locale_pad((d=UTCdISO(d)).getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return locale_pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCFullYearISO(d,p){var day=d.getUTCDay();return locale_pad((d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d)).getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function memoize(method){const cache={};return spec=>cache[spec]||(cache[spec]=method(spec))}function numberLocale(locale){const format=memoize(locale.format),formatPrefix=locale.formatPrefix;return{format,formatPrefix,formatFloat(spec){const s=formatSpecifier(spec||",");if(null==s.precision){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1}return function trimZeroes(numberFormat,decimalChar){return x=>{const str=numberFormat(x),dec=str.indexOf(decimalChar);if(dec<0)return str;let idx=function rightmostDigit(str,dec){let c,i=str.lastIndexOf("e");if(i>0)return i;for(i=str.length;--i>dec;)if(c=str.charCodeAt(i),c>=48&&c<=57)return i+1}(str,dec);const end=idx<str.length?str.slice(idx):"";for(;--idx>dec;)if("0"!==str[idx]){++idx;break}return str.slice(0,idx)+end}}(format(s),format(".1f")(1)[1])}return format(s)},formatSpan(start,stop,count,specifier){specifier=formatSpecifier(null==specifier?",f":specifier);const step=tickStep(start,stop,count),value=Math.max(Math.abs(start),Math.abs(stop));let precision;if(null==specifier.precision)switch(specifier.type){case"s":return isNaN(precision=precisionPrefix(step,value))||(specifier.precision=precision),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":isNaN(precision=precisionRound(step,value))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":isNaN(precision=precisionFixed(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format(specifier)}}}let defaultNumberLocale,defaultTimeLocale;function resetNumberFormatDefaultLocale(){return defaultNumberLocale=numberLocale({format,formatPrefix})}function numberFormatLocale(definition){return numberLocale(locale(definition))}function numberFormatDefaultLocale(definition){return arguments.length?defaultNumberLocale=numberFormatLocale(definition):defaultNumberLocale}function timeMultiFormat(format,interval,spec){isObject(spec=spec||{})||error("Invalid time multi-format specifier: ".concat(spec));const second=interval(SECONDS),minute=interval(MINUTES),hour=interval(HOURS),day=interval(DATE),week=interval(WEEK),month=interval(MONTH),quarter=interval(QUARTER),year=interval(YEAR),L=format(spec[MILLISECONDS]||".%L"),S=format(spec[SECONDS]||":%S"),M=format(spec[MINUTES]||"%I:%M"),H=format(spec[HOURS]||"%I %p"),d=format(spec[DATE]||spec[DAY]||"%a %d"),w=format(spec[WEEK]||"%b %d"),m=format(spec[MONTH]||"%B"),q=format(spec[QUARTER]||"%B"),y=format(spec[YEAR]||"%Y");return date=>(second(date)<date?L:minute(date)<date?S:hour(date)<date?M:day(date)<date?H:month(date)<date?week(date)<date?d:w:year(date)<date?quarter(date)<date?m:q:y)(date)}function timeLocale(locale){const timeFormat=memoize(locale.format),utcFormat=memoize(locale.utcFormat);return{timeFormat:spec=>isString(spec)?timeFormat(spec):timeMultiFormat(timeFormat,timeInterval,spec),utcFormat:spec=>isString(spec)?utcFormat(spec):timeMultiFormat(utcFormat,utcInterval,spec),timeParse:memoize(locale.parse),utcParse:memoize(locale.utcParse)}}function resetTimeFormatDefaultLocale(){return defaultTimeLocale=timeLocale({format:timeFormat,parse:timeParse,utcFormat,utcParse})}function timeFormatLocale(definition){return timeLocale(formatLocale(definition))}function timeFormatDefaultLocale(definition){return arguments.length?defaultTimeLocale=timeFormatLocale(definition):defaultTimeLocale}!function defaultLocale_defaultLocale(definition){return src_defaultLocale_locale=formatLocale(definition),timeFormat=src_defaultLocale_locale.format,timeParse=src_defaultLocale_locale.parse,utcFormat=src_defaultLocale_locale.utcFormat,utcParse=src_defaultLocale_locale.utcParse,src_defaultLocale_locale}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),resetNumberFormatDefaultLocale(),resetTimeFormatDefaultLocale();const createLocale=(number,time)=>extend({},number,time);function vega_format_module_locale(numberSpec,timeSpec){const number=numberSpec?numberFormatLocale(numberSpec):numberFormatDefaultLocale(),time=timeSpec?timeFormatLocale(timeSpec):timeFormatDefaultLocale();return createLocale(number,time)}function vega_format_module_defaultLocale(numberSpec,timeSpec){const args=arguments.length;return args&&2!==args&&error("defaultLocale expects either zero or two arguments."),args?createLocale(numberFormatDefaultLocale(numberSpec),timeFormatDefaultLocale(timeSpec)):createLocale(numberFormatDefaultLocale(),timeFormatDefaultLocale())}function resetDefaultLocale(){return resetNumberFormatDefaultLocale(),resetTimeFormatDefaultLocale(),vega_format_module_defaultLocale()}const protocol_re=/^(data:|([A-Za-z]+:)?\/\/)/,allowed_re=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whitespace_re=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;async function load(uri,options){const opt=await this.sanitize(uri,options),url=opt.href;return opt.localFile?this.file(url):this.http(url,options)}async function sanitize(uri,options){options=extend({},this.options,options);const fileAccess=this.fileAccess,result={href:null};let isFile,loadFile,base;const isAllowed=allowed_re.test(uri.replace(whitespace_re,""));null!=uri&&"string"==typeof uri&&isAllowed||error("Sanitize failure, invalid URI: "+$(uri));const hasProtocol=protocol_re.test(uri);return(base=options.baseURL)&&!hasProtocol&&(uri.startsWith("/")||base.endsWith("/")||(uri="/"+uri),uri=base+uri),loadFile=(isFile=uri.startsWith("file://"))||"file"===options.mode||"http"!==options.mode&&!hasProtocol&&fileAccess,isFile?uri=uri.slice("file://".length):uri.startsWith("//")&&("file"===options.defaultProtocol?(uri=uri.slice(2),loadFile=!0):uri=(options.defaultProtocol||"http")+":"+uri),Object.defineProperty(result,"localFile",{value:!!loadFile}),result.href=uri,options.target&&(result.target=options.target+""),options.rel&&(result.rel=options.rel+""),"image"===options.context&&options.crossOrigin&&(result.crossOrigin=options.crossOrigin+""),result}function fileLoader(fs){return fs?filename=>new Promise(((accept,reject)=>{fs.readFile(filename,((error,data)=>{error?reject(error):accept(data)}))})):fileReject}async function fileReject(){error("No file system access.")}function httpLoader(fetch){return fetch?async function(url,options){const opt=extend({},this.options.http,options),type=options&&options.response,response=await fetch(url,opt);return response.ok?isFunction(response[type])?response[type]():response.text():error(response.status+""+response.statusText)}:httpReject}async function httpReject(){error("No HTTP fetch method available.")}const vega_loader_browser_module_isNumber=_=>!(Number.isNaN(+_)||_ instanceof Date),typeParsers={boolean:toBoolean,integer:toNumber,number:toNumber,date:toDate,string:vega_util_module_toString,unknown:identity},typeTests=[_=>"true"===_||"false"===_||!0===_||!1===_,_=>vega_loader_browser_module_isNumber(_)&&Number.isInteger(+_),vega_loader_browser_module_isNumber,_=>!Number.isNaN(Date.parse(_))],typeList=["boolean","integer","number","date"];function inferType(values,field){if(!values||!values.length)return"unknown";const n=values.length,m=typeTests.length,a=typeTests.map(((_,i)=>i+1));for(let j,value,i=0,t=0;i<n;++i)for(value=field?values[i][field]:values[i],j=0;j<m;++j)if(a[j]&&(null!=(_=value)&&_==_)&&!typeTests[j](value)&&(a[j]=0,++t,t===typeTests.length))return"string";var _;return typeList[a.reduce(((u,v)=>0===u?v:u),0)-1]}function inferTypes(data,fields){return fields.reduce(((types,field)=>(types[field]=inferType(data,field),types)),{})}function delimitedFormat(delimiter){const parse=function(data,format){const delim={delimiter};return vega_loader_browser_module_dsv(data,format?extend(format,delim):delim)};return parse.responseType="text",parse}function vega_loader_browser_module_dsv(data,format){return format.header&&(data=format.header.map($).join(format.delimiter)+"\n"+data),dsv(format.delimiter).parse(data+"")}function json(data,format){const prop=format&&format.property?field(format.property):identity;return isObject(data)&&!function isBuffer(_){return!("function"!=typeof Buffer||!isFunction(Buffer.isBuffer))&&Buffer.isBuffer(_)}(data)?function parseJSON(data,format){!isArray(data)&&isIterable(data)&&(data=[...data]);return format&&format.copy?JSON.parse(JSON.stringify(data)):data}(prop(data),format):prop(JSON.parse(data))}vega_loader_browser_module_dsv.responseType="text",json.responseType="json";const filters={interior:(a,b)=>a!==b,exterior:(a,b)=>a===b};function topojson(data,format){let method,object,property,filter;return data=json(data,format),format&&format.feature?(method=feature,property=format.feature):format&&format.mesh?(method=mesh,property=format.mesh,filter=filters[format.filter]):error("Missing TopoJSON feature or mesh parameter."),object=(object=data.objects[property])?method(data,object,filter):error("Invalid TopoJSON object: "+property),object&&object.features||[object]}topojson.responseType="json";const vega_loader_browser_module_format={dsv:vega_loader_browser_module_dsv,csv:delimitedFormat(","),tsv:delimitedFormat("\t"),json,topojson};function formats(name,reader){return arguments.length>1?(vega_loader_browser_module_format[name]=reader,this):has(vega_loader_browser_module_format,name)?vega_loader_browser_module_format[name]:null}function responseType(type){const f=formats(type);return f&&f.responseType||"text"}function read(data,schema,timeParser,utcParser){const reader=formats((schema=schema||{}).type||"json");return reader||error("Unknown data format type: "+schema.type),data=reader(data,schema),schema.parse&&function parse(data,types,timeParser,utcParser){if(!data.length)return;const locale=timeFormatDefaultLocale();timeParser=timeParser||locale.timeParse,utcParser=utcParser||locale.utcParse;let datum,field,i,j,n,m,fields=data.columns||Object.keys(data[0]);"auto"===types&&(types=inferTypes(data,fields));fields=Object.keys(types);const parsers=fields.map((field=>{const type=types[field];let parts,pattern;if(type&&(type.startsWith("date:")||type.startsWith("utc:"))){parts=type.split(/:(.+)?/,2),pattern=parts[1],("'"===pattern[0]&&"'"===pattern[pattern.length-1]||'"'===pattern[0]&&'"'===pattern[pattern.length-1])&&(pattern=pattern.slice(1,-1));return("utc"===parts[0]?utcParser:timeParser)(pattern)}if(!typeParsers[type])throw Error("Illegal format pattern: "+field+":"+type);return typeParsers[type]}));for(i=0,n=data.length,m=fields.length;i<n;++i)for(datum=data[i],j=0;j<m;++j)field=fields[j],datum[field]=parsers[j](datum[field])}(data,schema.parse,timeParser,utcParser),has(data,"columns")&&delete data.columns,data}const loader=function loaderFactory(fetch,fs){return options=>({options:options||{},sanitize,load,fileAccess:!!fs,file:fileLoader(fs),http:httpLoader(fetch)})}("undefined"!=typeof fetch&&fetch,null);function UniqueList(idFunc){const $=idFunc||identity,list=[],ids={};return list.add=_=>{const id=$(_);return ids[id]||(ids[id]=1,list.push(_)),list},list.remove=_=>{const id=$(_);if(ids[id]){ids[id]=0;const idx=list.indexOf(_);idx>=0&&list.splice(idx,1)}return list},list}async function asyncCallback(df,callback){try{await callback(df)}catch(err){df.error(err)}}const TUPLE_ID_KEY=Symbol("vega_id");let TUPLE_ID=1;function isTuple(t){return!(!t||!tupleid(t))}function tupleid(t){return t[TUPLE_ID_KEY]}function setid(t,id){return t[TUPLE_ID_KEY]=id,t}function ingest$1(datum){const t=datum===Object(datum)?datum:{data:datum};return tupleid(t)?t:setid(t,TUPLE_ID++)}function derive(t){return rederive(t,ingest$1({}))}function rederive(t,d){for(const k in t)d[k]=t[k];return d}function replace(t,d){return setid(d,tupleid(t))}function stableCompare(cmp,f){return cmp?f?(a,b)=>cmp(a,b)||tupleid(f(a))-tupleid(f(b)):(a,b)=>cmp(a,b)||tupleid(a)-tupleid(b):null}function isChangeSet(v){return v&&v.constructor===changeset}function changeset(){const add=[],rem=[],mod=[],remp=[],modp=[];let clean=null,reflow=!1;return{constructor:changeset,insert(t){const d=array(t),n=d.length;for(let i=0;i<n;++i)add.push(d[i]);return this},remove(t){const a=isFunction(t)?remp:rem,d=array(t),n=d.length;for(let i=0;i<n;++i)a.push(d[i]);return this},modify(t,field,value){const m={field,value:vega_util_module_constant(value)};return isFunction(t)?(m.filter=t,modp.push(m)):(m.tuple=t,mod.push(m)),this},encode(t,set){return isFunction(t)?modp.push({filter:t,field:set}):mod.push({tuple:t,field:set}),this},clean(value){return clean=value,this},reflow(){return reflow=!0,this},pulse(pulse,tuples){const cur={},out={};let i,n,m,f,t,id;for(i=0,n=tuples.length;i<n;++i)cur[tupleid(tuples[i])]=1;for(i=0,n=rem.length;i<n;++i)t=rem[i],cur[tupleid(t)]=-1;for(i=0,n=remp.length;i<n;++i)f=remp[i],tuples.forEach((t=>{f(t)&&(cur[tupleid(t)]=-1)}));for(i=0,n=add.length;i<n;++i)t=add[i],id=tupleid(t),cur[id]?cur[id]=1:pulse.add.push(ingest$1(add[i]));for(i=0,n=tuples.length;i<n;++i)t=tuples[i],cur[tupleid(t)]<0&&pulse.rem.push(t);function modify(t,f,v){v?t[f]=v(t):pulse.encode=f,reflow||(out[tupleid(t)]=t)}for(i=0,n=mod.length;i<n;++i)m=mod[i],t=m.tuple,f=m.field,id=cur[tupleid(t)],id>0&&(modify(t,f,m.value),pulse.modifies(f));for(i=0,n=modp.length;i<n;++i)m=modp[i],f=m.filter,tuples.forEach((t=>{f(t)&&cur[tupleid(t)]>0&&modify(t,m.field,m.value)})),pulse.modifies(m.field);if(reflow)pulse.mod=rem.length||remp.length?tuples.filter((t=>cur[tupleid(t)]>0)):tuples.slice();else for(id in out)pulse.mod.push(out[id]);return(clean||null==clean&&(rem.length||remp.length))&&pulse.clean(!0),pulse}}}function Parameters(){Object.defineProperty(this,"_:mod:_",{writable:!0,value:{}})}Parameters.prototype={set(name,index,value,force){const o=this,v=o[name],mod=o["_:mod:_"];return null!=index&&index>=0?(v[index]!==value||force)&&(v[index]=value,mod[index+":"+name]=-1,mod[name]=-1):(v!==value||force)&&(o[name]=value,mod[name]=isArray(value)?1+value.length:-1),o},modified(name,index){const mod=this["_:mod:_"];if(!arguments.length){for(const k in mod)if(mod[k])return!0;return!1}if(isArray(name)){for(let k=0;k<name.length;++k)if(mod[name[k]])return!0;return!1}return null!=index&&index>=0?index+1<mod[name]||!!mod[index+":"+name]:!!mod[name]},clear(){return this["_:mod:_"]={},this}};let OP_ID=0;const NO_PARAMS=new Parameters;function Operator(init,update,params,react){this.id=++OP_ID,this.value=init,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,update&&(this._update=update),params&&this.parameters(params,react)}function flag(bit){return function(state){const f=this.flags;return 0===arguments.length?!!(f&bit):(this.flags=state?f|bit:f&~bit,this)}}Operator.prototype={targets(){return this._targets||(this._targets=UniqueList(id))},set(value){return this.value!==value?(this.value=value,1):0},skip:flag(1),modified:flag(2),parameters(params,react,initonly){react=!1!==react;const argval=this._argval=this._argval||new Parameters,argops=this._argops=this._argops||[],deps=[];let name,value,n,i;const add=(name,index,value)=>{value instanceof Operator?(value!==this&&(react&&value.targets().add(this),deps.push(value)),argops.push({op:value,name,index})):argval.set(name,index,value)};for(name in params)if(value=params[name],"pulse"===name)array(value).forEach((op=>{op instanceof Operator?op!==this&&(op.targets().add(this),deps.push(op)):error("Pulse parameters must be operator instances.")})),this.source=value;else if(isArray(value))for(argval.set(name,-1,Array(n=value.length)),i=0;i<n;++i)add(name,i,value[i]);else add(name,-1,value);return this.marshall().clear(),initonly&&(argops.initonly=!0),deps},marshall(stamp){const argval=this._argval||NO_PARAMS,argops=this._argops;let item,i,op,mod;if(argops){const n=argops.length;for(i=0;i<n;++i)item=argops[i],op=item.op,mod=op.modified()&&op.stamp===stamp,argval.set(item.name,item.index,op.value,mod);if(argops.initonly){for(i=0;i<n;++i)item=argops[i],item.op.targets().remove(this);this._argops=null,this._update=null}}return argval},detach(){const argops=this._argops;let i,n,item,op;if(argops)for(i=0,n=argops.length;i<n;++i)item=argops[i],op=item.op,op._targets&&op._targets.remove(this);this.pulse=null,this.source=null},evaluate(pulse){const update=this._update;if(update){const params=this.marshall(pulse.stamp),v=update.call(this,params,pulse);if(params.clear(),v!==this.value)this.value=v;else if(!this.modified())return pulse.StopPropagation}},run(pulse){if(pulse.stamp<this.stamp)return pulse.StopPropagation;let rv;return this.skip()?(this.skip(!1),rv=0):rv=this.evaluate(pulse),this.pulse=rv||pulse}};let STREAM_ID=0;function EventStream(filter,apply,receive){this.id=++STREAM_ID,this.value=null,receive&&(this.receive=receive),filter&&(this._filter=filter),apply&&(this._apply=apply)}function stream(filter,apply,receive){return new EventStream(filter,apply,receive)}EventStream.prototype={_filter:truthy,_apply:identity,targets(){return this._targets||(this._targets=UniqueList(id))},consume(_){return arguments.length?(this._consume=!!_,this):!!this._consume},receive(evt){if(this._filter(evt)){const val=this.value=this._apply(evt),trg=this._targets,n=trg?trg.length:0;for(let i=0;i<n;++i)trg[i].receive(val);this._consume&&(evt.preventDefault(),evt.stopPropagation())}},filter(filter){const s=stream(filter);return this.targets().add(s),s},apply(apply){const s=stream(null,apply);return this.targets().add(s),s},merge(){const s=stream();this.targets().add(s);for(let i=0,n=arguments.length;i<n;++i)arguments[i].targets().add(s);return s},throttle(pause){let t=-1;return this.filter((()=>{const now=Date.now();return now-t>pause?(t=now,1):0}))},debounce(delay){const s=stream();return this.targets().add(stream(null,null,debounce(delay,(e=>{const df=e.dataflow;s.receive(e),df&&df.run&&df.run()})))),s},between(a,b){let active=!1;return a.targets().add(stream(null,null,(()=>active=!0))),b.targets().add(stream(null,null,(()=>active=!1))),this.filter((()=>active))},detach(){this._filter=truthy,this._targets=null}};const SKIP={skip:!0};function onStream(df,stream,target,update,params,options){const opt=extend({},options,SKIP);let func,op;isFunction(target)||(target=vega_util_module_constant(target)),void 0===update?func=e=>df.touch(target(e)):isFunction(update)?(op=new Operator(null,update,params,!1),func=e=>{op.evaluate(e);const t=target(e),v=op.value;isChangeSet(v)?df.pulse(t,v,options):df.update(t,v,opt)}):func=e=>df.update(target(e),update,opt),stream.apply(func)}function onOperator(df,source,target,update,params,options){if(void 0===update)source.targets().add(target);else{const opt=options||{},op=new Operator(null,function updater(target,update){return update=isFunction(update)?update:vega_util_module_constant(update),target?function(_,pulse){const value=update(_,pulse);return target.skip()||(target.skip(value!==this.value).value=value),value}:update}(target,update),params,!1);op.modified(opt.force),op.rank=source.rank,source.targets().add(op),target&&(op.skip(!0),op.value=target.value,op.targets().add(target),df.connect(target,[op]))}}const StopPropagation={};function Pulse(dataflow,stamp,encode){this.dataflow=dataflow,this.stamp=null==stamp?-1:stamp,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=encode||null}function materialize(data,filter){const out=[];return visitArray(data,filter,(_=>out.push(_))),out}function filter(pulse,flags){const map={};return pulse.visit(flags,(t=>{map[tupleid(t)]=1})),t=>map[tupleid(t)]?null:t}function addFilter(a,b){return a?(t,i)=>a(t,i)&&b(t,i):b}function MultiPulse(dataflow,stamp,pulses,encode){const p=this,n=pulses.length;let c=0;this.dataflow=dataflow,this.stamp=stamp,this.fields=null,this.encode=encode||null,this.pulses=pulses;for(let i=0;i<n;++i){const pulse=pulses[i];if(pulse.stamp===stamp){if(pulse.fields){const hash=p.fields||(p.fields={});for(const f in pulse.fields)hash[f]=1}pulse.changed(p.ADD)&&(c|=p.ADD),pulse.changed(p.REM)&&(c|=p.REM),pulse.changed(p.MOD)&&(c|=p.MOD)}}this.changes=c}function reentrant(df){return df.error("Dataflow already running. Use runAsync() to chain invocations."),df}Pulse.prototype={StopPropagation,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(flags){return new Pulse(this.dataflow).init(this,flags)},clone(){const p=this.fork(7);return p.add=p.add.slice(),p.rem=p.rem.slice(),p.mod=p.mod.slice(),p.source&&(p.source=p.source.slice()),p.materialize(23)},addAll(){let p=this;return!p.source||p.add===p.rem||!p.rem.length&&p.source.length===p.add.length||(p=new Pulse(this.dataflow).init(this),p.add=p.source,p.rem=[]),p},init(src,flags){const p=this;return p.stamp=src.stamp,p.encode=src.encode,!src.fields||64&flags||(p.fields=src.fields),1&flags?(p.addF=src.addF,p.add=src.add):(p.addF=null,p.add=[]),2&flags?(p.remF=src.remF,p.rem=src.rem):(p.remF=null,p.rem=[]),4&flags?(p.modF=src.modF,p.mod=src.mod):(p.modF=null,p.mod=[]),32&flags?(p.srcF=null,p.source=null):(p.srcF=src.srcF,p.source=src.source,src.cleans&&(p.cleans=src.cleans)),p},runAfter(func){this.dataflow.runAfter(func)},changed(flags){const f=flags||7;return 1&f&&this.add.length||2&f&&this.rem.length||4&f&&this.mod.length},reflow(fork){if(fork)return this.fork(7).reflow();const len=this.add.length,src=this.source&&this.source.length;return src&&src!==len&&(this.mod=this.source,len&&this.filter(4,filter(this,1))),this},clean(value){return arguments.length?(this.cleans=!!value,this):this.cleans},modifies(_){const hash=this.fields||(this.fields={});return isArray(_)?_.forEach((f=>hash[f]=!0)):hash[_]=!0,this},modified(_,nomod){const fields=this.fields;return!(!nomod&&!this.mod.length||!fields)&&(arguments.length?isArray(_)?_.some((f=>fields[f])):fields[_]:!!fields)},filter(flags,filter){const p=this;return 1&flags&&(p.addF=addFilter(p.addF,filter)),2&flags&&(p.remF=addFilter(p.remF,filter)),4&flags&&(p.modF=addFilter(p.modF,filter)),16&flags&&(p.srcF=addFilter(p.srcF,filter)),p},materialize(flags){const p=this;return 1&(flags=flags||7)&&p.addF&&(p.add=materialize(p.add,p.addF),p.addF=null),2&flags&&p.remF&&(p.rem=materialize(p.rem,p.remF),p.remF=null),4&flags&&p.modF&&(p.mod=materialize(p.mod,p.modF),p.modF=null),16&flags&&p.srcF&&(p.source=p.source.filter(p.srcF),p.srcF=null),p},visit(flags,visitor){const p=this,v=visitor;if(16&flags)return visitArray(p.source,p.srcF,v),p;1&flags&&visitArray(p.add,p.addF,v),2&flags&&visitArray(p.rem,p.remF,v),4&flags&&visitArray(p.mod,p.modF,v);const src=p.source;if(8&flags&&src){const sum=p.add.length+p.mod.length;sum===src.length||visitArray(src,sum?filter(p,5):p.srcF,v)}return p}},inherits(MultiPulse,Pulse,{fork(flags){const p=new Pulse(this.dataflow).init(this,flags&this.NO_FIELDS);return void 0!==flags&&(flags&p.ADD&&this.visit(p.ADD,(t=>p.add.push(t))),flags&p.REM&&this.visit(p.REM,(t=>p.rem.push(t))),flags&p.MOD&&this.visit(p.MOD,(t=>p.mod.push(t)))),p},changed(flags){return this.changes&flags},modified(_){const p=this,fields=p.fields;return fields&&p.changes&p.MOD?isArray(_)?_.some((f=>fields[f])):fields[_]:0},filter(){error("MultiPulse does not support filtering.")},materialize(){error("MultiPulse does not support materialization.")},visit(flags,visitor){const p=this,pulses=p.pulses,n=pulses.length;let i=0;if(flags&p.SOURCE)for(;i<n;++i)pulses[i].visit(flags,visitor);else for(;i<n;++i)pulses[i].stamp===p.stamp&&pulses[i].visit(flags,visitor);return p}});const NO_OPT={skip:!1,force:!1};function Heap(cmp){let nodes=[];return{clear:()=>nodes=[],size:()=>nodes.length,peek:()=>nodes[0],push:x=>(nodes.push(x),siftdown(nodes,0,nodes.length-1,cmp)),pop:()=>{const last=nodes.pop();let item;return nodes.length?(item=nodes[0],nodes[0]=last,function siftup(array,idx,cmp){const start=idx,end=array.length,item=array[idx];let ridx,cidx=1+(idx<<1);for(;cidx<end;)ridx=cidx+1,ridx<end&&cmp(array[cidx],array[ridx])>=0&&(cidx=ridx),array[idx]=array[cidx],cidx=1+((idx=cidx)<<1);return array[idx]=item,siftdown(array,start,idx,cmp)}(nodes,0,cmp)):item=last,item}}}function siftdown(array,start,idx,cmp){let parent,pidx;const item=array[idx];for(;idx>start&&(pidx=idx-1>>1,parent=array[pidx],cmp(item,parent)<0);)array[idx]=parent,idx=pidx;return array[idx]=item}function Dataflow(){this.logger(logger()),this.logLevel(Error$1),this._clock=0,this._rank=0,this._locale=vega_format_module_defaultLocale();try{this._loader=loader()}catch(e){}this._touched=UniqueList(id),this._input={},this._pulse=null,this._heap=Heap(((a,b)=>a.qrank-b.qrank)),this._postrun=[]}function logMethod(method){return function(){return this._log[method].apply(this,arguments)}}function Transform(init,params){Operator.call(this,init,null,params)}Dataflow.prototype={stamp(){return this._clock},loader(_){return arguments.length?(this._loader=_,this):this._loader},locale(_){return arguments.length?(this._locale=_,this):this._locale},logger(logger){return arguments.length?(this._log=logger,this):this._log},error:logMethod("error"),warn:logMethod("warn"),info:logMethod("info"),debug:logMethod("debug"),logLevel:logMethod("level"),cleanThreshold:1e4,add:function add(init,update,params,react){let op,shift=1;return init instanceof Operator?op=init:init&&init.prototype instanceof Operator?op=new init:isFunction(init)?op=new Operator(null,init):(shift=0,op=new Operator(init,update)),this.rank(op),shift&&(react=params,params=update),params&&this.connect(op,op.parameters(params,react)),this.touch(op),op},connect:function connect(target,sources){const targetRank=target.rank,n=sources.length;for(let i=0;i<n;++i)if(targetRank<sources[i].rank)return void this.rerank(target)},rank:function rank(op){op.rank=++this._rank},rerank:function rerank(op){const queue=[op];let cur,list,i;for(;queue.length;)if(this.rank(cur=queue.pop()),list=cur._targets)for(i=list.length;--i>=0;)queue.push(cur=list[i]),cur===op&&error("Cycle detected in dataflow graph.")},pulse:function pulse(op,changeset,options){this.touch(op,options||NO_OPT);const p=new Pulse(this,this._clock+(this._pulse?0:1)),t=op.pulse&&op.pulse.source||[];return p.target=op,this._input[op.id]=changeset.pulse(p,t),this},touch:function touch(op,options){const opt=options||NO_OPT;return this._pulse?this._enqueue(op):this._touched.add(op),opt.skip&&op.skip(!0),this},update:function update(op,value,options){const opt=options||NO_OPT;return(op.set(value)||opt.force)&&this.touch(op,opt),this},changeset,ingest:function ingest(target,data,format){return data=this.parse(data,format),this.pulse(target,this.changeset().insert(data))},parse:function vega_dataflow_module_parse(data,format){const locale=this.locale();return read(data,format,locale.timeParse,locale.utcParse)},preload:async function preload(target,url,format){const df=this,pending=df._pending||function loadPending(df){let accept;const pending=new Promise((a=>accept=a));return pending.requests=0,pending.done=()=>{0==--pending.requests&&(df._pending=null,accept(df))},df._pending=pending}(df);pending.requests+=1;const res=await df.request(url,format);return df.pulse(target,df.changeset().remove(truthy).insert(res.data||[])),pending.done(),res},request:async function request(url,format){const df=this;let data,status=0;try{data=await df.loader().load(url,{context:"dataflow",response:responseType(format&&format.type)});try{data=df.parse(data,format)}catch(err){status=-2,df.warn("Data ingestion failed",url,err)}}catch(err){status=-1,df.warn("Loading failed",url,err)}return{data,status}},events:function events(source,type,filter,apply){const df=this,s=stream(filter,apply),send=function(e){e.dataflow=df;try{s.receive(e)}catch(error){df.error(error)}finally{df.run()}};let sources;sources="string"==typeof source&&"undefined"!=typeof document?document.querySelectorAll(source):array(source);const n=sources.length;for(let i=0;i<n;++i)sources[i].addEventListener(type,send);return s},on:function on(source,target,update,params,options){return(source instanceof Operator?onOperator:onStream)(this,source,target,update,params,options),this},evaluate:async function evaluate(encode,prerun,postrun){const df=this,async=[];if(df._pulse)return reentrant(df);if(df._pending&&await df._pending,prerun&&await asyncCallback(df,prerun),!df._touched.length)return df.debug("Dataflow invoked, but nothing to do."),df;const stamp=++df._clock;df._pulse=new Pulse(df,stamp,encode),df._touched.forEach((op=>df._enqueue(op,!0))),df._touched=UniqueList(id);let op,next,error,count=0;try{for(;df._heap.size()>0;)op=df._heap.pop(),op.rank===op.qrank?(next=op.run(df._getPulse(op,encode)),next.then?next=await next:next.async&&(async.push(next.async),next=StopPropagation),next!==StopPropagation&&op._targets&&op._targets.forEach((op=>df._enqueue(op))),++count):df._enqueue(op,!0)}catch(err){df._heap.clear(),error=err}if(df._input={},df._pulse=null,df.debug(`Pulse ${stamp}: ${count} operators`),error&&(df._postrun=[],df.error(error)),df._postrun.length){const pr=df._postrun.sort(((a,b)=>b.priority-a.priority));df._postrun=[];for(let i=0;i<pr.length;++i)await asyncCallback(df,pr[i].callback)}return postrun&&await asyncCallback(df,postrun),async.length&&Promise.all(async).then((cb=>df.runAsync(null,(()=>{cb.forEach((f=>{try{f(df)}catch(err){df.error(err)}}))})))),df},run:function run(encode,prerun,postrun){return this._pulse?reentrant(this):(this.evaluate(encode,prerun,postrun),this)},runAsync:async function runAsync(encode,prerun,postrun){for(;this._running;)await this._running;const clear=()=>this._running=null;return(this._running=this.evaluate(encode,prerun,postrun)).then(clear,clear),this._running},runAfter:function runAfter(callback,enqueue,priority){if(this._pulse||enqueue)this._postrun.push({priority:priority||0,callback});else try{callback(this)}catch(err){this.error(err)}},_enqueue:function enqueue(op,force){const q=op.stamp<this._clock;q&&(op.stamp=this._clock),(q||force)&&(op.qrank=op.rank,this._heap.push(op))},_getPulse:function getPulse(op,encode){const s=op.source,stamp=this._clock;return s&&isArray(s)?new MultiPulse(this,stamp,s.map((_=>_.pulse)),encode):this._input[op.id]||function singlePulse(p,s){if(s&&s.stamp===p.stamp)return s;p=p.fork(),s&&s!==StopPropagation&&(p.source=s.source);return p}(this._pulse,s&&s.pulse)}},inherits(Transform,Operator,{run(pulse){if(pulse.stamp<this.stamp)return pulse.StopPropagation;let rv;return this.skip()?this.skip(!1):rv=this.evaluate(pulse),rv=rv||pulse,rv.then?rv=rv.then((_=>this.pulse=_)):rv!==pulse.StopPropagation&&(this.pulse=rv),rv},evaluate(pulse){const params=this.marshall(pulse.stamp),out=this.transform(params,pulse);return params.clear(),out},transform(){}});const transforms={};function definition(type){const t=vega_dataflow_module_transform(type);return t&&t.Definition||null}function vega_dataflow_module_transform(type){return type=type&&type.toLowerCase(),has(transforms,type)?transforms[type]:null}function max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}function min(values,valueof){let min;if(void 0===valueof)for(const value of values)null!=value&&(min>value||void 0===min&&value>=value)&&(min=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value)}return min}function compareDefined(compare=ascending_ascending){if(compare===ascending_ascending)return sort_ascendingDefined;if("function"!=typeof compare)throw new TypeError("compare is not a function");return(a,b)=>{const x=compare(a,b);return x||0===x?x:(0===compare(b,b))-(0===compare(a,a))}}function sort_ascendingDefined(a,b){return(null==a||!(a>=a))-(null==b||!(b>=b))||(a<b?-1:a>b?1:0)}function quickselect_quickselect(array,k,left=0,right=array.length-1,compare){for(compare=void 0===compare?sort_ascendingDefined:compareDefined(compare);right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);quickselect_quickselect(array,k,Math.max(left,Math.floor(k-m*s/n+sd)),Math.min(right,Math.floor(k+(n-m)*s/n+sd)),compare)}const t=array[k];let i=left,j=right;for(swap(array,left,k),compare(array[right],t)>0&&swap(array,left,right);i<j;){for(swap(array,i,j),++i,--j;compare(array[i],t)<0;)++i;for(;compare(array[j],t)>0;)--j}0===compare(array[left],t)?swap(array,left,j):(++j,swap(array,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}return array}function swap(array,i,j){const t=array[i];array[i]=array[j],array[j]=t}function number(x){return null===x?NaN:+x}function quantile(values,p,valueof){if(values=Float64Array.from(function*number_numbers(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}}(values,valueof)),n=values.length){if((p=+p)<=0||n<2)return min(values);if(p>=1)return max(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max(quickselect_quickselect(values,i0).subarray(0,i0+1));return value0+(min(values.subarray(i0+1))-value0)*(i-i0)}}function quantileSorted(values,p,valueof=number){if(n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values);return value0+(+valueof(values[i0+1],i0+1,values)-value0)*(i-i0)}}function median(values,valueof){return quantile(values,.5,valueof)}function*vega_statistics_module_numbers(values,valueof){if(null==valueof)for(let value of values)null!=value&&""!==value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)value=valueof(value,++index,values),null!=value&&""!==value&&(value=+value)>=value&&(yield value)}}function quantiles(array,p,f){const values=Float64Array.from(vega_statistics_module_numbers(array,f));return values.sort(ascending_ascending),p.map((_=>quantileSorted(values,_)))}function quartiles(array,f){return quantiles(array,[.25,.5,.75],f)}function estimateBandwidth(array,f){const n=array.length,d=function deviation(values,valueof){const v=function variance(values,valueof){let delta,count=0,mean=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(delta=value-mean,mean+=delta/++count,sum+=delta*(value-mean));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(delta=value-mean,mean+=delta/++count,sum+=delta*(value-mean))}if(count>1)return sum/(count-1)}(values,valueof);return v?Math.sqrt(v):v}(array,f),q=quartiles(array,f),h=(q[2]-q[0])/1.34;return 1.06*(Math.min(d,h)||d||Math.abs(q[0])||1)*Math.pow(n,-.2)}function vega_statistics_module_bin(_){const maxb=_.maxbins||20,base=_.base||10,logb=Math.log(base),div=_.divide||[5,2];let step,level,minstep,v,i,n,min=_.extent[0],max=_.extent[1];const span=_.span||max-min||Math.abs(min)||1;if(_.step)step=_.step;else if(_.steps){for(v=span/maxb,i=0,n=_.steps.length;i<n&&_.steps[i]<v;++i);step=_.steps[Math.max(0,i-1)]}else{for(level=Math.ceil(Math.log(maxb)/logb),minstep=_.minstep||0,step=Math.max(minstep,Math.pow(base,Math.round(Math.log(span)/logb)-level));Math.ceil(span/step)>maxb;)step*=base;for(i=0,n=div.length;i<n;++i)v=step/div[i],v>=minstep&&span/v<=maxb&&(step=v)}v=Math.log(step);const precision=v>=0?0:1+~~(-v/logb),eps=Math.pow(base,-precision-1);return(_.nice||void 0===_.nice)&&(v=Math.floor(min/step+eps)*step,min=min<v?v-step:v,max=Math.ceil(max/step)*step),{start:min,stop:max===min?min+step:max,step}}var random=Math.random;function setRandom(r){random=r}function bootstrapCI(array,samples,alpha,f){if(!array.length)return[void 0,void 0];const values=Float64Array.from(vega_statistics_module_numbers(array,f)),n=values.length,m=samples;let a,i,j,mu;for(j=0,mu=Array(m);j<m;++j){for(a=0,i=0;i<n;++i)a+=values[~~(random()*n)];mu[j]=a/n}return mu.sort(ascending_ascending),[quantile(mu,alpha/2),quantile(mu,1-alpha/2)]}function dotbin(array,step,smooth,f){f=f||(_=>_);const n=array.length,v=new Float64Array(n);let x,i=0,j=1,a=f(array[0]),b=a,w=a+step;for(;j<n;++j){if(x=f(array[j]),x>=w){for(b=(a+b)/2;i<j;++i)v[i]=b;w=x+step,a=x}b=x}for(b=(a+b)/2;i<j;++i)v[i]=b;return smooth?function smoothing(v,thresh){const n=v.length;let c,d,a=0,b=1;for(;v[a]===v[b];)++b;for(;b<n;){for(c=b+1;v[b]===v[c];)++c;if(v[b]-v[b-1]<thresh){for(d=b+(a+c-b-b>>1);d<b;)v[d++]=v[b];for(;d>b;)v[d--]=v[a]}a=b,b=c}return v}(v,step+step/4):v}function vega_statistics_module_lcg(seed){return function(){return(seed=(1103515245*seed+12345)%2147483647)/2147483647}}function integer(min,max){let a,b,d;null==max&&(max=min,min=0);const dist={min(_){return arguments.length?(a=_||0,d=b-a,dist):a},max(_){return arguments.length?(b=_||0,d=b-a,dist):b},sample:()=>a+Math.floor(d*random()),pdf:x=>x===Math.floor(x)&&x>=a&&x<b?1/d:0,cdf(x){const v=Math.floor(x);return v<a?0:v>=b?1:(v-a+1)/d},icdf:p=>p>=0&&p<=1?a-1+Math.floor(p*d):NaN};return dist.min(min).max(max)}const SQRT2PI=Math.sqrt(2*Math.PI),SQRT2=Math.SQRT2;let nextSample=NaN;function sampleNormal(mean,stdev){mean=mean||0,stdev=null==stdev?1:stdev;let rds,c,x=0,y=0;if(nextSample==nextSample)x=nextSample,nextSample=NaN;else{do{x=2*random()-1,y=2*random()-1,rds=x*x+y*y}while(0===rds||rds>1);c=Math.sqrt(-2*Math.log(rds)/rds),x*=c,nextSample=y*c}return mean+x*stdev}function densityNormal(value,mean,stdev){const z=(value-(mean||0))/(stdev=null==stdev?1:stdev);return Math.exp(-.5*z*z)/(stdev*SQRT2PI)}function cumulativeNormal(value,mean,stdev){const z=(value-(mean=mean||0))/(stdev=null==stdev?1:stdev),Z=Math.abs(z);let cd;if(Z>37)cd=0;else{const exp=Math.exp(-Z*Z/2);let sum;Z<7.07106781186547?(sum=.0352624965998911*Z+.700383064443688,sum=sum*Z+6.37396220353165,sum=sum*Z+33.912866078383,sum=sum*Z+112.079291497871,sum=sum*Z+221.213596169931,sum=sum*Z+220.206867912376,cd=exp*sum,sum=.0883883476483184*Z+1.75566716318264,sum=sum*Z+16.064177579207,sum=sum*Z+86.7807322029461,sum=sum*Z+296.564248779674,sum=sum*Z+637.333633378831,sum=sum*Z+793.826512519948,sum=sum*Z+440.413735824752,cd/=sum):(sum=Z+.65,sum=Z+4/sum,sum=Z+3/sum,sum=Z+2/sum,sum=Z+1/sum,cd=exp/sum/2.506628274631)}return z>0?1-cd:cd}function quantileNormal(p,mean,stdev){return p<0||p>1?NaN:(mean||0)+(null==stdev?1:stdev)*SQRT2*function erfinv(x){let p,w=-Math.log((1-x)*(1+x));w<6.25?(w-=3.125,p=-364441206401782e-35,p=p*w-16850591381820166e-35,p=128584807152564e-32+p*w,p=11157877678025181e-33+p*w,p=p*w-1333171662854621e-31,p=20972767875968562e-33+p*w,p=6637638134358324e-30+p*w,p=p*w-4054566272975207e-29,p=p*w-8151934197605472e-29,p=26335093153082323e-28+p*w,p=p*w-12975133253453532e-27,p=p*w-5415412054294628e-26,p=1.0512122733215323e-9+p*w,p=p*w-4.112633980346984e-9,p=p*w-2.9070369957882005e-8,p=4.2347877827932404e-7+p*w,p=p*w-13654692000834679e-22,p=p*w-13882523362786469e-21,p=.00018673420803405714+p*w,p=p*w-.000740702534166267,p=p*w-.006033670871430149,p=.24015818242558962+p*w,p=1.6536545626831027+p*w):w<16?(w=Math.sqrt(w)-3.25,p=2.2137376921775787e-9,p=9.075656193888539e-8+p*w,p=p*w-2.7517406297064545e-7,p=1.8239629214389228e-8+p*w,p=15027403968909828e-22+p*w,p=p*w-4013867526981546e-21,p=29234449089955446e-22+p*w,p=12475304481671779e-21+p*w,p=p*w-47318229009055734e-21,p=6828485145957318e-20+p*w,p=24031110387097894e-21+p*w,p=p*w-.0003550375203628475,p=.0009532893797373805+p*w,p=p*w-.0016882755560235047,p=.002491442096107851+p*w,p=p*w-.003751208507569241,p=.005370914553590064+p*w,p=1.0052589676941592+p*w,p=3.0838856104922208+p*w):Number.isFinite(w)?(w=Math.sqrt(w)-5,p=-27109920616438573e-27,p=p*w-2.555641816996525e-10,p=1.5076572693500548e-9+p*w,p=p*w-3.789465440126737e-9,p=7.61570120807834e-9+p*w,p=p*w-1.496002662714924e-8,p=2.914795345090108e-8+p*w,p=p*w-6.771199775845234e-8,p=2.2900482228026655e-7+p*w,p=p*w-9.9298272942317e-7,p=4526062597223154e-21+p*w,p=p*w-1968177810553167e-20,p=7599527703001776e-20+p*w,p=p*w-.00021503011930044477,p=p*w-.00013871931833623122,p=1.0103004648645344+p*w,p=4.849906401408584+p*w):p=1/0;return p*x}(2*p-1)}function gaussian(mean,stdev){let mu,sigma;const dist={mean(_){return arguments.length?(mu=_||0,dist):mu},stdev(_){return arguments.length?(sigma=null==_?1:_,dist):sigma},sample:()=>sampleNormal(mu,sigma),pdf:value=>densityNormal(value,mu,sigma),cdf:value=>cumulativeNormal(value,mu,sigma),icdf:p=>quantileNormal(p,mu,sigma)};return dist.mean(mean).stdev(stdev)}function kde(support,bandwidth){const kernel=gaussian();let n=0;const dist={data(_){return arguments.length?(support=_,n=_?_.length:0,dist.bandwidth(bandwidth)):support},bandwidth(_){return arguments.length?(!(bandwidth=_)&&support&&(bandwidth=estimateBandwidth(support)),dist):bandwidth},sample:()=>support[~~(random()*n)]+bandwidth*kernel.sample(),pdf(x){let y=0,i=0;for(;i<n;++i)y+=kernel.pdf((x-support[i])/bandwidth);return y/bandwidth/n},cdf(x){let y=0,i=0;for(;i<n;++i)y+=kernel.cdf((x-support[i])/bandwidth);return y/n},icdf(){throw Error("KDE icdf not supported.")}};return dist.data(support)}function sampleLogNormal(mean,stdev){return mean=mean||0,stdev=null==stdev?1:stdev,Math.exp(mean+sampleNormal()*stdev)}function densityLogNormal(value,mean,stdev){if(value<=0)return 0;mean=mean||0,stdev=null==stdev?1:stdev;const z=(Math.log(value)-mean)/stdev;return Math.exp(-.5*z*z)/(stdev*SQRT2PI*value)}function cumulativeLogNormal(value,mean,stdev){return cumulativeNormal(Math.log(value),mean,stdev)}function quantileLogNormal(p,mean,stdev){return Math.exp(quantileNormal(p,mean,stdev))}function lognormal(mean,stdev){let mu,sigma;const dist={mean(_){return arguments.length?(mu=_||0,dist):mu},stdev(_){return arguments.length?(sigma=null==_?1:_,dist):sigma},sample:()=>sampleLogNormal(mu,sigma),pdf:value=>densityLogNormal(value,mu,sigma),cdf:value=>cumulativeLogNormal(value,mu,sigma),icdf:p=>quantileLogNormal(p,mu,sigma)};return dist.mean(mean).stdev(stdev)}function mixture(dists,weights){let w,m=0;const dist={weights(_){return arguments.length?(w=function normalize(x){const w=[];let i,sum=0;for(i=0;i<m;++i)sum+=w[i]=null==x[i]?1:+x[i];for(i=0;i<m;++i)w[i]/=sum;return w}(weights=_||[]),dist):weights},distributions(_){return arguments.length?(_?(m=_.length,dists=_):(m=0,dists=[]),dist.weights(weights)):dists},sample(){const r=random();let d=dists[m-1],v=w[0],i=0;for(;i<m-1;v+=w[++i])if(r<v){d=dists[i];break}return d.sample()},pdf(x){let p=0,i=0;for(;i<m;++i)p+=w[i]*dists[i].pdf(x);return p},cdf(x){let p=0,i=0;for(;i<m;++i)p+=w[i]*dists[i].cdf(x);return p},icdf(){throw Error("Mixture icdf not supported.")}};return dist.distributions(dists).weights(weights)}function sampleUniform(min,max){return null==max&&(max=null==min?1:min,min=0),min+(max-min)*random()}function densityUniform(value,min,max){return null==max&&(max=null==min?1:min,min=0),value>=min&&value<=max?1/(max-min):0}function cumulativeUniform(value,min,max){return null==max&&(max=null==min?1:min,min=0),value<min?0:value>max?1:(value-min)/(max-min)}function quantileUniform(p,min,max){return null==max&&(max=null==min?1:min,min=0),p>=0&&p<=1?min+p*(max-min):NaN}function uniform(min,max){let a,b;const dist={min(_){return arguments.length?(a=_||0,dist):a},max(_){return arguments.length?(b=null==_?1:_,dist):b},sample:()=>sampleUniform(a,b),pdf:value=>densityUniform(value,a,b),cdf:value=>cumulativeUniform(value,a,b),icdf:p=>quantileUniform(p,a,b)};return null==max&&(max=null==min?1:min,min=0),dist.min(min).max(max)}function ols(uX,uY,uXY,uX2){const delta=uX2-uX*uX,slope=Math.abs(delta)<1e-24?0:(uXY-uX*uY)/delta;return[uY-slope*uX,slope]}function points(data,x,y,sort){data=data.filter((d=>{let u=x(d),v=y(d);return null!=u&&(u=+u)>=u&&null!=v&&(v=+v)>=v})),sort&&data.sort(((a,b)=>x(a)-x(b)));const n=data.length,X=new Float64Array(n),Y=new Float64Array(n);let xv,yv,d,i=0,ux=0,uy=0;for(d of data)X[i]=xv=+x(d),Y[i]=yv=+y(d),++i,ux+=(xv-ux)/i,uy+=(yv-uy)/i;for(i=0;i<n;++i)X[i]-=ux,Y[i]-=uy;return[X,Y,ux,uy]}function visitPoints(data,x,y,callback){let u,v,i=-1;for(const d of data)u=x(d),v=y(d),null!=u&&(u=+u)>=u&&null!=v&&(v=+v)>=v&&callback(u,v,++i)}function rSquared(data,x,y,uY,predict){let SSE=0,SST=0;return visitPoints(data,x,y,((dx,dy)=>{const sse=dy-predict(dx),sst=dy-uY;SSE+=sse*sse,SST+=sst*sst})),1-SSE/SST}function linear(data,x,y){let X=0,Y=0,XY=0,X2=0,n=0;visitPoints(data,x,y,((dx,dy)=>{++n,X+=(dx-X)/n,Y+=(dy-Y)/n,XY+=(dx*dy-XY)/n,X2+=(dx*dx-X2)/n}));const coef=ols(X,Y,XY,X2),predict=x=>coef[0]+coef[1]*x;return{coef,predict,rSquared:rSquared(data,x,y,Y,predict)}}function vega_statistics_module_log(data,x,y){let X=0,Y=0,XY=0,X2=0,n=0;visitPoints(data,x,y,((dx,dy)=>{++n,dx=Math.log(dx),X+=(dx-X)/n,Y+=(dy-Y)/n,XY+=(dx*dy-XY)/n,X2+=(dx*dx-X2)/n}));const coef=ols(X,Y,XY,X2),predict=x=>coef[0]+coef[1]*Math.log(x);return{coef,predict,rSquared:rSquared(data,x,y,Y,predict)}}function vega_statistics_module_exp(data,x,y){const[xv,yv,ux,uy]=points(data,x,y);let dx,ly,xy,YL=0,XY=0,XYL=0,X2Y=0,n=0;visitPoints(data,x,y,((_,dy)=>{dx=xv[n++],ly=Math.log(dy),xy=dx*dy,YL+=(dy*ly-YL)/n,XY+=(xy-XY)/n,XYL+=(xy*ly-XYL)/n,X2Y+=(dx*xy-X2Y)/n}));const[c0,c1]=ols(XY/uy,YL/uy,XYL/uy,X2Y/uy),predict=x=>Math.exp(c0+c1*(x-ux));return{coef:[Math.exp(c0-c1*ux),c1],predict,rSquared:rSquared(data,x,y,uy,predict)}}function vega_statistics_module_pow(data,x,y){let X=0,Y=0,XY=0,X2=0,YS=0,n=0;visitPoints(data,x,y,((dx,dy)=>{const lx=Math.log(dx),ly=Math.log(dy);++n,X+=(lx-X)/n,Y+=(ly-Y)/n,XY+=(lx*ly-XY)/n,X2+=(lx*lx-X2)/n,YS+=(dy-YS)/n}));const coef=ols(X,Y,XY,X2),predict=x=>coef[0]*Math.pow(x,coef[1]);return coef[0]=Math.exp(coef[0]),{coef,predict,rSquared:rSquared(data,x,y,YS,predict)}}function quad(data,x,y){const[xv,yv,ux,uy]=points(data,x,y),n=xv.length;let i,dx,dy,x2,X2=0,X3=0,X4=0,XY=0,X2Y=0;for(i=0;i<n;)dx=xv[i],dy=yv[i++],x2=dx*dx,X2+=(x2-X2)/i,X3+=(x2*dx-X3)/i,X4+=(x2*x2-X4)/i,XY+=(dx*dy-XY)/i,X2Y+=(x2*dy-X2Y)/i;const X2X2=X4-X2*X2,d=X2*X2X2-X3*X3,a=(X2Y*X2-XY*X3)/d,b=(XY*X2X2-X2Y*X3)/d,c=-a*X2,predict=x=>a*(x-=ux)*x+b*x+c+uy;return{coef:[c-b*ux+a*ux*ux+uy,b-2*a*ux,a],predict,rSquared:rSquared(data,x,y,uy,predict)}}function poly(data,x,y,order){if(1===order)return linear(data,x,y);if(2===order)return quad(data,x,y);const[xv,yv,ux,uy]=points(data,x,y),n=xv.length,lhs=[],rhs=[],k=order+1;let i,j,l,v,c;for(i=0;i<k;++i){for(l=0,v=0;l<n;++l)v+=Math.pow(xv[l],i)*yv[l];for(lhs.push(v),c=new Float64Array(k),j=0;j<k;++j){for(l=0,v=0;l<n;++l)v+=Math.pow(xv[l],i+j);c[j]=v}rhs.push(c)}rhs.push(lhs);const coef=function gaussianElimination(matrix){const n=matrix.length-1,coef=[];let i,j,k,r,t;for(i=0;i<n;++i){for(r=i,j=i+1;j<n;++j)Math.abs(matrix[i][j])>Math.abs(matrix[i][r])&&(r=j);for(k=i;k<n+1;++k)t=matrix[k][i],matrix[k][i]=matrix[k][r],matrix[k][r]=t;for(j=i+1;j<n;++j)for(k=n;k>=i;k--)matrix[k][j]-=matrix[k][i]*matrix[i][j]/matrix[i][i]}for(j=n-1;j>=0;--j){for(t=0,k=j+1;k<n;++k)t+=matrix[k][j]*coef[k];coef[j]=(matrix[n][j]-t)/matrix[j][j]}return coef}(rhs),predict=x=>{x-=ux;let y=uy+coef[0]+coef[1]*x+coef[2]*x*x;for(i=3;i<k;++i)y+=coef[i]*Math.pow(x,i);return y};return{coef:uncenter(k,coef,-ux,uy),predict,rSquared:rSquared(data,x,y,uy,predict)}}function uncenter(k,a,x,y){const z=Array(k);let i,j,v,c;for(i=0;i<k;++i)z[i]=0;for(i=k-1;i>=0;--i)for(v=a[i],c=1,z[i]+=v,j=1;j<=i;++j)c*=(i+1-j)/j,z[i-j]+=v*Math.pow(x,j)*c;return z[0]+=y,z}function loess(data,x,y,bandwidth){const[xv,yv,ux,uy]=points(data,x,y,!0),n=xv.length,bw=Math.max(2,~~(bandwidth*n)),yhat=new Float64Array(n),residuals=new Float64Array(n),robustWeights=new Float64Array(n).fill(1);for(let iter=-1;++iter<=2;){const interval=[0,bw-1];for(let i=0;i<n;++i){const dx=xv[i],i0=interval[0],i1=interval[1],edge=dx-xv[i0]>xv[i1]-dx?i0:i1;let W=0,X=0,Y=0,XY=0,X2=0;const denom=1/Math.abs(xv[edge]-dx||1);for(let k=i0;k<=i1;++k){const xk=xv[k],yk=yv[k],w=tricube(Math.abs(dx-xk)*denom)*robustWeights[k],xkw=xk*w;W+=w,X+=xkw,Y+=yk*w,XY+=yk*xkw,X2+=xk*xkw}const[a,b]=ols(X/W,Y/W,XY/W,X2/W);yhat[i]=a+b*dx,residuals[i]=Math.abs(yv[i]-yhat[i]),updateInterval(xv,i+1,interval)}if(2===iter)break;const medianResidual=median(residuals);if(Math.abs(medianResidual)<1e-12)break;for(let arg,w,i=0;i<n;++i)arg=residuals[i]/(6*medianResidual),robustWeights[i]=arg>=1?1e-12:(w=1-arg*arg)*w}return function output(xv,yhat,ux,uy){const n=xv.length,out=[];let v,i=0,cnt=0,prev=[];for(;i<n;++i)v=xv[i]+ux,prev[0]===v?prev[1]+=(yhat[i]-prev[1])/++cnt:(cnt=0,prev[1]+=uy,prev=[v,yhat[i]],out.push(prev));return prev[1]+=uy,out}(xv,yhat,ux,uy)}function tricube(x){return(x=1-x*x*x)*x*x}function updateInterval(xv,i,interval){const val=xv[i];let left=interval[0],right=interval[1]+1;if(!(right>=xv.length))for(;i>left&&xv[right]-val<=val-xv[left];)interval[0]=++left,interval[1]=right,++right}const MIN_RADIANS=.5*Math.PI/180;function sampleCurve(f,extent,minSteps,maxSteps){minSteps=minSteps||25,maxSteps=Math.max(minSteps,maxSteps||200);const point=x=>[x,f(x)],minX=extent[0],maxX=extent[1],span=maxX-minX,stop=span/maxSteps,prev=[point(minX)],next=[];if(minSteps===maxSteps){for(let i=1;i<maxSteps;++i)prev.push(point(minX+i/minSteps*span));return prev.push(point(maxX)),prev}next.push(point(maxX));for(let i=minSteps;--i>0;)next.push(point(minX+i/minSteps*span));let p0=prev[0],p1=next[next.length-1];const sx=1/span,sy=function scaleY(init,points){let ymin=init,ymax=init;const n=points.length;for(let i=0;i<n;++i){const y=points[i][1];y<ymin&&(ymin=y),y>ymax&&(ymax=y)}return 1/(ymax-ymin)}(p0[1],next);for(;p1;){const pm=point((p0[0]+p1[0])/2);pm[0]-p0[0]>=stop&&angleDelta(p0,pm,p1,sx,sy)>MIN_RADIANS?next.push(pm):(p0=p1,prev.push(p1),next.pop()),p1=next[next.length-1]}return prev}function angleDelta(p,q,r,sx,sy){const a0=Math.atan2(sy*(r[1]-p[1]),sx*(r[0]-p[0])),a1=Math.atan2(sy*(q[1]-p[1]),sx*(q[0]-p[0]));return Math.abs(a0-a1)}function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}function groupkey(fields){return fields&&fields.length?1===fields.length?fields[0]:function multikey(f){return x=>{const n=f.length;let i=1,k=String(f[0](x));for(;i<n;++i)k+="|"+f[i](x);return k}}(fields):function(){return""}}function measureName(op,field,as){return as||op+(field?"_"+field:"")}const noop=()=>{},base_op={init:noop,add:noop,rem:noop,idx:0},AggregateOps={values:{init:m=>m.cell.store=!0,value:m=>m.cell.data.values(),idx:-1},count:{value:m=>m.cell.num},__count__:{value:m=>m.missing+m.valid},missing:{value:m=>m.missing},valid:{value:m=>m.valid},sum:{init:m=>m.sum=0,value:m=>m.sum,add:(m,v)=>m.sum+=+v,rem:(m,v)=>m.sum-=v},product:{init:m=>m.product=1,value:m=>m.valid?m.product:void 0,add:(m,v)=>m.product*=v,rem:(m,v)=>m.product/=v},mean:{init:m=>m.mean=0,value:m=>m.valid?m.mean:void 0,add:(m,v)=>(m.mean_d=v-m.mean,m.mean+=m.mean_d/m.valid),rem:(m,v)=>(m.mean_d=v-m.mean,m.mean-=m.valid?m.mean_d/m.valid:m.mean)},average:{value:m=>m.valid?m.mean:void 0,req:["mean"],idx:1},variance:{init:m=>m.dev=0,value:m=>m.valid>1?m.dev/(m.valid-1):void 0,add:(m,v)=>m.dev+=m.mean_d*(v-m.mean),rem:(m,v)=>m.dev-=m.mean_d*(v-m.mean),req:["mean"],idx:1},variancep:{value:m=>m.valid>1?m.dev/m.valid:void 0,req:["variance"],idx:2},stdev:{value:m=>m.valid>1?Math.sqrt(m.dev/(m.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:m=>m.valid>1?Math.sqrt(m.dev/m.valid):void 0,req:["variance"],idx:2},stderr:{value:m=>m.valid>1?Math.sqrt(m.dev/(m.valid*(m.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:m=>m.cell.data.distinct(m.get),req:["values"],idx:3},ci0:{value:m=>m.cell.data.ci0(m.get),req:["values"],idx:3},ci1:{value:m=>m.cell.data.ci1(m.get),req:["values"],idx:3},median:{value:m=>m.cell.data.q2(m.get),req:["values"],idx:3},q1:{value:m=>m.cell.data.q1(m.get),req:["values"],idx:3},q3:{value:m=>m.cell.data.q3(m.get),req:["values"],idx:3},min:{init:m=>m.min=void 0,value:m=>m.min=Number.isNaN(m.min)?m.cell.data.min(m.get):m.min,add:(m,v)=>{(v<m.min||void 0===m.min)&&(m.min=v)},rem:(m,v)=>{v<=m.min&&(m.min=NaN)},req:["values"],idx:4},max:{init:m=>m.max=void 0,value:m=>m.max=Number.isNaN(m.max)?m.cell.data.max(m.get):m.max,add:(m,v)=>{(v>m.max||void 0===m.max)&&(m.max=v)},rem:(m,v)=>{v>=m.max&&(m.max=NaN)},req:["values"],idx:4},argmin:{init:m=>m.argmin=void 0,value:m=>m.argmin||m.cell.data.argmin(m.get),add:(m,v,t)=>{v<m.min&&(m.argmin=t)},rem:(m,v)=>{v<=m.min&&(m.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:m=>m.argmax=void 0,value:m=>m.argmax||m.cell.data.argmax(m.get),add:(m,v,t)=>{v>m.max&&(m.argmax=t)},rem:(m,v)=>{v>=m.max&&(m.argmax=void 0)},req:["max","values"],idx:3}},ValidAggregateOps=Object.keys(AggregateOps);function createMeasure(op,name){return AggregateOps[op](name)}function compareIndex(a,b){return a.idx-b.idx}function init(){this.valid=0,this.missing=0,this._ops.forEach((op=>op.init(this)))}function vega_transforms_module_add(v,t){null!=v&&""!==v?v==v&&(++this.valid,this._ops.forEach((op=>op.add(this,v,t)))):++this.missing}function rem(v,t){null!=v&&""!==v?v==v&&(--this.valid,this._ops.forEach((op=>op.rem(this,v,t)))):--this.missing}function set(t){return this._out.forEach((op=>t[op.out]=op.value(this))),t}function compileMeasures(agg,field){const get=field||identity,ops=function resolve(agg){const map={};agg.forEach((a=>map[a.name]=a));const getreqs=a=>{a.req&&a.req.forEach((key=>{map[key]||getreqs(map[key]=AggregateOps[key]())}))};return agg.forEach(getreqs),Object.values(map).sort(compareIndex)}(agg),out=agg.slice().sort(compareIndex);function ctr(cell){this._ops=ops,this._out=out,this.cell=cell,this.init()}return ctr.prototype.init=init,ctr.prototype.add=vega_transforms_module_add,ctr.prototype.rem=rem,ctr.prototype.set=set,ctr.prototype.get=get,ctr.fields=agg.map((op=>op.out)),ctr}function TupleStore(key){this._key=key?field(key):tupleid,this.reset()}ValidAggregateOps.forEach((key=>{AggregateOps[key]=function measure(key,value){return out=>extend({name:key,out:out||key},base_op,value)}(key,AggregateOps[key])}));const prototype$1=TupleStore.prototype;function Aggregate(params){Transform.call(this,null,params),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}prototype$1.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},prototype$1.add=function(v){this._add.push(v)},prototype$1.rem=function(v){this._rem.push(v)},prototype$1.values=function(){if(this._get=null,0===this._rem.length)return this._add;const a=this._add,r=this._rem,k=this._key,n=a.length,m=r.length,x=Array(n-m),map={};let i,j,v;for(i=0;i<m;++i)map[k(r[i])]=1;for(i=0,j=0;i<n;++i)map[k(v=a[i])]?map[k(v)]=0:x[j++]=v;return this._rem=[],this._add=x},prototype$1.distinct=function(get){const v=this.values(),map={};let s,n=v.length,count=0;for(;--n>=0;)s=get(v[n])+"",has(map,s)||(map[s]=1,++count);return count},prototype$1.extent=function(get){if(this._get!==get||!this._ext){const v=this.values(),i=extentIndex(v,get);this._ext=[v[i[0]],v[i[1]]],this._get=get}return this._ext},prototype$1.argmin=function(get){return this.extent(get)[0]||{}},prototype$1.argmax=function(get){return this.extent(get)[1]||{}},prototype$1.min=function(get){const m=this.extent(get)[0];return null!=m?get(m):void 0},prototype$1.max=function(get){const m=this.extent(get)[1];return null!=m?get(m):void 0},prototype$1.quartile=function(get){return this._get===get&&this._q||(this._q=quartiles(this.values(),get),this._get=get),this._q},prototype$1.q1=function(get){return this.quartile(get)[0]},prototype$1.q2=function(get){return this.quartile(get)[1]},prototype$1.q3=function(get){return this.quartile(get)[2]},prototype$1.ci=function(get){return this._get===get&&this._ci||(this._ci=bootstrapCI(this.values(),1e3,.05,get),this._get=get),this._ci},prototype$1.ci0=function(get){return this.ci(get)[0]},prototype$1.ci1=function(get){return this.ci(get)[1]},Aggregate.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ValidAggregateOps},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},inherits(Aggregate,Transform,{transform(_,pulse){const aggr=this,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),mod=_.modified();return aggr.stamp=out.stamp,aggr.value&&(mod||pulse.modified(aggr._inputs,!0))?(aggr._prev=aggr.value,aggr.value=mod?aggr.init(_):{},pulse.visit(pulse.SOURCE,(t=>aggr.add(t)))):(aggr.value=aggr.value||aggr.init(_),pulse.visit(pulse.REM,(t=>aggr.rem(t))),pulse.visit(pulse.ADD,(t=>aggr.add(t)))),out.modifies(aggr._outputs),aggr._drop=!1!==_.drop,_.cross&&aggr._dims.length>1&&(aggr._drop=!1,aggr.cross()),pulse.clean()&&aggr._drop&&out.clean(!0).runAfter((()=>this.clean())),aggr.changes(out)},cross(){const aggr=this,curr=aggr.value,dims=aggr._dnames,vals=dims.map((()=>({}))),n=dims.length;function collect(cells){let key,i,t,v;for(key in cells)for(t=cells[key].tuple,i=0;i<n;++i)vals[i][v=t[dims[i]]]=v}collect(aggr._prev),collect(curr),function generate(base,tuple,index){const name=dims[index],v=vals[index++];for(const k in v){const key=base?base+"|"+k:k;tuple[name]=v[k],index<n?generate(key,tuple,index):curr[key]||aggr.cell(key,tuple)}}("",{},0)},init(_){const inputs=this._inputs=[],outputs=this._outputs=[],inputMap={};function inputVisit(get){const fields=array(accessorFields(get)),n=fields.length;let f,i=0;for(;i<n;++i)inputMap[f=fields[i]]||(inputMap[f]=1,inputs.push(f))}this._dims=array(_.groupby),this._dnames=this._dims.map((d=>{const dname=accessorName(d);return inputVisit(d),outputs.push(dname),dname})),this.cellkey=_.key?_.key:groupkey(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const fields=_.fields||[null],ops=_.ops||["count"],as=_.as||[],n=fields.length,map={};let field,op,m,mname,outname,i;for(n!==ops.length&&error("Unmatched number of fields and aggregate ops."),i=0;i<n;++i)field=fields[i],op=ops[i],null==field&&"count"!==op&&error("Null aggregate field specified."),mname=accessorName(field),outname=measureName(op,mname,as[i]),outputs.push(outname),"count"!==op?(m=map[mname],m||(inputVisit(field),m=map[mname]=[],m.field=field,this._measures.push(m)),"count"!==op&&(this._countOnly=!1),m.push(createMeasure(op,outname))):this._counts.push(outname);return this._measures=this._measures.map((m=>compileMeasures(m,m.field))),{}},cellkey:groupkey(),cell(key,t){let cell=this.value[key];return cell?0===cell.num&&this._drop&&cell.stamp<this.stamp?(cell.stamp=this.stamp,this._adds[this._alen++]=cell):cell.stamp<this.stamp&&(cell.stamp=this.stamp,this._mods[this._mlen++]=cell):(cell=this.value[key]=this.newcell(key,t),this._adds[this._alen++]=cell),cell},newcell(key,t){const cell={key,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[key]),stamp:this.stamp,store:!1};if(!this._countOnly){const measures=this._measures,n=measures.length;cell.agg=Array(n);for(let i=0;i<n;++i)cell.agg[i]=new measures[i](cell)}return cell.store&&(cell.data=new TupleStore),cell},newtuple(t,p){const names=this._dnames,dims=this._dims,n=dims.length,x={};for(let i=0;i<n;++i)x[names[i]]=dims[i](t);return p?replace(p.tuple,x):ingest$1(x)},clean(){const cells=this.value;for(const key in cells)0===cells[key].num&&delete cells[key]},add(t){const key=this.cellkey(t),cell=this.cell(key,t);if(cell.num+=1,this._countOnly)return;cell.store&&cell.data.add(t);const agg=cell.agg;for(let i=0,n=agg.length;i<n;++i)agg[i].add(agg[i].get(t),t)},rem(t){const key=this.cellkey(t),cell=this.cell(key,t);if(cell.num-=1,this._countOnly)return;cell.store&&cell.data.rem(t);const agg=cell.agg;for(let i=0,n=agg.length;i<n;++i)agg[i].rem(agg[i].get(t),t)},celltuple(cell){const tuple=cell.tuple,counts=this._counts;cell.store&&cell.data.values();for(let i=0,n=counts.length;i<n;++i)tuple[counts[i]]=cell.num;if(!this._countOnly){const agg=cell.agg;for(let i=0,n=agg.length;i<n;++i)agg[i].set(tuple)}return tuple},changes(out){const adds=this._adds,mods=this._mods,prev=this._prev,drop=this._drop,add=out.add,rem=out.rem,mod=out.mod;let cell,key,i,n;if(prev)for(key in prev)cell=prev[key],drop&&!cell.num||rem.push(cell.tuple);for(i=0,n=this._alen;i<n;++i)add.push(this.celltuple(adds[i])),adds[i]=null;for(i=0,n=this._mlen;i<n;++i)cell=mods[i],(0===cell.num&&drop?rem:mod).push(this.celltuple(cell)),mods[i]=null;return this._alen=this._mlen=0,this._prev=null,out}});function Bin(params){Transform.call(this,null,params)}function SortedList(idFunc,source,input){const $=idFunc;let data=source||[],add=input||[],rem={},cnt=0;return{add:t=>add.push(t),remove:t=>rem[$(t)]=++cnt,size:()=>data.length,data:(compare,resort)=>(cnt&&(data=data.filter((t=>!rem[$(t)])),rem={},cnt=0),resort&&compare&&data.sort(compare),add.length&&(data=compare?merge(compare,data,add.sort(compare)):data.concat(add),add=[]),data)}}function Collect(params){Transform.call(this,[],params)}function Compare(params){Operator.call(this,null,update$5,params)}function update$5(_){return this.value&&!_.modified()?this.value:vega_util_module_compare(_.fields,_.orders)}function CountPattern(params){Transform.call(this,null,params)}function Cross(params){Transform.call(this,null,params)}Bin.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},inherits(Bin,Transform,{transform(_,pulse){const band=!1!==_.interval,bins=this._bins(_),start=bins.start,step=bins.step,as=_.as||["bin0","bin1"],b0=as[0],b1=as[1];let flag;return flag=_.modified()?(pulse=pulse.reflow(!0)).SOURCE:pulse.modified(accessorFields(_.field))?pulse.ADD_MOD:pulse.ADD,pulse.visit(flag,band?t=>{const v=bins(t);t[b0]=v,t[b1]=null==v?null:start+step*(1+(v-start)/step)}:t=>t[b0]=bins(t)),pulse.modifies(band?as:b0)},_bins(_){if(this.value&&!_.modified())return this.value;const field=_.field,bins=vega_statistics_module_bin(_),step=bins.step;let a,d,start=bins.start,stop=start+Math.ceil((bins.stop-start)/step)*step;null!=(a=_.anchor)&&(d=a-(start+step*Math.floor((a-start)/step)),start+=d,stop+=d);const f=function(t){let v=toNumber(field(t));return null==v?null:v<start?-1/0:v>stop?1/0:(v=Math.max(start,Math.min(v,stop-step)),start+step*Math.floor(1e-14+(v-start)/step))};return f.start=start,f.stop=bins.stop,f.step=step,this.value=accessor(f,accessorFields(field),_.name||"bin_"+accessorName(field))}}),Collect.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},inherits(Collect,Transform,{transform(_,pulse){const out=pulse.fork(pulse.ALL),list=SortedList(tupleid,this.value,out.materialize(out.ADD).add),sort=_.sort,mod=pulse.changed()||sort&&(_.modified("sort")||pulse.modified(sort.fields));return out.visit(out.REM,list.remove),this.modified(mod),this.value=out.source=list.data(stableCompare(sort),mod),pulse.source&&pulse.source.root&&(this.value.root=pulse.source.root),out}}),inherits(Compare,Operator),CountPattern.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},inherits(CountPattern,Transform,{transform(_,pulse){const process=update=>tuple=>{for(var t,tokens=function tokenize(text,tcase,match){switch(tcase){case"upper":text=text.toUpperCase();break;case"lower":text=text.toLowerCase()}return text.match(match)}(get(tuple),_.case,match)||[],i=0,n=tokens.length;i<n;++i)stop.test(t=tokens[i])||update(t)},init=this._parameterCheck(_,pulse),counts=this._counts,match=this._match,stop=this._stop,get=_.field,as=_.as||["text","count"],add=process((t=>counts[t]=1+(counts[t]||0))),rem=process((t=>counts[t]-=1));return init?pulse.visit(pulse.SOURCE,add):(pulse.visit(pulse.ADD,add),pulse.visit(pulse.REM,rem)),this._finish(pulse,as)},_parameterCheck(_,pulse){let init=!1;return!_.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(_.stopwords||"")+"$","i"),init=!0),!_.modified("pattern")&&this._match||(this._match=new RegExp(_.pattern||"[\\w']+","g"),init=!0),(_.modified("field")||pulse.modified(_.field.fields))&&(init=!0),init&&(this._counts={}),init},_finish(pulse,as){const counts=this._counts,tuples=this._tuples||(this._tuples={}),text=as[0],count=as[1],out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);let w,t,c;for(w in counts)t=tuples[w],c=counts[w]||0,!t&&c?(tuples[w]=t=ingest$1({}),t[text]=w,t[count]=c,out.add.push(t)):0===c?(t&&out.rem.push(t),counts[w]=null,tuples[w]=null):t[count]!==c&&(t[count]=c,out.mod.push(t));return out.modifies(as)}}),Cross.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},inherits(Cross,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE),as=_.as||["a","b"],a=as[0],b=as[1],reset=!this.value||pulse.changed(pulse.ADD_REM)||_.modified("as")||_.modified("filter");let data=this.value;return reset?(data&&(out.rem=data),data=pulse.materialize(pulse.SOURCE).source,out.add=this.value=function cross(input,a,b,filter){for(var j,left,data=[],t={},n=input.length,i=0;i<n;++i)for(t[a]=left=input[i],j=0;j<n;++j)t[b]=input[j],filter(t)&&(data.push(ingest$1(t)),(t={})[a]=left);return data}(data,a,b,_.filter||truthy)):out.mod=data,out.source=this.value,out.modifies(as)}});const Distributions={kde,mixture,normal:gaussian,lognormal,uniform};function vega_transforms_module_parse(def,data){const func=def.function;has(Distributions,func)||error("Unknown distribution function: "+func);const d=Distributions[func]();for(const name in def)"field"===name?d.data((def.from||data()).map(def[name])):"distributions"===name?d[name](def[name].map((_=>vega_transforms_module_parse(_,data)))):"function"==typeof d[name]&&d[name](def[name]);return d}function Density(params){Transform.call(this,null,params)}const distributions=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],vega_transforms_module_mixture={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:distributions},{name:"weights",type:"number",array:!0}]};function fieldNames(fields,as){return fields?fields.map(((f,i)=>as[i]||accessorName(f))):null}function partition$1(data,groupby,field){const groups=[],get=f=>f(t);let map,i,n,t,k,g;if(null==groupby)groups.push(data.map(field));else for(map={},i=0,n=data.length;i<n;++i)t=data[i],k=groupby.map(get),g=map[k],g||(map[k]=g=[],g.dims=k,groups.push(g)),g.push(field(t));return groups}Density.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:distributions.concat(vega_transforms_module_mixture)},{name:"as",type:"string",array:!0,default:["value","density"]}]},inherits(Density,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const dist=vega_transforms_module_parse(_.distribution,function source(pulse){return()=>pulse.materialize(pulse.SOURCE).source}(pulse)),minsteps=_.steps||_.minsteps||25,maxsteps=_.steps||_.maxsteps||200;let method=_.method||"pdf";"pdf"!==method&&"cdf"!==method&&error("Invalid density method: "+method),_.extent||dist.data||error("Missing density extent parameter."),method=dist[method];const as=_.as||["value","density"],values=sampleCurve(method,_.extent||extent(dist.data()),minsteps,maxsteps).map((v=>{const tuple={};return tuple[as[0]]=v[0],tuple[as[1]]=v[1],ingest$1(tuple)}));this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out}});function DotBin(params){Transform.call(this,null,params)}DotBin.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function Expression(params){Operator.call(this,null,update$4,params),this.modified(!0)}function update$4(_){const expr=_.expr;return this.value&&!_.modified("expr")?this.value:accessor((datum=>expr(datum,_)),accessorFields(expr),accessorName(expr))}function Extent(params){Transform.call(this,[void 0,void 0],params)}function Subflow(pulse,parent){Operator.call(this,pulse),this.parent=parent,this.count=0}function Facet(params){Transform.call(this,{},params),this._keys=fastmap();const a=this._targets=[];a.active=0,a.forEach=f=>{for(let i=0,n=a.active;i<n;++i)f(a[i],i,a)}}function Field(params){Operator.call(this,null,update$3,params)}function update$3(_){return this.value&&!_.modified()?this.value:isArray(_.name)?array(_.name).map((f=>field(f))):field(_.name,_.as)}function Filter(params){Transform.call(this,fastmap(),params)}function Flatten(params){Transform.call(this,[],params)}function Fold(params){Transform.call(this,[],params)}function Formula(params){Transform.call(this,null,params)}function Generate(params){Transform.call(this,[],params)}inherits(DotBin,Transform,{transform(_,pulse){if(this.value&&!_.modified()&&!pulse.changed())return pulse;const source=pulse.materialize(pulse.SOURCE).source,groups=partition$1(pulse.source,_.groupby,identity),smooth=_.smooth||!1,field=_.field,step=_.step||((data,field)=>span(extent(data,field))/30)(source,field),sort=stableCompare(((a,b)=>field(a)-field(b))),as=_.as||"bin",n=groups.length;let j,min=1/0,max=-1/0,i=0;for(;i<n;++i){const g=groups[i].sort(sort);j=-1;for(const v of dotbin(g,step,smooth,field))v<min&&(min=v),v>max&&(max=v),g[++j][as]=v}return this.value={start:min,stop:max,step},pulse.reflow(!0).modifies(as)}}),inherits(Expression,Operator),Extent.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},inherits(Extent,Transform,{transform(_,pulse){const extent=this.value,field=_.field,mod=pulse.changed()||pulse.modified(field.fields)||_.modified("field");let min=extent[0],max=extent[1];if((mod||null==min)&&(min=1/0,max=-1/0),pulse.visit(mod?pulse.SOURCE:pulse.ADD,(t=>{const v=toNumber(field(t));null!=v&&(v<min&&(min=v),v>max&&(max=v))})),!Number.isFinite(min)||!Number.isFinite(max)){let name=accessorName(field);name&&(name=' for field "'.concat(name,'"')),pulse.dataflow.warn("Infinite extent".concat(name,": [").concat(min,", ").concat(max,"]")),min=max=void 0}this.value=[min,max]}}),inherits(Subflow,Operator,{connect(target){return this.detachSubflow=target.detachSubflow,this.targets().add(target),target.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(pulse){this.value.init(pulse,pulse.NO_SOURCE)},evaluate(){return this.value}}),inherits(Facet,Transform,{activate(flow){this._targets[this._targets.active++]=flow},subflow(key,flow,pulse,parent){const flows=this.value;let df,p,sf=has(flows,key)&&flows[key];return sf?sf.value.stamp<pulse.stamp&&(sf.init(pulse),this.activate(sf)):(p=parent||(p=this._group[key])&&p.tuple,df=pulse.dataflow,sf=new Subflow(pulse.fork(pulse.NO_SOURCE),this),df.add(sf).connect(flow(df,key,p)),flows[key]=sf,this.activate(sf)),sf},clean(){const flows=this.value;let detached=0;for(const key in flows)if(0===flows[key].count){const detach=flows[key].detachSubflow;detach&&detach(),delete flows[key],++detached}if(detached){const active=this._targets.filter((sf=>sf&&sf.count>0));this.initTargets(active)}},initTargets(act){const a=this._targets,n=a.length,m=act?act.length:0;let i=0;for(;i<m;++i)a[i]=act[i];for(;i<n&&null!=a[i];++i)a[i]=null;a.active=m},transform(_,pulse){const df=pulse.dataflow,key=_.key,flow=_.subflow,cache=this._keys,rekey=_.modified("key"),subflow=key=>this.subflow(key,flow,pulse);return this._group=_.group||{},this.initTargets(),pulse.visit(pulse.REM,(t=>{const id=tupleid(t),k=cache.get(id);void 0!==k&&(cache.delete(id),subflow(k).rem(t))})),pulse.visit(pulse.ADD,(t=>{const k=key(t);cache.set(tupleid(t),k),subflow(k).add(t)})),rekey||pulse.modified(key.fields)?pulse.visit(pulse.MOD,(t=>{const id=tupleid(t),k0=cache.get(id),k1=key(t);k0===k1?subflow(k1).mod(t):(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))})):pulse.changed(pulse.MOD)&&pulse.visit(pulse.MOD,(t=>{subflow(cache.get(tupleid(t))).mod(t)})),rekey&&pulse.visit(pulse.REFLOW,(t=>{const id=tupleid(t),k0=cache.get(id),k1=key(t);k0!==k1&&(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))})),pulse.clean()?df.runAfter((()=>{this.clean(),cache.clean()})):cache.empty>df.cleanThreshold&&df.runAfter(cache.clean),pulse}}),inherits(Field,Operator),Filter.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},inherits(Filter,Transform,{transform(_,pulse){const df=pulse.dataflow,cache=this.value,output=pulse.fork(),add=output.add,rem=output.rem,mod=output.mod,test=_.expr;let isMod=!0;function revisit(t){const id=tupleid(t),b=test(t,_),s=cache.get(id);b&&s?(cache.delete(id),add.push(t)):b||s?isMod&&b&&!s&&mod.push(t):(cache.set(id,1),rem.push(t))}return pulse.visit(pulse.REM,(t=>{const id=tupleid(t);cache.has(id)?cache.delete(id):rem.push(t)})),pulse.visit(pulse.ADD,(t=>{test(t,_)?add.push(t):cache.set(tupleid(t),1)})),pulse.visit(pulse.MOD,revisit),_.modified()&&(isMod=!1,pulse.visit(pulse.REFLOW,revisit)),cache.empty>df.cleanThreshold&&df.runAfter(cache.clean),output}}),Flatten.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},inherits(Flatten,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE),fields=_.fields,as=fieldNames(fields,_.as||[]),index=_.index||null,m=as.length;return out.rem=this.value,pulse.visit(pulse.SOURCE,(t=>{const arrays=fields.map((f=>f(t))),maxlen=arrays.reduce(((l,a)=>Math.max(l,a.length)),0);let j,d,v,i=0;for(;i<maxlen;++i){for(d=derive(t),j=0;j<m;++j)d[as[j]]=null==(v=arrays[j][i])?null:v;index&&(d[index]=i),out.add.push(d)}})),this.value=out.source=out.add,index&&out.modifies(index),out.modifies(as)}}),Fold.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},inherits(Fold,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE),fields=_.fields,fnames=fields.map(accessorName),as=_.as||["key","value"],k=as[0],v=as[1],n=fields.length;return out.rem=this.value,pulse.visit(pulse.SOURCE,(t=>{for(let d,i=0;i<n;++i)d=derive(t),d[k]=fnames[i],d[v]=fields[i](t),out.add.push(d)})),this.value=out.source=out.add,out.modifies(as)}}),Formula.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},inherits(Formula,Transform,{transform(_,pulse){const func=_.expr,as=_.as,mod=_.modified(),flag=_.initonly?pulse.ADD:mod?pulse.SOURCE:pulse.modified(func.fields)||pulse.modified(as)?pulse.ADD_MOD:pulse.ADD;return mod&&(pulse=pulse.materialize().reflow(!0)),_.initonly||pulse.modifies(as),pulse.visit(flag,(t=>t[as]=func(t,_)))}}),inherits(Generate,Transform,{transform(_,pulse){const out=pulse.fork(pulse.ALL),gen=_.generator;let add,rem,t,data=this.value,num=_.size-data.length;if(num>0){for(add=[];--num>=0;)add.push(t=ingest$1(gen(_))),data.push(t);out.add=out.add.length?out.materialize(out.ADD).add.concat(add):add}else rem=data.slice(0,-num),out.rem=out.rem.length?out.materialize(out.REM).rem.concat(rem):rem,data=data.slice(-num);return out.source=this.value=data,out}});const Methods={value:"value",median,mean:function mean(values,valueof){let count=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(++count,sum+=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(++count,sum+=value)}if(count)return sum/count},min,max},Empty=[];function Impute(params){Transform.call(this,[],params)}function JoinAggregate(params){Aggregate.call(this,params)}function KDE(params){Transform.call(this,null,params)}function Key(params){Operator.call(this,null,update$2,params)}function update$2(_){return this.value&&!_.modified()?this.value:key(_.fields,_.flat)}function Load(params){Transform.call(this,[],params),this._pending=null}function vega_transforms_module_output(op,pulse,data){data.forEach(ingest$1);const out=pulse.fork(pulse.NO_FIELDS&pulse.NO_SOURCE);return out.rem=op.value,op.value=out.source=out.add=data,op._pending=null,out.rem.length&&out.clean(!0),out}function Lookup(params){Transform.call(this,{},params)}function MultiExtent(params){Operator.call(this,null,update$1,params)}function update$1(_){if(this.value&&!_.modified())return this.value;const ext=_.extents,n=ext.length;let i,e,min=1/0,max=-1/0;for(i=0;i<n;++i)e=ext[i],e[0]<min&&(min=e[0]),e[1]>max&&(max=e[1]);return[min,max]}function MultiValues(params){Operator.call(this,null,vega_transforms_module_update,params)}function vega_transforms_module_update(_){return this.value&&!_.modified()?this.value:_.values.reduce(((data,_)=>data.concat(_)),[])}function Params(params){Transform.call(this,null,params)}function Pivot(params){Aggregate.call(this,params)}function PreFacet(params){Facet.call(this,params)}function Project(params){Transform.call(this,null,params)}function Proxy(params){Transform.call(this,null,params)}function Quantile(params){Transform.call(this,null,params)}Impute.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},inherits(Impute,Transform,{transform(_,pulse){var group,value,gVals,kVal,g,i,j,l,n,t,out=pulse.fork(pulse.ALL),impute=function getValue(_){var v,m=_.method||Methods.value;if(null!=Methods[m])return m===Methods.value?(v=void 0!==_.value?_.value:0,()=>v):Methods[m];error("Unrecognized imputation method: "+m)}(_),field=function getField(_){const f=_.field;return t=>t?f(t):NaN}(_),fName=accessorName(_.field),kName=accessorName(_.key),gNames=(_.groupby||[]).map(accessorName),groups=function partition(data,groupby,key,keyvals){var gVals,gKey,group,i,j,k,n,t,get=f=>f(t),groups=[],domain=keyvals?keyvals.slice():[],kMap={},gMap={};for(domain.forEach(((k,i)=>kMap[k]=i+1)),i=0,n=data.length;i<n;++i)k=key(t=data[i]),j=kMap[k]||(kMap[k]=domain.push(k)),(group=gMap[gKey=(gVals=groupby?groupby.map(get):Empty)+""])||(group=gMap[gKey]=[],groups.push(group),group.values=gVals),group[j-1]=t;return groups.domain=domain,groups}(pulse.source,_.groupby,_.key,_.keyvals),curr=[],prev=this.value,m=groups.domain.length;for(g=0,l=groups.length;g<l;++g)for(gVals=(group=groups[g]).values,value=NaN,j=0;j<m;++j)if(null==group[j]){for(kVal=groups.domain[j],t={_impute:!0},i=0,n=gVals.length;i<n;++i)t[gNames[i]]=gVals[i];t[kName]=kVal,t[fName]=Number.isNaN(value)?value=impute(group,field):value,curr.push(ingest$1(t))}return curr.length&&(out.add=out.materialize(out.ADD).add.concat(curr)),prev.length&&(out.rem=out.materialize(out.REM).rem.concat(prev)),this.value=curr,out}}),JoinAggregate.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ValidAggregateOps},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},inherits(JoinAggregate,Aggregate,{transform(_,pulse){const aggr=this,mod=_.modified();let cells;return aggr.value&&(mod||pulse.modified(aggr._inputs,!0))?(cells=aggr.value=mod?aggr.init(_):{},pulse.visit(pulse.SOURCE,(t=>aggr.add(t)))):(cells=aggr.value=aggr.value||this.init(_),pulse.visit(pulse.REM,(t=>aggr.rem(t))),pulse.visit(pulse.ADD,(t=>aggr.add(t)))),aggr.changes(),pulse.visit(pulse.SOURCE,(t=>{extend(t,cells[aggr.cellkey(t)].tuple)})),pulse.reflow(mod).modifies(this._outputs)},changes(){const adds=this._adds,mods=this._mods;let i,n;for(i=0,n=this._alen;i<n;++i)this.celltuple(adds[i]),adds[i]=null;for(i=0,n=this._mlen;i<n;++i)this.celltuple(mods[i]),mods[i]=null;this._alen=this._mlen=0}}),KDE.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},inherits(KDE,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const source=pulse.materialize(pulse.SOURCE).source,groups=partition$1(source,_.groupby,_.field),names=(_.groupby||[]).map(accessorName),bandwidth=_.bandwidth,method=_.cumulative?"cdf":"pdf",as=_.as||["value","density"],values=[];let domain=_.extent,minsteps=_.steps||_.minsteps||25,maxsteps=_.steps||_.maxsteps||200;"pdf"!==method&&"cdf"!==method&&error("Invalid density method: "+method),"shared"===_.resolve&&(domain||(domain=extent(source,_.field)),minsteps=maxsteps=_.steps||maxsteps),groups.forEach((g=>{const density=kde(g,bandwidth)[method],scale=_.counts?g.length:1;sampleCurve(density,domain||extent(g),minsteps,maxsteps).forEach((v=>{const t={};for(let i=0;i<names.length;++i)t[names[i]]=g.dims[i];t[as[0]]=v[0],t[as[1]]=v[1]*scale,values.push(ingest$1(t))}))})),this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out}}),inherits(Key,Operator),inherits(Load,Transform,{transform(_,pulse){const df=pulse.dataflow;if(this._pending)return vega_transforms_module_output(this,pulse,this._pending);if(function stop(_){return _.modified("async")&&!(_.modified("values")||_.modified("url")||_.modified("format"))}(_))return pulse.StopPropagation;if(_.values)return vega_transforms_module_output(this,pulse,df.parse(_.values,_.format));if(_.async){const p=df.request(_.url,_.format).then((res=>(this._pending=array(res.data),df=>df.touch(this))));return{async:p}}return df.request(_.url,_.format).then((res=>vega_transforms_module_output(this,pulse,array(res.data))))}}),Lookup.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},inherits(Lookup,Transform,{transform(_,pulse){const keys=_.fields,index=_.index,values=_.values,defaultValue=null==_.default?null:_.default,reset=_.modified(),n=keys.length;let set,m,mods,flag=reset?pulse.SOURCE:pulse.ADD,out=pulse,as=_.as;return values?(m=values.length,n>1&&!as&&error('Multi-field lookup requires explicit "as" parameter.'),as&&as.length!==n*m&&error('The "as" parameter has too few output field names.'),as=as||values.map(accessorName),set=function(t){for(var j,v,i=0,k=0;i<n;++i)if(null==(v=index.get(keys[i](t))))for(j=0;j<m;++j,++k)t[as[k]]=defaultValue;else for(j=0;j<m;++j,++k)t[as[k]]=values[j](v)}):(as||error("Missing output field names."),set=function(t){for(var v,i=0;i<n;++i)v=index.get(keys[i](t)),t[as[i]]=null==v?defaultValue:v}),reset?out=pulse.reflow(!0):(mods=keys.some((k=>pulse.modified(k.fields))),flag|=mods?pulse.MOD:0),pulse.visit(flag,set),out.modifies(as)}}),inherits(MultiExtent,Operator),inherits(MultiValues,Operator),inherits(Params,Transform,{transform(_,pulse){return this.modified(_.modified()),this.value=_,pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)}}),Pivot.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ValidAggregateOps,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},inherits(Pivot,Aggregate,{_transform:Aggregate.prototype.transform,transform(_,pulse){return this._transform(function aggregateParams(_,pulse){const key=_.field,value=_.value,op=("count"===_.op?"__count__":_.op)||"sum",fields=accessorFields(key).concat(accessorFields(value)),keys=function pivotKeys(key,limit,pulse){const map={},list=[];return pulse.visit(pulse.SOURCE,(t=>{const k=key(t);map[k]||(map[k]=1,list.push(k))})),list.sort(ascending),limit?list.slice(0,limit):list}(key,_.limit||0,pulse);pulse.changed()&&_.set("__pivot__",null,null,!0);return{key:_.key,groupby:_.groupby,ops:keys.map((()=>op)),fields:keys.map((k=>function get(k,key,value,fields){return accessor((d=>key(d)===k?value(d):NaN),fields,k+"")}(k,key,value,fields))),as:keys.map((k=>k+"")),modified:_.modified.bind(_)}}(_,pulse),pulse)}}),inherits(PreFacet,Facet,{transform(_,pulse){const flow=_.subflow,field=_.field,subflow=t=>this.subflow(tupleid(t),flow,pulse,t);return(_.modified("field")||field&&pulse.modified(accessorFields(field)))&&error("PreFacet does not support field modification."),this.initTargets(),field?(pulse.visit(pulse.MOD,(t=>{const sf=subflow(t);field(t).forEach((_=>sf.mod(_)))})),pulse.visit(pulse.ADD,(t=>{const sf=subflow(t);field(t).forEach((_=>sf.add(ingest$1(_))))})),pulse.visit(pulse.REM,(t=>{const sf=subflow(t);field(t).forEach((_=>sf.rem(_)))}))):(pulse.visit(pulse.MOD,(t=>subflow(t).mod(t))),pulse.visit(pulse.ADD,(t=>subflow(t).add(t))),pulse.visit(pulse.REM,(t=>subflow(t).rem(t)))),pulse.clean()&&pulse.runAfter((()=>this.clean())),pulse}}),Project.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},inherits(Project,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE),fields=_.fields,as=fieldNames(_.fields,_.as||[]),derive=fields?(s,t)=>function project(s,t,fields,as){for(let i=0,n=fields.length;i<n;++i)t[as[i]]=fields[i](s);return t}(s,t,fields,as):rederive;let lut;return this.value?lut=this.value:(pulse=pulse.addAll(),lut=this.value={}),pulse.visit(pulse.REM,(t=>{const id=tupleid(t);out.rem.push(lut[id]),lut[id]=null})),pulse.visit(pulse.ADD,(t=>{const dt=derive(t,ingest$1({}));lut[tupleid(t)]=dt,out.add.push(dt)})),pulse.visit(pulse.MOD,(t=>{out.mod.push(derive(t,lut[tupleid(t)]))})),out}}),inherits(Proxy,Transform,{transform(_,pulse){return this.value=_.value,_.modified("value")?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation}}),Quantile.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function Relay(params){Transform.call(this,null,params)}function Sample(params){Transform.call(this,[],params),this.count=0}function Sequence(params){Transform.call(this,null,params)}function Sieve(params){Transform.call(this,null,params),this.modified(!0)}function TimeUnit(params){Transform.call(this,null,params)}inherits(Quantile,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),as=_.as||["prob","value"];if(this.value&&!_.modified()&&!pulse.changed())return out.source=this.value,out;const groups=partition$1(pulse.materialize(pulse.SOURCE).source,_.groupby,_.field),names=(_.groupby||[]).map(accessorName),values=[],step=_.step||.01,p=_.probs||range(step/2,1-1e-14,step),n=p.length;return groups.forEach((g=>{const q=quantiles(g,p);for(let i=0;i<n;++i){const t={};for(let i=0;i<names.length;++i)t[names[i]]=g.dims[i];t[as[0]]=p[i],t[as[1]]=q[i],values.push(ingest$1(t))}})),this.value&&(out.rem=this.value),this.value=out.add=out.source=values,out}}),inherits(Relay,Transform,{transform(_,pulse){let out,lut;return this.value?lut=this.value:(out=pulse=pulse.addAll(),lut=this.value={}),_.derive&&(out=pulse.fork(pulse.NO_SOURCE),pulse.visit(pulse.REM,(t=>{const id=tupleid(t);out.rem.push(lut[id]),lut[id]=null})),pulse.visit(pulse.ADD,(t=>{const dt=derive(t);lut[tupleid(t)]=dt,out.add.push(dt)})),pulse.visit(pulse.MOD,(t=>{const dt=lut[tupleid(t)];for(const k in t)dt[k]=t[k],out.modifies(k);out.mod.push(dt)}))),out}}),Sample.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},inherits(Sample,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE),mod=_.modified("size"),num=_.size,map=this.value.reduce(((m,t)=>(m[tupleid(t)]=1,m)),{});let res=this.value,cnt=this.count,cap=0;function update(t){let p,idx;res.length<num?res.push(t):(idx=~~((cnt+1)*random()),idx<res.length&&idx>=cap&&(p=res[idx],map[tupleid(p)]&&out.rem.push(p),res[idx]=t)),++cnt}if(pulse.rem.length&&(pulse.visit(pulse.REM,(t=>{const id=tupleid(t);map[id]&&(map[id]=-1,out.rem.push(t)),--cnt})),res=res.filter((t=>-1!==map[tupleid(t)]))),(pulse.rem.length||mod)&&res.length<num&&pulse.source&&(cap=cnt=res.length,pulse.visit(pulse.SOURCE,(t=>{map[tupleid(t)]||update(t)})),cap=-1),mod&&res.length>num){const n=res.length-num;for(let i=0;i<n;++i)map[tupleid(res[i])]=-1,out.rem.push(res[i]);res=res.slice(n)}return pulse.mod.length&&pulse.visit(pulse.MOD,(t=>{map[tupleid(t)]&&out.mod.push(t)})),pulse.add.length&&pulse.visit(pulse.ADD,update),(pulse.add.length||cap<0)&&(out.add=res.filter((t=>!map[tupleid(t)]))),this.count=cnt,this.value=out.source=res,out}}),Sequence.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},inherits(Sequence,Transform,{transform(_,pulse){if(this.value&&!_.modified())return;const out=pulse.materialize().fork(pulse.MOD),as=_.as||"data";return out.rem=this.value?pulse.rem.concat(this.value):pulse.rem,this.value=range(_.start,_.stop,_.step||1).map((v=>{const t={};return t[as]=v,ingest$1(t)})),out.add=pulse.add.concat(this.value),out}}),inherits(Sieve,Transform,{transform(_,pulse){return this.value=pulse.source,pulse.changed()?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation}});const OUTPUT=["unit0","unit1"];function TupleIndex(params){Transform.call(this,fastmap(),params)}function Values(params){Transform.call(this,null,params)}TimeUnit.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:TIME_UNITS,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:OUTPUT}]},inherits(TimeUnit,Transform,{transform(_,pulse){const field=_.field,band=!1!==_.interval,utc="utc"===_.timezone,floor=this._floor(_,pulse),offset=(utc?utcInterval:timeInterval)(floor.unit).offset,as=_.as||OUTPUT,u0=as[0],u1=as[1],step=floor.step;let min=floor.start||1/0,max=floor.stop||-1/0,flag=pulse.ADD;return(_.modified()||pulse.changed(pulse.REM)||pulse.modified(accessorFields(field)))&&(flag=(pulse=pulse.reflow(!0)).SOURCE,min=1/0,max=-1/0),pulse.visit(flag,(t=>{const v=field(t);let a,b;null==v?(t[u0]=null,band&&(t[u1]=null)):(t[u0]=a=b=floor(v),band&&(t[u1]=b=offset(a,step)),a<min&&(min=a),b>max&&(max=b))})),floor.start=min,floor.stop=max,pulse.modifies(band?as:u0)},_floor(_,pulse){const utc="utc"===_.timezone,{units,step}=_.units?{units:_.units,step:_.step||1}:bin({extent:_.extent||extent(pulse.materialize(pulse.SOURCE).source,_.field),maxbins:_.maxbins}),tunits=timeUnits(units),prev=this.value||{},floor=(utc?utcFloor:timeFloor)(tunits,step);return floor.unit=peek(tunits),floor.units=tunits,floor.step=step,floor.start=prev.start,floor.stop=prev.stop,this.value=floor}}),inherits(TupleIndex,Transform,{transform(_,pulse){const df=pulse.dataflow,field=_.field,index=this.value,set=t=>index.set(field(t),t);let mod=!0;return _.modified("field")||pulse.modified(field.fields)?(index.clear(),pulse.visit(pulse.SOURCE,set)):pulse.changed()?(pulse.visit(pulse.REM,(t=>index.delete(field(t)))),pulse.visit(pulse.ADD,set)):mod=!1,this.modified(mod),index.empty>df.cleanThreshold&&df.runAfter(index.clean),pulse.fork()}}),inherits(Values,Transform,{transform(_,pulse){(!this.value||_.modified("field")||_.modified("sort")||pulse.changed()||_.sort&&pulse.modified(_.sort.fields))&&(this.value=(_.sort?pulse.source.slice().sort(stableCompare(_.sort)):pulse.source).map(_.field))}});const WindowOps={row_number:function(){return{next:w=>w.index+1}},rank:function(){let rank;return{init:()=>rank=1,next:w=>{const i=w.index,data=w.data;return i&&w.compare(data[i-1],data[i])?rank=i+1:rank}}},dense_rank:function(){let drank;return{init:()=>drank=1,next:w=>{const i=w.index,d=w.data;return i&&w.compare(d[i-1],d[i])?++drank:drank}}},percent_rank:function(){const rank=WindowOps.rank(),next=rank.next;return{init:rank.init,next:w=>(next(w)-1)/(w.data.length-1)}},cume_dist:function(){let cume;return{init:()=>cume=0,next:w=>{const d=w.data,c=w.compare;let i=w.index;if(cume<i){for(;i+1<d.length&&!c(d[i],d[i+1]);)++i;cume=i}return(1+cume)/d.length}}},ntile:function(field,num){(num=+num)>0||error("ntile num must be greater than zero.");const cume=WindowOps.cume_dist(),next=cume.next;return{init:cume.init,next:w=>Math.ceil(num*next(w))}},lag:function(field,offset){return offset=+offset||1,{next:w=>{const i=w.index-offset;return i>=0?field(w.data[i]):null}}},lead:function(field,offset){return offset=+offset||1,{next:w=>{const i=w.index+offset,d=w.data;return i<d.length?field(d[i]):null}}},first_value:function(field){return{next:w=>field(w.data[w.i0])}},last_value:function(field){return{next:w=>field(w.data[w.i1-1])}},nth_value:function(field,nth){return(nth=+nth)>0||error("nth_value nth must be greater than zero."),{next:w=>{const i=w.i0+(nth-1);return i<w.i1?field(w.data[i]):null}}},prev_value:function(field){let prev;return{init:()=>prev=null,next:w=>{const v=field(w.data[w.index]);return null!=v?prev=v:prev}}},next_value:function(field){let v,i;return{init:()=>(v=null,i=-1),next:w=>{const d=w.data;return w.index<=i?v:(i=function find(field,data,index){for(let n=data.length;index<n;++index){if(null!=field(data[index]))return index}return-1}(field,d,w.index))<0?(i=d.length,v=null):v=field(d[i])}}}};const ValidWindowOps=Object.keys(WindowOps);function WindowState(_){const ops=array(_.ops),fields=array(_.fields),params=array(_.params),as=array(_.as),outputs=this.outputs=[],windows=this.windows=[],inputs={},map={},counts=[],measures=[];let countOnly=!0;function visitInputs(f){array(accessorFields(f)).forEach((_=>inputs[_]=1))}visitInputs(_.sort),ops.forEach(((op,i)=>{const field=fields[i],mname=accessorName(field),name=measureName(op,mname,as[i]);if(visitInputs(field),outputs.push(name),has(WindowOps,op))windows.push(function WindowOp(op,field,param,as){const fn=WindowOps[op](field,param);return{init:fn.init||zero,update:function(w,t){t[as]=fn.next(w)}}}(op,fields[i],params[i],name));else{if(null==field&&"count"!==op&&error("Null aggregate field specified."),"count"===op)return void counts.push(name);countOnly=!1;let m=map[mname];m||(m=map[mname]=[],m.field=field,measures.push(m)),m.push(createMeasure(op,name))}})),(counts.length||measures.length)&&(this.cell=function cell(measures,counts,countOnly){measures=measures.map((m=>compileMeasures(m,m.field)));const cell={num:0,agg:null,store:!1,count:counts};if(!countOnly)for(var n=measures.length,a=cell.agg=Array(n),i=0;i<n;++i)a[i]=new measures[i](cell);if(cell.store)var store=cell.data=new TupleStore;return cell.add=function(t){if(cell.num+=1,!countOnly){store&&store.add(t);for(let i=0;i<n;++i)a[i].add(a[i].get(t),t)}},cell.rem=function(t){if(cell.num-=1,!countOnly){store&&store.rem(t);for(let i=0;i<n;++i)a[i].rem(a[i].get(t),t)}},cell.set=function(t){let i,n;for(store&&store.values(),i=0,n=counts.length;i<n;++i)t[counts[i]]=cell.num;if(!countOnly)for(i=0,n=a.length;i<n;++i)a[i].set(t)},cell.init=function(){cell.num=0,store&&store.reset();for(let i=0;i<n;++i)a[i].init()},cell}(measures,counts,countOnly)),this.inputs=Object.keys(inputs)}const vega_transforms_module_prototype=WindowState.prototype;function Window(params){Transform.call(this,{},params),this._mlen=0,this._mods=[]}function processPartition(list,state,cmp,_){const sort=_.sort,range=sort&&!_.ignorePeers,frame=_.frame||[null,0],data=list.data(cmp),n=data.length,b=range?bisector(sort):null,w={i0:0,i1:0,p0:0,p1:0,index:0,data,compare:sort||vega_util_module_constant(-1)};state.init();for(let i=0;i<n;++i)setWindow(w,frame,i,n),range&&adjustRange(w,b),state.update(w,data[i])}function setWindow(w,f,i,n){w.p0=w.i0,w.p1=w.i1,w.i0=null==f[0]?0:Math.max(0,i-Math.abs(f[0])),w.i1=null==f[1]?n:Math.min(n,i+Math.abs(f[1])+1),w.index=i}function adjustRange(w,bisect){const r0=w.i0,r1=w.i1-1,c=w.compare,d=w.data,n=d.length-1;r0>0&&!c(d[r0],d[r0-1])&&(w.i0=bisect.left(d,d[r0])),r1<n&&!c(d[r1],d[r1+1])&&(w.i1=bisect.right(d,d[r1]))}function point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}function src_noop(){}function BasisClosed(context){this._context=context}function BasisOpen(context){this._context=context}function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}vega_transforms_module_prototype.init=function(){this.windows.forEach((_=>_.init())),this.cell&&this.cell.init()},vega_transforms_module_prototype.update=function(w,t){const cell=this.cell,wind=this.windows,data=w.data,m=wind&&wind.length;let j;if(cell){for(j=w.p0;j<w.i0;++j)cell.rem(data[j]);for(j=w.p1;j<w.i1;++j)cell.add(data[j]);cell.set(t)}for(j=0;j<m;++j)wind[j].update(w,t)},Window.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ValidWindowOps.concat(ValidAggregateOps)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},inherits(Window,Transform,{transform(_,pulse){this.stamp=pulse.stamp;const mod=_.modified(),cmp=stableCompare(_.sort),key=groupkey(_.groupby),group=t=>this.group(key(t));let state=this.state;state&&!mod||(state=this.state=new WindowState(_)),mod||pulse.modified(state.inputs)?(this.value={},pulse.visit(pulse.SOURCE,(t=>group(t).add(t)))):(pulse.visit(pulse.REM,(t=>group(t).remove(t))),pulse.visit(pulse.ADD,(t=>group(t).add(t))));for(let i=0,n=this._mlen;i<n;++i)processPartition(this._mods[i],state,cmp,_);return this._mlen=0,this._mods=[],pulse.reflow(mod).modifies(state.outputs)},group(key){let group=this.value[key];return group||(group=this.value[key]=SortedList(tupleid),group.stamp=-1),group.stamp<this.stamp&&(group.stamp=this.stamp,this._mods[this._mlen++]=group),group}}),Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},BasisClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}},Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};const bundle=function custom(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85);function cardinal_point(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cardinal_point(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};const cardinal=function custom(tension){function cardinal(context){return new Cardinal(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};const cardinalOpen=function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};const cardinalClosed=function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0),abs=Math.abs,atan2=Math.atan2,cos=Math.cos,math_max=Math.max,math_min=Math.min,sin=Math.sin,sqrt=Math.sqrt,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}function asin(x){return x>=1?halfPi:x<=-1?-halfPi:Math.asin(x)}function catmullRom_point(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>1e-12){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>1e-12){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};const catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}CatmullRomClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};const catmullRomClosed=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};const catmullRomOpen=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function Linear(context){this._context=context}function curve_linear(context){return new Linear(context)}function LinearClosed(context){this._context=context}function sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function monotone_point(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function Natural(context){this._context=context}function controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}function Step(context,t){this._context=context,this._t=t}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}},LinearClosed.prototype={areaStart:src_noop,areaEnd:src_noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,this._context.moveTo(x,y))}},MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:monotone_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,monotone_point(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:monotone_point(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2===n)this._context.lineTo(x[1],y[1]);else for(var px=controlPoints(x),py=controlPoints(y),i0=0,i1=1;i1<n;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(x,y){this._x.push(+x),this._y.push(+y)}},Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}this._x=x,this._y=y}};const path_pi=Math.PI,path_tau=2*path_pi,tauEpsilon=path_tau-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((path_pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%path_tau+path_tau),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=path_pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};const src_path=path;function src_constant(x){return function constant(){return x}}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=y32*x10-x32*y10;if(!(t*t<1e-12))return[x0+(t=(x32*(y0-y2)-y32*(x0-x2))/t)*x10,y0+t*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt(math_max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}Array.prototype.slice;function src_array(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}function point_x(p){return p[0]}function point_y(p){return p[1]}function line(x,y){var defined=src_constant(!0),context=null,curve=curve_linear,output=null;function line(data){var i,d,buffer,n=(data=src_array(data)).length,defined0=!1;for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x(d,i,data),+y(d,i,data));if(buffer)return output=null,buffer+""||null}return x="function"==typeof x?x:void 0===x?point_x:src_constant(x),y="function"==typeof y?y:void 0===y?point_y:src_constant(y),line.x=function(_){return arguments.length?(x="function"==typeof _?_:src_constant(+_),line):x},line.y=function(_){return arguments.length?(y="function"==typeof _?_:src_constant(+_),line):y},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:src_constant(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line}function src_area(x0,y0,y1){var x1=null,defined=src_constant(!0),context=null,curve=curve_linear,output=null;function area(data){var i,j,k,d,buffer,n=(data=src_array(data)).length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return line().defined(defined).curve(curve).context(context)}return x0="function"==typeof x0?x0:void 0===x0?point_x:src_constant(+x0),y0="function"==typeof y0?y0:src_constant(void 0===y0?0:+y0),y1="function"==typeof y1?y1:void 0===y1?point_y:src_constant(+y1),area.x=function(_){return arguments.length?(x0="function"==typeof _?_:src_constant(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:src_constant(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:src_constant(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:src_constant(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:src_constant(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:src_constant(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:src_constant(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area}sqrt(3);const circle={draw(context,size){const r=sqrt(size/pi);context.moveTo(r,0),context.arc(0,0,r,0,tau)}},kr=(sqrt(1/3),sin(pi/10)/sin(7*pi/10));sin(tau/10),cos(tau/10),sqrt(3),sqrt(3),sqrt(3),sqrt(12);function domCanvas(w,h){if("undefined"!=typeof document&&document.createElement){const c=document.createElement("canvas");if(c&&c.getContext)return c.width=w,c.height=h,c}return null}const domImage=()=>"undefined"!=typeof Image?Image:null,ascendingBisect=bisector(ascending_ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,bisect=(bisector(number).center,bisectRight);function src_define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function define_extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function color_rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatRgb(){const a=clampa(this.opacity);return`${1===a?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===a?")":`, ${a})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return((value=clampi(value))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph(value){return(value=(value||0)%360)<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis_basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function src_basis(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis_basis((t-i/n)*n,v0,v1,v2,v3)}}function src_basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis_basis((t-i/n)*n,v0,v1,v2,v3)}}src_define(Color,color,{copy(channels){return Object.assign(new this.constructor,this,channels)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function color_formatHex8(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,define_extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,hsl,define_extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=clampa(this.opacity);return`${1===a?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===a?")":`, ${a})`}`}}));const d3_interpolate_src_constant=x=>()=>x;function color_linear(a,d){return function(t){return a+t*d}}function hue(a,b){var d=b-a;return d?color_linear(a,d>180||d<-180?d-360*Math.round(d/360):d):d3_interpolate_src_constant(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?color_linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}const rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline(src_basis),rgbBasisClosed=rgbSpline(src_basisClosed);function numberArray(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function d3_interpolate_src_array(a,b){return(isNumberArray(b)?numberArray:genericArray)(a,b)}function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function src_number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function src_object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function string(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:src_number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function string_one(b){return function(t){return b(t)+""}}(q[0].x):function string_zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function value(a,b){var c,t=typeof b;return null==b||"boolean"===t?d3_interpolate_src_constant(b):("number"===t?src_number:"string"===t?(c=color(b))?(b=c,rgb):string:b instanceof color?rgb:b instanceof Date?date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?src_object:src_number)(a,b)}function src_round(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}function number_number(x){return+x}var unit=[0,1];function continuous_identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:function constants(x){return function(){return x}}(isNaN(b)?NaN:.5)}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=value,clamp=continuous_identity;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==continuous_identity&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return null==x||isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),src_number)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,number_number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=src_round,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||continuous_identity,rescale()):clamp!==continuous_identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return transformer()(continuous_identity,continuous_identity)}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:"function"==typeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),"function"==typeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}function tickFormat(start,stop,count,specifier){var precision,step=tickStep(start,stop,count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=precisionPrefix(step,value))||(specifier.precision=precision),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=precisionRound(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=precisionFixed(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format(specifier)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var prestep,step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],maxIter=10;for(stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step);maxIter-- >0;){if((step=tickIncrement(start,stop,count))===prestep)return d[i0]=start,d[i1]=stop,domain(d);if(step>0)start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step;else{if(!(step<0))break;start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step}prestep=step}return scale},scale}function nice(domain,interval){var t,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain}function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function reflect(f){return(x,k)=>-f(-x,k)}function loggish(transform){const scale=transform(transformLog,transformExp),domain=scale.domain;let logs,pows,base=10;function rescale(){return logs=function logp(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),x=>Math.log(x)/base)}(base),pows=function powp(base){return 10===base?pow10:base===Math.E?Math.exp:x=>Math.pow(base,x)}(base),domain()[0]<0?(logs=reflect(logs),pows=reflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=count=>{const d=domain();let u=d[0],v=d[d.length-1];const r=v<u;r&&([u,v]=[v,u]);let k,t,i=logs(u),j=logs(v);const n=null==count?10:+count;let z=[];if(!(base%1)&&j-i<n){if(i=Math.floor(i),j=Math.ceil(j),u>0){for(;i<=j;++i)for(k=1;k<base;++k)if(t=i<0?k/pows(-i):k*pows(i),!(t<u)){if(t>v)break;z.push(t)}}else for(;i<=j;++i)for(k=base-1;k>=1;--k)if(t=i>0?k/pows(-i):k*pows(i),!(t<u)){if(t>v)break;z.push(t)}2*z.length<n&&(z=ticks(u,v,n))}else z=ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=(count,specifier)=>{if(null==count&&(count=10),null==specifier&&(specifier=10===base?"s":","),"function"!=typeof specifier&&(base%1||null!=(specifier=formatSpecifier(specifier)).precision||(specifier.trim=!0),specifier=format(specifier)),count===1/0)return specifier;const k=Math.max(1,base*count/scale.ticks().length);return d=>{let i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=()=>domain(nice(domain(),{floor:x=>pows(Math.floor(logs(x))),ceil:x=>pows(Math.ceil(logs(x)))})),scale}function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(continuous_identity,continuous_identity),exponent=1;function rescale(){return 1===exponent?transform(continuous_identity,continuous_identity):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}return scale.exponent=function(_){return arguments.length?(exponent=+_,rescale()):exponent},linearish(scale)}function pow_pow(){var scale=powish(transformer());return scale.copy=function(){return copy(scale,pow_pow()).exponent(scale.exponent())},initRange.apply(scale,arguments),scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c=1,scale=transform(transformSymlog(c),transformSymexp(c));return scale.constant=function(_){return arguments.length?transform(transformSymlog(c=+_),transformSymexp(c)):c},linearish(scale)}function ticker(year,month,week,day,hour,minute){const tickIntervals=[[src_second,1,1e3],[src_second,5,5e3],[src_second,15,15e3],[src_second,30,3e4],[minute,1,6e4],[minute,5,3e5],[minute,15,9e5],[minute,30,18e5],[hour,1,36e5],[hour,3,108e5],[hour,6,216e5],[hour,12,432e5],[day,1,864e5],[day,2,1728e5],[week,1,6048e5],[month,1,2592e6],[month,3,7776e6],[year,1,31536e6]];function tickInterval(start,stop,count){const target=Math.abs(stop-start)/count,i=bisector((([,,step])=>step)).right(tickIntervals,target);if(i===tickIntervals.length)return year.every(tickStep(start/31536e6,stop/31536e6,count));if(0===i)return src_millisecond.every(Math.max(tickStep(start,stop,count),1));const[t,step]=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];return t.every(step)}return[function ticks(start,stop,count){const reverse=stop<start;reverse&&([start,stop]=[stop,start]);const interval=count&&"function"==typeof count.range?count:tickInterval(start,stop,count),ticks=interval?interval.range(start,+stop+1):[];return reverse?ticks.reverse():ticks},tickInterval]}const[utcTicks,utcTickInterval]=ticker(src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute),[timeTicks,timeTickInterval]=ticker(src_year,src_month,sunday,src_day,src_hour,src_minute);function time_date(t){return new Date(t)}function time_number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(ticks,tickInterval,year,month,week,day,hour,minute,second,format){var scale=continuous(),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y");function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(Array.from(_,time_number)):domain().map(time_date)},scale.ticks=function(interval){var d=domain();return ticks(d[0],d[d.length-1],null==interval?10:interval)},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval){var d=domain();return interval&&"function"==typeof interval.range||(interval=tickInterval(d[0],d[d.length-1],null==interval?10:interval)),interval?domain(nice(d,interval)):scale},scale.copy=function(){return copy(scale,calendar(ticks,tickInterval,year,month,week,day,hour,minute,second,format))},scale}function sequential_transformer(){var t0,t1,k10,transform,unknown,x0=0,x1=1,interpolator=continuous_identity,clamp=!1;function scale(x){return null==x||isNaN(x=+x)?unknown:interpolator(0===k10?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]=_,interpolator=interpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(value),scale.rangeRound=range(src_round),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0),scale}}function sequential_copy(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequential(){var scale=linearish(sequential_transformer()(continuous_identity));return scale.copy=function(){return sequential_copy(scale,sequential())},initInterpolator.apply(scale,arguments)}function sequentialPow(){var scale=powish(sequential_transformer());return scale.copy=function(){return sequential_copy(scale,sequentialPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}function piecewise(interpolate,values){void 0===values&&(values=interpolate,interpolate=value);for(var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);i<n;)I[i]=interpolate(v,v=values[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return I[i](t-i)}}function diverging_transformer(){var t0,t1,t2,k10,k21,transform,unknown,x0=0,x1=.5,x2=1,s=1,interpolator=continuous_identity,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:(x=.5+((x=+transform(x))-t1)*(s*x<s*t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1,r2;return arguments.length?([r0,r1,r2]=_,interpolator=piecewise(interpolate,[r0,r1,r2]),scale):[interpolator(0),interpolator(.5),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1,x2]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),t2=transform(x2=+x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale):[x0,x1,x2]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(value),scale.rangeRound=range(src_round),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),t2=t(x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale}}function divergingPow(){var scale=powish(diverging_transformer());return scale.copy=function(){return sequential_copy(scale,divergingPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}class InternMap extends Map{constructor(entries,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}class InternSet extends Set{constructor(values,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=values)for(const value of values)this.add(value)}has(value){return super.has(intern_get(this,value))}add(value){return super.add(intern_set(this,value))}delete(value){return super.delete(intern_delete(this,value))}}function intern_get({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):(_intern.set(key,value),value)}function intern_delete({_intern,_key},value){const key=_key(value);return _intern.has(key)&&(value=_intern.get(key),_intern.delete(key)),value}function keyof(value){return null!==value&&"object"==typeof value?value.valueOf():value}const implicit=Symbol("implicit");function ordinal(){var index=new InternMap,domain=[],range=[],unknown=implicit;function scale(d){let i=index.get(d);if(void 0===i){if(unknown!==implicit)return unknown;index.set(d,i=domain.push(d)-1)}return range[i%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new InternMap;for(const value of _)index.has(value)||index.set(value,domain.push(value)-1);return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}function discrete(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}function src_hue(a,b){var i=hue(+a,+b);return function(t){var x=i(t);return x-360*Math.floor(x/360)}}var svgNode,decompose_degrees=180/Math.PI,decompose_identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*decompose_degrees,skewX:Math.atan(skewX)*decompose_degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:src_number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:src_number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function parseCss(value){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?decompose_identity:decompose(m.a,m.b,m.c,m.d,m.e,m.f)}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function parseSvg(value){return null==value?decompose_identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):decompose_identity)}),", ",")",")");function cosh(x){return((x=Math.exp(x))+1/x)/2}const src_zoom=function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S*rho/Math.SQRT2,i}return zoom.rho=function(_){var _1=Math.max(.001,+_),_2=_1*_1;return zoomRho(_1,_2,_2*_2)},zoom}(Math.SQRT2,2,4);function hsl_hsl(hue){return function(start,end){var h=hue((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}const src_hsl=hsl_hsl(hue);var hslLong=hsl_hsl(nogamma);const math_radians=Math.PI/180,math_degrees=180/Math.PI,lab_t1=6/29,t2=3*lab_t1*lab_t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/1);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/.96422),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/.82521)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>.008856451679035631?Math.pow(t,1/3):t/t2+.13793103448275862}function lab2xyz(t){return t>lab_t1?t*t*t:t2*(t-.13793103448275862)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*math_degrees;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*math_radians;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}function lab_lab(start,end){var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),start.opacity=opacity(t),start+""}}function hcl_hcl(hue){return function(start,end){var h=hue((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}src_define(Lab,lab,define_extend(Color,{brighter(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x=.96422*lab2xyz(x))-1.6168667*(y=1*lab2xyz(y))-.4906146*(z=.82521*lab2xyz(z))),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),src_define(Hcl,hcl,define_extend(Color,{brighter(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));const src_hcl=hcl_hcl(hue);var hclLong=hcl_hcl(nogamma),A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*math_degrees-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix_cubehelix(h,s,l,opacity){return 1===arguments.length?cubehelixConvert(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix_cubehelix(start)).h,(end=cubehelix_cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}src_define(Cubehelix,cubehelix_cubehelix,define_extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=isNaN(this.h)?0:(this.h+120)*math_radians,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));const src_cubehelix=cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function src_quantize(interpolator,n){for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples}function bandSpace(count,paddingInner,paddingOuter){const space=count-paddingInner+2*paddingOuter;return count?space>0?space:1:0}const Log="log",Pow="pow",Time="time",UTC="utc",Sequential="sequential",Continuous="continuous";function band(){const scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range;let step,bandwidth,range$1=[0,1],round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){const n=domain().length,reverse=range$1[1]<range$1[0],stop=range$1[1-reverse],space=bandSpace(n,paddingInner,paddingOuter);let start=range$1[reverse-0];step=(stop-start)/(space||1),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));const values=range(n).map((i=>start+step*i));return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?(range$1=[+_[0],+_[1]],rescale()):range$1.slice()},scale.rangeRound=function(_){return range$1=[+_[0],+_[1]],round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),paddingInner=paddingOuter,rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.invertRange=function(_){if(null==_[0]||null==_[1])return;const reverse=range$1[1]<range$1[0],values=reverse?ordinalRange().reverse():ordinalRange(),n=values.length-1;let a,b,t,lo=+_[0],hi=+_[1];return lo!=lo||hi!=hi||(hi<lo&&(t=lo,lo=hi,hi=t),hi<values[0]||lo>range$1[1-reverse])?void 0:(a=Math.max(0,bisectRight(values,lo)-1),b=lo===hi?a:bisectRight(values,hi)-1,lo-values[a]>bandwidth+1e-10&&++a,reverse&&(t=a,a=n-b,b=n-t),a>b?void 0:domain().slice(a,b+1))},scale.invert=function(_){const value=scale.invertRange([_,_]);return value?value[0]:value},scale.copy=function(){return band().domain(domain()).range(range$1).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},rescale()}function pointish(scale){const copy=scale.copy;return scale.padding=scale.paddingOuter,delete scale.paddingInner,scale.copy=function(){return pointish(copy())},scale}var vega_scale_module_map=Array.prototype.map;function vega_scale_module_numbers(_){return vega_scale_module_map.call(_,toNumber)}const vega_scale_module_slice=Array.prototype.slice;const scales={};function create(type,constructor,metadata){const ctr=function scale(){const s=constructor();return s.invertRange||(s.invertRange=s.invert?function invertRange(scale){return function(_){let t,lo=_[0],hi=_[1];return hi<lo&&(t=lo,lo=hi,hi=t),[scale.invert(lo),scale.invert(hi)]}}(s):s.invertExtent?function invertRangeExtent(scale){return function(_){const range=scale.range();let max,t,i,n,lo=_[0],hi=_[1],min=-1;for(hi<lo&&(t=lo,lo=hi,hi=t),i=0,n=range.length;i<n;++i)range[i]>=lo&&range[i]<=hi&&(min<0&&(min=i),max=i);if(!(min<0))return lo=scale.invertExtent(range[min]),hi=scale.invertExtent(range[max]),[void 0===lo[0]?lo[1]:lo[0],void 0===hi[1]?hi[0]:hi[1]]}}(s):void 0),s.type=type,s};return ctr.metadata=toSet(array(metadata)),ctr}function vega_scale_module_scale(type,scale,metadata){return arguments.length>1?(scales[type]=create(type,scale,metadata),this):isValidScaleType(type)?scales[type]:void 0}function isValidScaleType(type){return has(scales,type)}function hasType(key,type){const s=scales[key];return s&&s.metadata[type]}function isContinuous(key){return hasType(key,Continuous)}function isDiscrete(key){return hasType(key,"discrete")}function isDiscretizing(key){return hasType(key,"discretizing")}function isLogarithmic(key){return hasType(key,Log)}function isInterpolating(key){return hasType(key,"interpolating")}function isQuantile(key){return hasType(key,"quantile")}vega_scale_module_scale("identity",(function identity_identity(domain){var unknown;function scale(x){return null==x||isNaN(x=+x)?unknown:x}return scale.invert=scale,scale.domain=scale.range=function(_){return arguments.length?(domain=Array.from(_,number_number),scale):domain.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return identity_identity(domain).unknown(unknown)},domain=arguments.length?Array.from(domain,number_number):[0,1],linearish(scale)})),vega_scale_module_scale("linear",(function linear_linear(){var scale=continuous();return scale.copy=function(){return copy(scale,linear_linear())},initRange.apply(scale,arguments),linearish(scale)}),Continuous),vega_scale_module_scale(Log,(function log_log(){const scale=loggish(transformer()).domain([1,10]);return scale.copy=()=>copy(scale,log_log()).base(scale.base()),initRange.apply(scale,arguments),scale}),[Continuous,Log]),vega_scale_module_scale("pow",pow_pow,Continuous),vega_scale_module_scale("sqrt",(function pow_sqrt(){return pow_pow.apply(null,arguments).exponent(.5)}),Continuous),vega_scale_module_scale("symlog",(function symlog_symlog(){var scale=symlogish(transformer());return scale.copy=function(){return copy(scale,symlog_symlog()).constant(scale.constant())},initRange.apply(scale,arguments)}),Continuous),vega_scale_module_scale(Time,(function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,src_year,src_month,sunday,src_day,src_hour,src_minute,src_second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[Continuous,"temporal"]),vega_scale_module_scale(UTC,(function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute,src_second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[Continuous,"temporal"]),vega_scale_module_scale("sequential",sequential,[Continuous,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat("linear"),sequential,[Continuous,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat(Log),(function sequentialLog(){var scale=loggish(sequential_transformer()).domain([1,10]);return scale.copy=function(){return sequential_copy(scale,sequentialLog()).base(scale.base())},initInterpolator.apply(scale,arguments)}),[Continuous,"interpolating",Log]),vega_scale_module_scale("".concat("sequential","-").concat("pow"),sequentialPow,[Continuous,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat("sqrt"),(function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}),[Continuous,"interpolating"]),vega_scale_module_scale("".concat("sequential","-").concat("symlog"),(function sequentialSymlog(){var scale=symlogish(sequential_transformer());return scale.copy=function(){return sequential_copy(scale,sequentialSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)}),[Continuous,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat("linear"),(function diverging(){var scale=linearish(diverging_transformer()(continuous_identity));return scale.copy=function(){return sequential_copy(scale,diverging())},initInterpolator.apply(scale,arguments)}),[Continuous,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat(Log),(function divergingLog(){var scale=loggish(diverging_transformer()).domain([.1,1,10]);return scale.copy=function(){return sequential_copy(scale,divergingLog()).base(scale.base())},initInterpolator.apply(scale,arguments)}),[Continuous,"interpolating",Log]),vega_scale_module_scale("".concat("diverging","-").concat("pow"),divergingPow,[Continuous,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat("sqrt"),(function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}),[Continuous,"interpolating"]),vega_scale_module_scale("".concat("diverging","-").concat("symlog"),(function divergingSymlog(){var scale=symlogish(diverging_transformer());return scale.copy=function(){return sequential_copy(scale,divergingSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)}),[Continuous,"interpolating"]),vega_scale_module_scale("quantile",(function quantile_quantile(){var unknown,domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=quantileSorted(domain,i/n);return scale}function scale(x){return null==x||isNaN(x=+x)?unknown:range[bisect(thresholds,x)]}return scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]},scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)null==d||isNaN(d=+d)||domain.push(d);return domain.sort(ascending_ascending),rescale()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){return quantile_quantile().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)}),["discretizing","quantile"]),vega_scale_module_scale("quantize",(function quantize(){var unknown,x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){return null!=x&&x<=x?range[bisect(domain,x,0,n)]:unknown}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?([x0,x1]=_,x0=+x0,x1=+x1,rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=Array.from(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):scale},scale.thresholds=function(){return domain.slice()},scale.copy=function(){return quantize().domain([x0,x1]).range(range).unknown(unknown)},initRange.apply(linearish(scale),arguments)}),"discretizing"),vega_scale_module_scale("threshold",(function threshold(){var unknown,domain=[.5],range=[0,1],n=1;function scale(x){return null!=x&&x<=x?range[bisect(domain,x,0,n)]:unknown}return scale.domain=function(_){return arguments.length?(domain=Array.from(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return threshold().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)}),"discretizing"),vega_scale_module_scale("bin-ordinal",(function scaleBinOrdinal(){let domain=[],range=[];function scale(x){return null==x||x!=x?void 0:range[(bisect(domain,x)-1)%range.length]}return scale.domain=function(_){return arguments.length?(domain=vega_scale_module_numbers(_),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=vega_scale_module_slice.call(_),scale):range.slice()},scale.tickFormat=function(count,specifier){return tickFormat(domain[0],peek(domain),null==count?10:count,specifier)},scale.copy=function(){return scaleBinOrdinal().domain(scale.domain()).range(scale.range())},scale}),["discrete","discretizing"]),vega_scale_module_scale("ordinal",ordinal,"discrete"),vega_scale_module_scale("band",band,"discrete"),vega_scale_module_scale("point",(function vega_scale_module_point(){return pointish(band().paddingInner(1))}),"discrete");const scaleProps=["clamp","base","constant","exponent"];function interpolateRange(interpolator,range){const start=range[0],span=peek(range)-start;return function(i){return interpolator(start+i*span)}}function interpolateColors(colors,type,gamma){return piecewise(interpolate(type||"rgb",gamma),colors)}function quantizeInterpolator(interpolator,count){const samples=new Array(count),n=count+1;for(let i=0;i<count;)samples[i]=interpolator(++i/n);return samples}function scaleFraction(scale$1,min,max){const delta=max-min;let i,t,s;return delta&&Number.isFinite(delta)?(i=(t=scale$1.type).indexOf("-"),t=i<0?t:t.slice(i+1),s=vega_scale_module_scale(t)().domain([min,max]).range([0,1]),scaleProps.forEach((m=>scale$1[m]?s[m](scale$1[m]()):0)),s):vega_util_module_constant(.5)}function interpolate(type,gamma){const interp=d3_interpolate_src_namespaceObject[function method(type){return"interpolate"+type.toLowerCase().split("-").map((s=>s[0].toUpperCase()+s.slice(1))).join("")}(type)];return null!=gamma&&interp&&interp.gamma?interp.gamma(gamma):interp}function colors(palette){const n=palette.length/6|0,c=new Array(n);for(let i=0;i<n;)c[i]="#"+palette.slice(6*i,6*++i);return c}function apply(_,f){for(const k in _)scheme(k,f(_[k]))}const schemes={};function scheme(name,scheme){return name=name&&name.toLowerCase(),arguments.length>1?(schemes[name]=scheme,this):schemes[name]}apply({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},colors),apply({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(_=>interpolateColors(colors(_))));const defaultFormatter=value=>isArray(value)?value.map((v=>String(v))):String(value),vega_scale_module_ascending=(a,b)=>a[1]-b[1],vega_scale_module_descending=(a,b)=>b[1]-a[1];function tickCount(scale,count,minStep){let step;return isNumber(count)&&(scale.bins&&(count=Math.max(count,scale.bins.length)),null!=minStep&&(count=Math.min(count,Math.floor(span(scale.domain())/minStep||1)))),isObject(count)&&(step=count.step,count=count.interval),isString(count)&&(count=scale.type===Time?timeInterval(count):scale.type==UTC?utcInterval(count):error("Only time and utc scales accept interval strings."),step&&(count=count.every(step))),count}function validTicks(scale,ticks,count){let range=scale.range(),lo=range[0],hi=peek(range),cmp=vega_scale_module_ascending;if(lo>hi&&(range=hi,hi=lo,lo=range,cmp=vega_scale_module_descending),lo=Math.floor(lo),hi=Math.ceil(hi),ticks=ticks.map((v=>[v,scale(v)])).filter((_=>lo<=_[1]&&_[1]<=hi)).sort(cmp).map((_=>_[0])),count>0&&ticks.length>1){const endpoints=[ticks[0],peek(ticks)];for(;ticks.length>count&&ticks.length>=3;)ticks=ticks.filter(((_,i)=>!(i%2)));ticks.length<3&&(ticks=endpoints)}return ticks}function tickValues(scale,count){return scale.bins?validTicks(scale,scale.bins):scale.ticks?scale.ticks(count):scale.domain()}function vega_scale_module_tickFormat(locale,scale,count,specifier,formatType,noSkip){const type=scale.type;let format=defaultFormatter;if(type===Time||formatType===Time)format=locale.timeFormat(specifier);else if(type===UTC||formatType===UTC)format=locale.utcFormat(specifier);else if(isLogarithmic(type)){const varfmt=locale.formatFloat(specifier);if(noSkip||scale.bins)format=varfmt;else{const test=tickLog(scale,count,!1);format=_=>test(_)?varfmt(_):""}}else if(scale.tickFormat){const d=scale.domain();format=locale.formatSpan(d[0],d[d.length-1],count,specifier)}else specifier&&(format=locale.format(specifier));return format}function tickLog(scale,count,values){const ticks=tickValues(scale,count),base=scale.base(),logb=Math.log(base),k=Math.max(1,base*count/ticks.length),test=d=>{let i=d/Math.pow(base,Math.round(Math.log(d)/logb));return i*base<base-.5&&(i*=base),i<=k};return values?ticks.filter(test):test}const symbols={quantile:"quantiles",quantize:"thresholds",threshold:"domain"},vega_scale_module_formats={quantile:"quantiles",quantize:"domain"};function labelValues(scale,count){return scale.bins?function binValues(bins){const values=bins.slice(0,-1);return values.max=peek(bins),values}(scale.bins):scale.type===Log?tickLog(scale,count,!0):symbols[scale.type]?function thresholdValues(thresholds){const values=[-1/0].concat(thresholds);return values.max=1/0,values}(scale[symbols[scale.type]]()):tickValues(scale,count)}function labelFormat(locale,scale,count,type,specifier,formatType,noSkip){const format=vega_scale_module_formats[scale.type]&&formatType!==Time&&formatType!==UTC?function thresholdFormat(locale,scale,specifier){const _=scale[vega_scale_module_formats[scale.type]](),n=_.length;let i,d=n>1?_[1]-_[0]:_[0];for(i=1;i<n;++i)d=Math.min(d,_[i]-_[i-1]);return locale.formatSpan(0,d,30,specifier)}(locale,scale,specifier):vega_scale_module_tickFormat(locale,scale,count,specifier,formatType,noSkip);return"symbol"===type&&(scale=>symbols[scale.type]||scale.bins)(scale)?formatRange(format):"discrete"===type?formatDiscrete(format):formatPoint(format)}const formatRange=format=>(value,index,array)=>{const limit=vega_scale_module_get(array[index+1],vega_scale_module_get(array.max,1/0)),lo=formatValue(value,format),hi=formatValue(limit,format);return lo&&hi?lo+"  "+hi:hi?"< "+hi:" "+lo},vega_scale_module_get=(value,dflt)=>null!=value?value:dflt,formatDiscrete=format=>(value,index)=>index?format(value):null,formatPoint=format=>value=>format(value),formatValue=(value,format)=>Number.isFinite(value)?format(value):null;function vega_scale_module_format(locale,scale,specifier,formatType){const type=formatType||scale.type;return isString(specifier)&&function isTemporal(key){return hasType(key,"temporal")}(type)&&(specifier=specifier.replace(/%a/g,"%A").replace(/%b/g,"%B")),specifier||type!==Time?specifier||type!==UTC?labelFormat(locale,scale,5,null,specifier,formatType,!0):locale.utcFormat("%A, %d %B %Y, %X UTC"):locale.timeFormat("%A, %d %B %Y, %X")}function domainCaption(locale,scale,opt){opt=opt||{};const max=Math.max(3,opt.maxlen||7),fmt=vega_scale_module_format(locale,scale,opt.format,opt.formatType);if(isDiscretizing(scale.type)){const v=labelValues(scale).slice(1).map(fmt),n=v.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(v.join(", "))}if(isDiscrete(scale.type)){const d=scale.domain(),n=d.length,v=n>max?d.slice(0,max-2).map(fmt).join(", ")+", ending with "+d.slice(-1).map(fmt):d.map(fmt).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(v)}{const d=scale.domain();return"values from ".concat(fmt(d[0])," to ").concat(fmt(peek(d)))}}let gradient_id=0;function isGradient(value){return value&&value.gradient}function gradientRef(g,defs,base){const type=g.gradient;let id=g.id,prefix="radial"===type?"p_":"";return id||(id=g.id="gradient_"+gradient_id++,"radial"===type?(g.x1=vega_scenegraph_module_get(g.x1,.5),g.y1=vega_scenegraph_module_get(g.y1,.5),g.r1=vega_scenegraph_module_get(g.r1,0),g.x2=vega_scenegraph_module_get(g.x2,.5),g.y2=vega_scenegraph_module_get(g.y2,.5),g.r2=vega_scenegraph_module_get(g.r2,.5),prefix="p_"):(g.x1=vega_scenegraph_module_get(g.x1,0),g.y1=vega_scenegraph_module_get(g.y1,0),g.x2=vega_scenegraph_module_get(g.x2,1),g.y2=vega_scenegraph_module_get(g.y2,0))),defs[id]=g,"url("+(base||"")+"#"+prefix+id+")"}function vega_scenegraph_module_get(val,def){return null!=val?val:def}function Gradient(p0,p1){var gradient,stops=[];return gradient={gradient:"linear",x1:p0?p0[0]:0,y1:p0?p0[1]:0,x2:p1?p1[0]:1,y2:p1?p1[1]:0,stops,stop:function(offset,color){return stops.push({offset,color}),gradient}}}const lookup={basis:{curve:function basis(context){return new Basis(context)}},"basis-closed":{curve:function basisClosed(context){return new BasisClosed(context)}},"basis-open":{curve:function basisOpen(context){return new BasisOpen(context)}},bundle:{curve:bundle,tension:"beta",value:.85},cardinal:{curve:cardinal,tension:"tension",value:0},"cardinal-open":{curve:cardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:cardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:catmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:catmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:catmullRomOpen,tension:"alpha",value:.5},linear:{curve:curve_linear},"linear-closed":{curve:function linearClosed(context){return new LinearClosed(context)}},monotone:{horizontal:function monotoneY(context){return new MonotoneY(context)},vertical:function monotoneX(context){return new MonotoneX(context)}},natural:{curve:function natural(context){return new Natural(context)}},step:{curve:function step(context){return new Step(context,.5)}},"step-after":{curve:function stepAfter(context){return new Step(context,1)}},"step-before":{curve:function stepBefore(context){return new Step(context,0)}}};function curves(type,orientation,tension){var entry=has(lookup,type)&&lookup[type],curve=null;return entry&&(curve=entry.curve||entry[orientation||"vertical"],entry.tension&&null!=tension&&(curve=curve[entry.tension](tension))),curve}const paramCounts={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},commandPattern=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,numberPattern=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,spacePattern=/^((\s+,?\s*)|(,\s*))/,flagPattern=/^[01]/;function vega_scenegraph_module_parse(path){const commands=[];return(path.match(commandPattern)||[]).forEach((str=>{let cmd=str[0];const type=cmd.toLowerCase(),paramCount=paramCounts[type],params=function parseParams(type,paramCount,segment){const params=[];for(let index=0;paramCount&&index<segment.length;)for(let i=0;i<paramCount;++i){const pattern="a"!==type||3!==i&&4!==i?numberPattern:flagPattern,match=segment.slice(index).match(pattern);if(null===match)throw Error("Invalid SVG path, incorrect parameter type");index+=match[0].length,params.push(+match[0]);const ws=segment.slice(index).match(spacePattern);null!==ws&&(index+=ws[0].length)}return params}(type,paramCount,str.slice(1).trim()),count=params.length;if(count<paramCount||count&&count%paramCount!=0)throw Error("Invalid SVG path, incorrect parameter count");if(commands.push([cmd,...params.slice(0,paramCount)]),count!==paramCount){"m"===type&&(cmd="M"===cmd?"L":"l");for(let i=paramCount;i<count;i+=paramCount)commands.push([cmd,...params.slice(i,i+paramCount)])}})),commands}const DegToRad=Math.PI/180,HalfPi=Math.PI/2,Tau=2*Math.PI,HalfSqrt3=Math.sqrt(3)/2;var segmentCache={},bezierCache={},join=[].join;function bezier(params){const key=join.call(params);if(bezierCache[key])return bezierCache[key];var cx=params[0],cy=params[1],th0=params[2],th1=params[3],rx=params[4],ry=params[5],sin_th=params[6],cos_th=params[7];const a00=cos_th*rx,a01=-sin_th*ry,a10=sin_th*rx,a11=cos_th*ry,cos_th0=Math.cos(th0),sin_th0=Math.sin(th0),cos_th1=Math.cos(th1),sin_th1=Math.sin(th1),th_half=.5*(th1-th0),sin_th_h2=Math.sin(.5*th_half),t=8/3*sin_th_h2*sin_th_h2/Math.sin(th_half),x1=cx+cos_th0-t*sin_th0,y1=cy+sin_th0+t*cos_th0,x3=cx+cos_th1,y3=cy+sin_th1,x2=x3+t*sin_th1,y2=y3-t*cos_th1;return bezierCache[key]=[a00*x1+a01*y1,a10*x1+a11*y1,a00*x2+a01*y2,a10*x2+a11*y2,a00*x3+a01*y3,a10*x3+a11*y3]}const temp=["l",0,0,0,0,0,0,0];function scale$1(current,sX,sY){const c=temp[0]=current[0];if("a"===c||"A"===c)temp[1]=sX*current[1],temp[2]=sY*current[2],temp[3]=current[3],temp[4]=current[4],temp[5]=current[5],temp[6]=sX*current[6],temp[7]=sY*current[7];else if("h"===c||"H"===c)temp[1]=sX*current[1];else if("v"===c||"V"===c)temp[1]=sY*current[1];else for(var i=1,n=current.length;i<n;++i)temp[i]=(i%2==1?sX:sY)*current[i];return temp}function pathRender(context,path,l,t,sX,sY){var current,tempX,tempY,tempControlX,tempControlY,previous=null,x=0,y=0,controlX=0,controlY=0,anchorX=0,anchorY=0;null==l&&(l=0),null==t&&(t=0),null==sX&&(sX=1),null==sY&&(sY=sX),context.beginPath&&context.beginPath();for(var i=0,len=path.length;i<len;++i){switch(current=path[i],1===sX&&1===sY||(current=scale$1(current,sX,sY)),current[0]){case"l":x+=current[1],y+=current[2],context.lineTo(x+l,y+t);break;case"L":x=current[1],y=current[2],context.lineTo(x+l,y+t);break;case"h":x+=current[1],context.lineTo(x+l,y+t);break;case"H":x=current[1],context.lineTo(x+l,y+t);break;case"v":y+=current[1],context.lineTo(x+l,y+t);break;case"V":y=current[1],context.lineTo(x+l,y+t);break;case"m":anchorX=x+=current[1],anchorY=y+=current[2],context.moveTo(x+l,y+t);break;case"M":anchorX=x=current[1],anchorY=y=current[2],context.moveTo(x+l,y+t);break;case"c":tempX=x+current[5],tempY=y+current[6],controlX=x+current[3],controlY=y+current[4],context.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"C":x=current[5],y=current[6],controlX=current[3],controlY=current[4],context.bezierCurveTo(current[1]+l,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case"s":tempX=x+current[3],tempY=y+current[4],controlX=2*x-controlX,controlY=2*y-controlY,context.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t),controlX=x+current[1],controlY=y+current[2],x=tempX,y=tempY;break;case"S":tempX=current[3],tempY=current[4],controlX=2*x-controlX,controlY=2*y-controlY,context.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t),x=tempX,y=tempY,controlX=current[1],controlY=current[2];break;case"q":tempX=x+current[3],tempY=y+current[4],controlX=x+current[1],controlY=y+current[2],context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"Q":tempX=current[3],tempY=current[4],context.quadraticCurveTo(current[1]+l,current[2]+t,tempX+l,tempY+t),x=tempX,y=tempY,controlX=current[1],controlY=current[2];break;case"t":tempX=x+current[1],tempY=y+current[2],null===previous[0].match(/[QqTt]/)?(controlX=x,controlY=y):"t"===previous[0]?(controlX=2*x-tempControlX,controlY=2*y-tempControlY):"q"===previous[0]&&(controlX=2*x-controlX,controlY=2*y-controlY),tempControlX=controlX,tempControlY=controlY,context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),y=tempY,controlX=(x=tempX)+current[1],controlY=y+current[2];break;case"T":tempX=current[1],tempY=current[2],controlX=2*x-controlX,controlY=2*y-controlY,context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t),x=tempX,y=tempY;break;case"a":drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]),x+=current[6],y+=current[7];break;case"A":drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]),x=current[6],y=current[7];break;case"z":case"Z":x=anchorX,y=anchorY,context.closePath()}previous=current}}function drawArc(context,x,y,coords){const seg=function segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){const key=join.call(arguments);if(segmentCache[key])return segmentCache[key];const th=rotateX*DegToRad,sin_th=Math.sin(th),cos_th=Math.cos(th),px=cos_th*(ox-x)*.5+sin_th*(oy-y)*.5,py=cos_th*(oy-y)*.5-sin_th*(ox-x)*.5;let pl=px*px/((rx=Math.abs(rx))*rx)+py*py/((ry=Math.abs(ry))*ry);pl>1&&(pl=Math.sqrt(pl),rx*=pl,ry*=pl);const a00=cos_th/rx,a01=sin_th/rx,a10=-sin_th/ry,a11=cos_th/ry,x0=a00*ox+a01*oy,y0=a10*ox+a11*oy,x1=a00*x+a01*y,y1=a10*x+a11*y;let sfactor_sq=1/((x1-x0)*(x1-x0)+(y1-y0)*(y1-y0))-.25;sfactor_sq<0&&(sfactor_sq=0);let sfactor=Math.sqrt(sfactor_sq);sweep==large&&(sfactor=-sfactor);const xc=.5*(x0+x1)-sfactor*(y1-y0),yc=.5*(y0+y1)+sfactor*(x1-x0),th0=Math.atan2(y0-yc,x0-xc);let th_arc=Math.atan2(y1-yc,x1-xc)-th0;th_arc<0&&1===sweep?th_arc+=Tau:th_arc>0&&0===sweep&&(th_arc-=Tau);const segs=Math.ceil(Math.abs(th_arc/(HalfPi+.001))),result=[];for(let i=0;i<segs;++i){const th2=th0+i*th_arc/segs,th3=th0+(i+1)*th_arc/segs;result[i]=[xc,yc,th2,th3,rx,ry,sin_th,cos_th]}return segmentCache[key]=result}(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y);for(let i=0;i<seg.length;++i){const bez=bezier(seg[i]);context.bezierCurveTo(bez[0],bez[1],bez[2],bez[3],bez[4],bez[5])}}const Tan30=.5773502691896257,builtins={circle:{draw:function(context,size){const r=Math.sqrt(size)/2;context.moveTo(r,0),context.arc(0,0,r,0,Tau)}},cross:{draw:function(context,size){var r=Math.sqrt(size)/2,s=r/2.5;context.moveTo(-r,-s),context.lineTo(-r,s),context.lineTo(-s,s),context.lineTo(-s,r),context.lineTo(s,r),context.lineTo(s,s),context.lineTo(r,s),context.lineTo(r,-s),context.lineTo(s,-s),context.lineTo(s,-r),context.lineTo(-s,-r),context.lineTo(-s,-s),context.closePath()}},diamond:{draw:function(context,size){const r=Math.sqrt(size)/2;context.moveTo(-r,0),context.lineTo(0,-r),context.lineTo(r,0),context.lineTo(0,r),context.closePath()}},square:{draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}},arrow:{draw:function(context,size){var r=Math.sqrt(size)/2,s=r/7,t=r/2.5,v=r/8;context.moveTo(-s,r),context.lineTo(s,r),context.lineTo(s,-v),context.lineTo(t,-v),context.lineTo(0,-r),context.lineTo(-t,-v),context.lineTo(-s,-v),context.closePath()}},wedge:{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r,o=h-r*Tan30,b=r/4;context.moveTo(0,-h-o),context.lineTo(-b,h-o),context.lineTo(b,h-o),context.closePath()}},triangle:{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r,o=h-r*Tan30;context.moveTo(0,-h-o),context.lineTo(-r,h-o),context.lineTo(r,h-o),context.closePath()}},"triangle-up":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(0,-h),context.lineTo(-r,h),context.lineTo(r,h),context.closePath()}},"triangle-down":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(0,h),context.lineTo(-r,-h),context.lineTo(r,-h),context.closePath()}},"triangle-right":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(h,0),context.lineTo(-h,-r),context.lineTo(-h,r),context.closePath()}},"triangle-left":{draw:function(context,size){var r=Math.sqrt(size)/2,h=HalfSqrt3*r;context.moveTo(-h,0),context.lineTo(h,-r),context.lineTo(h,r),context.closePath()}},stroke:{draw:function(context,size){const r=Math.sqrt(size)/2;context.moveTo(-r,0),context.lineTo(r,0)}}};function vega_scenegraph_module_symbols(_){return has(builtins,_)?builtins[_]:function customSymbol(path){if(!has(custom,path)){const parsed=vega_scenegraph_module_parse(path);custom[path]={draw:function(context,size){pathRender(context,parsed,0,0,Math.sqrt(size)/2)}}}return custom[path]}(_)}var custom={};function rectangleX(d){return d.x}function rectangleY(d){return d.y}function rectangleWidth(d){return d.width}function rectangleHeight(d){return d.height}function vega_scenegraph_module_number(_){return"function"==typeof _?_:()=>+_}function clamp(value,min,max){return Math.max(min,Math.min(value,max))}function vg_rect(){var x=rectangleX,y=rectangleY,width=rectangleWidth,height=rectangleHeight,crTL=vega_scenegraph_module_number(0),crTR=crTL,crBL=crTL,crBR=crTL,context=null;function rectangle(_,x0,y0){var buffer,x1=null!=x0?x0:+x.call(this,_),y1=null!=y0?y0:+y.call(this,_),w=+width.call(this,_),h=+height.call(this,_),s=Math.min(w,h)/2,tl=clamp(+crTL.call(this,_),0,s),tr=clamp(+crTR.call(this,_),0,s),bl=clamp(+crBL.call(this,_),0,s),br=clamp(+crBR.call(this,_),0,s);if(context||(context=buffer=src_path()),tl<=0&&tr<=0&&bl<=0&&br<=0)context.rect(x1,y1,w,h);else{var x2=x1+w,y2=y1+h;context.moveTo(x1+tl,y1),context.lineTo(x2-tr,y1),context.bezierCurveTo(x2-.448084975506*tr,y1,x2,y1+.448084975506*tr,x2,y1+tr),context.lineTo(x2,y2-br),context.bezierCurveTo(x2,y2-.448084975506*br,x2-.448084975506*br,y2,x2-br,y2),context.lineTo(x1+bl,y2),context.bezierCurveTo(x1+.448084975506*bl,y2,x1,y2-.448084975506*bl,x1,y2-bl),context.lineTo(x1,y1+tl),context.bezierCurveTo(x1,y1+.448084975506*tl,x1+.448084975506*tl,y1,x1+tl,y1),context.closePath()}if(buffer)return context=null,buffer+""||null}return rectangle.x=function(_){return arguments.length?(x=vega_scenegraph_module_number(_),rectangle):x},rectangle.y=function(_){return arguments.length?(y=vega_scenegraph_module_number(_),rectangle):y},rectangle.width=function(_){return arguments.length?(width=vega_scenegraph_module_number(_),rectangle):width},rectangle.height=function(_){return arguments.length?(height=vega_scenegraph_module_number(_),rectangle):height},rectangle.cornerRadius=function(tl,tr,br,bl){return arguments.length?(crTL=vega_scenegraph_module_number(tl),crTR=null!=tr?vega_scenegraph_module_number(tr):crTL,crBR=null!=br?vega_scenegraph_module_number(br):crTL,crBL=null!=bl?vega_scenegraph_module_number(bl):crTR,rectangle):crTL},rectangle.context=function(_){return arguments.length?(context=null==_?null:_,rectangle):context},rectangle}function vg_trail(){var x,y,size,defined,ready,x1,y1,r1,context=null;function point(x2,y2,w2){const r2=w2/2;if(ready){var ux=y1-y2,uy=x2-x1;if(ux||uy){var ud=Math.sqrt(ux*ux+uy*uy),rx=(ux/=ud)*r1,ry=(uy/=ud)*r1,t=Math.atan2(uy,ux);context.moveTo(x1-rx,y1-ry),context.lineTo(x2-ux*r2,y2-uy*r2),context.arc(x2,y2,r2,t-Math.PI,t),context.lineTo(x1+rx,y1+ry),context.arc(x1,y1,r1,t,t+Math.PI)}else context.arc(x2,y2,r2,0,Tau);context.closePath()}else ready=1;x1=x2,y1=y2,r1=r2}function trail(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(context=buffer=src_path()),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&(defined0=!defined0)&&(ready=0),defined0&&point(+x(d,i,data),+y(d,i,data),+size(d,i,data));if(buffer)return context=null,buffer+""||null}return trail.x=function(_){return arguments.length?(x=_,trail):x},trail.y=function(_){return arguments.length?(y=_,trail):y},trail.size=function(_){return arguments.length?(size=_,trail):size},trail.defined=function(_){return arguments.length?(defined=_,trail):defined},trail.context=function(_){return arguments.length?(context=null==_?null:_,trail):context},trail}function value$1(a,b){return null!=a?a:b}const vega_scenegraph_module_x=item=>item.x||0,y=item=>item.y||0,def=item=>!(!1===item.defined),arcShape=function arc(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=src_constant(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi,a1=endAngle.apply(this,arguments)-halfPi,da=abs(a1-a0),cw=a1>a0;if(context||(context=buffer=src_path()),r1<r0&&(r=r1,r1=r0,r0=r),r1>1e-12)if(da>tau-1e-12)context.moveTo(r1*cos(a0),r1*sin(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>1e-12&&(context.moveTo(r0*cos(a1),r0*sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>1e-12&&(padRadius?+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc=math_min(abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>1e-12){var p0=asin(rp/r0*sin(ap)),p1=asin(rp/r1*sin(ap));(da0-=2*p0)>1e-12?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>1e-12?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*cos(a01),y01=r1*sin(a01),x10=r0*cos(a10),y10=r0*sin(a10);if(rc>1e-12){var oc,x11=r1*cos(a11),y11=r1*sin(a11),x00=r0*cos(a00),y00=r0*sin(a00);if(da<pi&&(oc=intersect(x01,y01,x00,y00,x11,y11,x10,y10))){var ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin(acos((ax*bx+ay*by)/(sqrt(ax*ax+ay*ay)*sqrt(bx*bx+by*by)))/2),lc=sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=math_min(rc,(r0-lc)/(kc-1)),rc1=math_min(rc,(r1-lc)/(kc+1))}}da1>1e-12?rc1>1e-12?(t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),rc1<rc?context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r1,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw),context.arc(t1.cx,t1.cy,rc1,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>1e-12&&da0>1e-12?rc0>1e-12?(t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),rc0<rc?context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r0,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw),context.arc(t1.cx,t1.cy,rc0,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi/2;return[cos(a)*r,sin(a)*r]},arc.innerRadius=function(_){return arguments.length?(innerRadius="function"==typeof _?_:src_constant(+_),arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:src_constant(+_),arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:src_constant(+_),arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:src_constant(+_),arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:src_constant(+_),arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:src_constant(+_),arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:src_constant(+_),arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,arc):context},arc}().startAngle((item=>item.startAngle||0)).endAngle((item=>item.endAngle||0)).padAngle((item=>item.padAngle||0)).innerRadius((item=>item.innerRadius||0)).outerRadius((item=>item.outerRadius||0)).cornerRadius((item=>item.cornerRadius||0)),areavShape=src_area().x(vega_scenegraph_module_x).y1(y).y0((item=>(item.y||0)+(item.height||0))).defined(def),areahShape=src_area().y(y).x1(vega_scenegraph_module_x).x0((item=>(item.x||0)+(item.width||0))).defined(def),lineShape=line().x(vega_scenegraph_module_x).y(y).defined(def),rectShape=vg_rect().x(vega_scenegraph_module_x).y(y).width((item=>item.width||0)).height((item=>item.height||0)).cornerRadius((item=>value$1(item.cornerRadiusTopLeft,item.cornerRadius)||0),(item=>value$1(item.cornerRadiusTopRight,item.cornerRadius)||0),(item=>value$1(item.cornerRadiusBottomRight,item.cornerRadius)||0),(item=>value$1(item.cornerRadiusBottomLeft,item.cornerRadius)||0)),symbolShape=function symbol_Symbol(type,size){let context=null;function symbol(){let buffer;if(context||(context=buffer=src_path()),type.apply(this,arguments).draw(context,+size.apply(this,arguments)),buffer)return context=null,buffer+""||null}return type="function"==typeof type?type:src_constant(type||circle),size="function"==typeof size?size:src_constant(void 0===size?64:+size),symbol.type=function(_){return arguments.length?(type="function"==typeof _?_:src_constant(_),symbol):type},symbol.size=function(_){return arguments.length?(size="function"==typeof _?_:src_constant(+_),symbol):size},symbol.context=function(_){return arguments.length?(context=null==_?null:_,symbol):context},symbol}().type((item=>vega_scenegraph_module_symbols(item.shape||"circle"))).size((item=>value$1(item.size,64))),trailShape=vg_trail().x(vega_scenegraph_module_x).y(y).defined(def).size((item=>item.size||1));function hasCornerRadius(item){return item.cornerRadius||item.cornerRadiusTopLeft||item.cornerRadiusTopRight||item.cornerRadiusBottomRight||item.cornerRadiusBottomLeft}function rectangle(context,item,x,y){return rectShape.context(context)(item,x,y)}var clip_id=1;function resetSVGClipId(){clip_id=1}function clip$1(renderer,item,size){var clip=item.clip,defs=renderer._defs,id=item.clip_id||(item.clip_id="clip"+clip_id++),c=defs.clipping[id]||(defs.clipping[id]={id});return isFunction(clip)?c.path=clip(null):hasCornerRadius(size)?c.path=rectangle(null,size,0,0):(c.width=size.width||0,c.height=size.height||0),"url(#"+id+")"}function Bounds(b){this.clear(),b&&this.union(b)}function Item(mark){this.mark=mark,this.bounds=this.bounds||new Bounds}function GroupItem(mark){Item.call(this,mark),this.items=this.items||[]}function ResourceLoader(customLoader){this._pending=0,this._loader=customLoader||loader()}function increment(loader){loader._pending+=1}function decrement(loader){loader._pending-=1}function boundStroke(bounds,item,miter){if(item.stroke&&0!==item.opacity&&0!==item.strokeOpacity){const sw=null!=item.strokeWidth?+item.strokeWidth:1;bounds.expand(sw+(miter?function miterAdjustment(item,strokeWidth){return item.strokeJoin&&"miter"!==item.strokeJoin?0:strokeWidth}(item,sw):0))}return bounds}Bounds.prototype={clone(){return new Bounds(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(b){return this.x1===b.x1&&this.y1===b.y1&&this.x2===b.x2&&this.y2===b.y2},set(x1,y1,x2,y2){return x2<x1?(this.x2=x1,this.x1=x2):(this.x1=x1,this.x2=x2),y2<y1?(this.y2=y1,this.y1=y2):(this.y1=y1,this.y2=y2),this},add(x,y){return x<this.x1&&(this.x1=x),y<this.y1&&(this.y1=y),x>this.x2&&(this.x2=x),y>this.y2&&(this.y2=y),this},expand(d){return this.x1-=d,this.y1-=d,this.x2+=d,this.y2+=d,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(s){return this.x1*=s,this.y1*=s,this.x2*=s,this.y2*=s,this},translate(dx,dy){return this.x1+=dx,this.x2+=dx,this.y1+=dy,this.y2+=dy,this},rotate(angle,x,y){const p=this.rotatedPoints(angle,x,y);return this.clear().add(p[0],p[1]).add(p[2],p[3]).add(p[4],p[5]).add(p[6],p[7])},rotatedPoints(angle,x,y){var{x1,y1,x2,y2}=this,cos=Math.cos(angle),sin=Math.sin(angle),cx=x-x*cos+y*sin,cy=y-x*sin-y*cos;return[cos*x1-sin*y1+cx,sin*x1+cos*y1+cy,cos*x1-sin*y2+cx,sin*x1+cos*y2+cy,cos*x2-sin*y1+cx,sin*x2+cos*y1+cy,cos*x2-sin*y2+cx,sin*x2+cos*y2+cy]},union(b){return b.x1<this.x1&&(this.x1=b.x1),b.y1<this.y1&&(this.y1=b.y1),b.x2>this.x2&&(this.x2=b.x2),b.y2>this.y2&&(this.y2=b.y2),this},intersect(b){return b.x1>this.x1&&(this.x1=b.x1),b.y1>this.y1&&(this.y1=b.y1),b.x2<this.x2&&(this.x2=b.x2),b.y2<this.y2&&(this.y2=b.y2),this},encloses(b){return b&&this.x1<=b.x1&&this.x2>=b.x2&&this.y1<=b.y1&&this.y2>=b.y2},alignsWith(b){return b&&(this.x1==b.x1||this.x2==b.x2||this.y1==b.y1||this.y2==b.y2)},intersects(b){return b&&!(this.x2<b.x1||this.x1>b.x2||this.y2<b.y1||this.y1>b.y2)},contains(x,y){return!(x<this.x1||x>this.x2||y<this.y1||y>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},inherits(GroupItem,Item),ResourceLoader.prototype={pending(){return this._pending},sanitizeURL(uri){const loader=this;return increment(loader),loader._loader.sanitize(uri,{context:"href"}).then((opt=>(decrement(loader),opt))).catch((()=>(decrement(loader),null)))},loadImage(uri){const loader=this,Image=domImage();return increment(loader),loader._loader.sanitize(uri,{context:"image"}).then((opt=>{const url=opt.href;if(!url||!Image)throw{url};const img=new Image,cors=has(opt,"crossOrigin")?opt.crossOrigin:"anonymous";return null!=cors&&(img.crossOrigin=cors),img.onload=()=>decrement(loader),img.onerror=()=>decrement(loader),img.src=url,img})).catch((e=>(decrement(loader),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready(){const loader=this;return new Promise((accept=>{!function poll(value){loader.pending()?setTimeout((()=>{poll(!0)}),10):accept(value)}(!1)}))}};const circleThreshold=Tau-1e-8;let bounds,lx,ly,rot,ma,mb,mc,md;const vega_scenegraph_module_add=(x,y)=>bounds.add(x,y),addL=(x,y)=>vega_scenegraph_module_add(lx=x,ly=y),addX=x=>vega_scenegraph_module_add(x,bounds.y1),addY=y=>vega_scenegraph_module_add(bounds.x1,y),px=(x,y)=>ma*x+mc*y,py=(x,y)=>mb*x+md*y,addp=(x,y)=>vega_scenegraph_module_add(px(x,y),py(x,y)),addpL=(x,y)=>addL(px(x,y),py(x,y));function boundContext(_,deg){return bounds=_,deg?(rot=deg*DegToRad,ma=md=Math.cos(rot),mb=Math.sin(rot),mc=-mb):(ma=md=1,rot=mb=mc=0),context$1}const context$1={beginPath(){},closePath(){},moveTo:addpL,lineTo:addpL,rect(x,y,w,h){rot?(addp(x+w,y),addp(x+w,y+h),addp(x,y+h),addpL(x,y)):(vega_scenegraph_module_add(x+w,y+h),addL(x,y))},quadraticCurveTo(x1,y1,x2,y2){const px1=px(x1,y1),py1=py(x1,y1),px2=px(x2,y2),py2=py(x2,y2);quadExtrema(lx,px1,px2,addX),quadExtrema(ly,py1,py2,addY),addL(px2,py2)},bezierCurveTo(x1,y1,x2,y2,x3,y3){const px1=px(x1,y1),py1=py(x1,y1),px2=px(x2,y2),py2=py(x2,y2),px3=px(x3,y3),py3=py(x3,y3);cubicExtrema(lx,px1,px2,px3,addX),cubicExtrema(ly,py1,py2,py3,addY),addL(px3,py3)},arc(cx,cy,r,sa,ea,ccw){if(sa+=rot,ea+=rot,lx=r*Math.cos(ea)+cx,ly=r*Math.sin(ea)+cy,Math.abs(ea-sa)>circleThreshold)vega_scenegraph_module_add(cx-r,cy-r),vega_scenegraph_module_add(cx+r,cy+r);else{const update=a=>vega_scenegraph_module_add(r*Math.cos(a)+cx,r*Math.sin(a)+cy);let s,i;if(update(sa),update(ea),ea!==sa)if((sa%=Tau)<0&&(sa+=Tau),(ea%=Tau)<0&&(ea+=Tau),ea<sa&&(ccw=!ccw,s=sa,sa=ea,ea=s),ccw)for(ea-=Tau,s=sa-sa%HalfPi,i=0;i<4&&s>ea;++i,s-=HalfPi)update(s);else for(s=sa-sa%HalfPi+HalfPi,i=0;i<4&&s<ea;++i,s+=HalfPi)update(s)}}};function quadExtrema(x0,x1,x2,cb){const t=(x0-x1)/(x0+x2-2*x1);0<t&&t<1&&cb(x0+(x1-x0)*t)}function cubicExtrema(x0,x1,x2,x3,cb){const a=x3-x0+3*x1-3*x2,b=x0+x2-2*x1,c=x0-x1;let r,t0=0,t1=0;Math.abs(a)>1e-14?(r=b*b+c*a,r>=0&&(r=Math.sqrt(r),t0=(-b+r)/a,t1=(-b-r)/a)):t0=.5*c/b,0<t0&&t0<1&&cb(cubic(t0,x0,x1,x2,x3)),0<t1&&t1<1&&cb(cubic(t1,x0,x1,x2,x3))}function cubic(t,x0,x1,x2,x3){const s=1-t,s2=s*s,t2=t*t;return s2*s*x0+3*s2*t*x1+3*s*t2*x2+t2*t*x3}var context=(context=domCanvas(1,1))?context.getContext("2d"):null;const b=new Bounds;function intersectPath(draw){return function(item,brush){if(!context)return!0;draw(context,item),b.clear().union(item.bounds).intersect(brush).round();const{x1,y1,x2,y2}=b;for(let y=y1;y<=y2;++y)for(let x=x1;x<=x2;++x)if(context.isPointInPath(x,y))return!0;return!1}}function intersectPoint(item,box){return box.contains(item.x||0,item.y||0)}function intersectRect(item,box){const x=item.x||0,y=item.y||0,w=item.width||0,h=item.height||0;return box.intersects(b.set(x,y,x+w,y+h))}function intersectRule(item,box){const x=item.x||0,y=item.y||0;return intersectBoxLine(box,x,y,null!=item.x2?item.x2:x,null!=item.y2?item.y2:y)}function intersectBoxLine(box,x,y,u,v){const{x1,y1,x2,y2}=box,dx=u-x,dy=v-y;let p,q,r,e,t0=0,t1=1;for(e=0;e<4;++e){if(0===e&&(p=-dx,q=-(x1-x)),1===e&&(p=dx,q=x2-x),2===e&&(p=-dy,q=-(y1-y)),3===e&&(p=dy,q=y2-y),Math.abs(p)<1e-10&&q<0)return!1;if(r=q/p,p<0){if(r>t1)return!1;r>t0&&(t0=r)}else if(p>0){if(r<t0)return!1;r<t1&&(t1=r)}}return!0}function blend(context,item){context.globalCompositeOperation=item.blend||"source-over"}function vega_scenegraph_module_value(value,dflt){return null==value?dflt:value}function addStops(gradient,stops){const n=stops.length;for(let i=0;i<n;++i)gradient.addColorStop(stops[i].offset,stops[i].color);return gradient}function vega_scenegraph_module_color(context,item,value){return isGradient(value)?function gradient(context,spec,bounds){const w=bounds.width(),h=bounds.height();let gradient;if("radial"===spec.gradient)gradient=context.createRadialGradient(bounds.x1+vega_scenegraph_module_value(spec.x1,.5)*w,bounds.y1+vega_scenegraph_module_value(spec.y1,.5)*h,Math.max(w,h)*vega_scenegraph_module_value(spec.r1,0),bounds.x1+vega_scenegraph_module_value(spec.x2,.5)*w,bounds.y1+vega_scenegraph_module_value(spec.y2,.5)*h,Math.max(w,h)*vega_scenegraph_module_value(spec.r2,.5));else{const x1=vega_scenegraph_module_value(spec.x1,0),y1=vega_scenegraph_module_value(spec.y1,0),x2=vega_scenegraph_module_value(spec.x2,1),y2=vega_scenegraph_module_value(spec.y2,0);if(x1!==x2&&y1!==y2&&w!==h){const image=domCanvas(Math.ceil(w),Math.ceil(h)),ictx=image.getContext("2d");return ictx.scale(w,h),ictx.fillStyle=addStops(ictx.createLinearGradient(x1,y1,x2,y2),spec.stops),ictx.fillRect(0,0,w,h),context.createPattern(image,"no-repeat")}gradient=context.createLinearGradient(bounds.x1+x1*w,bounds.y1+y1*h,bounds.x1+x2*w,bounds.y1+y2*h)}return addStops(gradient,spec.stops)}(context,value,item.bounds):value}function fill(context,item,opacity){return(opacity*=null==item.fillOpacity?1:item.fillOpacity)>0&&(context.globalAlpha=opacity,context.fillStyle=vega_scenegraph_module_color(context,item,item.fill),!0)}var vega_scenegraph_module_Empty=[];function stroke(context,item,opacity){var lw=null!=(lw=item.strokeWidth)?lw:1;return!(lw<=0)&&((opacity*=null==item.strokeOpacity?1:item.strokeOpacity)>0&&(context.globalAlpha=opacity,context.strokeStyle=vega_scenegraph_module_color(context,item,item.stroke),context.lineWidth=lw,context.lineCap=item.strokeCap||"butt",context.lineJoin=item.strokeJoin||"miter",context.miterLimit=item.strokeMiterLimit||10,context.setLineDash&&(context.setLineDash(item.strokeDash||vega_scenegraph_module_Empty),context.lineDashOffset=item.strokeDashOffset||0),!0))}function vega_scenegraph_module_compare(a,b){return a.zindex-b.zindex||a.index-b.index}function zorder(scene){if(!scene.zdirty)return scene.zitems;var item,i,n,items=scene.items,output=[];for(i=0,n=items.length;i<n;++i)(item=items[i]).index=i,item.zindex&&output.push(item);return scene.zdirty=!1,scene.zitems=output.sort(vega_scenegraph_module_compare)}function visit(scene,visitor){var i,n,items=scene.items;if(!items||!items.length)return;const zitems=zorder(scene);if(zitems&&zitems.length){for(i=0,n=items.length;i<n;++i)items[i].zindex||visitor(items[i]);items=zitems}for(i=0,n=items.length;i<n;++i)visitor(items[i])}function pickVisit(scene,visitor){var hit,i,items=scene.items;if(!items||!items.length)return null;const zitems=zorder(scene);for(zitems&&zitems.length&&(items=zitems),i=items.length;--i>=0;)if(hit=visitor(items[i]))return hit;if(items===zitems)for(i=(items=scene.items).length;--i>=0;)if(!items[i].zindex&&(hit=visitor(items[i])))return hit;return null}function drawAll(path){return function(context,scene,bounds){visit(scene,(item=>{bounds&&!bounds.intersects(item.bounds)||drawPath(path,context,item,item)}))}}function drawOne(path){return function(context,scene,bounds){!scene.items.length||bounds&&!bounds.intersects(scene.bounds)||drawPath(path,context,scene.items[0],scene.items)}}function drawPath(path,context,item,items){var opacity=null==item.opacity?1:item.opacity;0!==opacity&&(path(context,items)||(blend(context,item),item.fill&&fill(context,item,opacity)&&context.fill(),item.stroke&&stroke(context,item,opacity)&&context.stroke()))}function pick$1(test){return test=test||truthy,function(context,scene,x,y,gx,gy){return x*=context.pixelRatio,y*=context.pixelRatio,pickVisit(scene,(item=>{const b=item.bounds;if((!b||b.contains(gx,gy))&&b)return test(context,item,x,y,gx,gy)?item:void 0}))}}function hitPath(path,filled){return function(context,o,x,y){var lw,lc,item=Array.isArray(o)?o[0]:o,fill=null==filled?item.fill:filled,stroke=item.stroke&&context.isPointInStroke;return stroke&&(lw=item.strokeWidth,lc=item.strokeCap,context.lineWidth=null!=lw?lw:1,context.lineCap=null!=lc?lc:"butt"),!path(context,o)&&(fill&&context.isPointInPath(x,y)||stroke&&context.isPointInStroke(x,y))}}function pickPath(path){return pick$1(hitPath(path))}function translate(x,y){return"translate("+x+","+y+")"}function rotate(a){return"rotate("+a+")"}function translateItem(item){return translate(item.x||0,item.y||0)}function markItemPath(type,shape,isect){function draw(context,item){var x=item.x||0,y=item.y||0,a=item.angle||0;context.translate(x,y),a&&context.rotate(a*=DegToRad),context.beginPath(),shape(context,item),a&&context.rotate(-a),context.translate(-x,-y)}return{type,tag:"path",nested:!1,attr:function attr(emit,item){emit("transform",function rotateItem(item){return translate(item.x||0,item.y||0)+(item.angle?" "+rotate(item.angle):"")}(item)),emit("d",shape(null,item))},bound:function bound(bounds,item){return shape(boundContext(bounds,item.angle),item),boundStroke(bounds,item).translate(item.x||0,item.y||0)},draw:drawAll(draw),pick:pickPath(draw),isect:isect||intersectPath(draw)}}var vega_scenegraph_module_arc=markItemPath("arc",(function arc$1(context,item){return arcShape.context(context)(item)}));function markMultiItemPath(type,shape,tip){function draw(context,items){context.beginPath(),shape(context,items)}const hit=hitPath(draw);return{type,tag:"path",nested:!0,attr:function attr(emit,item){var items=item.mark.items;items.length&&emit("d",shape(null,items))},bound:function bound(bounds,mark){var items=mark.items;return 0===items.length?bounds:(shape(boundContext(bounds),items),boundStroke(bounds,items[0]))},draw:drawOne(draw),pick:function pick(context,scene,x,y,gx,gy){var items=scene.items,b=scene.bounds;return!items||!items.length||b&&!b.contains(gx,gy)?null:(x*=context.pixelRatio,y*=context.pixelRatio,hit(context,items,x,y)?items[0]:null)},isect:intersectPoint,tip}}var vega_scenegraph_module_area=markMultiItemPath("area",(function area$1(context,items){const item=items[0],interp=item.interpolate||"linear";return("horizontal"===item.orient?areahShape:areavShape).curve(curves(interp,item.orient,item.tension)).context(context)(items)}),(function pickArea(a,p){for(var hit,d,v="horizontal"===a[0].orient?p[1]:p[0],z="horizontal"===a[0].orient?"y":"x",i=a.length,min=1/0;--i>=0;)!1!==a[i].defined&&(d=Math.abs(a[i][z]-v))<min&&(min=d,hit=a[i]);return hit}));function clipGroup(context,group){context.beginPath(),hasCornerRadius(group)?rectangle(context,group,0,0):context.rect(0,0,group.width||0,group.height||0),context.clip()}function offset$1(item){const sw=vega_scenegraph_module_value(item.strokeWidth,1);return null!=item.strokeOffset?item.strokeOffset:item.stroke&&sw>.5&&sw<1.5?.5-Math.abs(sw-1):0}function emitRectangle(emit,item){const off=offset$1(item);emit("d",rectangle(null,item,off,off))}function rectanglePath(context,group,x,y){const off=offset$1(group);context.beginPath(),rectangle(context,group,(x||0)+off,(y||0)+off)}const hitBackground=hitPath(rectanglePath),hitForeground=hitPath(rectanglePath,!1),hitCorner=hitPath(rectanglePath,!0);var group={type:"group",tag:"g",nested:!1,attr:function attr$5(emit,item){emit("transform",translateItem(item))},bound:function bound$5(bounds,group){if(!group.clip&&group.items){const items=group.items,m=items.length;for(let j=0;j<m;++j)bounds.union(items[j].bounds)}return(group.clip||group.width||group.height)&&!group.noBound&&bounds.add(0,0).add(group.width||0,group.height||0),boundStroke(bounds,group),bounds.translate(group.x||0,group.y||0)},draw:function draw$4(context,scene,bounds){visit(scene,(group=>{const gx=group.x||0,gy=group.y||0,fore=group.strokeForeground,opacity=null==group.opacity?1:group.opacity;(group.stroke||group.fill)&&opacity&&(rectanglePath(context,group,gx,gy),blend(context,group),group.fill&&fill(context,group,opacity)&&context.fill(),group.stroke&&!fore&&stroke(context,group,opacity)&&context.stroke()),context.save(),context.translate(gx,gy),group.clip&&clipGroup(context,group),bounds&&bounds.translate(-gx,-gy),visit(group,(item=>{this.draw(context,item,bounds)})),bounds&&bounds.translate(gx,gy),context.restore(),fore&&group.stroke&&opacity&&(rectanglePath(context,group,gx,gy),blend(context,group),stroke(context,group,opacity)&&context.stroke())}))},pick:function pick(context,scene,x,y,gx,gy){if(scene.bounds&&!scene.bounds.contains(gx,gy)||!scene.items)return null;const cx=x*context.pixelRatio,cy=y*context.pixelRatio;return pickVisit(scene,(group=>{let hit,dx,dy;const b=group.bounds;if(b&&!b.contains(gx,gy))return;dx=group.x||0,dy=group.y||0;const dw=dx+(group.width||0),dh=dy+(group.height||0),c=group.clip;if(c&&(gx<dx||gx>dw||gy<dy||gy>dh))return;if(context.save(),context.translate(dx,dy),dx=gx-dx,dy=gy-dy,c&&hasCornerRadius(group)&&!hitCorner(context,group,cx,cy))return context.restore(),null;const fore=group.strokeForeground,ix=!1!==scene.interactive;return ix&&fore&&group.stroke&&hitForeground(context,group,cx,cy)?(context.restore(),group):(hit=pickVisit(group,(mark=>function pickMark(mark,x,y){return(!1!==mark.interactive||"group"===mark.marktype)&&mark.bounds&&mark.bounds.contains(x,y)}(mark,dx,dy)?this.pick(mark,x,y,dx,dy):null)),!hit&&ix&&(group.fill||!fore&&group.stroke)&&hitBackground(context,group,cx,cy)&&(hit=group),context.restore(),hit||null)}))},isect:intersectRect,content:function content(emit,item,renderer){emit("clip-path",item.clip?clip$1(renderer,item,item):null)},background:function background(emit,item){emit("class","background"),emit("aria-hidden",!0),emitRectangle(emit,item)},foreground:function foreground(emit,item){emit("class","foreground"),emit("aria-hidden",!0),item.strokeForeground?emitRectangle(emit,item):emit("d","")}},metadata={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function getImage(item,renderer){var image=item.image;return(!image||item.url&&item.url!==image.url)&&(image={complete:!1,width:0,height:0},renderer.loadImage(item.url).then((image=>{item.image=image,item.image.url=item.url}))),image}function imageWidth(item,image){return null!=item.width?item.width:image&&image.width?!1!==item.aspect&&item.height?item.height*image.width/image.height:image.width:0}function imageHeight(item,image){return null!=item.height?item.height:image&&image.height?!1!==item.aspect&&item.width?item.width*image.height/image.width:image.height:0}function imageXOffset(align,w){return"center"===align?w/2:"right"===align?w:0}function imageYOffset(baseline,h){return"middle"===baseline?h/2:"bottom"===baseline?h:0}var vega_scenegraph_module_image={type:"image",tag:"image",nested:!1,attr:function attr$4(emit,item,renderer){const img=getImage(item,renderer),w=imageWidth(item,img),h=imageHeight(item,img),x=(item.x||0)-imageXOffset(item.align,w),y=(item.y||0)-imageYOffset(item.baseline,h);emit("href",!img.src&&img.toDataURL?img.toDataURL():img.src||"",metadata["xmlns:xlink"],"xlink:href"),emit("transform",translate(x,y)),emit("width",w),emit("height",h),emit("preserveAspectRatio",!1===item.aspect?"none":"xMidYMid")},bound:function bound$4(bounds,item){const img=item.image,w=imageWidth(item,img),h=imageHeight(item,img),x=(item.x||0)-imageXOffset(item.align,w),y=(item.y||0)-imageYOffset(item.baseline,h);return bounds.set(x,y,x+w,y+h)},draw:function draw$3(context,scene,bounds){visit(scene,(item=>{if(bounds&&!bounds.intersects(item.bounds))return;const img=getImage(item,this);let w=imageWidth(item,img),h=imageHeight(item,img);if(0===w||0===h)return;let opacity,ar0,ar1,t,x=(item.x||0)-imageXOffset(item.align,w),y=(item.y||0)-imageYOffset(item.baseline,h);!1!==item.aspect&&(ar0=img.width/img.height,ar1=item.width/item.height,ar0==ar0&&ar1==ar1&&ar0!==ar1&&(ar1<ar0?(t=w/ar0,y+=(h-t)/2,h=t):(t=h*ar0,x+=(w-t)/2,w=t))),(img.complete||img.toDataURL)&&(blend(context,item),context.globalAlpha=null!=(opacity=item.opacity)?opacity:1,context.imageSmoothingEnabled=!1!==item.smooth,context.drawImage(img,x,y,w,h))}))},pick:pick$1(),isect:truthy,get:getImage,xOffset:imageXOffset,yOffset:imageYOffset},vega_scenegraph_module_line=markMultiItemPath("line",(function line$1(context,items){const item=items[0],interp=item.interpolate||"linear";return lineShape.curve(curves(interp,item.orient,item.tension)).context(context)(items)}),(function pickLine(a,p){for(var dx,dy,t=Math.pow(a[0].strokeWidth||1,2),i=a.length;--i>=0;)if(!1!==a[i].defined&&(dx=a[i].x-p[0])*dx+(dy=a[i].y-p[1])*dy<t)return a[i];return null}));function path$1(context,item){var path=item.path;if(null==path)return!0;var x=item.x||0,y=item.y||0,sx=item.scaleX||1,sy=item.scaleY||1,a=(item.angle||0)*DegToRad,cache=item.pathCache;cache&&cache.path===path||((item.pathCache=cache=vega_scenegraph_module_parse(path)).path=path),a&&context.rotate&&context.translate?(context.translate(x,y),context.rotate(a),pathRender(context,cache,0,0,sx,sy),context.rotate(-a),context.translate(-x,-y)):pathRender(context,cache,x,y,sx,sy)}var path$2={type:"path",tag:"path",nested:!1,attr:function attr$3(emit,item){var sx=item.scaleX||1,sy=item.scaleY||1;1===sx&&1===sy||emit("vector-effect","non-scaling-stroke"),emit("transform",function transformItem(item){return translate(item.x||0,item.y||0)+(item.angle?" "+rotate(item.angle):"")+(item.scaleX||item.scaleY?" "+function vega_scenegraph_module_scale(scaleX,scaleY){return"scale("+scaleX+","+scaleY+")"}(item.scaleX||1,item.scaleY||1):"")}(item)),emit("d",item.path)},bound:function bound$3(bounds,item){return path$1(boundContext(bounds,item.angle),item)?bounds.set(0,0,0,0):boundStroke(bounds,item,!0)},draw:drawAll(path$1),pick:pickPath(path$1),isect:intersectPath(path$1)};function draw$2(context,item){context.beginPath(),rectangle(context,item)}var rect={type:"rect",tag:"path",nested:!1,attr:function attr$2(emit,item){emit("d",rectangle(null,item))},bound:function bound$2(bounds,item){var x,y;return boundStroke(bounds.set(x=item.x||0,y=item.y||0,x+item.width||0,y+item.height||0),item)},draw:drawAll(draw$2),pick:pickPath(draw$2),isect:intersectRect};function vega_scenegraph_module_path(context,item,opacity){var x1,y1,x2,y2;return!(!item.stroke||!stroke(context,item,opacity))&&(x1=item.x||0,y1=item.y||0,x2=null!=item.x2?item.x2:x1,y2=null!=item.y2?item.y2:y1,context.beginPath(),context.moveTo(x1,y1),context.lineTo(x2,y2),!0)}var rule={type:"rule",tag:"line",nested:!1,attr:function attr$1(emit,item){emit("transform",translateItem(item)),emit("x2",null!=item.x2?item.x2-(item.x||0):0),emit("y2",null!=item.y2?item.y2-(item.y||0):0)},bound:function bound$1(bounds,item){var x1,y1;return boundStroke(bounds.set(x1=item.x||0,y1=item.y||0,null!=item.x2?item.x2:x1,null!=item.y2?item.y2:y1),item)},draw:function draw$1(context,scene,bounds){visit(scene,(item=>{if(!bounds||bounds.intersects(item.bounds)){var opacity=null==item.opacity?1:item.opacity;opacity&&vega_scenegraph_module_path(context,item,opacity)&&(blend(context,item),context.stroke())}}))},pick:pick$1((function hit$1(context,item,x,y){return!!context.isPointInStroke&&(vega_scenegraph_module_path(context,item,1)&&context.isPointInStroke(x,y))})),isect:intersectRule},shape=markItemPath("shape",(function shape$1(context,item){return(item.mark.shape||item.shape).context(context)(item)})),symbol=markItemPath("symbol",(function symbol$1(context,item){return symbolShape.context(context)(item)}),intersectPoint);const widthCache=lruCache();var textMetrics={height:fontSize,measureWidth,estimateWidth,width:estimateWidth,canvas:useCanvas};function useCanvas(use){textMetrics.width=use&&context?measureWidth:estimateWidth}function estimateWidth(item,text){return _estimateWidth(textValue(item,text),fontSize(item))}function _estimateWidth(text,currentFontHeight){return~~(.8*text.length*currentFontHeight)}function measureWidth(item,text){return fontSize(item)<=0||!(text=textValue(item,text))?0:_measureWidth(text,font(item))}function _measureWidth(text,currentFont){const key="(".concat(currentFont,") ").concat(text);let width=widthCache.get(key);return void 0===width&&(context.font=currentFont,width=context.measureText(text).width,widthCache.set(key,width)),width}function fontSize(item){return null!=item.fontSize?+item.fontSize||0:11}function lineHeight(item){return null!=item.lineHeight?item.lineHeight:fontSize(item)+2}function textLines(item){return function lineArray(_){return isArray(_)?_.length>1?_:_[0]:_}(item.lineBreak&&item.text&&!isArray(item.text)?item.text.split(item.lineBreak):item.text)}function multiLineOffset(item){const tl=textLines(item);return(isArray(tl)?tl.length-1:0)*lineHeight(item)}function textValue(item,line){const text=null==line?"":(line+"").trim();return item.limit>0&&text.length?function vega_scenegraph_module_truncate(item,text){var limit=+item.limit,width=function widthGetter(item){if(textMetrics.width===measureWidth){const currentFont=font(item);return text=>_measureWidth(text,currentFont)}{const currentFontHeight=fontSize(item);return text=>_estimateWidth(text,currentFontHeight)}}(item);if(width(text)<limit)return text;var mid,ellipsis=item.ellipsis||"",rtl="rtl"===item.dir,lo=0,hi=text.length;if(limit-=width(ellipsis),rtl){for(;lo<hi;)mid=lo+hi>>>1,width(text.slice(mid))>limit?lo=mid+1:hi=mid;return ellipsis+text.slice(lo)}for(;lo<hi;)mid=1+(lo+hi>>>1),width(text.slice(0,mid))<limit?lo=mid:hi=mid-1;return text.slice(0,lo)+ellipsis}(item,text):text}function fontFamily(item,quote){var font=item.font;return(quote&&font?String(font).replace(/"/g,"'"):font)||"sans-serif"}function font(item,quote){return(item.fontStyle?item.fontStyle+" ":"")+(item.fontVariant?item.fontVariant+" ":"")+(item.fontWeight?item.fontWeight+" ":"")+fontSize(item)+"px "+fontFamily(item,quote)}function vega_scenegraph_module_offset(item){var baseline=item.baseline,h=fontSize(item);return Math.round("top"===baseline?.79*h:"middle"===baseline?.3*h:"bottom"===baseline?-.21*h:"line-top"===baseline?.29*h+.5*lineHeight(item):"line-bottom"===baseline?.29*h-.5*lineHeight(item):0)}useCanvas(!0);const textAlign={left:"start",center:"middle",right:"end"},tempBounds=new Bounds;function anchorPoint(item){var t,x=item.x||0,y=item.y||0,r=item.radius||0;return r&&(t=(item.theta||0)-HalfPi,x+=r*Math.cos(t),y+=r*Math.sin(t)),tempBounds.x1=x,tempBounds.y1=y,tempBounds}function bound(bounds,item,mode){var w,h=textMetrics.height(item),a=item.align,p=anchorPoint(item),x=p.x1,y=p.y1,dx=item.dx||0,dy=(item.dy||0)+vega_scenegraph_module_offset(item)-Math.round(.8*h),tl=textLines(item);if(isArray(tl)?(h+=lineHeight(item)*(tl.length-1),w=tl.reduce(((w,t)=>Math.max(w,textMetrics.width(item,t))),0)):w=textMetrics.width(item,tl),"center"===a?dx-=w/2:"right"===a&&(dx-=w),bounds.set(dx+=x,dy+=y,dx+w,dy+h),item.angle&&!mode)bounds.rotate(item.angle*DegToRad,x,y);else if(2===mode)return bounds.rotatedPoints(item.angle*DegToRad,x,y);return bounds}var vega_scenegraph_module_text={type:"text",tag:"text",nested:!1,attr:function attr(emit,item){var t,dx=item.dx||0,dy=(item.dy||0)+vega_scenegraph_module_offset(item),p=anchorPoint(item),x=p.x1,y=p.y1,a=item.angle||0;emit("text-anchor",textAlign[item.align]||"start"),a?(t=translate(x,y)+" "+rotate(a),(dx||dy)&&(t+=" "+translate(dx,dy))):t=translate(x+dx,y+dy),emit("transform",t)},bound,draw:function draw(context,scene,bounds){visit(scene,(item=>{var p,x,y,i,lh,tl,str,opacity=null==item.opacity?1:item.opacity;if(!(bounds&&!bounds.intersects(item.bounds)||0===opacity||item.fontSize<=0||null==item.text||0===item.text.length)){if(context.font=font(item),context.textAlign=item.align||"left",x=(p=anchorPoint(item)).x1,y=p.y1,item.angle&&(context.save(),context.translate(x,y),context.rotate(item.angle*DegToRad),x=y=0),x+=item.dx||0,y+=(item.dy||0)+vega_scenegraph_module_offset(item),tl=textLines(item),blend(context,item),isArray(tl))for(lh=lineHeight(item),i=0;i<tl.length;++i)str=textValue(item,tl[i]),item.fill&&fill(context,item,opacity)&&context.fillText(str,x,y),item.stroke&&stroke(context,item,opacity)&&context.strokeText(str,x,y),y+=lh;else str=textValue(item,tl),item.fill&&fill(context,item,opacity)&&context.fillText(str,x,y),item.stroke&&stroke(context,item,opacity)&&context.strokeText(str,x,y);item.angle&&context.restore()}}))},pick:pick$1((function hit(context,item,x,y,gx,gy){if(item.fontSize<=0)return!1;if(!item.angle)return!0;var p=anchorPoint(item),ax=p.x1,ay=p.y1,b=bound(tempBounds,item,1),a=-item.angle*DegToRad,cos=Math.cos(a),sin=Math.sin(a),px=cos*gx-sin*gy+(ax-cos*ax+sin*ay),py=sin*gx+cos*gy+(ay-sin*ax-cos*ay);return b.contains(px,py)})),isect:function intersectText(item,box){const p=bound(tempBounds,item,2);return intersectBoxLine(box,p[0],p[1],p[2],p[3])||intersectBoxLine(box,p[0],p[1],p[4],p[5])||intersectBoxLine(box,p[4],p[5],p[6],p[7])||intersectBoxLine(box,p[2],p[3],p[6],p[7])}},trail=markMultiItemPath("trail",(function trail$1(context,items){return trailShape.context(context)(items)}),(function pickTrail(a,p){for(var dx,dy,i=a.length;--i>=0;)if(!1!==a[i].defined&&(dx=a[i].x-p[0])*dx+(dy=a[i].y-p[1])*dy<(dx=a[i].size||1)*dx)return a[i];return null})),Marks={arc:vega_scenegraph_module_arc,area:vega_scenegraph_module_area,group,image:vega_scenegraph_module_image,line:vega_scenegraph_module_line,path:path$2,rect,rule,shape,symbol,text:vega_scenegraph_module_text,trail};function boundItem(item,func,opt){var type=Marks[item.mark.marktype],bound=func||type.bound;return type.nested&&(item=item.mark),bound(item.bounds||(item.bounds=new Bounds),item,opt)}var DUMMY={mark:null};function boundMark(mark,bounds,opt){var i,n,item,b,type=Marks[mark.marktype],bound=type.bound,items=mark.items,hasItems=items&&items.length;if(type.nested)return hasItems?item=items[0]:(DUMMY.mark=mark,item=DUMMY),b=boundItem(item,bound,opt),bounds=bounds&&bounds.union(b)||b;if(bounds=bounds||mark.bounds&&mark.bounds.clear()||new Bounds,hasItems)for(i=0,n=items.length;i<n;++i)bounds.union(boundItem(items[i],bound,opt));return mark.bounds=bounds}const keys=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sceneToJSON(scene,indent){return JSON.stringify(scene,keys,indent)}function sceneFromJSON(json){return initialize("string"==typeof json?JSON.parse(json):json)}function initialize(scene){var parent,i,n,type=scene.marktype,items=scene.items;if(items)for(i=0,n=items.length;i<n;++i)parent=type?"mark":"group",items[i][parent]=scene,items[i].zindex&&(items[i][parent].zdirty=!0),"group"===(type||parent)&&initialize(items[i]);return type&&boundMark(scene),scene}function Scenegraph(scene){arguments.length?this.root=sceneFromJSON(scene):(this.root=createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GroupItem(this.root)])}function createMark(def,group){const mark={bounds:new Bounds,clip:!!def.clip,group,interactive:!1!==def.interactive,items:[],marktype:def.marktype,name:def.name||void 0,role:def.role||void 0,zindex:def.zindex||0};return null!=def.aria&&(mark.aria=def.aria),def.description&&(mark.description=def.description),mark}function domCreate(doc,tag,ns){return!doc&&"undefined"!=typeof document&&document.createElement&&(doc=document),doc?ns?doc.createElementNS(ns,tag):doc.createElement(tag):null}function domFind(el,tag){tag=tag.toLowerCase();for(var nodes=el.childNodes,i=0,n=nodes.length;i<n;++i)if(nodes[i].tagName.toLowerCase()===tag)return nodes[i]}function domChild(el,index,tag,ns){var b,a=el.childNodes[index];return a&&a.tagName.toLowerCase()===tag.toLowerCase()||(b=a||null,a=domCreate(el.ownerDocument,tag,ns),el.insertBefore(a,b)),a}function domClear(el,index){for(var nodes=el.childNodes,curr=nodes.length;curr>index;)el.removeChild(nodes[--curr]);return el}function cssClass(mark){return"mark-"+mark.marktype+(mark.role?" role-"+mark.role:"")+(mark.name?" "+mark.name:"")}function vega_scenegraph_module_point(event,el){const rect=el.getBoundingClientRect();return[event.clientX-rect.left-(el.clientLeft||0),event.clientY-rect.top-(el.clientTop||0)]}function Handler(customLoader,customTooltip){this._active=null,this._handlers={},this._loader=customLoader||loader(),this._tooltip=customTooltip||defaultTooltip}function defaultTooltip(handler,event,item,value){handler.element().setAttribute("title",value||"")}function Renderer(loader){this._el=null,this._bgcolor=null,this._loader=new ResourceLoader(loader)}Scenegraph.prototype={toJSON(indent){return sceneToJSON(this.root,indent||0)},mark(markdef,group,index){const mark=createMark(markdef,group=group||this.root.items[0]);return group.items[index]=mark,mark.zindex&&(mark.group.zdirty=!0),mark}},Handler.prototype={initialize(el,origin,obj){return this._el=el,this._obj=obj||null,this.origin(origin)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(origin){return arguments.length?(this._origin=origin||[0,0],this):this._origin.slice()},scene(scene){return arguments.length?(this._scene=scene,this):this._scene},on(){},off(){},_handlerIndex(h,type,handler){for(let i=h?h.length:0;--i>=0;)if(h[i].type===type&&(!handler||h[i].handler===handler))return i;return-1},handlers(type){const h=this._handlers,a=[];if(type)a.push(...h[this.eventName(type)]);else for(const k in h)a.push(...h[k]);return a},eventName(name){const i=name.indexOf(".");return i<0?name:name.slice(0,i)},handleHref(event,item,href){this._loader.sanitize(href,{context:"href"}).then((opt=>{const e=new MouseEvent(event.type,event),a=domCreate(null,"a");for(const name in opt)a.setAttribute(name,opt[name]);a.dispatchEvent(e)})).catch((()=>{}))},handleTooltip(event,item,show){if(item&&null!=item.tooltip){item=function resolveItem(item,event,el,origin){var mdef,p,mark=item&&item.mark;if(mark&&(mdef=Marks[mark.marktype]).tip){for((p=vega_scenegraph_module_point(event,el))[0]-=origin[0],p[1]-=origin[1];item=item.mark.group;)p[0]-=item.x||0,p[1]-=item.y||0;item=mdef.tip(mark.items,p)}return item}(item,event,this.canvas(),this._origin);const value=show&&item&&item.tooltip||null;this._tooltip.call(this._obj,this,event,item,value)}},getItemBoundingClientRect(item){const el=this.canvas();if(!el)return;const rect=el.getBoundingClientRect(),origin=this._origin,bounds=item.bounds,width=bounds.width(),height=bounds.height();let x=bounds.x1+origin[0]+rect.left,y=bounds.y1+origin[1]+rect.top;for(;item.mark&&(item=item.mark.group);)x+=item.x||0,y+=item.y||0;return{x,y,width,height,left:x,top:y,right:x+width,bottom:y+height}}},Renderer.prototype={initialize(el,width,height,origin,scaleFactor){return this._el=el,this.resize(width,height,origin,scaleFactor)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(bgcolor){return 0===arguments.length?this._bgcolor:(this._bgcolor=bgcolor,this)},resize(width,height,origin,scaleFactor){return this._width=width,this._height=height,this._origin=origin||[0,0],this._scale=scaleFactor||1,this},dirty(){},render(scene){const r=this;return r._call=function(){r._render(scene)},r._call(),r._call=null,r},_render(){},renderAsync(scene){const r=this.render(scene);return this._ready?this._ready.then((()=>r)):Promise.resolve(r)},_load(method,uri){var r=this,p=r._loader[method](uri);if(!r._ready){const call=r._call;r._ready=r._loader.ready().then((redraw=>{redraw&&call(),r._ready=null}))}return p},sanitizeURL(uri){return this._load("sanitizeURL",uri)},loadImage(uri){return this._load("loadImage",uri)}};const DragLeaveEvent="dragleave",MouseDownEvent="mousedown",MouseMoveEvent="mousemove",MouseOutEvent="mouseout",ClickEvent="click",TooltipShowEvent=MouseMoveEvent,TooltipHideEvent=MouseOutEvent,HrefEvent=ClickEvent;function CanvasHandler(loader,tooltip){Handler.call(this,loader,tooltip),this._down=null,this._touch=null,this._first=!0,this._events={}}function eventListenerCheck(handler,type){(type=>"touchstart"===type||"touchmove"===type||"touchend"===type?["touchstart","touchmove","touchend"]:[type])(type).forEach((_=>function addEventListener(handler,type){const canvas=handler.canvas();canvas&&!handler._events[type]&&(handler._events[type]=1,canvas.addEventListener(type,handler[type]?evt=>handler[type](evt):evt=>handler.fire(type,evt)))}(handler,_)))}function move(moveEvent,overEvent,outEvent){return function(evt){const a=this._active,p=this.pickEvent(evt);p===a||(a&&a.exit||this.fire(outEvent,evt),this._active=p,this.fire(overEvent,evt)),this.fire(moveEvent,evt)}}function inactive(type){return function(evt){this.fire(type,evt),this._active=null}}inherits(CanvasHandler,Handler,{initialize(el,origin,obj){return this._canvas=el&&domFind(el,"canvas"),[ClickEvent,MouseDownEvent,MouseMoveEvent,MouseOutEvent,DragLeaveEvent].forEach((type=>eventListenerCheck(this,type))),Handler.prototype.initialize.call(this,el,origin,obj)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup","dragenter",DragLeaveEvent,"dragover",MouseDownEvent,"mouseup",MouseMoveEvent,MouseOutEvent,"mouseover",ClickEvent,"dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],DOMMouseScroll(evt){this.fire("mousewheel",evt)},mousemove:move(MouseMoveEvent,"mouseover",MouseOutEvent),dragover:move("dragover","dragenter",DragLeaveEvent),mouseout:inactive(MouseOutEvent),dragleave:inactive(DragLeaveEvent),mousedown(evt){this._down=this._active,this.fire(MouseDownEvent,evt)},click(evt){this._down===this._active&&(this.fire(ClickEvent,evt),this._down=null)},touchstart(evt){this._touch=this.pickEvent(evt.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",evt,!0)},touchmove(evt){this.fire("touchmove",evt,!0)},touchend(evt){this.fire("touchend",evt,!0),this._touch=null},fire(type,evt,touch){const a=touch?this._touch:this._active,h=this._handlers[type];if(evt.vegaType=type,type===HrefEvent&&a&&a.href?this.handleHref(evt,a,a.href):type!==TooltipShowEvent&&type!==TooltipHideEvent||this.handleTooltip(evt,a,type!==TooltipHideEvent),h)for(let i=0,len=h.length;i<len;++i)h[i].handler.call(this._obj,evt,a)},on(type,handler){const name=this.eventName(type),h=this._handlers;return this._handlerIndex(h[name],type,handler)<0&&(eventListenerCheck(this,type),(h[name]||(h[name]=[])).push({type,handler})),this},off(type,handler){const name=this.eventName(type),h=this._handlers[name],i=this._handlerIndex(h,type,handler);return i>=0&&h.splice(i,1),this},pickEvent(evt){const p=vega_scenegraph_module_point(evt,this._canvas),o=this._origin;return this.pick(this._scene,p[0],p[1],p[0]-o[0],p[1]-o[1])},pick(scene,x,y,gx,gy){const g=this.context();return Marks[scene.marktype].pick.call(this,g,scene,x,y,gx,gy)}});var pixelRatio=function devicePixelRatio(){return"undefined"!=typeof window&&window.devicePixelRatio||1}();function CanvasRenderer(loader){Renderer.call(this,loader),this._options={},this._redraw=!1,this._dirty=new Bounds,this._tempb=new Bounds}const base$1=Renderer.prototype;function SVGHandler(loader,tooltip){Handler.call(this,loader,tooltip);const h=this;h._hrefHandler=listener(h,((evt,item)=>{item&&item.href&&h.handleHref(evt,item,item.href)})),h._tooltipHandler=listener(h,((evt,item)=>{h.handleTooltip(evt,item,evt.type!==TooltipHideEvent)}))}inherits(CanvasRenderer,Renderer,{initialize(el,width,height,origin,scaleFactor,options){return this._options=options||{},this._canvas=this._options.externalContext?null:domCanvas(1,1,this._options.type),el&&this._canvas&&(domClear(el,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),base$1.initialize.call(this,el,width,height,origin,scaleFactor)},resize(width,height,origin,scaleFactor){if(base$1.resize.call(this,width,height,origin,scaleFactor),this._canvas)!function resize(canvas,width,height,origin,scaleFactor,opt){const inDOM="undefined"!=typeof HTMLElement&&canvas instanceof HTMLElement&&null!=canvas.parentNode,context=canvas.getContext("2d"),ratio=inDOM?pixelRatio:scaleFactor;canvas.width=width*ratio,canvas.height=height*ratio;for(const key in opt)context[key]=opt[key];return inDOM&&1!==ratio&&(canvas.style.width=width+"px",canvas.style.height=height+"px"),context.pixelRatio=ratio,context.setTransform(ratio,0,0,ratio,ratio*origin[0],ratio*origin[1]),canvas}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const ctx=this._options.externalContext;ctx||error("CanvasRenderer is missing a valid canvas or context"),ctx.scale(this._scale,this._scale),ctx.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(item){const b=this._tempb.clear().union(item.bounds);let g=item.mark.group;for(;g;)b.translate(g.x||0,g.y||0),g=g.mark.group;this._dirty.union(b)},_render(scene){const g=this.context(),o=this._origin,w=this._width,h=this._height,db=this._dirty,vb=((origin,width,height)=>(new Bounds).set(0,0,width,height).translate(-origin[0],-origin[1]))(o,w,h);g.save();const b=this._redraw||db.empty()?(this._redraw=!1,vb.expand(1)):function clipToBounds(g,b,origin){return b.expand(1).round(),g.pixelRatio%1&&b.scale(g.pixelRatio).round().scale(1/g.pixelRatio),b.translate(-origin[0]%1,-origin[1]%1),g.beginPath(),g.rect(b.x1,b.y1,b.width(),b.height()),g.clip(),b}(g,vb.intersect(db),o);return this.clear(-o[0],-o[1],w,h),this.draw(g,scene,b),g.restore(),db.clear(),this},draw(ctx,scene,bounds){const mark=Marks[scene.marktype];scene.clip&&function clip(context,scene){var clip=scene.clip;context.save(),isFunction(clip)?(context.beginPath(),clip(context),context.clip()):clipGroup(context,scene.group)}(ctx,scene),mark.draw.call(this,ctx,scene,bounds),scene.clip&&ctx.restore()},clear(x,y,w,h){const opt=this._options,g=this.context();"pdf"===opt.type||opt.externalContext||g.clearRect(x,y,w,h),null!=this._bgcolor&&(g.fillStyle=this._bgcolor,g.fillRect(x,y,w,h))}});const listener=(context,handler)=>evt=>{let item=evt.target.__data__;item=Array.isArray(item)?item[0]:item,evt.vegaType=evt.type,handler.call(context._obj,evt,item)};inherits(SVGHandler,Handler,{initialize(el,origin,obj){let svg=this._svg;return svg&&(svg.removeEventListener(HrefEvent,this._hrefHandler),svg.removeEventListener(TooltipShowEvent,this._tooltipHandler),svg.removeEventListener(TooltipHideEvent,this._tooltipHandler)),this._svg=svg=el&&domFind(el,"svg"),svg&&(svg.addEventListener(HrefEvent,this._hrefHandler),svg.addEventListener(TooltipShowEvent,this._tooltipHandler),svg.addEventListener(TooltipHideEvent,this._tooltipHandler)),Handler.prototype.initialize.call(this,el,origin,obj)},canvas(){return this._svg},on(type,handler){const name=this.eventName(type),h=this._handlers;if(this._handlerIndex(h[name],type,handler)<0){const x={type,handler,listener:listener(this,handler)};(h[name]||(h[name]=[])).push(x),this._svg&&this._svg.addEventListener(name,x.listener)}return this},off(type,handler){const name=this.eventName(type),h=this._handlers[name],i=this._handlerIndex(h,type,handler);return i>=0&&(this._svg&&this._svg.removeEventListener(name,h[i].listener),h.splice(i,1)),this}});const vega_scenegraph_module_bundle=(role,roledesc,label)=>({role,"aria-roledescription":roledesc,"aria-label":label||void 0}),AriaIgnore=toSet(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),AriaGuides={axis:{desc:"axis",caption:function axisCaption(item){const datum=item.datum,orient=item.orient,title=datum.title?extractTitle(item):null,ctx=item.context,scale=ctx.scales[datum.scale].value,locale=ctx.dataflow.locale(),type=scale.type;return"".concat("left"===orient||"right"===orient?"Y":"X","-axis")+(title?" titled '".concat(title,"'"):"")+" for a ".concat(isDiscrete(type)?"discrete":type," scale")+" with ".concat(domainCaption(locale,scale,item))}},legend:{desc:"legend",caption:function legendCaption(item){const datum=item.datum,title=datum.title?extractTitle(item):null,type="".concat(datum.type||""," legend").trim(),scales=datum.scales,props=Object.keys(scales),ctx=item.context,scale=ctx.scales[scales[props[0]]].value,locale=ctx.dataflow.locale();return function capitalize(s){return s.length?s[0].toUpperCase()+s.slice(1):s}(type)+(title?" titled '".concat(title,"'"):"")+" for ".concat(function channelCaption(props){return(props=props.map((p=>p+("fill"===p||"stroke"===p?" color":"")))).length<2?props[0]:props.slice(0,-1).join(", ")+" and "+peek(props)}(props))+" with ".concat(domainCaption(locale,scale,item))}},"title-text":{desc:"title",caption:item=>"Title text '".concat(titleCaption(item),"'")},"title-subtitle":{desc:"subtitle",caption:item=>"Subtitle text '".concat(titleCaption(item),"'")}},AriaEncode={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"};function ariaItemAttributes(emit,item){const hide=!1===item.aria;if(emit("aria-hidden",hide||void 0),hide||null==item.description)for(const prop in AriaEncode)emit(AriaEncode[prop],void 0);else{const type=item.mark.marktype;emit("aria-label",item.description),emit("role",item.ariaRole||("group"===type?"graphics-object":"graphics-symbol")),emit("aria-roledescription",item.ariaRoleDescription||"".concat(type," mark"))}}function ariaMarkAttributes(mark){return!1===mark.aria?{"aria-hidden":!0}:AriaIgnore[mark.role]?null:AriaGuides[mark.role]?function ariaGuide(mark,opt){try{const item=mark.items[0],caption=opt.caption||(()=>"");return vega_scenegraph_module_bundle(opt.role||"graphics-symbol",opt.desc,item.description||caption(item))}catch(err){return null}}(mark,AriaGuides[mark.role]):function ariaMark(mark){const type=mark.marktype,recurse="group"===type||"text"===type||mark.items.some((_=>null!=_.description&&!1!==_.aria));return vega_scenegraph_module_bundle(recurse?"graphics-object":"graphics-symbol","".concat(type," mark container"),mark.description)}(mark)}function titleCaption(item){return array(item.text).join(" ")}function extractTitle(item){try{return array(peek(item.items).items[0].text).join(" ")}catch(err){return null}}const innerText=val=>(val+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function markup(){let buf="",outer="",inner="";const stack=[],clear=()=>outer=inner="",attr=(name,value)=>(null!=value&&(outer+=" ".concat(name,'="').concat(innerText(value).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),m),m={open(tag){(tag=>{outer&&(buf+="".concat(outer,">").concat(inner),clear()),stack.push(tag)})(tag),outer="<"+tag;for(var _len=arguments.length,attrs=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)attrs[_key-1]=arguments[_key];for(const set of attrs)for(const key in set)attr(key,set[key]);return m},close(){const tag=stack.pop();return buf+=outer?outer+(inner?">".concat(inner,"</").concat(tag,">"):"/>"):"</".concat(tag,">"),clear(),m},attr,text:t=>(inner+=innerText(t),m),toString:()=>buf};return m}const serializeXML=node=>_serialize(markup(),node)+"";function _serialize(m,node){if(m.open(node.tagName),node.hasAttributes()){const attrs=node.attributes,n=attrs.length;for(let i=0;i<n;++i)m.attr(attrs[i].name,attrs[i].value)}if(node.hasChildNodes()){const children=node.childNodes;for(const child of children)3===child.nodeType?m.text(child.nodeValue):_serialize(m,child)}return m.close()}const stylesAttr={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},stylesCss={blend:"mix-blend-mode"},rootAttributes={fill:"none","stroke-miterlimit":10},xmlns="http://www.w3.org/2000/xmlns/",svgns=metadata.xmlns;function SVGRenderer(loader){Renderer.call(this,loader),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const base=Renderer.prototype;function dirtyParents(item,id){for(;item&&item.dirty!==id;item=item.mark.group){if(item.dirty=id,!item.mark||item.mark.dirty===id)return;item.mark.dirty=id}}function updateGradient(el,grad,index){let i,n,stop;if("radial"===grad.gradient){let pt=domChild(el,index++,"pattern",svgns);setAttributes(pt,{id:"p_"+grad.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),pt=domChild(pt,0,"rect",svgns),setAttributes(pt,{width:1,height:1,fill:"url(".concat(href(),"#").concat(grad.id,")")}),setAttributes(el=domChild(el,index++,"radialGradient",svgns),{id:grad.id,fx:grad.x1,fy:grad.y1,fr:grad.r1,cx:grad.x2,cy:grad.y2,r:grad.r2})}else setAttributes(el=domChild(el,index++,"linearGradient",svgns),{id:grad.id,x1:grad.x1,x2:grad.x2,y1:grad.y1,y2:grad.y2});for(i=0,n=grad.stops.length;i<n;++i)stop=domChild(el,i,"stop",svgns),stop.setAttribute("offset",grad.stops[i].offset),stop.setAttribute("stop-color",grad.stops[i].color);return domClear(el,i),index}function updateClipping(el,clip,index){let mask;return(el=domChild(el,index,"clipPath",svgns)).setAttribute("id",clip.id),clip.path?(mask=domChild(el,0,"path",svgns),mask.setAttribute("d",clip.path)):(mask=domChild(el,0,"rect",svgns),setAttributes(mask,{x:0,y:0,width:clip.width,height:clip.height})),domClear(el,1),index+1}function bind(item,el,sibling,tag,svg){let doc,node=item._svg;if(!node&&(doc=el.ownerDocument,node=domCreate(doc,tag,svgns),item._svg=node,item.mark&&(node.__data__=item,node.__values__={fill:"default"},"g"===tag))){const bg=domCreate(doc,"path",svgns);node.appendChild(bg),bg.__data__=item;const cg=domCreate(doc,"g",svgns);node.appendChild(cg),cg.__data__=item;const fg=domCreate(doc,"path",svgns);node.appendChild(fg),fg.__data__=item,fg.__values__={fill:"default"}}return(node.ownerSVGElement!==svg||function siblingCheck(node,sibling){return node.parentNode&&node.parentNode.childNodes.length>1&&node.previousSibling!=sibling}(node,sibling))&&el.insertBefore(node,sibling?sibling.nextSibling:el.firstChild),node}inherits(SVGRenderer,Renderer,{initialize(el,width,height,origin,scaleFactor){return this._defs={},this._clearDefs(),el&&(this._svg=domChild(el,0,"svg",svgns),this._svg.setAttributeNS(xmlns,"xmlns",svgns),this._svg.setAttributeNS(xmlns,"xmlns:xlink",metadata["xmlns:xlink"]),this._svg.setAttribute("version",metadata.version),this._svg.setAttribute("class","marks"),domClear(el,1),this._root=domChild(this._svg,0,"g",svgns),setAttributes(this._root,rootAttributes),domClear(this._svg,1)),this.background(this._bgcolor),base.initialize.call(this,el,width,height,origin,scaleFactor)},background(bgcolor){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",bgcolor),base.background.apply(this,arguments)},resize(width,height,origin,scaleFactor){return base.resize.call(this,width,height,origin,scaleFactor),this._svg&&(setAttributes(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const svg=this._svg,bg=this._bgcolor;if(!svg)return null;let node;bg&&(svg.removeAttribute("style"),node=domChild(svg,0,"rect",svgns),setAttributes(node,{width:this._width,height:this._height,fill:bg}));const text=serializeXML(svg);return bg&&(svg.removeChild(node),this._svg.style.setProperty("background-color",bg)),text},_render(scene){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,scene),domClear(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(item){item.dirty!==this._dirtyID&&(item.dirty=this._dirtyID,this._dirty.push(item))},isDirty(item){return this._dirtyAll||!item._svg||!item._svg.ownerSVGElement||item.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const items=this._dirty;if(!items.length||!this._dirtyID)return!0;const id=++this._dirtyID;let item,mark,type,mdef,i,n,o;for(i=0,n=items.length;i<n;++i)item=items[i],mark=item.mark,mark.marktype!==type&&(type=mark.marktype,mdef=Marks[type]),mark.zdirty&&mark.dirty!==id&&(this._dirtyAll=!1,dirtyParents(item,id),mark.items.forEach((i=>{i.dirty=id}))),mark.zdirty||(item.exit?(mdef.nested&&mark.items.length?(o=mark.items[0],o._svg&&this._update(mdef,o._svg,o)):item._svg&&(o=item._svg.parentNode,o&&o.removeChild(item._svg)),item._svg=null):(item=mdef.nested?mark.items[0]:item,item._update!==id&&(item._svg&&item._svg.ownerSVGElement?this._update(mdef,item._svg,item):(this._dirtyAll=!1,dirtyParents(item,id)),item._update=id)));return!this._dirtyAll},mark(el,scene,prev){if(!this.isDirty(scene))return scene._svg;const svg=this._svg,mdef=Marks[scene.marktype],events=!1===scene.interactive?"none":null,isGroup="g"===mdef.tag,parent=bind(scene,el,prev,"g",svg);parent.setAttribute("class",cssClass(scene));const aria=ariaMarkAttributes(scene);for(const key in aria)setAttribute(parent,key,aria[key]);isGroup||setAttribute(parent,"pointer-events",events),setAttribute(parent,"clip-path",scene.clip?clip$1(this,scene,scene.group):null);let sibling=null,i=0;const process=item=>{const dirty=this.isDirty(item),node=bind(item,parent,sibling,mdef.tag,svg);dirty&&(this._update(mdef,node,item),isGroup&&function recurse(renderer,el,group){el=el.lastChild.previousSibling;let prev,idx=0;visit(group,(item=>{prev=renderer.mark(el,item,prev),++idx})),domClear(el,1+idx)}(this,node,item)),sibling=node,++i};return mdef.nested?scene.items.length&&process(scene.items[0]):visit(scene,process),domClear(parent,i),parent},_update(mdef,el,item){vega_scenegraph_module_element=el,values=el.__values__,ariaItemAttributes(emit,item),mdef.attr(emit,item,this);const extra=mark_extras[mdef.type];extra&&extra.call(this,mdef,el,item),vega_scenegraph_module_element&&this.style(vega_scenegraph_module_element,item)},style(el,item){if(null!=item){for(const prop in stylesAttr){let value="font"===prop?fontFamily(item):item[prop];if(value===values[prop])continue;const name=stylesAttr[prop];null==value?el.removeAttribute(name):(isGradient(value)&&(value=gradientRef(value,this._defs.gradient,href())),el.setAttribute(name,value+"")),values[prop]=value}for(const prop in stylesCss)setStyle(el,stylesCss[prop],item[prop])}},defs(){const svg=this._svg,defs=this._defs;let el=defs.el,index=0;for(const id in defs.gradient)el||(defs.el=el=domChild(svg,1,"defs",svgns)),index=updateGradient(el,defs.gradient[id],index);for(const id in defs.clipping)el||(defs.el=el=domChild(svg,1,"defs",svgns)),index=updateClipping(el,defs.clipping[id],index);el&&(0===index?(svg.removeChild(el),defs.el=null):domClear(el,index))},_clearDefs(){const def=this._defs;def.gradient={},def.clipping={}}});let vega_scenegraph_module_element=null,values=null;const mark_extras={group(mdef,el,item){const fg=vega_scenegraph_module_element=el.childNodes[2];values=fg.__values__,mdef.foreground(emit,item,this),values=el.__values__,vega_scenegraph_module_element=el.childNodes[1],mdef.content(emit,item,this);const bg=vega_scenegraph_module_element=el.childNodes[0];mdef.background(emit,item,this);const value=!1===item.mark.interactive?"none":null;if(value!==values.events&&(setAttribute(fg,"pointer-events",value),setAttribute(bg,"pointer-events",value),values.events=value),item.strokeForeground&&item.stroke){const fill=item.fill;setAttribute(fg,"display",null),this.style(bg,item),setAttribute(bg,"stroke",null),fill&&(item.fill=null),values=fg.__values__,this.style(fg,item),fill&&(item.fill=fill),vega_scenegraph_module_element=null}else setAttribute(fg,"display","none")},image(mdef,el,item){!1===item.smooth?(setStyle(el,"image-rendering","optimizeSpeed"),setStyle(el,"image-rendering","pixelated")):setStyle(el,"image-rendering",null)},text(mdef,el,item){const tl=textLines(item);let key,value,doc,lh;isArray(tl)?(value=tl.map((_=>textValue(item,_))),key=value.join("\n"),key!==values.text&&(domClear(el,0),doc=el.ownerDocument,lh=lineHeight(item),value.forEach(((t,i)=>{const ts=domCreate(doc,"tspan",svgns);ts.__data__=item,ts.textContent=t,i&&(ts.setAttribute("x",0),ts.setAttribute("dy",lh)),el.appendChild(ts)})),values.text=key)):(value=textValue(item,tl),value!==values.text&&(el.textContent=value,values.text=value)),setAttribute(el,"font-family",fontFamily(item)),setAttribute(el,"font-size",fontSize(item)+"px"),setAttribute(el,"font-style",item.fontStyle),setAttribute(el,"font-variant",item.fontVariant),setAttribute(el,"font-weight",item.fontWeight)}};function emit(name,value,ns){value!==values[name]&&(ns?function setAttributeNS(el,name,value,ns){null!=value?el.setAttributeNS(ns,name,value):el.removeAttributeNS(ns,name)}(vega_scenegraph_module_element,name,value,ns):setAttribute(vega_scenegraph_module_element,name,value),values[name]=value)}function setStyle(el,name,value){value!==values[name]&&(null==value?el.style.removeProperty(name):el.style.setProperty(name,value+""),values[name]=value)}function setAttributes(el,attrs){for(const key in attrs)setAttribute(el,key,attrs[key])}function setAttribute(el,name,value){null!=value?el.setAttribute(name,value):el.removeAttribute(name)}function href(){let loc;return"undefined"==typeof window?"":(loc=window.location).hash?loc.href.slice(0,-loc.hash.length):loc.href}function SVGStringRenderer(loader){Renderer.call(this,loader),this._text=null,this._defs={gradient:{},clipping:{}}}inherits(SVGStringRenderer,Renderer,{svg(){return this._text},_render(scene){const m=markup();m.open("svg",extend({},metadata,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const bg=this._bgcolor;return bg&&"transparent"!==bg&&"none"!==bg&&m.open("rect",{width:this._width,height:this._height,fill:bg}).close(),m.open("g",rootAttributes,{transform:"translate("+this._origin+")"}),this.mark(m,scene),m.close(),this.defs(m),this._text=m.close()+"",this},mark(m,scene){const mdef=Marks[scene.marktype],tag=mdef.tag,attrList=[ariaItemAttributes,mdef.attr];m.open("g",{class:cssClass(scene),"clip-path":scene.clip?clip$1(this,scene,scene.group):null},ariaMarkAttributes(scene),{"pointer-events":"g"!==tag&&!1===scene.interactive?"none":null});const process=item=>{const href=this.href(item);if(href&&m.open("a",href),m.open(tag,this.attr(scene,item,attrList,"g"!==tag?tag:null)),"text"===tag){const tl=textLines(item);if(isArray(tl)){const attrs={x:0,dy:lineHeight(item)};for(let i=0;i<tl.length;++i)m.open("tspan",i?attrs:null).text(textValue(item,tl[i])).close()}else m.text(textValue(item,tl))}else if("g"===tag){const fore=item.strokeForeground,fill=item.fill,stroke=item.stroke;fore&&stroke&&(item.stroke=null),m.open("path",this.attr(scene,item,mdef.background,"bgrect")).close(),m.open("g",this.attr(scene,item,mdef.content)),visit(item,(scene=>this.mark(m,scene))),m.close(),fore&&stroke?(fill&&(item.fill=null),item.stroke=stroke,m.open("path",this.attr(scene,item,mdef.foreground,"bgrect")).close(),fill&&(item.fill=fill)):m.open("path",this.attr(scene,item,mdef.foreground,"bgfore")).close()}m.close(),href&&m.close()};return mdef.nested?scene.items&&scene.items.length&&process(scene.items[0]):visit(scene,process),m.close()},href(item){const href=item.href;let attr;if(href){if(attr=this._hrefs&&this._hrefs[href])return attr;this.sanitizeURL(href).then((attr=>{attr["xlink:href"]=attr.href,attr.href=null,(this._hrefs||(this._hrefs={}))[href]=attr}))}return null},attr(scene,item,attrs,tag){const object={},emit=(name,value,ns,prefixed)=>{object[prefixed||name]=value};return Array.isArray(attrs)?attrs.forEach((fn=>fn(emit,item,this))):attrs(emit,item,this),tag&&function style(s,item,scene,tag,defs){let styleList;if(null==item)return s;"bgrect"===tag&&!1===scene.interactive&&(s["pointer-events"]="none");if("bgfore"===tag&&(!1===scene.interactive&&(s["pointer-events"]="none"),s.display="none",null!==item.fill))return s;"image"===tag&&!1===item.smooth&&(styleList=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===tag&&(s["font-family"]=fontFamily(item),s["font-size"]=fontSize(item)+"px",s["font-style"]=item.fontStyle,s["font-variant"]=item.fontVariant,s["font-weight"]=item.fontWeight);for(const prop in stylesAttr){let value=item[prop];const name=stylesAttr[prop];("transparent"!==value||"fill"!==name&&"stroke"!==name)&&null!=value&&(isGradient(value)&&(value=gradientRef(value,defs.gradient,"")),s[name]=value)}for(const prop in stylesCss){const value=item[prop];null!=value&&(styleList=styleList||[],styleList.push("".concat(stylesCss[prop],": ").concat(value,";")))}styleList&&(s.style=styleList.join(" "));return s}(object,item,scene,tag,this._defs),object},defs(m){const gradient=this._defs.gradient,clipping=this._defs.clipping;if(0!==Object.keys(gradient).length+Object.keys(clipping).length){m.open("defs");for(const id in gradient){const def=gradient[id],stops=def.stops;"radial"===def.gradient?(m.open("pattern",{id:"p_"+id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),m.open("rect",{width:"1",height:"1",fill:"url(#"+id+")"}).close(),m.close(),m.open("radialGradient",{id,fx:def.x1,fy:def.y1,fr:def.r1,cx:def.x2,cy:def.y2,r:def.r2})):m.open("linearGradient",{id,x1:def.x1,x2:def.x2,y1:def.y1,y2:def.y2});for(let i=0;i<stops.length;++i)m.open("stop",{offset:stops[i].offset,"stop-color":stops[i].color}).close();m.close()}for(const id in clipping){const def=clipping[id];m.open("clipPath",{id}),def.path?m.open("path",{d:def.path}).close():m.open("rect",{x:0,y:0,width:def.width,height:def.height}).close(),m.close()}m.close()}}});const RenderType={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},modules={};function renderModule(name,_){return name=String(name||"").toLowerCase(),arguments.length>1?(modules[name]=_,this):modules[name]}function vega_scenegraph_module_intersect(scene,bounds,filter){const hits=[],box=(new Bounds).union(bounds),type=scene.marktype;return type?intersectMark(scene,box,filter,hits):"group"===type?intersectGroup(scene,box,filter,hits):error("Intersect scene must be mark node or group item.")}function intersectMark(mark,box,filter,hits){if(function visitMark(mark,box,filter){return mark.bounds&&box.intersects(mark.bounds)&&("group"===mark.marktype||!1!==mark.interactive&&(!filter||filter(mark)))}(mark,box,filter)){const items=mark.items,type=mark.marktype,n=items.length;let i=0;if("group"===type)for(;i<n;++i)intersectGroup(items[i],box,filter,hits);else for(const test=Marks[type].isect;i<n;++i){const item=items[i];intersectItem(item,box,test)&&hits.push(item)}}return hits}function intersectGroup(group,box,filter,hits){filter&&filter(group.mark)&&intersectItem(group,box,Marks.group.isect)&&hits.push(group);const marks=group.items,n=marks&&marks.length;if(n){const x=group.x||0,y=group.y||0;box.translate(-x,-y);for(let i=0;i<n;++i)intersectMark(marks[i],box,filter,hits);box.translate(x,y)}return hits}function intersectItem(item,box,test){const bounds=item.bounds;return box.encloses(bounds)||box.intersects(bounds)&&test(item,box)}modules.canvas=modules.png={renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler},modules.svg={renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler},modules.none={};const clipBounds=new Bounds;function boundClip(mark){const clip=mark.clip;if(isFunction(clip))clip(boundContext(clipBounds.clear()));else{if(!clip)return;clipBounds.set(0,0,mark.group.width,mark.group.height)}mark.bounds.intersect(clipBounds)}function sceneEqual(a,b,key){return a===b||("path"===key?pathEqual(a,b):a instanceof Date&&b instanceof Date?+a==+b:isNumber(a)&&isNumber(b)?Math.abs(a-b)<=1e-9:a&&b&&(isObject(a)||isObject(b))?function objectEqual(a,b){var key,i,ka=Object.keys(a),kb=Object.keys(b);if(ka.length!==kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(!sceneEqual(a[key=ka[i]],b[key],key))return!1;return typeof a==typeof b}(a,b):a==b)}function pathEqual(a,b){return sceneEqual(vega_scenegraph_module_parse(a),vega_scenegraph_module_parse(b))}function resetSVGDefIds(){resetSVGClipId(),function resetSVGGradientId(){gradient_id=0}()}const Top="top",Left="left",Right="right",Bottom="bottom",End="end",Row="row";function Bound(params){Transform.call(this,null,params)}function vega_view_transforms_module_boundItem(item,bound,opt){return bound(item.bounds.clear(),item,opt)}inherits(Bound,Transform,{transform(_,pulse){const view=pulse.dataflow,mark=_.mark,type=mark.marktype,entry=Marks[type],bound=entry.bound;let rebound,markBounds=mark.bounds;if(entry.nested)mark.items.length&&view.dirty(mark.items[0]),markBounds=vega_view_transforms_module_boundItem(mark,bound),mark.items.forEach((item=>{item.bounds.clear().union(markBounds)}));else if("group"===type||_.modified())switch(pulse.visit(pulse.MOD,(item=>view.dirty(item))),markBounds.clear(),mark.items.forEach((item=>markBounds.union(vega_view_transforms_module_boundItem(item,bound)))),mark.role){case"axis":case"legend":case"title":pulse.reflow()}else rebound=pulse.changed(pulse.REM),pulse.visit(pulse.ADD,(item=>{markBounds.union(vega_view_transforms_module_boundItem(item,bound))})),pulse.visit(pulse.MOD,(item=>{rebound=rebound||markBounds.alignsWith(item.bounds),view.dirty(item),markBounds.union(vega_view_transforms_module_boundItem(item,bound))})),rebound&&(markBounds.clear(),mark.items.forEach((item=>markBounds.union(item.bounds))));return boundClip(mark),pulse.modifies("bounds")}});function Identifier(params){Transform.call(this,0,params)}function Mark(params){Transform.call(this,null,params)}function Overlap(params){Transform.call(this,null,params)}Identifier.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},inherits(Identifier,Transform,{transform(_,pulse){const counter=function getCounter(view){return view._signals[":vega_identifier:"]||(view._signals[":vega_identifier:"]=view.add(0))}(pulse.dataflow),as=_.as;let id=counter.value;return pulse.visit(pulse.ADD,(t=>t[as]=t[as]||++id)),counter.set(this.value=id),pulse}}),inherits(Mark,Transform,{transform(_,pulse){let mark=this.value;mark||(mark=pulse.dataflow.scenegraph().mark(_.markdef,function vega_view_transforms_module_lookup(_){const g=_.groups,p=_.parent;return g&&1===g.size?g.get(Object.keys(g.object)[0]):g&&p?g.lookup(p):null}(_),_.index),mark.group.context=_.context,_.context.group||(_.context.group=mark.group),mark.source=this.source,mark.clip=_.clip,mark.interactive=_.interactive,this.value=mark);const Init="group"===mark.marktype?GroupItem:Item;return pulse.visit(pulse.ADD,(item=>Init.call(item,mark))),(_.modified("clip")||_.modified("interactive"))&&(mark.clip=_.clip,mark.interactive=!!_.interactive,mark.zdirty=!0,pulse.reflow()),mark.items=pulse.source,pulse}});const methods={parity:items=>items.filter(((item,i)=>i%2?item.opacity=0:1)),greedy:(items,sep)=>{let a;return items.filter(((b,i)=>i&&vega_view_transforms_module_intersect(a.bounds,b.bounds,sep)?b.opacity=0:(a=b,1)))}},vega_view_transforms_module_intersect=(a,b,sep)=>sep>Math.max(b.x1-a.x2,a.x1-b.x2,b.y1-a.y2,a.y1-b.y2),hasOverlap=(items,pad)=>{for(var b,i=1,n=items.length,a=items[0].bounds;i<n;a=b,++i)if(vega_view_transforms_module_intersect(a,b=items[i].bounds,pad))return!0},hasBounds=item=>{const b=item.bounds;return b.width()>1&&b.height()>1},vega_view_transforms_module_reset=source=>(source.forEach((item=>item.opacity=1)),source),reflow=(pulse,_)=>pulse.reflow(_.modified()).modifies("opacity");function Render(params){Transform.call(this,null,params)}inherits(Overlap,Transform,{transform(_,pulse){const reduce=methods[_.method]||methods.parity,sep=_.separation||0;let items,test,source=pulse.materialize(pulse.SOURCE).source;if(!source||!source.length)return;if(!_.method)return _.modified("method")&&(vega_view_transforms_module_reset(source),pulse=reflow(pulse,_)),pulse;if(source=source.filter(hasBounds),!source.length)return;if(_.sort&&(source=source.slice().sort(_.sort)),items=vega_view_transforms_module_reset(source),pulse=reflow(pulse,_),items.length>=3&&hasOverlap(items,sep)){do{items=reduce(items,sep)}while(items.length>=3&&hasOverlap(items,sep));items.length<3&&!peek(source).opacity&&(items.length>1&&(peek(items).opacity=0),peek(source).opacity=1)}_.boundScale&&_.boundTolerance>=0&&(test=((scale,orient,tolerance)=>{var range=scale.range(),b=new Bounds;return orient===Top||"bottom"===orient?b.set(range[0],-1/0,range[1],1/0):b.set(-1/0,range[0],1/0,range[1]),b.expand(tolerance||1),item=>b.encloses(item.bounds)})(_.boundScale,_.boundOrient,+_.boundTolerance),source.forEach((item=>{test(item)||(item.opacity=0)})));const bounds=items[0].mark.bounds.clear();return source.forEach((item=>{item.opacity&&bounds.union(item.bounds)})),pulse}}),inherits(Render,Transform,{transform(_,pulse){const view=pulse.dataflow;if(pulse.visit(pulse.ALL,(item=>view.dirty(item))),pulse.fields&&pulse.fields.zindex){const item=pulse.source&&pulse.source[0];item&&(item.mark.zdirty=!0)}}});const vega_view_transforms_module_tempBounds=new Bounds;function vega_view_transforms_module_set(item,property,value){return item[property]===value?0:(item[property]=value,1)}function isYAxis(mark){var orient=mark.items[0].orient;return orient===Left||orient===Right}function axisLayout(view,axis,width,height){var i,s,item=axis.items[0],datum=item.datum,delta=null!=item.translate?item.translate:.5,orient=item.orient,indices=function axisIndices(datum){let index=+datum.grid;return[datum.ticks?index++:-1,datum.labels?index++:-1,index+ +datum.domain]}(datum),range=item.range,offset=item.offset,position=item.position,minExtent=item.minExtent,maxExtent=item.maxExtent,title=datum.title&&item.items[indices[2]].items[0],titlePadding=item.titlePadding,bounds=item.bounds,dl=title&&multiLineOffset(title),x=0,y=0;switch(vega_view_transforms_module_tempBounds.clear().union(bounds),bounds.clear(),(i=indices[0])>-1&&bounds.union(item.items[i].bounds),(i=indices[1])>-1&&bounds.union(item.items[i].bounds),orient){case Top:x=position||0,y=-offset,s=Math.max(minExtent,Math.min(maxExtent,-bounds.y1)),bounds.add(0,-s).add(range,0),title&&axisTitleLayout(view,title,s,titlePadding,dl,0,-1,bounds);break;case Left:x=-offset,y=position||0,s=Math.max(minExtent,Math.min(maxExtent,-bounds.x1)),bounds.add(-s,0).add(0,range),title&&axisTitleLayout(view,title,s,titlePadding,dl,1,-1,bounds);break;case Right:x=width+offset,y=position||0,s=Math.max(minExtent,Math.min(maxExtent,bounds.x2)),bounds.add(0,0).add(s,range),title&&axisTitleLayout(view,title,s,titlePadding,dl,1,1,bounds);break;case"bottom":x=position||0,y=height+offset,s=Math.max(minExtent,Math.min(maxExtent,bounds.y2)),bounds.add(0,0).add(range,s),title&&axisTitleLayout(view,title,s,titlePadding,0,0,1,bounds);break;default:x=item.x,y=item.y}return boundStroke(bounds.translate(x,y),item),vega_view_transforms_module_set(item,"x",x+delta)|vega_view_transforms_module_set(item,"y",y+delta)&&(item.bounds=vega_view_transforms_module_tempBounds,view.dirty(item),item.bounds=bounds,view.dirty(item)),item.mark.bounds.clear().union(bounds)}function axisTitleLayout(view,title,offset,pad,dl,isYAxis,sign,bounds){const b=title.bounds;if(title.auto){const v=sign*(offset+dl+pad);let dx=0,dy=0;view.dirty(title),isYAxis?dx=(title.x||0)-(title.x=v):dy=(title.y||0)-(title.y=v),title.mark.bounds.clear().union(b.translate(-dx,-dy)),view.dirty(title)}bounds.union(b)}const vega_view_transforms_module_min=(a,b)=>Math.floor(Math.min(a,b)),vega_view_transforms_module_max=(a,b)=>Math.ceil(Math.max(a,b));function bboxFlush(item){return(new Bounds).set(0,0,item.width||0,item.height||0)}function bboxFull(item){const b=item.bounds.clone();return b.empty()?b.set(0,0,0,0):b.translate(-(item.x||0),-(item.y||0))}function vega_view_transforms_module_get(opt,key,d){const v=isObject(opt)?opt[key]:opt;return null!=v?v:void 0!==d?d:0}function offsetValue(v){return v<0?Math.ceil(-v):0}function gridLayout(view,groups,opt){var m,i,c,r,b,g,px,py,x,y,offset,dirty=!opt.nodirty,bbox="flush"===opt.bounds?bboxFlush:bboxFull,bounds=vega_view_transforms_module_tempBounds.set(0,0,0,0),alignCol=vega_view_transforms_module_get(opt.align,"column"),alignRow=vega_view_transforms_module_get(opt.align,Row),padCol=vega_view_transforms_module_get(opt.padding,"column"),padRow=vega_view_transforms_module_get(opt.padding,Row),ncols=opt.columns||groups.length,nrows=ncols<=0?1:Math.ceil(groups.length/ncols),n=groups.length,xOffset=Array(n),xExtent=Array(ncols),xMax=0,yOffset=Array(n),yExtent=Array(nrows),yMax=0,dx=Array(n),dy=Array(n),boxes=Array(n);for(i=0;i<ncols;++i)xExtent[i]=0;for(i=0;i<nrows;++i)yExtent[i]=0;for(i=0;i<n;++i)g=groups[i],b=boxes[i]=bbox(g),g.x=g.x||0,dx[i]=0,g.y=g.y||0,dy[i]=0,c=i%ncols,r=~~(i/ncols),xMax=Math.max(xMax,px=Math.ceil(b.x2)),yMax=Math.max(yMax,py=Math.ceil(b.y2)),xExtent[c]=Math.max(xExtent[c],px),yExtent[r]=Math.max(yExtent[r],py),xOffset[i]=padCol+offsetValue(b.x1),yOffset[i]=padRow+offsetValue(b.y1),dirty&&view.dirty(groups[i]);for(i=0;i<n;++i)i%ncols==0&&(xOffset[i]=0),i<ncols&&(yOffset[i]=0);if("each"===alignCol)for(c=1;c<ncols;++c){for(offset=0,i=c;i<n;i+=ncols)offset<xOffset[i]&&(offset=xOffset[i]);for(i=c;i<n;i+=ncols)xOffset[i]=offset+xExtent[c-1]}else if("all"===alignCol){for(offset=0,i=0;i<n;++i)i%ncols&&offset<xOffset[i]&&(offset=xOffset[i]);for(i=0;i<n;++i)i%ncols&&(xOffset[i]=offset+xMax)}else for(alignCol=!1,c=1;c<ncols;++c)for(i=c;i<n;i+=ncols)xOffset[i]+=xExtent[c-1];if("each"===alignRow)for(r=1;r<nrows;++r){for(offset=0,m=(i=r*ncols)+ncols;i<m;++i)offset<yOffset[i]&&(offset=yOffset[i]);for(i=r*ncols;i<m;++i)yOffset[i]=offset+yExtent[r-1]}else if("all"===alignRow){for(offset=0,i=ncols;i<n;++i)offset<yOffset[i]&&(offset=yOffset[i]);for(i=ncols;i<n;++i)yOffset[i]=offset+yMax}else for(alignRow=!1,r=1;r<nrows;++r)for(m=(i=r*ncols)+ncols;i<m;++i)yOffset[i]+=yExtent[r-1];for(x=0,i=0;i<n;++i)x=xOffset[i]+(i%ncols?x:0),dx[i]+=x-groups[i].x;for(c=0;c<ncols;++c)for(y=0,i=c;i<n;i+=ncols)y+=yOffset[i],dy[i]+=y-groups[i].y;if(alignCol&&vega_view_transforms_module_get(opt.center,"column")&&nrows>1)for(i=0;i<n;++i)(x=(b="all"===alignCol?xMax:xExtent[i%ncols])-boxes[i].x2-groups[i].x-dx[i])>0&&(dx[i]+=x/2);if(alignRow&&vega_view_transforms_module_get(opt.center,Row)&&1!==ncols)for(i=0;i<n;++i)(y=(b="all"===alignRow?yMax:yExtent[~~(i/ncols)])-boxes[i].y2-groups[i].y-dy[i])>0&&(dy[i]+=y/2);for(i=0;i<n;++i)bounds.union(boxes[i].translate(dx[i],dy[i]));switch(x=vega_view_transforms_module_get(opt.anchor,"x"),y=vega_view_transforms_module_get(opt.anchor,"y"),vega_view_transforms_module_get(opt.anchor,"column")){case End:x-=bounds.width();break;case"middle":x-=bounds.width()/2}switch(vega_view_transforms_module_get(opt.anchor,Row)){case End:y-=bounds.height();break;case"middle":y-=bounds.height()/2}for(x=Math.round(x),y=Math.round(y),bounds.clear(),i=0;i<n;++i)groups[i].mark.bounds.clear();for(i=0;i<n;++i)(g=groups[i]).x+=dx[i]+=x,g.y+=dy[i]+=y,bounds.union(g.mark.bounds.union(g.bounds.translate(dx[i],dy[i]))),dirty&&view.dirty(g);return bounds}function boundFlush(item,field){return"x1"===field?item.x||0:"y1"===field?item.y||0:"x2"===field?(item.x||0)+(item.width||0):"y2"===field?(item.y||0)+(item.height||0):void 0}function boundFull(item,field){return item.bounds[field]}function layoutHeaders(view,headers,groups,ncols,limit,offset,agg,isX,bound,bf,start,stride,back,band){var i,j,k,m,b,h,g,x,y,n=groups.length,init=0,edge=0;if(!n)return init;for(i=start;i<n;i+=stride)groups[i]&&(init=agg(init,bound(groups[i],bf)));if(!headers.length)return init;for(headers.length>limit&&(view.warn("Grid headers exceed limit: "+limit),headers=headers.slice(0,limit)),init+=offset,j=0,m=headers.length;j<m;++j)view.dirty(headers[j]),headers[j].mark.bounds.clear();for(i=start,j=0,m=headers.length;j<m;++j,i+=stride){for(b=(h=headers[j]).mark.bounds,k=i;k>=0&&null==(g=groups[k]);k-=back);isX?(x=null==band?g.x:Math.round(g.bounds.x1+band*g.bounds.width()),y=init):(x=init,y=null==band?g.y:Math.round(g.bounds.y1+band*g.bounds.height())),b.union(h.bounds.translate(x-(h.x||0),y-(h.y||0))),h.x=x,h.y=y,view.dirty(h),edge=agg(edge,b[bf])}return edge}function layoutTitle(view,g,offset,isX,bounds,band){if(g){view.dirty(g);var x=offset,y=offset;isX?x=Math.round(bounds.x1+band*bounds.width()):y=Math.round(bounds.y1+band*bounds.height()),g.bounds.translate(x-(g.x||0),y-(g.y||0)),g.mark.bounds.clear().union(g.bounds),g.x=x,g.y=y,view.dirty(g)}}function legendParams(g,orient,config,xb,yb,w,h){const _=function lookup$1(config,orient){const opt=config[orient]||{};return(key,d)=>null!=opt[key]?opt[key]:null!=config[key]?config[key]:d}(config,orient),offset=function offsets(legends,value){let max=-1/0;return legends.forEach((item=>{null!=item.offset&&(max=Math.max(max,item.offset))})),max>-1/0?max:value}(g,_("offset",0)),anchor=_("anchor","start"),mult=anchor===End?1:"middle"===anchor?.5:0,p={align:"each",bounds:_("bounds","flush"),columns:"vertical"===_("direction")?1:g.length,padding:_("margin",8),center:_("center"),nodirty:!0};switch(orient){case Left:p.anchor={x:Math.floor(xb.x1)-offset,column:End,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case Right:p.anchor={x:Math.ceil(xb.x2)+offset,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case Top:p.anchor={y:Math.floor(yb.y1)-offset,row:End,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case"bottom":p.anchor={y:Math.ceil(yb.y2)+offset,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case"top-left":p.anchor={x:offset,y:offset};break;case"top-right":p.anchor={x:w-offset,y:offset,column:End};break;case"bottom-left":p.anchor={x:offset,y:h-offset,row:End};break;case"bottom-right":p.anchor={x:w-offset,y:h-offset,column:End,row:End}}return p}function legendLayout(view,legend){var w,h,item=legend.items[0],datum=item.datum,orient=item.orient,bounds=item.bounds,x=item.x,y=item.y;return item._bounds?item._bounds.clear().union(bounds):item._bounds=bounds.clone(),bounds.clear(),function legendGroupLayout(view,item,entry){var pad=item.padding,ex=pad-entry.x,ey=pad-entry.y;if(item.datum.title){var title=item.items[1].items[0],anchor=title.anchor,tpad=item.titlePadding||0,tx=pad-title.x,ty=pad-title.y;switch(title.orient){case Left:ex+=Math.ceil(title.bounds.width())+tpad;break;case Right:case Bottom:break;default:ey+=title.bounds.height()+tpad}switch((ex||ey)&&vega_view_transforms_module_translate(view,entry,ex,ey),title.orient){case Left:ty+=legendTitleOffset(item,entry,title,anchor,1,1);break;case Right:tx+=legendTitleOffset(item,entry,title,End,0,0)+tpad,ty+=legendTitleOffset(item,entry,title,anchor,1,1);break;case Bottom:tx+=legendTitleOffset(item,entry,title,anchor,0,0),ty+=legendTitleOffset(item,entry,title,End,-1,0,1)+tpad;break;default:tx+=legendTitleOffset(item,entry,title,anchor,0,0)}(tx||ty)&&vega_view_transforms_module_translate(view,title,tx,ty),(tx=Math.round(title.bounds.x1-pad))<0&&(vega_view_transforms_module_translate(view,entry,-tx,0),vega_view_transforms_module_translate(view,title,-tx,0))}else(ex||ey)&&vega_view_transforms_module_translate(view,entry,ex,ey)}(view,item,item.items[0].items[0]),bounds=function legendBounds(item,b){return item.items.forEach((_=>b.union(_.bounds))),b.x1=item.padding,b.y1=item.padding,b}(item,bounds),w=2*item.padding,h=2*item.padding,bounds.empty()||(w=Math.ceil(bounds.width()+w),h=Math.ceil(bounds.height()+h)),"symbol"===datum.type&&function legendEntryLayout(entries){const widths=entries.reduce(((w,g)=>(w[g.column]=Math.max(g.bounds.x2-g.x,w[g.column]||0),w)),{});entries.forEach((g=>{g.width=widths[g.column],g.height=g.bounds.y2-g.y}))}(item.items[0].items[0].items[0].items),"none"!==orient&&(item.x=x=0,item.y=y=0),item.width=w,item.height=h,boundStroke(bounds.set(x,y,x+w,y+h),item),item.mark.bounds.clear().union(bounds),item}function legendTitleOffset(item,entry,title,anchor,y,lr,noBar){const grad="symbol"!==item.datum.type,vgrad=title.datum.vgrad,s=(!grad||!lr&&vgrad||noBar?entry:entry.items[0]).bounds[y?"y2":"x2"]-item.padding,u=vgrad&&lr?s:0,v=vgrad&&lr?0:s,o=y<=0?0:multiLineOffset(title);return Math.round("start"===anchor?u:anchor===End?v-o:.5*(s-o))}function vega_view_transforms_module_translate(view,item,dx,dy){item.x+=dx,item.y+=dy,item.bounds.translate(dx,dy),item.mark.bounds.translate(dx,dy),view.dirty(item)}function ViewLayout(params){Transform.call(this,null,params)}function sum_sum(values,valueof){let sum=0;if(void 0===valueof)for(let value of values)(value=+value)&&(sum+=value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&(sum+=value)}return sum}function AxisTicks(params){Transform.call(this,null,params)}function DataJoin(params){Transform.call(this,null,params)}function defaultItemCreate(){return ingest$1({})}function Encode(params){Transform.call(this,null,params)}function LegendEntries(params){Transform.call(this,[],params)}inherits(ViewLayout,Transform,{transform(_,pulse){const view=pulse.dataflow;return _.mark.items.forEach((group=>{_.layout&&function trellisLayout(view,group,opt){var x,y,x2,y2,anchor,band,offset,views=function gridLayoutGroups(group){var mark,items,groups=group.items,n=groups.length,i=0;const views={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(items=(mark=groups[i]).items,"group"===mark.marktype)switch(mark.role){case"axis":case"legend":case"title":break;case"row-header":views.rowheaders.push(...items);break;case"row-footer":views.rowfooters.push(...items);break;case"column-header":views.colheaders.push(...items);break;case"column-footer":views.colfooters.push(...items);break;case"row-title":views.rowtitle=items[0];break;case"column-title":views.coltitle=items[0];break;default:views.marks.push(...items)}return views}(group),groups=views.marks,bbox="flush"===opt.bounds?boundFlush:boundFull,off=opt.offset,ncols=opt.columns||groups.length,nrows=ncols<=0?1:Math.ceil(groups.length/ncols),cells=nrows*ncols;const bounds=gridLayout(view,groups,opt);bounds.empty()&&bounds.set(0,0,0,0),views.rowheaders&&(band=vega_view_transforms_module_get(opt.headerBand,Row,null),x=layoutHeaders(view,views.rowheaders,groups,0,nrows,-vega_view_transforms_module_get(off,"rowHeader"),vega_view_transforms_module_min,0,bbox,"x1",0,ncols,1,band)),views.colheaders&&(band=vega_view_transforms_module_get(opt.headerBand,"column",null),y=layoutHeaders(view,views.colheaders,groups,0,ncols,-vega_view_transforms_module_get(off,"columnHeader"),vega_view_transforms_module_min,1,bbox,"y1",0,1,ncols,band)),views.rowfooters&&(band=vega_view_transforms_module_get(opt.footerBand,Row,null),x2=layoutHeaders(view,views.rowfooters,groups,0,nrows,vega_view_transforms_module_get(off,"rowFooter"),vega_view_transforms_module_max,0,bbox,"x2",ncols-1,ncols,1,band)),views.colfooters&&(band=vega_view_transforms_module_get(opt.footerBand,"column",null),y2=layoutHeaders(view,views.colfooters,groups,0,ncols,vega_view_transforms_module_get(off,"columnFooter"),vega_view_transforms_module_max,1,bbox,"y2",cells-ncols,1,ncols,band)),views.rowtitle&&(anchor=vega_view_transforms_module_get(opt.titleAnchor,Row),offset=vega_view_transforms_module_get(off,"rowTitle"),offset=anchor===End?x2+offset:x-offset,band=vega_view_transforms_module_get(opt.titleBand,Row,.5),layoutTitle(view,views.rowtitle,offset,0,bounds,band)),views.coltitle&&(anchor=vega_view_transforms_module_get(opt.titleAnchor,"column"),offset=vega_view_transforms_module_get(off,"columnTitle"),offset=anchor===End?y2+offset:y-offset,band=vega_view_transforms_module_get(opt.titleBand,"column",.5),layoutTitle(view,views.coltitle,offset,1,bounds,band))}(view,group,_.layout),function layoutGroup(view,group,_){var title,mark,orient,i,n,items=group.items,width=Math.max(0,group.width||0),height=Math.max(0,group.height||0),viewBounds=(new Bounds).set(0,0,width,height),xBounds=viewBounds.clone(),yBounds=viewBounds.clone(),legends=[];for(i=0,n=items.length;i<n;++i)switch((mark=items[i]).role){case"axis":(isYAxis(mark)?xBounds:yBounds).union(axisLayout(view,mark,width,height));break;case"title":title=mark;break;case"legend":legends.push(legendLayout(view,mark));break;case"frame":case"scope":case"row-header":case"row-footer":case"row-title":case"column-header":case"column-footer":case"column-title":xBounds.union(mark.bounds),yBounds.union(mark.bounds);break;default:viewBounds.union(mark.bounds)}if(legends.length){const l={};legends.forEach((item=>{"none"!==(orient=item.orient||Right)&&(l[orient]||(l[orient]=[])).push(item)}));for(const orient in l){const g=l[orient];gridLayout(view,g,legendParams(g,orient,_.legends,xBounds,yBounds,width,height))}legends.forEach((item=>{const b=item.bounds;if(b.equals(item._bounds)||(item.bounds=item._bounds,view.dirty(item),item.bounds=b,view.dirty(item)),_.autosize&&"fit"===_.autosize.type)switch(item.orient){case Left:case Right:viewBounds.add(b.x1,0).add(b.x2,0);break;case Top:case Bottom:viewBounds.add(0,b.y1).add(0,b.y2)}else viewBounds.union(b)}))}viewBounds.union(xBounds).union(yBounds),title&&viewBounds.union(function titleLayout(view,mark,width,height,viewBounds){var pos,group=mark.items[0],frame=group.frame,orient=group.orient,anchor=group.anchor,offset=group.offset,padding=group.padding,title=group.items[0].items[0],subtitle=group.items[1]&&group.items[1].items[0],end=orient===Left||orient===Right?height:width,start=0,x=0,y=0,sx=0,sy=0;if("group"!==frame?orient===Left?(start=viewBounds.y2,end=viewBounds.y1):orient===Right?(start=viewBounds.y1,end=viewBounds.y2):(start=viewBounds.x1,end=viewBounds.x2):orient===Left&&(start=height,end=0),pos="start"===anchor?start:anchor===End?end:(start+end)/2,subtitle&&subtitle.text){switch(orient){case Top:case Bottom:sy=title.bounds.height()+padding;break;case Left:sx=title.bounds.width()+padding;break;case Right:sx=-title.bounds.width()-padding}vega_view_transforms_module_tempBounds.clear().union(subtitle.bounds),vega_view_transforms_module_tempBounds.translate(sx-(subtitle.x||0),sy-(subtitle.y||0)),vega_view_transforms_module_set(subtitle,"x",sx)|vega_view_transforms_module_set(subtitle,"y",sy)&&(view.dirty(subtitle),subtitle.bounds.clear().union(vega_view_transforms_module_tempBounds),subtitle.mark.bounds.clear().union(vega_view_transforms_module_tempBounds),view.dirty(subtitle)),vega_view_transforms_module_tempBounds.clear().union(subtitle.bounds)}else vega_view_transforms_module_tempBounds.clear();switch(vega_view_transforms_module_tempBounds.union(title.bounds),orient){case Top:x=pos,y=viewBounds.y1-vega_view_transforms_module_tempBounds.height()-offset;break;case Left:x=viewBounds.x1-vega_view_transforms_module_tempBounds.width()-offset,y=pos;break;case Right:x=viewBounds.x2+vega_view_transforms_module_tempBounds.width()+offset,y=pos;break;case Bottom:x=pos,y=viewBounds.y2+offset;break;default:x=group.x,y=group.y}return vega_view_transforms_module_set(group,"x",x)|vega_view_transforms_module_set(group,"y",y)&&(vega_view_transforms_module_tempBounds.translate(x,y),view.dirty(group),group.bounds.clear().union(vega_view_transforms_module_tempBounds),mark.bounds.clear().union(vega_view_transforms_module_tempBounds),view.dirty(group)),group.bounds}(view,title,width,height,viewBounds));group.clip&&viewBounds.set(0,0,group.width||0,group.height||0);!function viewSizeLayout(view,group,viewBounds,_){const auto=_.autosize||{},type=auto.type;if(view._autosize<1||!type)return;let viewWidth=view._width,viewHeight=view._height,width=Math.max(0,group.width||0),left=Math.max(0,Math.ceil(-viewBounds.x1)),height=Math.max(0,group.height||0),top=Math.max(0,Math.ceil(-viewBounds.y1));const right=Math.max(0,Math.ceil(viewBounds.x2-width)),bottom=Math.max(0,Math.ceil(viewBounds.y2-height));if("padding"===auto.contains){const padding=view.padding();viewWidth-=padding.left+padding.right,viewHeight-=padding.top+padding.bottom}"none"===type?(left=0,top=0,width=viewWidth,height=viewHeight):"fit"===type?(width=Math.max(0,viewWidth-left-right),height=Math.max(0,viewHeight-top-bottom)):"fit-x"===type?(width=Math.max(0,viewWidth-left-right),viewHeight=height+top+bottom):"fit-y"===type?(viewWidth=width+left+right,height=Math.max(0,viewHeight-top-bottom)):"pad"===type&&(viewWidth=width+left+right,viewHeight=height+top+bottom);view._resizeView(viewWidth,viewHeight,width,height,[left,top],auto.resize)}(view,group,viewBounds,_)}(view,group,_)})),function shouldReflow(group){return group&&"legend-entry"!==group.mark.role}(_.mark.group)?pulse.reflow():pulse}}),inherits(AxisTicks,Transform,{transform(_,pulse){if(this.value&&!_.modified())return pulse.StopPropagation;var locale=pulse.dataflow.locale(),out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),ticks=this.value,scale=_.scale,count=tickCount(scale,null==_.count?_.values?_.values.length:10:_.count,_.minstep),format=_.format||vega_scale_module_tickFormat(locale,scale,count,_.formatSpecifier,_.formatType,!!_.values),values=_.values?validTicks(scale,_.values,count):tickValues(scale,count);return ticks&&(out.rem=ticks),ticks=values.map(((value,i)=>ingest$1({index:i/(values.length-1||1),value,label:format(value)}))),_.extra&&ticks.length&&ticks.push(ingest$1({index:-1,extra:{value:ticks[0].value},label:""})),out.source=ticks,out.add=ticks,this.value=ticks,out}}),inherits(DataJoin,Transform,{transform(_,pulse){var df=pulse.dataflow,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),item=_.item||defaultItemCreate,key=_.key||tupleid,map=this.value;return isArray(out.encode)&&(out.encode=null),map&&(_.modified("key")||pulse.modified(key))&&error("DataJoin does not support modified key function or fields."),map||(pulse=pulse.addAll(),this.value=map=function newMap(key){const map=fastmap().test((t=>t.exit));return map.lookup=t=>map.get(key(t)),map}(key)),pulse.visit(pulse.ADD,(t=>{const k=key(t);let x=map.get(k);x?x.exit?(map.empty--,out.add.push(x)):out.mod.push(x):(x=item(t),map.set(k,x),out.add.push(x)),x.datum=t,x.exit=!1})),pulse.visit(pulse.MOD,(t=>{const k=key(t),x=map.get(k);x&&(x.datum=t,out.mod.push(x))})),pulse.visit(pulse.REM,(t=>{const k=key(t),x=map.get(k);t!==x.datum||x.exit||(out.rem.push(x),x.exit=!0,++map.empty)})),pulse.changed(pulse.ADD_MOD)&&out.modifies("datum"),(pulse.clean()||_.clean&&map.empty>df.cleanThreshold)&&df.runAfter(map.clean),out}}),inherits(Encode,Transform,{transform(_,pulse){var out=pulse.fork(pulse.ADD_REM),fmod=_.mod||!1,encoders=_.encoders,encode=pulse.encode;if(isArray(encode)){if(!out.changed()&&!encode.every((e=>encoders[e])))return pulse.StopPropagation;encode=encode[0],out.encode=null}var reenter="enter"===encode,update=encoders.update||falsy,enter=encoders.enter||falsy,exit=encoders.exit||falsy,set=(encode&&!reenter?encoders[encode]:update)||falsy;if(pulse.changed(pulse.ADD)&&(pulse.visit(pulse.ADD,(t=>{enter(t,_),update(t,_)})),out.modifies(enter.output),out.modifies(update.output),set!==falsy&&set!==update&&(pulse.visit(pulse.ADD,(t=>{set(t,_)})),out.modifies(set.output))),pulse.changed(pulse.REM)&&exit!==falsy&&(pulse.visit(pulse.REM,(t=>{exit(t,_)})),out.modifies(exit.output)),reenter||set!==falsy){const flag=pulse.MOD|(_.modified()?pulse.REFLOW:0);reenter?(pulse.visit(flag,(t=>{const mod=enter(t,_)||fmod;(set(t,_)||mod)&&out.mod.push(t)})),out.mod.length&&out.modifies(enter.output)):pulse.visit(flag,(t=>{(set(t,_)||fmod)&&out.mod.push(t)})),out.mod.length&&out.modifies(set.output)}return out.changed()?out:pulse.StopPropagation}}),inherits(LegendEntries,Transform,{transform(_,pulse){if(null!=this.value&&!_.modified())return pulse.StopPropagation;var domain,fraction,size,offset,ellipsis,locale=pulse.dataflow.locale(),out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),items=this.value,type=_.type||"symbol",scale=_.scale,limit=+_.limit,count=tickCount(scale,null==_.count?5:_.count,_.minstep),lskip=!!_.values||"symbol"===type,format=_.format||labelFormat(locale,scale,count,type,_.formatSpecifier,_.formatType,lskip),values=_.values||labelValues(scale,count);return items&&(out.rem=items),"symbol"===type?(limit&&values.length>limit?(pulse.dataflow.warn("Symbol legend count exceeds limit, filtering items."),items=values.slice(0,limit-1),ellipsis=!0):items=values,isFunction(size=_.size)?(_.values||0!==scale(items[0])||(items=items.slice(1)),offset=items.reduce(((max,value)=>Math.max(max,size(value,_))),0)):size=vega_util_module_constant(offset=size||8),items=items.map(((value,index)=>ingest$1({index,label:format(value,index,items),value,offset,size:size(value,_)}))),ellipsis&&(ellipsis=values[items.length],items.push(ingest$1({index:items.length,label:"".concat(values.length-items.length," entries"),value:ellipsis,offset,size:size(ellipsis,_)})))):"gradient"===type?(domain=scale.domain(),fraction=scaleFraction(scale,domain[0],peek(domain)),values.length<3&&!_.values&&domain[0]!==peek(domain)&&(values=[domain[0],peek(domain)]),items=values.map(((value,index)=>ingest$1({index,label:format(value,index,values),value,perc:fraction(value)})))):(size=values.length-1,fraction=function labelFraction(scale){const domain=scale.domain(),count=domain.length-1;let lo=+domain[0],hi=+peek(domain),span=hi-lo;if("threshold"===scale.type){const adjust=count?span/count:.1;lo-=adjust,hi+=adjust,span=hi-lo}return value=>(value-lo)/span}(scale),items=values.map(((value,index)=>ingest$1({index,label:format(value,index,values),value,perc:index?fraction(value):0,perc2:index===size?1:fraction(values[index+1])})))),out.source=items,out.add=items,this.value=items,out}});const sourceX=t=>t.source.x,sourceY=t=>t.source.y,targetX=t=>t.target.x,targetY=t=>t.target.y;function LinkPath(params){Transform.call(this,{},params)}LinkPath.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},inherits(LinkPath,Transform,{transform(_,pulse){var sx=_.sourceX||sourceX,sy=_.sourceY||sourceY,tx=_.targetX||targetX,ty=_.targetY||targetY,as=_.as||"path",orient=_.orient||"vertical",shape=_.shape||"line",path=Paths.get(shape+"-"+orient)||Paths.get(shape);return path||error("LinkPath unsupported type: "+_.shape+(_.orient?"-"+_.orient:"")),pulse.visit(pulse.SOURCE,(t=>{t[as]=path(sx(t),sy(t),tx(t),ty(t))})),pulse.reflow(_.modified()).modifies(as)}});const vega_encode_module_line=(sx,sy,tx,ty)=>"M"+sx+","+sy+"L"+tx+","+ty,vega_encode_module_arc=(sx,sy,tx,ty)=>{var dx=tx-sx,dy=ty-sy,rr=Math.sqrt(dx*dx+dy*dy)/2;return"M"+sx+","+sy+"A"+rr+","+rr+" "+180*Math.atan2(dy,dx)/Math.PI+" 0 1 "+tx+","+ty},curve=(sx,sy,tx,ty)=>{const dx=tx-sx,dy=ty-sy,ix=.2*(dx+dy),iy=.2*(dy-dx);return"M"+sx+","+sy+"C"+(sx+ix)+","+(sy+iy)+" "+(tx+iy)+","+(ty-ix)+" "+tx+","+ty},Paths=fastmap({line:vega_encode_module_line,"line-radial":(sa,sr,ta,tr)=>vega_encode_module_line(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),arc:vega_encode_module_arc,"arc-radial":(sa,sr,ta,tr)=>vega_encode_module_arc(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),curve,"curve-radial":(sa,sr,ta,tr)=>curve(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),"orthogonal-horizontal":(sx,sy,tx,ty)=>"M"+sx+","+sy+"V"+ty+"H"+tx,"orthogonal-vertical":(sx,sy,tx,ty)=>"M"+sx+","+sy+"H"+tx+"V"+ty,"orthogonal-radial":(sa,sr,ta,tr)=>{const sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta);return"M"+sr*sc+","+sr*ss+"A"+sr+","+sr+" 0 0,"+((Math.abs(ta-sa)>Math.PI?ta<=sa:ta>sa)?1:0)+" "+sr*tc+","+sr*ts+"L"+tr*tc+","+tr*ts},"diagonal-horizontal":(sx,sy,tx,ty)=>{const m=(sx+tx)/2;return"M"+sx+","+sy+"C"+m+","+sy+" "+m+","+ty+" "+tx+","+ty},"diagonal-vertical":(sx,sy,tx,ty)=>{const m=(sy+ty)/2;return"M"+sx+","+sy+"C"+sx+","+m+" "+tx+","+m+" "+tx+","+ty},"diagonal-radial":(sa,sr,ta,tr)=>{const sc=Math.cos(sa),ss=Math.sin(sa),tc=Math.cos(ta),ts=Math.sin(ta),mr=(sr+tr)/2;return"M"+sr*sc+","+sr*ss+"C"+mr*sc+","+mr*ss+" "+mr*tc+","+mr*ts+" "+tr*tc+","+tr*ts}});function Pie(params){Transform.call(this,null,params)}Pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},inherits(Pie,Transform,{transform(_,pulse){var i,t,v,as=_.as||["startAngle","endAngle"],startAngle=as[0],endAngle=as[1],field=_.field||one,start=_.startAngle||0,stop=null!=_.endAngle?_.endAngle:2*Math.PI,data=pulse.source,values=data.map(field),n=values.length,a=start,k=(stop-start)/sum_sum(values),index=range(n);for(_.sort&&index.sort(((a,b)=>values[a]-values[b])),i=0;i<n;++i)v=values[index[i]],(t=data[index[i]])[startAngle]=a,t[endAngle]=a+=v*k;return this.value=values,pulse.reflow(_.modified()).modifies(as)}});function includePad(type){return isContinuous(type)&&"sequential"!==type}const vega_encode_module_SKIP=toSet(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Scale(params){Transform.call(this,null,params),this.modified(!0)}function domainCheck(type,domain,df){if(isLogarithmic(type)){var s=Math.abs(domain.reduce(((s,v)=>s+(v<0?-1:v>0?1:0)),0));s!==domain.length&&df.warn("Log scale domain includes zero: "+$(domain))}return domain}function adjustScheme(scheme,extent,reverse){return isFunction(scheme)&&(extent||reverse)?interpolateRange(scheme,flip(extent||[0,1],reverse)):scheme}function flip(array,reverse){return reverse?array.slice().reverse():array}function SortItems(params){Transform.call(this,null,params)}inherits(Scale,Transform,{transform(_,pulse){var df=pulse.dataflow,scale$1=this.value,key=function scaleKey(_){var n,t=_.type,d="";if(t===Sequential)return"sequential-linear";(function isContinuousColor(_){const t=_.type;return isContinuous(t)&&t!==Time&&t!==UTC&&(_.scheme||_.range&&_.range.length&&_.range.every(isString))})(_)&&(d=2===(n=_.rawDomain?_.rawDomain.length:_.domain?_.domain.length+ +(null!=_.domainMid):0)?"sequential-":3===n?"diverging-":"");return(d+t||"linear").toLowerCase()}(_);for(key in scale$1&&key===scale$1.type||(this.value=scale$1=vega_scale_module_scale(key)()),_)if(!vega_encode_module_SKIP[key]){if("padding"===key&&includePad(scale$1.type))continue;isFunction(scale$1[key])?scale$1[key](_[key]):df.warn("Unsupported scale property: "+key)}return function configureRange(scale,_,count){var type=scale.type,round=_.round||!1,range=_.range;if(null!=_.rangeStep)range=function configureRangeStep(type,_,count){"band"!==type&&"point"!==type&&error("Only band and point scales support rangeStep.");var outer=(null!=_.paddingOuter?_.paddingOuter:_.padding)||0,inner="point"===type?1:(null!=_.paddingInner?_.paddingInner:_.padding)||0;return[0,_.rangeStep*bandSpace(count,inner,outer)]}(type,_,count);else if(_.scheme&&(range=function configureScheme(type,_,count){var scheme$1,extent=_.schemeExtent;isArray(_.scheme)?scheme$1=interpolateColors(_.scheme,_.interpolate,_.interpolateGamma):(scheme$1=scheme(_.scheme.toLowerCase()))||error("Unrecognized scheme name: ".concat(_.scheme));return count="threshold"===type?count+1:"bin-ordinal"===type?count-1:"quantile"===type||"quantize"===type?+_.schemeCount||5:count,isInterpolating(type)?adjustScheme(scheme$1,extent,_.reverse):isFunction(scheme$1)?quantizeInterpolator(adjustScheme(scheme$1,extent),count):"ordinal"===type?scheme$1:scheme$1.slice(0,count)}(type,_,count),isFunction(range))){if(scale.interpolator)return scale.interpolator(range);error("Scale type ".concat(type," does not support interpolating color schemes."))}if(range&&isInterpolating(type))return scale.interpolator(interpolateColors(flip(range,_.reverse),_.interpolate,_.interpolateGamma));range&&_.interpolate&&scale.interpolate?scale.interpolate(interpolate(_.interpolate,_.interpolateGamma)):isFunction(scale.round)?scale.round(round):isFunction(scale.rangeRound)&&scale.interpolate(round?src_round:value);range&&scale.range(flip(range,_.reverse))}(scale$1,_,function configureBins(scale,_,count){let bins=_.bins;if(bins&&!isArray(bins)){const domain=scale.domain(),lo=domain[0],hi=peek(domain),step=bins.step;let start=null==bins.start?lo:bins.start,stop=null==bins.stop?hi:bins.stop;step||error("Scale bins parameter missing step property."),start<lo&&(start=step*Math.ceil(lo/step)),stop>hi&&(stop=step*Math.floor(hi/step)),bins=range(start,stop+step/2,step)}bins?scale.bins=bins:scale.bins&&delete scale.bins;"bin-ordinal"===scale.type&&(bins?_.domain||_.domainRaw||(scale.domain(bins),count=bins.length):scale.bins=scale.domain());return count}(scale$1,_,function configureDomain(scale,_,df){const raw=function rawDomain(scale,raw,df){return raw?(scale.domain(domainCheck(scale.type,raw,df)),raw.length):-1}(scale,_.domainRaw,df);if(raw>-1)return raw;var n,mid,domain=_.domain,type=scale.type,zero=_.zero||void 0===_.zero&&function includeZero(scale){const type=scale.type;return!scale.bins&&("linear"===type||"pow"===type||"sqrt"===type)}(scale);if(!domain)return 0;includePad(type)&&_.padding&&domain[0]!==peek(domain)&&(domain=function padDomain(type,domain,range,pad,exponent,constant){var span=Math.abs(peek(range)-range[0]),frac=span/(span-2*pad),d=type===Log?zoomLog(domain,null,frac):"sqrt"===type?zoomPow(domain,null,frac,.5):type===Pow?zoomPow(domain,null,frac,exponent||1):"symlog"===type?zoomSymlog(domain,null,frac,constant||1):zoomLinear(domain,null,frac);return(domain=domain.slice())[0]=d[0],domain[domain.length-1]=d[1],domain}(type,domain,_.range,_.padding,_.exponent,_.constant));if((zero||null!=_.domainMin||null!=_.domainMax||null!=_.domainMid)&&(n=(domain=domain.slice()).length-1||1,zero&&(domain[0]>0&&(domain[0]=0),domain[n]<0&&(domain[n]=0)),null!=_.domainMin&&(domain[0]=_.domainMin),null!=_.domainMax&&(domain[n]=_.domainMax),null!=_.domainMid)){const i=(mid=_.domainMid)>domain[n]?n+1:mid<domain[0]?0:n;i!==n&&df.warn("Scale domainMid exceeds domain min or max.",mid),domain.splice(i,0,mid)}scale.domain(domainCheck(type,domain,df)),"ordinal"===type&&scale.unknown(_.domainImplicit?implicit:void 0);_.nice&&scale.nice&&scale.nice(!0!==_.nice&&tickCount(scale,_.nice)||null);return domain.length}(scale$1,_,df))),pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)}}),inherits(SortItems,Transform,{transform(_,pulse){const mod=_.modified("sort")||pulse.changed(pulse.ADD)||pulse.modified(_.sort.fields)||pulse.modified("datum");return mod&&pulse.source.sort(stableCompare(_.sort)),this.modified(mod),pulse}});const DefOutput=["y0","y1"];function Stack(params){Transform.call(this,null,params)}function stackCenter(group,max,field,y0,y1){for(var t,last=(max-group.sum)/2,m=group.length,j=0;j<m;++j)(t=group[j])[y0]=last,t[y1]=last+=Math.abs(field(t))}function stackNormalize(group,max,field,y0,y1){for(var t,scale=1/group.sum,last=0,m=group.length,j=0,v=0;j<m;++j)(t=group[j])[y0]=last,t[y1]=last=scale*(v+=Math.abs(field(t)))}function stackZero(group,max,field,y0,y1){for(var v,t,lastPos=0,lastNeg=0,m=group.length,j=0;j<m;++j)(v=+field(t=group[j]))<0?(t[y0]=lastNeg,t[y1]=lastNeg+=v):(t[y0]=lastPos,t[y1]=lastPos+=v)}Stack.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:DefOutput}]},inherits(Stack,Transform,{transform(_,pulse){var groups,i,n,max,as=_.as||DefOutput,y0=as[0],y1=as[1],sort=stableCompare(_.sort),field=_.field||one,stack="center"===_.offset?stackCenter:"normalize"===_.offset?stackNormalize:stackZero;for(groups=function vega_encode_module_partition(data,groupby,sort,field){var map,i,n,m,t,k,g,s,max,groups=[],get=f=>f(t);if(null==groupby)groups.push(data.slice());else for(map={},i=0,n=data.length;i<n;++i)t=data[i],(g=map[k=groupby.map(get)])||(map[k]=g=[],groups.push(g)),g.push(t);for(k=0,max=0,m=groups.length;k<m;++k){for(i=0,s=0,n=(g=groups[k]).length;i<n;++i)s+=Math.abs(field(g[i]));g.sum=s,s>max&&(max=s),sort&&g.sort(sort)}return groups.max=max,groups}(pulse.source,_.groupby,sort,field),i=0,n=groups.length,max=groups.max;i<n;++i)stack(groups[i],max,field,y0,y1);return pulse.reflow(_.modified()).modifies(as)}});const d3_geo_src_identity=x=>x;function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function src_stream(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(x){const p=this._partials;let i=0;for(let j=0;j<this._n&&j<32;j++){const y=p[j],hi=x+y,lo=Math.abs(x)<Math.abs(y)?x-(hi-y):y-(hi-x);lo&&(p[i++]=lo),x=hi}return p[i]=x,this._n=i+1,this}valueOf(){const p=this._partials;let x,y,lo,n=this._n,hi=0;if(n>0){for(hi=p[--n];n>0&&(x=hi,y=p[--n],hi=x+y,lo=y-(hi-x),!lo););n>0&&(lo<0&&p[n-1]<0||lo>0&&p[n-1]>0)&&(y=2*lo,x=hi+y,y==x-hi&&(hi=x))}return hi}}var math_pi=Math.PI,math_halfPi=math_pi/2,quarterPi=math_pi/4,math_tau=2*math_pi,src_math_degrees=180/math_pi,src_math_radians=math_pi/180,math_abs=Math.abs,atan=Math.atan,math_atan2=Math.atan2,math_cos=Math.cos,ceil=Math.ceil,math_exp=Math.exp,hypot=(Math.floor,Math.hypot),math_log=Math.log,math_pow=Math.pow,math_sin=Math.sin,math_sign=Math.sign||function(x){return x>0?1:x<0?-1:0},math_sqrt=Math.sqrt,tan=Math.tan;function math_acos(x){return x>1?0:x<-1?math_pi:Math.acos(x)}function math_asin(x){return x>1?math_halfPi:x<-1?-math_halfPi:Math.asin(x)}function noop_noop(){}var x00,y00,x0,y0,areaSum=new Adder,areaRingSum=new Adder,areaStream={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop_noop,areaSum.add(math_abs(areaRingSum)),areaRingSum=new Adder},result:function(){var area=areaSum/2;return areaSum=new Adder,area}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(x,y){areaStream.point=areaPoint,x00=x0=x,y00=y0=y}function areaPoint(x,y){areaRingSum.add(y0*x-x0*y),x0=x,y0=y}function areaRingEnd(){areaPoint(x00,y00)}const path_area=areaStream;var bounds_x0=1/0,bounds_y0=bounds_x0,x1=-bounds_x0,y1=x1,boundsStream={point:function boundsPoint(x,y){x<bounds_x0&&(bounds_x0=x);x>x1&&(x1=x);y<bounds_y0&&(bounds_y0=y);y>y1&&(y1=y)},lineStart:noop_noop,lineEnd:noop_noop,polygonStart:noop_noop,polygonEnd:noop_noop,result:function(){var bounds=[[bounds_x0,bounds_y0],[x1,y1]];return x1=y1=-(bounds_y0=bounds_x0=1/0),bounds}};const path_bounds=boundsStream;var centroid_x00,centroid_y00,centroid_x0,centroid_y0,X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var centroid=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,centroid}};function centroidPoint(x,y){X0+=x,Y0+=y,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream.point=centroidPointLine,centroidPoint(centroid_x0=x,centroid_y0=y)}function centroidPointLine(x,y){var dx=x-centroid_x0,dy=y-centroid_y0,z=math_sqrt(dx*dx+dy*dy);X1+=z*(centroid_x0+x)/2,Y1+=z*(centroid_y0+y)/2,Z1+=z,centroidPoint(centroid_x0=x,centroid_y0=y)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(centroid_x00,centroid_y00)}function centroidPointFirstRing(x,y){centroidStream.point=centroidPointRing,centroidPoint(centroid_x00=centroid_x0=x,centroid_y00=centroid_y0=y)}function centroidPointRing(x,y){var dx=x-centroid_x0,dy=y-centroid_y0,z=math_sqrt(dx*dx+dy*dy);X1+=z*(centroid_x0+x)/2,Y1+=z*(centroid_y0+y)/2,Z1+=z,X2+=(z=centroid_y0*x-centroid_x0*y)*(centroid_x0+x),Y2+=z*(centroid_y0+y),Z2+=3*z,centroidPoint(centroid_x0=x,centroid_y0=y)}const centroid=centroidStream;function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,math_tau)}},result:noop_noop};var lengthRing,measure_x00,measure_y00,measure_x0,measure_y0,lengthSum=new Adder,lengthStream={point:noop_noop,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(measure_x00,measure_y00),lengthStream.point=noop_noop},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum;return lengthSum=new Adder,length}};function lengthPointFirst(x,y){lengthStream.point=lengthPoint,measure_x00=measure_x0=x,measure_y00=measure_y0=y}function lengthPoint(x,y){measure_x0-=x,measure_y0-=y,lengthSum.add(math_sqrt(measure_x0*measure_x0+measure_y0*measure_y0)),measure_x0=x,measure_y0=y}const path_measure=lengthStream;function PathString(){this._string=[]}function string_circle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function d3_geo_src_path(projection,context){var projectionStream,contextStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),src_stream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return src_stream(object,projectionStream(path_area)),path_area.result()},path.measure=function(object){return src_stream(object,projectionStream(path_measure)),path_measure.result()},path.bounds=function(object){return src_stream(object,projectionStream(path_bounds)),path_bounds.result()},path.centroid=function(object){return src_stream(object,projectionStream(centroid)),centroid.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,d3_geo_src_identity):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(projection).context(context)}function buffer(){var line,lines=[];return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line=[])},lineEnd:noop_noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}function pointEqual(a,b){return math_abs(a[0]-b[0])<1e-6&&math_abs(a[1]-b[1])<1e-6}function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function rejoin(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){if(!p0[2]&&!p1[2]){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);return void stream.lineEnd()}p1[0]+=2e-6}subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function spherical(cartesian){return[math_atan2(cartesian[1],cartesian[0]),math_asin(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=math_cos(phi);return[cosPhi*math_cos(lambda),cosPhi*math_sin(lambda),math_sin(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=math_sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function longitude(point){return math_abs(point[0])<=math_pi?point[0]:math_sign(point[0])*((math_abs(point[0])+math_pi)%math_tau-math_pi)}function merge_merge(arrays){return Array.from(function*flatten(arrays){for(const array of arrays)yield*array}(arrays))}function src_clip(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point,lineStart,lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge_merge(segments);var startInside=function polygonContains(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=math_sin(phi),normal=[math_sin(lambda),-math_cos(lambda),0],angle=0,winding=0,sum=new Adder;1===sinPhi?phi=math_halfPi+1e-6:-1===sinPhi&&(phi=-math_halfPi-1e-6);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=math_sin(phi0),cosPhi0=math_cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=math_sin(phi1),cosPhi1=math_cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>math_pi,k=sinPhi0*sinPhi1;if(sum.add(math_atan2(k*sign*math_sin(absDelta),cosPhi0*cosPhi1+k*math_cos(absDelta))),angle+=antimeridian?delta+sign*math_tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*math_asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-1e-6||angle<1e-6&&sum<-1e-12)^1&winding}(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-math_halfPi-1e-6:math_halfPi-a[1])-((b=b.x)[0]<0?b[1]-math_halfPi-1e-6:math_halfPi-b[1])}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};const antimeridian=src_clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?math_pi:-math_pi,delta=math_abs(lambda1-lambda0);math_abs(delta-math_pi)<1e-6?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?math_halfPi:-math_halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=math_pi&&(math_abs(lambda0-sign0)<1e-6&&(lambda0-=1e-6*sign0),math_abs(lambda1-sign1)<1e-6&&(lambda1-=1e-6*sign1),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=math_sin(lambda0-lambda1);return math_abs(sinLambda0Lambda1)>1e-6?atan((math_sin(phi0)*(cosPhi1=math_cos(phi1))*math_sin(lambda1)-math_sin(phi1)*(cosPhi0=math_cos(phi0))*math_sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*math_halfPi,stream.point(-math_pi,phi),stream.point(0,phi),stream.point(math_pi,phi),stream.point(math_pi,0),stream.point(math_pi,-phi),stream.point(0,-phi),stream.point(-math_pi,-phi),stream.point(-math_pi,0),stream.point(-math_pi,phi);else if(math_abs(from[0]-to[0])>1e-6){var lambda=from[0]<to[0]?math_pi:-math_pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-math_pi,-math_halfPi]);function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=math_cos(radius),sinRadius=math_sin(radius),step=direction*delta;null==t0?(t0=radius+direction*math_tau,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*math_tau));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*math_cos(t),-sinRadius*math_sin(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=math_acos(-point[1]);return((-point[2]<0?-radius:radius)+math_tau-1e-6)%math_tau}function clip_circle(radius){var cr=math_cos(radius),delta=6*src_math_radians,smallRadius=cr>0,notHemisphere=math_abs(cr)>1e-6;function visible(lambda,phi){return math_cos(lambda)*math_cos(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian(a),cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=math_sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=math_abs(delta-math_pi)<1e-6;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<1e-6?polar?phi0+phi1>0^q[1]<(math_abs(q[0]-lambda0)<1e-6?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>math_pi^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:math_pi-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return src_clip(visible,(function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?math_pi:-math_pi),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[2]=1),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1],2),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1],3)))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-math_pi,radius-math_pi])}function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return math_abs(p[0]-x0)<1e-6?direction>0?0:3:math_abs(p[0]-x1)<1e-6?direction>0?2:1:math_abs(p[1]-y0)<1e-6?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=buffer(),clipStream={point,lineStart:function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function polygonEnd(){var startInside=function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,b0=(point=ring[j])[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge_merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&rejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd());activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(-1e9,Math.min(1e9,x_)),y_=Math.max(-1e9,Math.min(1e9,y_))],b=[x=Math.max(-1e9,Math.min(1e9,x)),y=Math.max(-1e9,Math.min(1e9,y))];!function clip_line(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function rotationIdentity(lambda,phi){return[math_abs(lambda)>math_pi?lambda+Math.round(-lambda/math_tau)*math_tau:lambda,phi]}function rotation_rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=math_tau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return[(lambda+=deltaLambda)>math_pi?lambda-math_tau:lambda<-math_pi?lambda+math_tau:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=math_cos(deltaPhi),sinDeltaPhi=math_sin(deltaPhi),cosDeltaGamma=math_cos(deltaGamma),sinDeltaGamma=math_sin(deltaGamma);function rotation(lambda,phi){var cosPhi=math_cos(phi),x=math_cos(lambda)*cosPhi,y=math_sin(lambda)*cosPhi,z=math_sin(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[math_atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),math_asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=math_cos(phi),x=math_cos(lambda)*cosPhi,y=math_sin(lambda)*cosPhi,z=math_sin(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[math_atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),math_asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}function transform_transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),src_stream(object,projection.stream(path_bounds)),fitBounds(path_bounds.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}function fitHeight(projection,height,object){return fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}rotationIdentity.invert=rotationIdentity,TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cosMinDistance=math_cos(30*src_math_radians);function resample(project,delta2){return+delta2?function resample_resample(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=math_sqrt(a*a+b*b+c*c),phi2=math_asin(c/=m),lambda2=math_abs(math_abs(c)-1)<1e-6||math_abs(lambda0-lambda1)<1e-6?(lambda0+lambda1)/2:math_atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||math_abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point,lineStart,lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],16,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,16,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function resampleNone(project){return transform_transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)}var transformRadians=transform_transformer({point:function(x,y){this.stream.point(x*src_math_radians,y*src_math_radians)}});function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){if(!alpha)return function scaleTranslate(k,dx,dy,sx,sy){function transform(x,y){return[dx+k*(x*=sx),dy-k*(y*=sy)]}return transform.invert=function(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]},transform}(k,dx,dy,sx,sy);var cosAlpha=math_cos(alpha),sinAlpha=math_sin(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform(x,y){return[a*(x*=sx)-b*(y*=sy)+dx,dy-b*x-a*y]}return transform.invert=function(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]},transform}function projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,rotate,y0,x1,y1,projectResample,projectTransform,projectRotateTransform,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,alpha=0,sx=1,sy=1,theta=null,preclip=antimeridian,x0=null,postclip=d3_geo_src_identity,delta2=.5;function projection(point){return projectRotateTransform(point[0]*src_math_radians,point[1]*src_math_radians)}function invert(point){return(point=projectRotateTransform.invert(point[0],point[1]))&&[point[0]*src_math_degrees,point[1]*src_math_degrees]}function recenter(){var center=scaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi)),transform=scaleTranslateRotate(k,x-center[0],y-center[1],sx,sy,alpha);return rotate=rotation_rotateRadians(deltaLambda,deltaPhi,deltaGamma),projectTransform=compose(project,transform),projectRotateTransform=compose(rotate,projectTransform),projectResample=resample(projectTransform,delta2),reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function transformRotate(rotate){return transform_transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clip_circle(theta=_*src_math_radians):(theta=null,antimeridian),reset()):theta*src_math_degrees},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,d3_geo_src_identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*src_math_radians,phi=_[1]%360*src_math_radians,recenter()):[lambda*src_math_degrees,phi*src_math_degrees]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*src_math_radians,deltaPhi=_[1]%360*src_math_radians,deltaGamma=_.length>2?_[2]%360*src_math_radians:0,recenter()):[deltaLambda*src_math_degrees,deltaPhi*src_math_degrees,deltaGamma*src_math_degrees]},projection.angle=function(_){return arguments.length?(alpha=_%360*src_math_radians,recenter()):alpha*src_math_degrees},projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,recenter()):sx<0},projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,recenter()):sy<0},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):math_sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){var phi0=0,phi1=math_pi/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*src_math_radians,phi1=_[1]*src_math_radians):[phi0*src_math_degrees,phi1*src_math_degrees]},p}function conicEqualAreaRaw(y0,y1){var sy0=math_sin(y0),n=(sy0+math_sin(y1))/2;if(math_abs(n)<1e-6)return function cylindricalEqualAreaRaw(phi0){var cosPhi0=math_cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,math_sin(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,math_asin(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=math_sqrt(c)/n;function project(x,y){var r=math_sqrt(c-2*n*math_sin(y))/n;return[r*math_sin(x*=n),r0-r*math_cos(x)]}return project.invert=function(x,y){var r0y=r0-y,l=math_atan2(x,math_abs(r0y))*math_sign(r0y);return r0y*n<0&&(l-=math_pi*math_sign(x)*math_sign(r0y)),[l/n,math_asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function azimuthalRaw(scale){return function(x,y){var cx=math_cos(x),cy=math_cos(y),k=scale(cx*cy);return k===1/0?[2,0]:[k*cy*math_sin(x),k*math_sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=math_sqrt(x*x+y*y),c=angle(z),sc=math_sin(c),cc=math_cos(c);return[math_atan2(x*sc,z*cc),math_asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return math_sqrt(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*math_asin(z/2)}));var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=math_acos(c))&&c/math_sin(c)}));function mercatorRaw(lambda,phi){return[lambda,math_log(tan((math_halfPi+phi)/2))]}function mercatorProjection(project){var y0,x1,y1,m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=math_pi*scale(),t=m(function rotation(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*src_math_radians,coordinates[1]*src_math_radians))[0]*=src_math_degrees,coordinates[1]*=src_math_degrees,coordinates}return rotate=rotation_rotateRadians(rotate[0]*src_math_radians,rotate[1]*src_math_radians,rotate.length>2?rotate[2]*src_math_radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*src_math_radians,coordinates[1]*src_math_radians))[0]*=src_math_degrees,coordinates[1]*=src_math_degrees,coordinates},forward}(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((math_halfPi+y)/2)}function conicConformalRaw(y0,y1){var cy0=math_cos(y0),n=y0===y1?math_sin(y0):math_log(cy0/math_cos(y1))/math_log(tany(y1)/tany(y0)),f=cy0*math_pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<1e-6-math_halfPi&&(y=1e-6-math_halfPi):y>math_halfPi-1e-6&&(y=math_halfPi-1e-6);var r=f/math_pow(tany(y),n);return[r*math_sin(n*x),f-r*math_cos(n*x)]}return project.invert=function(x,y){var fy=f-y,r=math_sign(n)*math_sqrt(x*x+fy*fy),l=math_atan2(x,math_abs(fy))*math_sign(fy);return fy*n<0&&(l-=math_pi*math_sign(x)*math_sign(fy)),[l/n,2*atan(math_pow(f/r,1/n))-math_halfPi]},project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,y1){var cy0=math_cos(y0),n=y0===y1?math_sin(y0):(cy0-math_cos(y1))/(y1-y0),g=cy0/n+y0;if(math_abs(n)<1e-6)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*math_sin(nx),g-gy*math_cos(nx)]}return project.invert=function(x,y){var gy=g-y,l=math_atan2(x,math_abs(gy))*math_sign(gy);return gy*n<0&&(l-=math_pi*math_sign(x)*math_sign(gy)),[l/n,g-math_sign(n)*math_sqrt(x*x+gy*gy)]},project}azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z})),mercatorRaw.invert=function(x,y){return[x,2*atan(math_exp(y))-math_halfPi]},equirectangularRaw.invert=equirectangularRaw;var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=math_sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=math_asin(M*math_sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*math_cos(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}function gnomonicRaw(x,y){var cy=math_cos(y),k=math_cos(x)*cy;return[cy*math_sin(x)/k,math_sin(y)/k]}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}function orthographicRaw(x,y){return[math_cos(y)*math_sin(x),math_sin(y)]}function stereographicRaw(x,y){var cy=math_cos(y),k=1+math_cos(x)*cy;return[cy*math_sin(x)/k,math_sin(y)/k]}function transverseMercatorRaw(lambda,phi){return[math_log(tan((math_halfPi+phi)/2)),-lambda]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l6=(l2=(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)))*l)*l2*l2,!(math_abs(delta)<1e-12));++i);return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/math_cos(l),math_asin(math_sin(l)/M)]},gnomonicRaw.invert=azimuthalInvert(atan),naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(math_abs(delta)>1e-6&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]},orthographicRaw.invert=azimuthalInvert(math_asin),stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)})),transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(math_exp(x))-math_halfPi]};var src_math_abs=Math.abs,src_math_cos=(Math.atan,Math.atan2,Math.ceil,Math.cos),src_math_sin=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),src_math_pi=(Math.tan,Math.PI),src_math_halfPi=src_math_pi/2,sqrt2=(Math.SQRT1_2,src_math_sqrt(2));src_math_sqrt(src_math_pi);function src_math_asin(x){return x>1?src_math_halfPi:x<-1?-src_math_halfPi:Math.asin(x)}function src_math_sqrt(x){return x>0?Math.sqrt(x):0}function mollweideBromleyTheta(cp,phi){var delta,cpsinPhi=cp*src_math_sin(phi),i=30;do{phi-=delta=(phi+src_math_sin(phi)-cpsinPhi)/(1+src_math_cos(phi))}while(src_math_abs(delta)>1e-6&&--i>0);return phi/2}var mollweideRaw=function mollweideBromleyRaw(cx,cy,cp){function forward(lambda,phi){return[cx*lambda*src_math_cos(phi=mollweideBromleyTheta(cp,phi)),cy*src_math_sin(phi)]}return forward.invert=function(x,y){return y=src_math_asin(y/cy),[x/(cx*src_math_cos(y)),src_math_asin((2*y+src_math_sin(2*y))/cp)]},forward}(sqrt2/src_math_halfPi,sqrt2,src_math_pi);const defaultPath=d3_geo_src_path(),projectionProperties=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function vega_projection_module_create(type,constructor){return function projection(){const p=constructor();return p.type=type,p.path=d3_geo_src_path().projection(p),p.copy=p.copy||function(){const c=projection();return projectionProperties.forEach((prop=>{p[prop]&&c[prop](p[prop]())})),c.path.pointRadius(p.path.pointRadius()),c},p}}function vega_projection_module_projection(type,proj){if(!type||"string"!=typeof type)throw new Error("Projection type must be a name string.");return type=type.toLowerCase(),arguments.length>1?(projections[type]=vega_projection_module_create(type,proj),this):projections[type]||null}function getProjectionPath(proj){return proj&&proj.path||defaultPath}const projections={albers,albersusa:function albersUsa(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=function multiplex(streams){var n=streams.length;return{point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}}}([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)])},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+1e-6,y+.12*k+1e-6],[x-.214*k-1e-6,y+.234*k-1e-6]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+1e-6,y+.166*k+1e-6],[x-.115*k-1e-6,y+.234*k-1e-6]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)},azimuthalequalarea:function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)},conicconformal:function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},conicequalarea:conicEqualArea,conicequidistant:function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},equalEarth:function equalEarth(){return projection(equalEarthRaw).scale(177.158)},equirectangular:function equirectangular(){return projection(equirectangularRaw).scale(152.63)},gnomonic:function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)},identity:function projection_identity(){var ca,sa,y0,x1,y1,cache,cacheStream,k=1,tx=0,ty=0,sx=1,sy=1,alpha=0,x0=null,kx=1,ky=1,transform=transform_transformer({point:function(x,y){var p=projection([x,y]);this.stream.point(p[0],p[1])}}),postclip=d3_geo_src_identity;function reset(){return kx=k*sx,ky=k*sy,cache=cacheStream=null,projection}function projection(p){var x=p[0]*kx,y=p[1]*ky;if(alpha){var t=y*ca-x*sa;x=x*ca+y*sa,y=t}return[x+tx,y+ty]}return projection.invert=function(p){var x=p[0]-tx,y=p[1]-ty;if(alpha){var t=y*ca+x*sa;x=x*ca-y*sa,y=t}return[x/kx,y/ky]},projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transform(postclip(cacheStream=stream))},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,d3_geo_src_identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(tx=+_[0],ty=+_[1],reset()):[tx,ty]},projection.angle=function(_){return arguments.length?(sa=math_sin(alpha=_%360*src_math_radians),ca=math_cos(alpha),reset()):alpha*src_math_degrees},projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,reset()):sx<0},projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,reset()):sy<0},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},projection},mercator:function mercator(){return mercatorProjection(mercatorRaw).scale(961/math_tau)},mollweide:function mollweide(){return projection(mollweideRaw).scale(169.529)},naturalEarth1:function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)},orthographic:function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90.000001)},stereographic:function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)},transversemercator:function transverseMercator(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)}};for(const key in projections)vega_projection_module_projection(key,projections[key]);function graticuleX(y0,y1,dy){var y=range(y0,y1-1e-6,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function graticuleY(x0,x1,dx){var x=range(x0,x1-1e-6,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return range(ceil(X0/DX)*DX,X1,DX).map(X).concat(range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(range(ceil(x0/dx)*dx,x1,dx).filter((function(x){return math_abs(x%DX)>1e-6})).map(x)).concat(range(ceil(y0/dy)*dy,y1,dy).filter((function(y){return math_abs(y%DY)>1e-6})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function vega_geo_module_noop(){}const cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function contours(){var dx=1,dy=1,smooth=smoothLinear;function contours(values,tz){return tz.map((value=>contour(values,value)))}function contour(values,value){var polygons=[],holes=[];return function isorings(values,value,callback){var x,y,t0,t1,t2,t3,fragmentByStart=new Array,fragmentByEnd=new Array;x=y=-1,t1=values[0]>=value,cases[t1<<1].forEach(stitch);for(;++x<dx-1;)t0=t1,t1=values[x+1]>=value,cases[t0|t1<<1].forEach(stitch);cases[t1<<0].forEach(stitch);for(;++y<dy-1;){for(x=-1,t1=values[y*dx+dx]>=value,t2=values[y*dx]>=value,cases[t1<<1|t2<<2].forEach(stitch);++x<dx-1;)t0=t1,t1=values[y*dx+dx+x+1]>=value,t3=t2,t2=values[y*dx+x+1]>=value,cases[t0|t1<<1|t2<<2|t3<<3].forEach(stitch);cases[t1|t2<<3].forEach(stitch)}x=-1,t2=values[y*dx]>=value,cases[t2<<2].forEach(stitch);for(;++x<dx-1;)t3=t2,t2=values[y*dx+x+1]>=value,cases[t2<<2|t3<<3].forEach(stitch);function stitch(line){var f,g,start=[line[0][0]+x,line[0][1]+y],end=[line[1][0]+x,line[1][1]+y],startIndex=index(start),endIndex=index(end);(f=fragmentByEnd[startIndex])?(g=fragmentByStart[endIndex])?(delete fragmentByEnd[f.end],delete fragmentByStart[g.start],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[f.start]=fragmentByEnd[g.end]={start:f.start,end:g.end,ring:f.ring.concat(g.ring)}):(delete fragmentByEnd[f.end],f.ring.push(end),fragmentByEnd[f.end=endIndex]=f):(f=fragmentByStart[endIndex])?(g=fragmentByEnd[startIndex])?(delete fragmentByStart[f.start],delete fragmentByEnd[g.end],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[g.start]=fragmentByEnd[f.end]={start:g.start,end:f.end,ring:g.ring.concat(f.ring)}):(delete fragmentByStart[f.start],f.ring.unshift(start),fragmentByStart[f.start=startIndex]=f):fragmentByStart[startIndex]=fragmentByEnd[endIndex]={start:startIndex,end:endIndex,ring:[start,end]}}cases[t2<<3].forEach(stitch)}(values,value,(ring=>{smooth(ring,values,value),function vega_geo_module_area(ring){var i=0,n=ring.length,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];for(;++i<n;)area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];return area}(ring)>0?polygons.push([ring]):holes.push(ring)})),holes.forEach((hole=>{for(var polygon,i=0,n=polygons.length;i<n;++i)if(-1!==contains((polygon=polygons[i])[0],hole))return void polygon.push(hole)})),{type:"MultiPolygon",value,coordinates:polygons}}function index(point){return 2*point[0]+point[1]*(dx+1)*4}function smoothLinear(ring,values,value){ring.forEach((point=>{var v0,x=point[0],y=point[1],xt=0|x,yt=0|y,v1=values[yt*dx+xt];x>0&&x<dx&&xt===x&&(v0=values[yt*dx+xt-1],point[0]=x+(value-v0)/(v1-v0)-.5),y>0&&y<dy&&yt===y&&(v0=values[(yt-1)*dx+xt],point[1]=y+(value-v0)/(v1-v0)-.5)}))}return contours.contour=contour,contours.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.floor(_[0]),_1=Math.floor(_[1]);return _0>=0&&_1>=0||error("invalid size"),dx=_0,dy=_1,contours},contours.smooth=function(_){return arguments.length?(smooth=_?smoothLinear:vega_geo_module_noop,contours):smooth===smoothLinear},contours}function contains(ring,hole){for(var c,i=-1,n=hole.length;++i<n;)if(c=ringContains(ring,hole[i]))return c;return 0}function ringContains(ring,point){for(var x=point[0],y=point[1],contains=-1,i=0,n=ring.length,j=n-1;i<n;j=i++){var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];if(segmentContains(pi,pj,point))return 0;yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(contains=-contains)}return contains}function segmentContains(a,b,c){var i;return function collinear(a,b,c){return(b[0]-a[0])*(c[1]-a[1])==(c[0]-a[0])*(b[1]-a[1])}(a,b,c)&&function within(p,q,r){return p<=q&&q<=r||r<=q&&q<=p}(a[i=+(a[0]===b[0])],c[i],b[i])}function vega_geo_module_quantize(k,nice,zero){return function(values){var ex=extent(values),start=zero?Math.min(ex[0],0):ex[0],stop=ex[1],span=stop-start,step=nice?tickStep(start,stop,k):span/(k+1);return range(start+step,stop,step)}}function Isocontour(params){Transform.call(this,null,params)}function vega_geo_module_transform(grid,sx,sy,tx,ty){const x1=grid.x1||0,y1=grid.y1||0,flip=sx*sy<0;function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){flip&&coordinates.reverse(),coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]=(coordinates[0]-x1)*sx+tx,coordinates[1]=(coordinates[1]-y1)*sy+ty}return function(geometry){return geometry.coordinates.forEach(transformPolygon),geometry}}function radius(bw,data,f){const v=bw>=0?bw:estimateBandwidth(data,f);return Math.round((Math.sqrt(4*v*v+1)-1)/2)}function vega_geo_module_number(_){return isFunction(_)?_:vega_util_module_constant(+_)}function density2D(){var x=d=>d[0],y=d=>d[1],weight=one,bandwidth=[-1,-1],dx=960,dy=500,k=2;function density(data,counts){const rx=radius(bandwidth[0],data,x)>>k,ry=radius(bandwidth[1],data,y)>>k,ox=rx?rx+2:0,oy=ry?ry+2:0,n=2*ox+(dx>>k),m=2*oy+(dy>>k),values0=new Float32Array(n*m),values1=new Float32Array(n*m);let values=values0;data.forEach((d=>{const xi=ox+(+x(d)>>k),yi=oy+(+y(d)>>k);xi>=0&&xi<n&&yi>=0&&yi<m&&(values0[xi+yi*n]+=+weight(d))})),rx>0&&ry>0?(blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry)):rx>0?(blurX(n,m,values0,values1,rx),blurX(n,m,values1,values0,rx),blurX(n,m,values0,values1,rx),values=values1):ry>0&&(blurY(n,m,values0,values1,ry),blurY(n,m,values1,values0,ry),blurY(n,m,values0,values1,ry),values=values1);const s=counts?Math.pow(2,-2*k):1/sum_sum(values);for(let i=0,sz=n*m;i<sz;++i)values[i]*=s;return{values,scale:1<<k,width:n,height:m,x1:ox,y1:oy,x2:ox+(dx>>k),y2:oy+(dy>>k)}}return density.x=function(_){return arguments.length?(x=vega_geo_module_number(_),density):x},density.y=function(_){return arguments.length?(y=vega_geo_module_number(_),density):y},density.weight=function(_){return arguments.length?(weight=vega_geo_module_number(_),density):weight},density.size=function(_){if(!arguments.length)return[dx,dy];var _0=+_[0],_1=+_[1];return _0>=0&&_1>=0||error("invalid size"),dx=_0,dy=_1,density},density.cellSize=function(_){return arguments.length?((_=+_)>=1||error("invalid cell size"),k=Math.floor(Math.log(_)/Math.LN2),density):1<<k},density.bandwidth=function(_){return arguments.length?(1===(_=array(_)).length&&(_=[+_[0],+_[0]]),2!==_.length&&error("invalid bandwidth"),bandwidth=_,density):bandwidth},density}function blurX(n,m,source,target,r){const w=1+(r<<1);for(let j=0;j<m;++j)for(let i=0,sr=0;i<n+r;++i)i<n&&(sr+=source[i+j*n]),i>=r&&(i>=w&&(sr-=source[i-w+j*n]),target[i-r+j*n]=sr/Math.min(i+1,n-1+w-i,w))}function blurY(n,m,source,target,r){const w=1+(r<<1);for(let i=0;i<n;++i)for(let j=0,sr=0;j<m+r;++j)j<m&&(sr+=source[i+j*n]),j>=r&&(j>=w&&(sr-=source[i+(j-w)*n]),target[i+(j-r)*n]=sr/Math.min(j+1,m-1+w-j,w))}function KDE2D(params){Transform.call(this,null,params)}Isocontour.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},inherits(Isocontour,Transform,{transform(_,pulse){if(this.value&&!pulse.changed()&&!_.modified())return pulse.StopPropagation;var out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),source=pulse.materialize(pulse.SOURCE).source,field=_.field||identity,contour=contours().smooth(!1!==_.smooth),tz=_.thresholds||function levels(values,f,_){const q=vega_geo_module_quantize(_.levels||10,_.nice,!1!==_.zero);return"shared"!==_.resolve?q:q(values.map((t=>max(f(t).values))))}(source,field,_),as=null===_.as?null:_.as||"contour",values=[];return source.forEach((t=>{const grid=field(t),paths=contour.size([grid.width,grid.height])(grid.values,isArray(tz)?tz:tz(grid.values));!function transformPaths(paths,grid,datum,_){let s=_.scale||grid.scale,t=_.translate||grid.translate;isFunction(s)&&(s=s(datum,_));isFunction(t)&&(t=t(datum,_));if((1===s||null==s)&&!t)return;const sx=(isNumber(s)?s:s[0])||1,sy=(isNumber(s)?s:s[1])||1,tx=t&&t[0]||0,ty=t&&t[1]||0;paths.forEach(vega_geo_module_transform(grid,sx,sy,tx,ty))}(paths,grid,t,_),paths.forEach((p=>{values.push(rederive(t,ingest$1(null!=as?{[as]:p}:p)))}))})),this.value&&(out.rem=this.value),this.value=out.source=out.add=values,out}}),KDE2D.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const PARAMS=["x","y","weight","size","cellSize","bandwidth"];function params(obj,_){return PARAMS.forEach((param=>null!=_[param]?obj[param](_[param]):0)),obj}function Contour(params){Transform.call(this,null,params)}inherits(KDE2D,Transform,{transform(_,pulse){if(this.value&&!pulse.changed()&&!_.modified())return pulse.StopPropagation;var values,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),groups=function vega_geo_module_partition(data,groupby){var map,i,n,t,k,g,groups=[],get=f=>f(t);if(null==groupby)groups.push(data);else for(map={},i=0,n=data.length;i<n;++i)t=data[i],(g=map[k=groupby.map(get)])||(map[k]=g=[],g.dims=k,groups.push(g)),g.push(t);return groups}(pulse.materialize(pulse.SOURCE).source,_.groupby),names=(_.groupby||[]).map(accessorName),kde=params(density2D(),_),as=_.as||"grid";return values=groups.map((g=>ingest$1(function set(t,vals){for(let i=0;i<names.length;++i)t[names[i]]=vals[i];return t}({[as]:kde(g,_.counts)},g.dims)))),this.value&&(out.rem=this.value),this.value=out.source=out.add=values,out}}),Contour.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},inherits(Contour,Transform,{transform(_,pulse){if(this.value&&!pulse.changed()&&!_.modified())return pulse.StopPropagation;var grid,post,out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),contour=contours().smooth(!1!==_.smooth),values=_.values,thresh=_.thresholds||vega_geo_module_quantize(_.count||10,_.nice,!!values),size=_.size;return values||(values=pulse.materialize(pulse.SOURCE).source,post=vega_geo_module_transform(grid=params(density2D(),_)(values,!0),grid.scale||1,grid.scale||1,0,0),size=[grid.width,grid.height],values=grid.values),thresh=isArray(thresh)?thresh:thresh(values),values=contour.size(size)(values,thresh),post&&values.forEach(post),this.value&&(out.rem=this.value),this.value=out.source=out.add=(values||[]).map(ingest$1),out}});function GeoJSON(params){Transform.call(this,null,params)}function GeoPath(params){Transform.call(this,null,params)}function GeoPoint(params){Transform.call(this,null,params)}function GeoShape(params){Transform.call(this,null,params)}function Graticule(params){Transform.call(this,[],params),this.generator=graticule()}function Heatmap(params){Transform.call(this,null,params)}function dependency(f){if(!isFunction(f))return!1;const set=toSet(accessorFields(f));return set.$x||set.$y||set.$value||set.$max}function Projection(params){Transform.call(this,null,params),this.modified(!0)}function vega_geo_module_set(proj,key,value){isFunction(proj[key])&&proj[key](value)}function add_add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function src_quad(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?defaultX:x,null==y?defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}GeoJSON.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},inherits(GeoJSON,Transform,{transform(_,pulse){var mod,features=this._features,points=this._points,fields=_.fields,lon=fields&&fields[0],lat=fields&&fields[1],geojson=_.geojson||!fields&&identity,flag=pulse.ADD;mod=_.modified()||pulse.changed(pulse.REM)||pulse.modified(accessorFields(geojson))||lon&&pulse.modified(accessorFields(lon))||lat&&pulse.modified(accessorFields(lat)),this.value&&!mod||(flag=pulse.SOURCE,this._features=features=[],this._points=points=[]),geojson&&pulse.visit(flag,(t=>features.push(geojson(t)))),lon&&lat&&(pulse.visit(flag,(t=>{var x=lon(t),y=lat(t);null!=x&&null!=y&&(x=+x)===x&&(y=+y)===y&&points.push([x,y])})),features=features.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:points}})),this.value={type:"FeatureCollection",features}}}),GeoPath.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},inherits(GeoPath,Transform,{transform(_,pulse){var out=pulse.fork(pulse.ALL),path=this.value,field=_.field||identity,as=_.as||"path",flag=out.SOURCE;!path||_.modified()?(this.value=path=getProjectionPath(_.projection),out.materialize().reflow()):flag=field===identity||pulse.modified(field.fields)?out.ADD_MOD:out.ADD;const prev=function initPath(path,pointRadius){const prev=path.pointRadius();path.context(null),null!=pointRadius&&path.pointRadius(pointRadius);return prev}(path,_.pointRadius);return out.visit(flag,(t=>t[as]=path(field(t)))),path.pointRadius(prev),out.modifies(as)}}),GeoPoint.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},inherits(GeoPoint,Transform,{transform(_,pulse){var mod,proj=_.projection,lon=_.fields[0],lat=_.fields[1],as=_.as||["x","y"],x=as[0],y=as[1];function set(t){const xy=proj([lon(t),lat(t)]);xy?(t[x]=xy[0],t[y]=xy[1]):(t[x]=void 0,t[y]=void 0)}return _.modified()?pulse=pulse.materialize().reflow(!0).visit(pulse.SOURCE,set):(mod=pulse.modified(lon.fields)||pulse.modified(lat.fields),pulse.visit(mod?pulse.ADD_MOD:pulse.ADD,set)),pulse.modifies(as)}}),GeoShape.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},inherits(GeoShape,Transform,{transform(_,pulse){var out=pulse.fork(pulse.ALL),shape=this.value,as=_.as||"shape",flag=out.ADD;return shape&&!_.modified()||(this.value=shape=function shapeGenerator(path,field,pointRadius){const shape=null==pointRadius?_=>path(field(_)):_=>{var prev=path.pointRadius(),value=path.pointRadius(pointRadius)(field(_));return path.pointRadius(prev),value};return shape.context=_=>(path.context(_),shape),shape}(getProjectionPath(_.projection),_.field||field("datum"),_.pointRadius),out.materialize().reflow(),flag=out.SOURCE),out.visit(flag,(t=>t[as]=shape)),out.modifies(as)}}),Graticule.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},inherits(Graticule,Transform,{transform(_,pulse){var t,src=this.value,gen=this.generator;if(!src.length||_.modified())for(const prop in _)isFunction(gen[prop])&&gen[prop](_[prop]);return t=gen(),src.length?pulse.mod.push(replace(src[0],t)):pulse.add.push(ingest$1(t)),src[0]=t,pulse}}),Heatmap.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},inherits(Heatmap,Transform,{transform(_,pulse){if(!pulse.changed()&&!_.modified())return pulse.StopPropagation;var source=pulse.materialize(pulse.SOURCE).source,shared="shared"===_.resolve,field=_.field||identity,opacity=function opacity_(opacity,_){let f;isFunction(opacity)?(f=obj=>opacity(obj,_),f.dep=dependency(opacity)):opacity?f=vega_util_module_constant(opacity):(f=obj=>obj.$value/obj.$max||0,f.dep=!0);return f}(_.opacity,_),color=function color_(color,_){let f;isFunction(color)?(f=obj=>color_rgb(color(obj,_)),f.dep=dependency(color)):f=vega_util_module_constant(color_rgb(color||"#888"));return f}(_.color,_),as=_.as||"image",obj={$x:0,$y:0,$value:0,$max:shared?max(source.map((t=>max(field(t).values)))):0};return source.forEach((t=>{const v=field(t),o=extend({},t,obj);shared||(o.$max=max(v.values||[])),t[as]=function toCanvas(grid,obj,color,opacity){const n=grid.width,m=grid.height,x1=grid.x1||0,y1=grid.y1||0,x2=grid.x2||n,y2=grid.y2||m,val=grid.values,value=val?i=>val[i]:zero,can=domCanvas(x2-x1,y2-y1),ctx=can.getContext("2d"),img=ctx.getImageData(0,0,x2-x1,y2-y1),pix=img.data;for(let j=y1,k=0;j<y2;++j){obj.$y=j-y1;for(let i=x1,r=j*n;i<x2;++i,k+=4){obj.$x=i-x1,obj.$value=value(i+r);const v=color(obj);pix[k+0]=v.r,pix[k+1]=v.g,pix[k+2]=v.b,pix[k+3]=~~(255*opacity(obj))}}return ctx.putImageData(img,0,0),can}(v,o,color.dep?color:vega_util_module_constant(color(o)),opacity.dep?opacity:vega_util_module_constant(opacity(o)))})),pulse.reflow(!0).modifies(as)}}),inherits(Projection,Transform,{transform(_,pulse){let proj=this.value;return!proj||_.modified("type")?(this.value=proj=function vega_geo_module_create(type){const constructor=vega_projection_module_projection((type||"mercator").toLowerCase());constructor||error("Unrecognized projection type: "+type);return constructor()}(_.type),projectionProperties.forEach((prop=>{null!=_[prop]&&vega_geo_module_set(proj,prop,_[prop])}))):projectionProperties.forEach((prop=>{_.modified(prop)&&vega_geo_module_set(proj,prop,_[prop])})),null!=_.pointRadius&&proj.path.pointRadius(_.pointRadius),_.fit&&function vega_geo_module_fit(proj,_){const data=function collectGeoJSON(data){return 1===(data=array(data)).length?data[0]:{type:"FeatureCollection",features:data.reduce(((a,f)=>a.concat(function featurize(f){return"FeatureCollection"===f.type?f.features:array(f).filter((d=>null!=d)).map((d=>"Feature"===d.type?d:{type:"Feature",geometry:d}))}(f))),[])}}(_.fit);_.extent?proj.fitExtent(_.extent,data):_.size&&proj.fitSize(_.size,data)}(proj,_),pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)}});var treeProto=quadtree.prototype=Quadtree.prototype;function d3_force_src_constant(x){return function(){return x}}function jiggle(random){return 1e-6*(random()-.5)}function collide_x(d){return d.x+d.vx}function collide_y(d){return d.y+d.vy}treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function src_add(d){const x=+this._x.call(null,d),y=+this._y.call(null,d);return add_add(this.cover(x,y),x,y,d)},treeProto.addAll=function addAll(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));if(x0>x1||y0>y1)return this;for(this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add_add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function cover(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{for(var parent,i,z=x1-x0||1,node=this._root;x0>x||x>=x1||y0>y||y>=y1;)switch(i=(y<y0)<<1|x<x0,(parent=new Array(4))[i]=node,node=parent,z*=2,i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function data(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto.extent=function src_extent(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function src_find(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new src_quad(node[3],xm,ym,x2,y2),new src_quad(node[2],x1,ym,xm,y2),new src_quad(node[1],xm,y1,x2,ym),new src_quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function remove(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function root(){return this._root},treeProto.size=function size(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto.visit=function src_visit(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function visitAfter(callback){var q,quads=[],next=[];for(this._root&&quads.push(new src_quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function src_x(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function src_y(_){return arguments.length?(this._y=_,this):this._y};var dispatch_noop={value:()=>{}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}}))}function dispatch_get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function dispatch_set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=dispatch_noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=dispatch_set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=dispatch_set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=dispatch_get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};const src_dispatch=dispatch;var taskHead,taskTail,timer_frame=0,timeout=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{!function timerFlush(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),timer_frame=1,setFrame(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};const m=4294967296;function simulation_x(d){return d.x}function simulation_y(d){return d.y}var initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=new Map,stepper=timer(step),event=src_dispatch("tick","end"),random=function src_lcg(){let s=1;return()=>(s=(1664525*s+1013904223)%m)/m}();function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),event.call("end",simulation))}function tick(iterations){var i,node,n=nodes.length;void 0===iterations&&(iterations=1);for(var k=0;k<iterations;++k)for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.forEach((function(force){force(alpha)})),i=0;i<n;++i)null==(node=nodes[i]).fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,node.vy=0);return simulation}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){if((node=nodes[i]).index=i,null!=node.fx&&(node.x=node.fx),null!=node.fy&&(node.y=node.fy),isNaN(node.x)||isNaN(node.y)){var radius=10*Math.sqrt(.5+i),angle=i*initialAngle;node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0)}}function initializeForce(force){return force.initialize&&force.initialize(nodes,random),force}return null==nodes&&(nodes=[]),initializeNodes(),simulation={tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},randomSource:function(_){return arguments.length?(random=_,forces.forEach(initializeForce),simulation):random},force:function(name,_){return arguments.length>1?(null==_?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)(d2=(dx=x-(node=nodes[i]).x)*dx+(dy=y-node.y)*dy)<radius&&(closest=node,radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}}function index(d){return d.index}function link_find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("node not found: "+nodeId);return node}const ForceMap={center:function center(x,y){var nodes,strength=1;function force(){var i,node,n=nodes.length,sx=0,sy=0;for(i=0;i<n;++i)sx+=(node=nodes[i]).x,sy+=node.y;for(sx=(sx/n-x)*strength,sy=(sy/n-y)*strength,i=0;i<n;++i)(node=nodes[i]).x-=sx,node.y-=sy}return null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force},collide:function collide(radius){var nodes,radii,random,strength=1,iterations=1;function force(){for(var i,tree,node,xi,yi,ri,ri2,n=nodes.length,k=0;k<iterations;++k)for(tree=quadtree(nodes,collide_x,collide_y).visitAfter(prepare),i=0;i<n;++i)node=nodes[i],ri=radii[node.index],ri2=ri*ri,xi=node.x+node.vx,yi=node.y+node.vy,tree.visit(apply);function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(!data)return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;l<r*r&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l=(r-(l=Math.sqrt(l)))/l*strength,node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj)),node.vy+=(y*=l)*r,data.vx-=x*(r=1-r),data.vy-=y*r)}}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i)quad[i]&&quad[i].r>quad.r&&(quad.r=quad[i].r)}function initialize(){if(nodes){var i,node,n=nodes.length;for(radii=new Array(n),i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}}return"function"!=typeof radius&&(radius=d3_force_src_constant(null==radius?1:+radius)),force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):radius},force},nbody:function manyBody(){var nodes,node,random,alpha,strengths,strength=d3_force_src_constant(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,simulation_x,simulation_y).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}}function accumulate(quad){var q,c,x,y,i,strength=0,weight=0;if(quad.length){for(x=y=i=0;i<4;++i)(q=quad[i])&&(c=Math.abs(q.value))&&(strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y);quad.x=x/weight,quad.y=y/weight}else{(q=quad).x=q.data.x,q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l)return l<distanceMax2&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),node.vx+=x*quad.value*alpha/l,node.vy+=y*quad.value*alpha/l),!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));do{quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x*w,node.vy+=y*w)}while(quad=quad.next)}}return force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)},force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)},force},link:function src_link(links){var strengths,distances,nodes,count,bias,random,id=index,strength=function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])},distance=d3_force_src_constant(30),iterations=1;function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)source=(link=links[i]).source,x=(target=link.target).x+target.vx-source.x-source.vx||jiggle(random),y=target.y+target.vy-source.y-source.vy||jiggle(random),x*=l=((l=Math.sqrt(x*x+y*y))-distances[i])/l*alpha*strengths[i],y*=l,target.vx-=x*(b=bias[i]),target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=new Map(nodes.map(((d,i)=>[id(d,i,nodes),d])));for(i=0,count=new Array(n);i<m;++i)(link=links[i]).index=i,"object"!=typeof link.source&&(link.source=link_find(nodeById,link.source)),"object"!=typeof link.target&&(link.target=link_find(nodeById,link.target)),count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);strengths=new Array(m),initializeStrength(),distances=new Array(m),initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links)}return null==links&&(links=[]),force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.links=function(_){return arguments.length?(links=_,initialize(),force):links},force.id=function(_){return arguments.length?(id=_,force):id},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initializeStrength(),force):strength},force.distance=function(_){return arguments.length?(distance="function"==typeof _?_:d3_force_src_constant(+_),initializeDistance(),force):distance},force},x:function d3_force_src_x(x){var nodes,strengths,xz,strength=d3_force_src_constant(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vx+=(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),xz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof x&&(x=d3_force_src_constant(null==x?0:+x)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):x},force},y:function d3_force_src_y(y){var nodes,strengths,yz,strength=d3_force_src_constant(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vy+=(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),yz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof y&&(y=d3_force_src_constant(null==y?0:+y)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):y},force}},ForceParams=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ForceConfig=["static","iterations"],ForceOutput=["x","y","vx","vy"];function Force(params){Transform.call(this,null,params)}function setup(sim,_,init,pulse){var i,n,p,name,f=array(_.forces);for(i=0,n=ForceParams.length;i<n;++i)"forces"!==(p=ForceParams[i])&&_.modified(p)&&sim[p](_[p]);for(i=0,n=f.length;i<n;++i)name="forces"+i,(p=init||_.modified("forces",i)?getForce(f[i]):pulse&&modified(f[i],pulse)?sim.force(name):null)&&sim.force(name,p);for(n=sim.numForces||0;i<n;++i)sim.force("forces"+i,null);return sim.numForces=f.length,sim}function modified(f,pulse){var k,v;for(k in f)if(isFunction(v=f[k])&&pulse.modified(accessorFields(v)))return 1;return 0}function getForce(_){var f,p;for(p in has(ForceMap,_.force)||error("Unrecognized force: "+_.force),f=ForceMap[_.force](),_)isFunction(f[p])&&setForceParam(f[p],_[p],_);return f}function setForceParam(f,v,_){f(isFunction(v)?d=>v(d,_):v)}function count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){data instanceof Map?(data=[void 0,data],void 0===children&&(children=mapChildren)):void 0===children&&(children=objectChildren);for(var node,child,childs,i,n,root=new Node(data),nodes=[root];node=nodes.pop();)if((childs=children(node.data))&&(n=(childs=Array.from(childs)).length))for(node.children=childs,i=n-1;i>=0;--i)nodes.push(child=childs[i]=new Node(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function objectChildren(d){return d.children}function mapChildren(d){return Array.isArray(d)?d[1]:null}function copyData(node){void 0!==node.data.value&&(node.value=node.data.value),node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node(data){this.data=data,this.depth=this.height=0,this.parent=null}function optional(f){return null==f?null:required(f)}function required(f){if("function"!=typeof f)throw new Error;return f}function constantZero(){return 0}function d3_hierarchy_src_constant(x){return function(){return x}}Force.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ForceOutput}]},inherits(Force,Transform,{transform(_,pulse){var sim=this.value,change=pulse.changed(pulse.ADD_REM),params=_.modified(ForceParams),iters=_.iterations||300;if(sim?(change&&(pulse.modifies("index"),sim.nodes(pulse.source)),(params||pulse.changed(pulse.MOD))&&setup(sim,_,0,pulse)):(this.value=sim=function vega_force_module_simulation(nodes,_){const sim=simulation(nodes),stop=sim.stop,restart=sim.restart;let stopped=!1;return sim.stopped=()=>stopped,sim.restart=()=>(stopped=!1,restart()),sim.stop=()=>(stopped=!0,stop()),setup(sim,_,!0).on("end",(()=>stopped=!0))}(pulse.source,_),sim.on("tick",function rerun(df,op){return()=>df.touch(op).run()}(pulse.dataflow,this)),_.static||(change=!0,sim.tick()),pulse.modifies("index")),params||change||_.modified(ForceConfig)||pulse.changed()&&_.restart)if(sim.alpha(Math.max(sim.alpha(),_.alpha||1)).alphaDecay(1-Math.pow(sim.alphaMin(),1/iters)),_.static)for(sim.stop();--iters>=0;)sim.tick();else if(sim.stopped()&&sim.restart(),!change)return pulse.StopPropagation;return this.finish(_,pulse)},finish(_,pulse){const dataflow=pulse.dataflow;for(let arg,args=this._argops,j=0,m=args.length;j<m;++j)if(arg=args[j],"forces"===arg.name&&"link"===arg.op._argval.force)for(var op,ops=arg.op._argops,i=0,n=ops.length;i<n;++i)if("links"===ops[i].name&&(op=ops[i].op.source)){dataflow.pulse(op,dataflow.changeset().reflow());break}return pulse.reflow(_.modified()).modifies(ForceOutput)}}),Node.prototype=hierarchy.prototype={constructor:Node,count:function hierarchy_count(){return this.eachAfter(count)},each:function each(callback,that){let index=-1;for(const node of this)callback.call(that,node,++index,this);return this},eachAfter:function eachAfter(callback,that){for(var children,i,n,node=this,nodes=[node],next=[],index=-1;node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback.call(that,node,++index,this);return this},eachBefore:function eachBefore(callback,that){for(var children,i,node=this,nodes=[node],index=-1;node=nodes.pop();)if(callback.call(that,node,++index,this),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},find:function hierarchy_find(callback,that){let index=-1;for(const node of this)if(callback.call(that,node,++index,this))return node},sum:function hierarchy_sum(value){return this.eachAfter((function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},sort:function hierarchy_sort(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},path:function hierarchy_path(end){for(var start=this,ancestor=function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function ancestors(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function descendants(){return Array.from(this)},leaves:function leaves(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},links:function links(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)},[Symbol.iterator]:function*iterator(){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(yield node,children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length)}};function packEncloseRandom(circles,random){for(var p,e,i=0,n=(circles=function shuffle(array,random){let t,i,m=array.length;for(;m;)i=random()*m--|0,t=array[m],array[m]=array[i],array[i]=t;return array}(Array.from(circles),random)).length,B=[];i<n;)p=circles[i],e&&enclosesWeak(e,p)?++i:(e=encloseBasis(B=extendBasis(B,p)),i=0);return e}function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i)if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B))return[B[i],p];for(i=0;i<B.length-1;++i)for(j=i+1;j<B.length;++j)if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B))return[B[i],B[j],p];throw new Error}function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy}function enclosesWeak(a,b){var dr=a.r-b.r+1e-9*Math.max(a.r,b.r,1),dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i)if(!enclosesWeak(a,B[i]))return!1;return!0}function encloseBasis(B){switch(B.length){case 1:return function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r}}(B[0]);case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2])}}function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2}}function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(2*ab)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(2*ab)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(Math.abs(A)>1e-6?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r}}function place(b,a,c){var x,a2,y,b2,dx=b.x-a.x,dy=b.y-a.y,d2=dx*dx+dy*dy;d2?(a2=a.r+c.r,a2*=a2,b2=b.r+c.r,a2>(b2*=b2)?(x=(d2+b2-a2)/(2*d2),y=Math.sqrt(Math.max(0,b2/d2-x*x)),c.x=b.x-x*dx-y*dy,c.y=b.y-x*dy+y*dx):(x=(d2+a2-b2)/(2*d2),y=Math.sqrt(Math.max(0,a2/d2-x*x)),c.x=a.x+x*dx-y*dy,c.y=a.y+x*dy+y*dx)):(c.x=a.x+c.r,c.y=a.y)}function intersects(a,b){var dr=a.r+b.r-1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy}function siblings_Node(circle){this._=circle,this.next=null,this.previous=null}function packSiblingsRandom(circles,random){if(!(n=(circles=function d3_hierarchy_src_array(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}(circles)).length))return 0;var a,b,c,n,aa,ca,i,j,k,sj,sk;if((a=circles[0]).x=0,a.y=0,!(n>1))return a.r;if(b=circles[1],a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;place(b,a,c=circles[2]),a=new siblings_Node(a),b=new siblings_Node(b),c=new siblings_Node(c),a.next=c.previous=b,b.next=a.previous=c,c.next=b.previous=a;pack:for(i=3;i<n;++i){place(a._,b._,c=circles[i]),c=new siblings_Node(c),j=b.next,k=a.previous,sj=b._.r,sk=a._.r;do{if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,--i;continue pack}sj+=j._.r,j=j.next}else{if(intersects(k._,c._)){(a=k).next=b,b.previous=a,--i;continue pack}sk+=k._.r,k=k.previous}}while(j!==k.next);for(c.previous=a,c.next=b,a.next=b.previous=b=c,aa=score(a);(c=c.next)!==b;)(ca=score(c))<aa&&(a=c,aa=ca);b=a.next}for(a=[b._],c=b;(c=c.next)!==b;)a.push(c._);for(c=packEncloseRandom(a,random),i=0;i<n;++i)(a=circles[i]).x-=c.x,a.y-=c.y;return c.r}function defaultRadius(d){return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){node.children||(node.r=Math.max(0,+radius(node)||0))}}function packChildrenRandom(padding,k,random){return function(node){if(children=node.children){var children,i,e,n=children.length,r=padding(node)*k||0;if(r)for(i=0;i<n;++i)children[i].r+=r;if(e=packSiblingsRandom(children,random),r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){return function(node){var parent=node.parent;node.r*=k,parent&&(node.x=parent.x+k*node.x,node.y=parent.y+k*node.y)}}function treemap_round(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)}function dice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k}var preroot={depth:-1},ambiguous={},imputed={};function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}function stratify(){var path,id=defaultId,parentId=defaultParentId;function stratify(data){var n,d,i,root,parent,node,nodeId,nodeKey,nodes=Array.from(data),currentId=id,currentParentId=parentId,nodeByKey=new Map;if(null!=path){const I=nodes.map(((d,i)=>function stratify_normalize(path){let i=(path=`${path}`).length;slash(path,i-1)&&!slash(path,i-2)&&(path=path.slice(0,-1));return"/"===path[0]?path:`/${path}`}(path(d,i,data)))),P=I.map(parentof),S=new Set(I).add("");for(const i of P)S.has(i)||(S.add(i),I.push(i),P.push(parentof(i)),nodes.push(imputed));currentId=(_,i)=>I[i],currentParentId=(_,i)=>P[i]}for(i=0,n=nodes.length;i<n;++i)d=nodes[i],node=nodes[i]=new Node(d),null!=(nodeId=currentId(d,i,data))&&(nodeId+="")&&(nodeKey=node.id=nodeId,nodeByKey.set(nodeKey,nodeByKey.has(nodeKey)?ambiguous:node)),null!=(nodeId=currentParentId(d,i,data))&&(nodeId+="")&&(node.parent=nodeId);for(i=0;i<n;++i)if(nodeId=(node=nodes[i]).parent){if(!(parent=nodeByKey.get(nodeId)))throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);parent.children?parent.children.push(node):parent.children=[node],node.parent=parent}else{if(root)throw new Error("multiple roots");root=node}if(!root)throw new Error("no root");if(null!=path){for(;root.data===imputed&&1===root.children.length;)root=root.children[0],--n;for(let i=nodes.length-1;i>=0&&(node=nodes[i],node.data===imputed);--i)node.data=null}if(root.parent=preroot,root.eachBefore((function(node){node.depth=node.parent.depth+1,--n})).eachBefore(computeHeight),root.parent=null,n>0)throw new Error("cycle");return root}return stratify.id=function(x){return arguments.length?(id=optional(x),stratify):id},stratify.parentId=function(x){return arguments.length?(parentId=optional(x),stratify):parentId},stratify.path=function(x){return arguments.length?(path=optional(x),stratify):path},stratify}function parentof(path){let i=path.length;if(i<2)return"";for(;--i>1&&!slash(path,i););return path.slice(0,i)}function slash(path,i){if("/"===path[i]){let k=0;for(;i>0&&"\\"===path[--i];)++k;if(0==(1&k))return!0}return!1}function defaultSeparation(a,b){return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;return children?children[0]:v.t}function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}function cluster_defaultSeparation(a,b){return a.parent===b.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,c){return Math.max(y,c.y)}function treemap_slice(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k}TreeNode.prototype=Object.create(Node.prototype);var phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?dice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemap_slice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}const squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}(phi),resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?dice(row,x0,y0,x1,value?y0+=(y1-y0)*row.value/value:y1):treemap_slice(row,x0,y0,value?x0+=(x1-x0)*row.value/value:x1,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(phi);function vega_hierarchy_module_lookup(tree,key,filter){const map={};return tree.each((node=>{const t=node.data;filter(t)&&(map[key(t)]=node)})),tree.lookup=map,tree}function Nest(params){Transform.call(this,null,params)}Nest.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const children=n=>n.values;function nest(){const keys=[],nest={entries:array=>entries(apply(array,0),0),key:d=>(keys.push(d),nest)};function apply(array,depth){if(depth>=keys.length)return array;const n=array.length,key=keys[depth++],valuesByKey={},result={};let keyValue,value,values,i=-1;for(;++i<n;)keyValue=key(value=array[i])+"",(values=valuesByKey[keyValue])?values.push(value):valuesByKey[keyValue]=[value];for(keyValue in valuesByKey)result[keyValue]=apply(valuesByKey[keyValue],depth);return result}function entries(map,depth){if(++depth>keys.length)return map;const array=[];for(const key in map)array.push({key,values:entries(map[key],depth)});return array}return nest}function HierarchyLayout(params){Transform.call(this,null,params)}inherits(Nest,Transform,{transform(_,pulse){pulse.source||error("Nest transform requires an upstream data source.");var gen=_.generate,mod=_.modified(),out=pulse.clone(),tree=this.value;return(!tree||mod||pulse.changed())&&(tree&&tree.each((node=>{node.children&&isTuple(node.data)&&out.rem.push(node.data)})),this.value=tree=hierarchy({values:array(_.keys).reduce(((n,k)=>(n.key(k),n)),nest()).entries(out.source)},children),gen&&tree.each((node=>{node.children&&(node=ingest$1(node.data),out.add.push(node),out.source.push(node))})),vega_hierarchy_module_lookup(tree,tupleid,tupleid)),out.source.root=tree,out}});const vega_hierarchy_module_defaultSeparation=(a,b)=>a.parent===b.parent?1:2;inherits(HierarchyLayout,Transform,{transform(_,pulse){pulse.source&&pulse.source.root||error(this.constructor.name+" transform requires a backing tree data source.");const layout=this.layout(_.method),fields=this.fields,root=pulse.source.root,as=_.as||fields;_.field?root.sum(_.field):root.count(),_.sort&&root.sort(stableCompare(_.sort,(d=>d.data))),function setParams(layout,params,_){for(let p,i=0,n=params.length;i<n;++i)p=params[i],p in _&&layout[p](_[p])}(layout,this.params,_),layout.separation&&layout.separation(!1!==_.separation?vega_hierarchy_module_defaultSeparation:one);try{this.value=layout(root)}catch(err){error(err)}return root.each((node=>function setFields(node,fields,as){const t=node.data,n=fields.length-1;for(let i=0;i<n;++i)t[as[i]]=node[fields[i]];t[as[n]]=node.children?node.children.length:0}(node,fields,as))),pulse.reflow(_.modified()).modifies(as).modifies("leaf")}});const Output$3=["x","y","r","depth","children"];function Pack(params){HierarchyLayout.call(this,params)}Pack.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Output$3.length,default:Output$3}]},inherits(Pack,HierarchyLayout,{layout:function pack(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){const random=function d3_hierarchy_src_lcg(){let s=1;return()=>(s=(1664525*s+1013904223)%4294967296)/4294967296}();return root.x=dx/2,root.y=dy/2,radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildrenRandom(padding,.5,random)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildrenRandom(constantZero,1,random)).eachAfter(packChildrenRandom(padding,root.r/Math.min(dx,dy),random)).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r))),root}return pack.radius=function(x){return arguments.length?(radius=optional(x),pack):radius},pack.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]},pack.padding=function(x){return arguments.length?(padding="function"==typeof x?x:d3_hierarchy_src_constant(+x),pack):padding},pack},params:["radius","size","padding"],fields:Output$3});const Output$2=["x0","y0","x1","y1","depth","children"];function Partition(params){HierarchyLayout.call(this,params)}function Stratify(params){Transform.call(this,null,params)}Partition.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Output$2.length,default:Output$2}]},inherits(Partition,HierarchyLayout,{layout:function src_partition(){var dx=1,dy=1,padding=0,round=!1;function partition(root){var n=root.height+1;return root.x0=root.y0=padding,root.x1=dx,root.y1=dy/n,root.eachBefore(function positionNode(dy,n){return function(node){node.children&&dice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1}}(dy,n)),round&&root.eachBefore(treemap_round),root}return partition.round=function(x){return arguments.length?(round=!!x,partition):round},partition.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],partition):[dx,dy]},partition.padding=function(x){return arguments.length?(padding=+x,partition):padding},partition},params:["size","round","padding"],fields:Output$2}),Stratify.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},inherits(Stratify,Transform,{transform(_,pulse){pulse.source||error("Stratify transform requires an upstream data source.");let tree=this.value;const mod=_.modified(),out=pulse.fork(pulse.ALL).materialize(pulse.SOURCE),run=!tree||mod||pulse.changed(pulse.ADD_REM)||pulse.modified(_.key.fields)||pulse.modified(_.parentKey.fields);return out.source=out.source.slice(),run&&(tree=out.source.length?vega_hierarchy_module_lookup(stratify().id(_.key).parentId(_.parentKey)(out.source),_.key,truthy):vega_hierarchy_module_lookup(stratify()([{}]),_.key,_.key)),out.source.root=this.value=tree,out}});const Layouts={tidy:function tree(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=null;function tree(root){var t=function treeRoot(root){for(var node,child,children,i,n,tree=new TreeNode(root,0),nodes=[tree];node=nodes.pop();)if(children=node._.children)for(node.children=new Array(n=children.length),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new TreeNode(children[i],i)),child.parent=node;return(tree.parent=new TreeNode(null,0)).children=[tree],tree}(root);if(t.eachAfter(firstWalk),t.parent.m=-t.z,t.eachBefore(secondWalk),nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore((function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)}));var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore((function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky}))}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){!function executeShifts(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=nextRight(vim),vip=nextLeft(vip),vim&&vip;)vom=nextLeft(vom),(vop=nextRight(vop)).a=v,(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))>0&&(moveSubtree(nextAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!nextRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!nextLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function sizeNode(node){node.x*=dx,node.y=node.depth*dy}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]},tree.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null},tree},cluster:function cluster(){var separation=cluster_defaultSeparation,dx=1,dy=1,nodeSize=!1;function cluster(root){var previousNode,x=0;root.eachAfter((function(node){var children=node.children;children?(node.x=function meanX(children){return children.reduce(meanXReduce,0)/children.length}(children),node.y=function maxY(children){return 1+children.reduce(maxYReduce,0)}(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)}));var left=function leafLeft(node){for(var children;children=node.children;)node=children[0];return node}(root),right=function leafRight(node){for(var children;children=node.children;)node=children[children.length-1];return node}(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx,node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx,node.y=(1-(root.y?node.y/root.y:1))*dy})}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]},cluster.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null},cluster}},Output$1=["x","y","depth","children"];function Tree(params){HierarchyLayout.call(this,params)}function TreeLinks(params){Transform.call(this,[],params)}Tree.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Output$1.length,default:Output$1}]},inherits(Tree,HierarchyLayout,{layout(method){const m=method||"tidy";if(has(Layouts,m))return Layouts[m]();error("Unrecognized Tree layout method: "+m)},params:["size","nodeSize"],fields:Output$1}),TreeLinks.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},inherits(TreeLinks,Transform,{transform(_,pulse){const links=this.value,tree=pulse.source&&pulse.source.root,out=pulse.fork(pulse.NO_SOURCE),lut={};return tree||error("TreeLinks transform requires a tree data source."),pulse.changed(pulse.ADD_REM)?(out.rem=links,pulse.visit(pulse.SOURCE,(t=>lut[tupleid(t)]=1)),tree.each((node=>{const t=node.data,p=node.parent&&node.parent.data;p&&lut[tupleid(t)]&&lut[tupleid(p)]&&out.add.push(ingest$1({source:p,target:t}))})),this.value=out.add):pulse.changed(pulse.MOD)&&(pulse.visit(pulse.MOD,(t=>lut[tupleid(t)]=1)),links.forEach((link=>{(lut[tupleid(link.source)]||lut[tupleid(link.target)])&&out.mod.push(link)}))),out}});const Tiles={binary:function binary(parent,x0,y0,x1,y1){var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;!function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];return node.x0=x0,node.y0=y0,node.x1=x1,void(node.y1=y1)}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;for(;k<hi;){var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k&&--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=value?(x0*valueRight+x1*valueLeft)/value:x1;partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=value?(y0*valueRight+y1*valueLeft)/value:y1;partition(i,k,valueLeft,x0,y0,x1,yk),partition(k,j,valueRight,x0,yk,x1,y1)}}(0,n,parent.value,x0,y0,x1,y1)},dice,slice:treemap_slice,slicedice:function sliceDice(parent,x0,y0,x1,y1){(1&parent.depth?treemap_slice:dice)(parent,x0,y0,x1,y1)},squarify,resquarify},vega_hierarchy_module_Output=["x0","y0","x1","y1","depth","children"];function Treemap(params){HierarchyLayout.call(this,params)}Treemap.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vega_hierarchy_module_Output.length,default:vega_hierarchy_module_Output}]},inherits(Treemap,HierarchyLayout,{layout(){const x=function treemap(){var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){return root.x0=root.y0=0,root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],round&&root.eachBefore(treemap_round),root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,(x1-=paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),tile(node,x0,y0,x1,y1))}return treemap.round=function(x){return arguments.length?(round=!!x,treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=required(x),treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingLeft},treemap}();return x.ratio=_=>{const t=x.tile();t.ratio&&x.tile(t.ratio(_))},x.method=_=>{has(Tiles,_)?x.tile(Tiles[_]):error("Unrecognized Treemap layout method: "+_)},x},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:vega_hierarchy_module_Output});function getBuffer(context,width,height){return new Uint32Array(context.getImageData(0,0,width,height).data.buffer)}function vega_label_module_draw(context,items,interior){if(!items.length)return;const type=items[0].mark.marktype;"group"===type?items.forEach((group=>{group.items.forEach((mark=>vega_label_module_draw(context,mark.items,interior)))})):Marks[type].draw(context,{items:interior?items.map(prepare):items})}function prepare(source){const item=rederive(source,{});return item.stroke&&0!==item.strokeOpacity||item.fill&&0!==item.fillOpacity?{...item,strokeOpacity:1,stroke:"#000",fillOpacity:0}:item}const RIGHT0=new Uint32Array(33),RIGHT1=new Uint32Array(33);RIGHT1[0]=0,RIGHT0[0]=~RIGHT1[0];for(let i=1;i<=32;++i)RIGHT1[i]=RIGHT1[i-1]<<1|1,RIGHT0[i]=~RIGHT1[i];function scaler(width,height,padding){const ratio=Math.max(1,Math.sqrt(width*height/1e6)),w=~~((width+2*padding+ratio)/ratio),h=~~((height+2*padding+ratio)/ratio),scale=_=>~~((_+padding)/ratio);return scale.invert=_=>_*ratio-padding,scale.bitmap=()=>function Bitmap(w,h){const array=new Uint32Array(~~((w*h+32)/32));function _set(index,mask){array[index]|=mask}function _clear(index,mask){array[index]&=mask}return{array,get:(x,y)=>{const index=y*w+x;return array[index>>>5]&1<<(31&index)},set:(x,y)=>{const index=y*w+x;_set(index>>>5,1<<(31&index))},clear:(x,y)=>{const index=y*w+x;_clear(index>>>5,~(1<<(31&index)))},getRange:(x,y,x2,y2)=>{let start,end,indexStart,indexEnd,r=y2;for(;r>=y;--r)if(start=r*w+x,end=r*w+x2,indexStart=start>>>5,indexEnd=end>>>5,indexStart===indexEnd){if(array[indexStart]&RIGHT0[31&start]&RIGHT1[1+(31&end)])return!0}else{if(array[indexStart]&RIGHT0[31&start])return!0;if(array[indexEnd]&RIGHT1[1+(31&end)])return!0;for(let i=indexStart+1;i<indexEnd;++i)if(array[i])return!0}return!1},setRange:(x,y,x2,y2)=>{let start,end,indexStart,indexEnd,i;for(;y<=y2;++y)if(start=y*w+x,end=y*w+x2,indexStart=start>>>5,indexEnd=end>>>5,indexStart===indexEnd)_set(indexStart,RIGHT0[31&start]&RIGHT1[1+(31&end)]);else for(_set(indexStart,RIGHT0[31&start]),_set(indexEnd,RIGHT1[1+(31&end)]),i=indexStart+1;i<indexEnd;++i)_set(i,4294967295)},clearRange:(x,y,x2,y2)=>{let start,end,indexStart,indexEnd,i;for(;y<=y2;++y)if(start=y*w+x,end=y*w+x2,indexStart=start>>>5,indexEnd=end>>>5,indexStart===indexEnd)_clear(indexStart,RIGHT1[31&start]|RIGHT0[1+(31&end)]);else for(_clear(indexStart,RIGHT1[31&start]),_clear(indexEnd,RIGHT0[1+(31&end)]),i=indexStart+1;i<indexEnd;++i)_clear(i,0)},outOfBounds:(x,y,x2,y2)=>x<0||y<0||y2>=h||x2>=w}}(w,h),scale.ratio=ratio,scale.padding=padding,scale.width=width,scale.height=height,scale}function outOfBounds(x,y,textWidth,textHeight,width,height){let r=textWidth/2;return x-r<0||x+r>width||y-(r=textHeight/2)<0||y+r>height}function collision($,x,y,textHeight,textWidth,h,bm0,bm1){const w=textWidth*h/(2*textHeight),x1=$(x-w),x2=$(x+w),y1=$(y-(h/=2)),y2=$(y+h);return bm0.outOfBounds(x1,y1,x2,y2)||bm0.getRange(x1,y1,x2,y2)||bm1&&bm1.getRange(x1,y1,x2,y2)}const X_DIR=[-1,-1,1,1],Y_DIR=[-1,1,-1,1];const Aligns=["right","center","left"],Baselines=["bottom","middle","top"];function test(_x1,_x2,_y1,_y2,bm0,bm1,x1,x2,y1,y2,boundary,isInside){return!(bm0.outOfBounds(_x1,_y1,_x2,_y2)||(isInside&&bm1||bm0).getRange(_x1,_y1,_x2,_y2))}const anchorCode={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},placeAreaLabel={naive:function placeAreaLabelNaive($,bitmaps,avoidBaseMark,markIndex){const width=$.width,height=$.height;return function(d){const items=d.datum.datum.items[markIndex].items,n=items.length,textHeight=d.datum.fontSize,textWidth=textMetrics.width(d.datum,d.datum.text);let x1,x2,y1,y2,x,y,areaWidth,maxAreaWidth=0;for(let i=0;i<n;++i)x1=items[i].x,y1=items[i].y,x2=void 0===items[i].x2?x1:items[i].x2,y2=void 0===items[i].y2?y1:items[i].y2,x=(x1+x2)/2,y=(y1+y2)/2,areaWidth=Math.abs(x2-x1+y2-y1),areaWidth>=maxAreaWidth&&(maxAreaWidth=areaWidth,d.x=x,d.y=y);return x=textWidth/2,y=textHeight/2,x1=d.x-x,x2=d.x+x,y1=d.y-y,y2=d.y+y,d.align="center",x1<0&&x2<=width?d.align="left":0<=x1&&width<x2&&(d.align="right"),d.baseline="middle",y1<0&&y2<=height?d.baseline="top":0<=y1&&height<y2&&(d.baseline="bottom"),!0}},"reduced-search":function placeAreaLabelReducedSearch($,bitmaps,avoidBaseMark,markIndex){const width=$.width,height=$.height,bm0=bitmaps[0],bm1=bitmaps[1];function tryLabel(_x,_y,maxSize,textWidth,textHeight){const x=$.invert(_x),y=$.invert(_y);let mid,lo=maxSize,hi=height;if(!outOfBounds(x,y,textWidth,textHeight,width,height)&&!collision($,x,y,textHeight,textWidth,lo,bm0,bm1)&&!collision($,x,y,textHeight,textWidth,textHeight,bm0,null)){for(;hi-lo>=1;)mid=(lo+hi)/2,collision($,x,y,textHeight,textWidth,mid,bm0,bm1)?hi=mid:lo=mid;if(lo>maxSize)return[x,y,lo,!0]}}return function(d){const items=d.datum.datum.items[markIndex].items,n=items.length,textHeight=d.datum.fontSize,textWidth=textMetrics.width(d.datum,d.datum.text);let x1,x2,y1,y2,x,y,_x,_y,_x1,_xMid,_x2,_y1,_yMid,_y2,areaWidth,result,swapTmp,maxSize=avoidBaseMark?textHeight:0,labelPlaced=!1,labelPlaced2=!1,maxAreaWidth=0;for(let i=0;i<n;++i){for(x1=items[i].x,y1=items[i].y,x2=void 0===items[i].x2?x1:items[i].x2,y2=void 0===items[i].y2?y1:items[i].y2,x1>x2&&(swapTmp=x1,x1=x2,x2=swapTmp),y1>y2&&(swapTmp=y1,y1=y2,y2=swapTmp),_x1=$(x1),_x2=$(x2),_xMid=~~((_x1+_x2)/2),_y1=$(y1),_y2=$(y2),_yMid=~~((_y1+_y2)/2),_x=_xMid;_x>=_x1;--_x)for(_y=_yMid;_y>=_y1;--_y)result=tryLabel(_x,_y,maxSize,textWidth,textHeight),result&&([d.x,d.y,maxSize,labelPlaced]=result);for(_x=_xMid;_x<=_x2;++_x)for(_y=_yMid;_y<=_y2;++_y)result=tryLabel(_x,_y,maxSize,textWidth,textHeight),result&&([d.x,d.y,maxSize,labelPlaced]=result);labelPlaced||avoidBaseMark||(areaWidth=Math.abs(x2-x1+y2-y1),x=(x1+x2)/2,y=(y1+y2)/2,areaWidth>=maxAreaWidth&&!outOfBounds(x,y,textWidth,textHeight,width,height)&&!collision($,x,y,textHeight,textWidth,textHeight,bm0,null)&&(maxAreaWidth=areaWidth,d.x=x,d.y=y,labelPlaced2=!0))}return!(!labelPlaced&&!labelPlaced2)&&(x=textWidth/2,y=textHeight/2,bm0.setRange($(d.x-x),$(d.y-y),$(d.x+x),$(d.y+y)),d.align="center",d.baseline="middle",!0)}},floodfill:function placeAreaLabelFloodFill($,bitmaps,avoidBaseMark,markIndex){const width=$.width,height=$.height,bm0=bitmaps[0],bm1=bitmaps[1],bm2=$.bitmap();return function(d){const items=d.datum.datum.items[markIndex].items,n=items.length,textHeight=d.datum.fontSize,textWidth=textMetrics.width(d.datum,d.datum.text),stack=[];let x1,x2,y1,y2,x,y,_x,_y,lo,hi,mid,areaWidth,maxSize=avoidBaseMark?textHeight:0,labelPlaced=!1,labelPlaced2=!1,maxAreaWidth=0;for(let i=0;i<n;++i){for(x1=items[i].x,y1=items[i].y,x2=void 0===items[i].x2?x1:items[i].x2,y2=void 0===items[i].y2?y1:items[i].y2,stack.push([$((x1+x2)/2),$((y1+y2)/2)]);stack.length;)if([_x,_y]=stack.pop(),!(bm0.get(_x,_y)||bm1.get(_x,_y)||bm2.get(_x,_y))){bm2.set(_x,_y);for(let j=0;j<4;++j)x=_x+X_DIR[j],y=_y+Y_DIR[j],bm2.outOfBounds(x,y,x,y)||stack.push([x,y]);if(x=$.invert(_x),y=$.invert(_y),lo=maxSize,hi=height,!outOfBounds(x,y,textWidth,textHeight,width,height)&&!collision($,x,y,textHeight,textWidth,lo,bm0,bm1)&&!collision($,x,y,textHeight,textWidth,textHeight,bm0,null)){for(;hi-lo>=1;)mid=(lo+hi)/2,collision($,x,y,textHeight,textWidth,mid,bm0,bm1)?hi=mid:lo=mid;lo>maxSize&&(d.x=x,d.y=y,maxSize=lo,labelPlaced=!0)}}labelPlaced||avoidBaseMark||(areaWidth=Math.abs(x2-x1+y2-y1),x=(x1+x2)/2,y=(y1+y2)/2,areaWidth>=maxAreaWidth&&!outOfBounds(x,y,textWidth,textHeight,width,height)&&!collision($,x,y,textHeight,textWidth,textHeight,bm0,null)&&(maxAreaWidth=areaWidth,d.x=x,d.y=y,labelPlaced2=!0))}return!(!labelPlaced&&!labelPlaced2)&&(x=textWidth/2,y=textHeight/2,bm0.setRange($(d.x-x),$(d.y-y),$(d.x+x),$(d.y+y)),d.align="center",d.baseline="middle",!0)}}};function labelLayout(texts,size,compare,offset,anchor,avoidMarks,avoidBaseMark,lineAnchor,markIndex,padding,method){if(!texts.length)return texts;const positions=Math.max(offset.length,anchor.length),offsets=function getOffsets(_,count){const offsets=new Float64Array(count),n=_.length;for(let i=0;i<n;++i)offsets[i]=_[i]||0;for(let i=n;i<count;++i)offsets[i]=offsets[n-1];return offsets}(offset,positions),anchors=function getAnchors(_,count){const anchors=new Int8Array(count),n=_.length;for(let i=0;i<n;++i)anchors[i]|=anchorCode[_[i]];for(let i=n;i<count;++i)anchors[i]=anchors[n-1];return anchors}(anchor,positions),marktype=function markType(item){return item&&item.mark&&item.mark.marktype}(texts[0].datum),grouptype="group"===marktype&&texts[0].datum.items[markIndex].marktype,isGroupArea="area"===grouptype,boundary=function markBoundary(marktype,grouptype,lineAnchor,markIndex){const xy=d=>[d.x,d.x,d.x,d.y,d.y,d.y];return marktype?"line"===marktype||"area"===marktype?d=>xy(d.datum):"line"===grouptype?d=>{const items=d.datum.items[markIndex].items;return xy(items.length?items["start"===lineAnchor?0:items.length-1]:{x:NaN,y:NaN})}:d=>{const b=d.datum.bounds;return[b.x1,(b.x1+b.x2)/2,b.x2,b.y1,(b.y1+b.y2)/2,b.y2]}:xy}(marktype,grouptype,lineAnchor,markIndex),infPadding=null===padding||padding===1/0,isNaiveGroupArea=isGroupArea&&"naive"===method;let maxTextWidth=-1,maxTextHeight=-1;const data=texts.map((d=>{const textWidth=infPadding?textMetrics.width(d,d.text):void 0;return maxTextWidth=Math.max(maxTextWidth,textWidth),maxTextHeight=Math.max(maxTextHeight,d.fontSize),{datum:d,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:boundary(d),textWidth}}));padding=null===padding||padding===1/0?Math.max(maxTextWidth,maxTextHeight)+Math.max(...offset):padding;const $=scaler(size[0],size[1],padding);let bitmaps;if(!isNaiveGroupArea){compare&&data.sort(((a,b)=>compare(a.datum,b.datum)));let labelInside=!1;for(let i=0;i<anchors.length&&!labelInside;++i)labelInside=5===anchors[i]||offsets[i]<0;const baseMark=(marktype&&avoidBaseMark||isGroupArea)&&texts.map((d=>d.datum));bitmaps=avoidMarks.length||baseMark?function markBitmaps($,baseMark,avoidMarks,labelInside,isGroupArea){const width=$.width,height=$.height,border=labelInside||isGroupArea,context=domCanvas(width,height).getContext("2d"),baseMarkContext=domCanvas(width,height).getContext("2d"),strokeContext=border&&domCanvas(width,height).getContext("2d");avoidMarks.forEach((items=>vega_label_module_draw(context,items,!1))),vega_label_module_draw(baseMarkContext,baseMark,!1),border&&vega_label_module_draw(strokeContext,baseMark,!0);const buffer=getBuffer(context,width,height),baseMarkBuffer=getBuffer(baseMarkContext,width,height),strokeBuffer=border&&getBuffer(strokeContext,width,height),layer1=$.bitmap(),layer2=border&&$.bitmap();let x,y,u,v,index,alpha,strokeAlpha,baseMarkAlpha;for(y=0;y<height;++y)for(x=0;x<width;++x)index=y*width+x,alpha=4278190080&buffer[index],baseMarkAlpha=4278190080&baseMarkBuffer[index],strokeAlpha=border&&4278190080&strokeBuffer[index],(alpha||strokeAlpha||baseMarkAlpha)&&(u=$(x),v=$(y),isGroupArea||!alpha&&!baseMarkAlpha||layer1.set(u,v),border&&(alpha||strokeAlpha)&&layer2.set(u,v));return[layer1,layer2]}($,baseMark||[],avoidMarks,labelInside,isGroupArea):function baseBitmaps($,data){const bitmap=$.bitmap();return(data||[]).forEach((d=>bitmap.set($(d.boundary[0]),$(d.boundary[3])))),[bitmap,void 0]}($,avoidBaseMark&&data)}const place=isGroupArea?placeAreaLabel[method]($,bitmaps,avoidBaseMark,markIndex):function placeMarkLabel($,bitmaps,anchors,offsets){const width=$.width,height=$.height,bm0=bitmaps[0],bm1=bitmaps[1],n=offsets.length;return function(d){var _d$textWidth;const boundary=d.boundary,textHeight=d.datum.fontSize;if(boundary[2]<0||boundary[5]<0||boundary[0]>width||boundary[3]>height)return!1;let dx,dy,isInside,sizeFactor,insideFactor,x1,x2,y1,y2,xc,yc,_x1,_x2,_y1,_y2,textWidth=null!==(_d$textWidth=d.textWidth)&&void 0!==_d$textWidth?_d$textWidth:0;for(let i=0;i<n;++i){if(dx=(3&anchors[i])-1,dy=(anchors[i]>>>2&3)-1,isInside=0===dx&&0===dy||offsets[i]<0,sizeFactor=dx&&dy?Math.SQRT1_2:1,insideFactor=offsets[i]<0?-1:1,x1=boundary[1+dx]+offsets[i]*dx*sizeFactor,yc=boundary[4+dy]+insideFactor*textHeight*dy/2+offsets[i]*dy*sizeFactor,y1=yc-textHeight/2,y2=yc+textHeight/2,_x1=$(x1),_y1=$(y1),_y2=$(y2),!textWidth){if(!test(_x1,_x1,_y1,_y2,bm0,bm1,0,0,0,0,0,isInside))continue;textWidth=textMetrics.width(d.datum,d.datum.text)}if(xc=x1+insideFactor*textWidth*dx/2,x1=xc-textWidth/2,x2=xc+textWidth/2,_x1=$(x1),_x2=$(x2),test(_x1,_x2,_y1,_y2,bm0,bm1,0,0,0,0,0,isInside))return d.x=dx?dx*insideFactor<0?x2:x1:xc,d.y=dy?dy*insideFactor<0?y2:y1:yc,d.align=Aligns[dx*insideFactor+1],d.baseline=Baselines[dy*insideFactor+1],bm0.setRange(_x1,_y1,_x2,_y2),!0}return!1}}($,bitmaps,anchors,offsets);return data.forEach((d=>d.opacity=+place(d))),data}const vega_label_module_Output=["x","y","opacity","align","baseline"],Anchors=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Label(params){Transform.call(this,null,params)}function vega_regression_module_partition(data,groupby){var map,i,n,t,k,g,groups=[],get=function(f){return f(t)};if(null==groupby)groups.push(data);else for(map={},i=0,n=data.length;i<n;++i)t=data[i],(g=map[k=groupby.map(get)])||(map[k]=g=[],g.dims=k,groups.push(g)),g.push(t);return groups}function Loess(params){Transform.call(this,null,params)}Label.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Anchors},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:vega_label_module_Output.length,default:vega_label_module_Output}]},inherits(Label,Transform,{transform(_,pulse){const mod=_.modified();if(!(mod||pulse.changed(pulse.ADD_REM)||function modp(param){const p=_[param];return isFunction(p)&&pulse.modified(p.fields)}("sort")))return;_.size&&2===_.size.length||error("Size parameter should be specified as a [width, height] array.");const as=_.as||vega_label_module_Output;return labelLayout(pulse.materialize(pulse.SOURCE).source||[],_.size,_.sort,array(null==_.offset?1:_.offset),array(_.anchor||Anchors),_.avoidMarks||[],!1!==_.avoidBaseMark,_.lineAnchor||"end",_.markIndex||0,void 0===_.padding?0:_.padding,_.method||"naive").forEach((l=>{const t=l.datum;t[as[0]]=l.x,t[as[1]]=l.y,t[as[2]]=l.opacity,t[as[3]]=l.align,t[as[4]]=l.baseline})),pulse.reflow(mod).modifies(as)}}),Loess.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},inherits(Loess,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const groups=vega_regression_module_partition(pulse.materialize(pulse.SOURCE).source,_.groupby),names=(_.groupby||[]).map(accessorName),m=names.length,as=_.as||[accessorName(_.x),accessorName(_.y)],values=[];groups.forEach((g=>{loess(g,_.x,_.y,_.bandwidth||.3).forEach((p=>{const t={};for(let i=0;i<m;++i)t[names[i]]=g.dims[i];t[as[0]]=p[0],t[as[1]]=p[1],values.push(ingest$1(t))}))})),this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out}});const vega_regression_module_Methods={linear,log:vega_statistics_module_log,exp:vega_statistics_module_exp,pow:vega_statistics_module_pow,quad,poly};function Regression(params){Transform.call(this,null,params)}Regression.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(vega_regression_module_Methods)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},inherits(Regression,Transform,{transform(_,pulse){const out=pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const groups=vega_regression_module_partition(pulse.materialize(pulse.SOURCE).source,_.groupby),names=(_.groupby||[]).map(accessorName),method=_.method||"linear",order=_.order||3,dof=((method,order)=>"poly"===method?order:"quad"===method?2:1)(method,order),as=_.as||[accessorName(_.x),accessorName(_.y)],fit=vega_regression_module_Methods[method],values=[];let domain=_.extent;has(vega_regression_module_Methods,method)||error("Invalid regression method: "+method),null!=domain&&"log"===method&&domain[0]<=0&&(pulse.dataflow.warn("Ignoring extent with values <= 0 for log regression."),domain=null),groups.forEach((g=>{if(g.length<=dof)return void pulse.dataflow.warn("Skipping regression with more parameters than data points.");const model=fit(g,_.x,_.y,order);if(_.params)return void values.push(ingest$1({keys:g.dims,coef:model.coef,rSquared:model.rSquared}));const dom=domain||extent(g,_.x),add=p=>{const t={};for(let i=0;i<names.length;++i)t[names[i]]=g.dims[i];t[as[0]]=p[0],t[as[1]]=p[1],values.push(ingest$1(t))};"linear"===method?dom.forEach((x=>add([x,model.predict(x)]))):sampleCurve(model.predict,dom,25,200).forEach(add)})),this.value&&(out.rem=this.value),this.value=out.add=out.source=values}return out}});function util_sum(elen,e,flen,f,h){let Q,Qnew,hh,bvirt,enow=e[0],fnow=f[0],eindex=0,findex=0;fnow>enow==fnow>-enow?(Q=enow,enow=e[++eindex]):(Q=fnow,fnow=f[++findex]);let hindex=0;if(eindex<elen&&findex<flen)for(fnow>enow==fnow>-enow?(Qnew=enow+Q,hh=Q-(Qnew-enow),enow=e[++eindex]):(Qnew=fnow+Q,hh=Q-(Qnew-fnow),fnow=f[++findex]),Q=Qnew,0!==hh&&(h[hindex++]=hh);eindex<elen&&findex<flen;)fnow>enow==fnow>-enow?(Qnew=Q+enow,bvirt=Qnew-Q,hh=Q-(Qnew-bvirt)+(enow-bvirt),enow=e[++eindex]):(Qnew=Q+fnow,bvirt=Qnew-Q,hh=Q-(Qnew-bvirt)+(fnow-bvirt),fnow=f[++findex]),Q=Qnew,0!==hh&&(h[hindex++]=hh);for(;eindex<elen;)Qnew=Q+enow,bvirt=Qnew-Q,hh=Q-(Qnew-bvirt)+(enow-bvirt),enow=e[++eindex],Q=Qnew,0!==hh&&(h[hindex++]=hh);for(;findex<flen;)Qnew=Q+fnow,bvirt=Qnew-Q,hh=Q-(Qnew-bvirt)+(fnow-bvirt),fnow=f[++findex],Q=Qnew,0!==hh&&(h[hindex++]=hh);return 0===Q&&0!==hindex||(h[hindex++]=Q),hindex}function vec(n){return new Float64Array(n)}const orient2d_B=vec(4),C1=vec(8),C2=vec(12),orient2d_D=vec(16),u=vec(4);function orient2d(ax,ay,bx,by,cx,cy){const detleft=(ay-cy)*(bx-cx),detright=(ax-cx)*(by-cy),det=detleft-detright;if(0===detleft||0===detright||detleft>0!=detright>0)return det;const detsum=Math.abs(detleft+detright);return Math.abs(det)>=33306690738754716e-32*detsum?det:-function orient2dadapt(ax,ay,bx,by,cx,cy,detsum){let acxtail,acytail,bcxtail,bcytail,bvirt,c,ahi,alo,bhi,blo,_i,_j,_0,s1,s0,t1,t0,u3;const acx=ax-cx,bcx=bx-cx,acy=ay-cy,bcy=by-cy;s1=acx*bcy,c=134217729*acx,ahi=c-(c-acx),alo=acx-ahi,c=134217729*bcy,bhi=c-(c-bcy),blo=bcy-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acy*bcx,c=134217729*acy,ahi=c-(c-acy),alo=acy-ahi,c=134217729*bcx,bhi=c-(c-bcx),blo=bcx-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,orient2d_B[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,orient2d_B[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,orient2d_B[2]=_j-(u3-bvirt)+(_i-bvirt),orient2d_B[3]=u3;let det=function util_estimate(elen,e){let Q=e[0];for(let i=1;i<elen;i++)Q+=e[i];return Q}(4,orient2d_B),errbound=22204460492503146e-32*detsum;if(det>=errbound||-det>=errbound)return det;if(bvirt=ax-acx,acxtail=ax-(acx+bvirt)+(bvirt-cx),bvirt=bx-bcx,bcxtail=bx-(bcx+bvirt)+(bvirt-cx),bvirt=ay-acy,acytail=ay-(acy+bvirt)+(bvirt-cy),bvirt=by-bcy,bcytail=by-(bcy+bvirt)+(bvirt-cy),0===acxtail&&0===acytail&&0===bcxtail&&0===bcytail)return det;if(errbound=11093356479670487e-47*detsum+33306690738754706e-32*Math.abs(det),det+=acx*bcytail+bcy*acxtail-(acy*bcxtail+bcx*acytail),det>=errbound||-det>=errbound)return det;s1=acxtail*bcy,c=134217729*acxtail,ahi=c-(c-acxtail),alo=acxtail-ahi,c=134217729*bcy,bhi=c-(c-bcy),blo=bcy-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acytail*bcx,c=134217729*acytail,ahi=c-(c-acytail),alo=acytail-ahi,c=134217729*bcx,bhi=c-(c-bcx),blo=bcx-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,u[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,u[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,u[2]=_j-(u3-bvirt)+(_i-bvirt),u[3]=u3;const C1len=util_sum(4,orient2d_B,4,u,C1);s1=acx*bcytail,c=134217729*acx,ahi=c-(c-acx),alo=acx-ahi,c=134217729*bcytail,bhi=c-(c-bcytail),blo=bcytail-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acy*bcxtail,c=134217729*acy,ahi=c-(c-acy),alo=acy-ahi,c=134217729*bcxtail,bhi=c-(c-bcxtail),blo=bcxtail-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,u[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,u[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,u[2]=_j-(u3-bvirt)+(_i-bvirt),u[3]=u3;const C2len=util_sum(C1len,C1,4,u,C2);s1=acxtail*bcytail,c=134217729*acxtail,ahi=c-(c-acxtail),alo=acxtail-ahi,c=134217729*bcytail,bhi=c-(c-bcytail),blo=bcytail-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acytail*bcxtail,c=134217729*acytail,ahi=c-(c-acytail),alo=acytail-ahi,c=134217729*bcxtail,bhi=c-(c-bcxtail),blo=bcxtail-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,u[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,u[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,u[2]=_j-(u3-bvirt)+(_i-bvirt),u[3]=u3;const Dlen=util_sum(C2len,C2,4,u,orient2d_D);return orient2d_D[Dlen-1]}(ax,ay,bx,by,cx,cy,detsum)}vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(8),vec(8),vec(8),vec(4),vec(8),vec(8),vec(8),vec(12);vec(192),vec(192);vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(8),vec(8),vec(8),vec(8),vec(8),vec(8),vec(8),vec(8),vec(8),vec(4),vec(4),vec(4),vec(8),vec(16),vec(16),vec(16),vec(32),vec(32),vec(48),vec(64);vec(1152),vec(1152);vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(4),vec(24),vec(24),vec(24),vec(24),vec(24),vec(24),vec(24),vec(24),vec(24),vec(24),vec(1152),vec(1152),vec(1152),vec(1152),vec(1152),vec(2304),vec(2304),vec(3456),vec(5760),vec(8),vec(8),vec(8),vec(16),vec(24),vec(48),vec(48),vec(96),vec(192),vec(384),vec(384),vec(384),vec(768);vec(96),vec(96),vec(96),vec(1152);const delaunator_EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(points,getX=defaultGetX,getY=defaultGetY){const n=points.length,coords=new Float64Array(2*n);for(let i=0;i<n;i++){const p=points[i];coords[2*i]=getX(p),coords[2*i+1]=getY(p)}return new Delaunator(coords)}constructor(coords){const n=coords.length>>1;if(n>0&&"number"!=typeof coords[0])throw new Error("Expected coords to contain numbers.");this.coords=coords;const maxTriangles=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*maxTriangles),this._halfedges=new Int32Array(3*maxTriangles),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords,_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}=this,n=coords.length>>1;let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i=0;i<n;i++){const x=coords[2*i],y=coords[2*i+1];x<minX&&(minX=x),y<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y),this._ids[i]=i}const cx=(minX+maxX)/2,cy=(minY+maxY)/2;let i0,i1,i2,minDist=1/0;for(let i=0;i<n;i++){const d=dist(cx,cy,coords[2*i],coords[2*i+1]);d<minDist&&(i0=i,minDist=d)}const i0x=coords[2*i0],i0y=coords[2*i0+1];minDist=1/0;for(let i=0;i<n;i++){if(i===i0)continue;const d=dist(i0x,i0y,coords[2*i],coords[2*i+1]);d<minDist&&d>0&&(i1=i,minDist=d)}let i1x=coords[2*i1],i1y=coords[2*i1+1],minRadius=1/0;for(let i=0;i<n;i++){if(i===i0||i===i1)continue;const r=circumradius(i0x,i0y,i1x,i1y,coords[2*i],coords[2*i+1]);r<minRadius&&(i2=i,minRadius=r)}let i2x=coords[2*i2],i2y=coords[2*i2+1];if(minRadius===1/0){for(let i=0;i<n;i++)this._dists[i]=coords[2*i]-coords[0]||coords[2*i+1]-coords[1];quicksort(this._ids,this._dists,0,n-1);const hull=new Uint32Array(n);let j=0;for(let i=0,d0=-1/0;i<n;i++){const id=this._ids[i];this._dists[id]>d0&&(hull[j++]=id,d0=this._dists[id])}return this.hull=hull.subarray(0,j),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(orient2d(i0x,i0y,i1x,i1y,i2x,i2y)<0){const i=i1,x=i1x,y=i1y;i1=i2,i1x=i2x,i1y=i2y,i2=i,i2x=x,i2y=y}const center=function circumcenter(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex);return{x:ax+(ey*bl-dy*cl)*d,y:ay+(dx*cl-ex*bl)*d}}(i0x,i0y,i1x,i1y,i2x,i2y);this._cx=center.x,this._cy=center.y;for(let i=0;i<n;i++)this._dists[i]=dist(coords[2*i],coords[2*i+1],center.x,center.y);quicksort(this._ids,this._dists,0,n-1),this._hullStart=i0;let hullSize=3;hullNext[i0]=hullPrev[i2]=i1,hullNext[i1]=hullPrev[i0]=i2,hullNext[i2]=hullPrev[i1]=i0,hullTri[i0]=0,hullTri[i1]=1,hullTri[i2]=2,hullHash.fill(-1),hullHash[this._hashKey(i0x,i0y)]=i0,hullHash[this._hashKey(i1x,i1y)]=i1,hullHash[this._hashKey(i2x,i2y)]=i2,this.trianglesLen=0,this._addTriangle(i0,i1,i2,-1,-1,-1);for(let xp,yp,k=0;k<this._ids.length;k++){const i=this._ids[k],x=coords[2*i],y=coords[2*i+1];if(k>0&&Math.abs(x-xp)<=delaunator_EPSILON&&Math.abs(y-yp)<=delaunator_EPSILON)continue;if(xp=x,yp=y,i===i0||i===i1||i===i2)continue;let start=0;for(let j=0,key=this._hashKey(x,y);j<this._hashSize&&(start=hullHash[(key+j)%this._hashSize],-1===start||start===hullNext[start]);j++);start=hullPrev[start];let q,e=start;for(;q=hullNext[e],orient2d(x,y,coords[2*e],coords[2*e+1],coords[2*q],coords[2*q+1])>=0;)if(e=q,e===start){e=-1;break}if(-1===e)continue;let t=this._addTriangle(e,i,hullNext[e],-1,-1,hullTri[e]);hullTri[i]=this._legalize(t+2),hullTri[e]=t,hullSize++;let n=hullNext[e];for(;q=hullNext[n],orient2d(x,y,coords[2*n],coords[2*n+1],coords[2*q],coords[2*q+1])<0;)t=this._addTriangle(n,i,q,hullTri[i],-1,hullTri[n]),hullTri[i]=this._legalize(t+2),hullNext[n]=n,hullSize--,n=q;if(e===start)for(;q=hullPrev[e],orient2d(x,y,coords[2*q],coords[2*q+1],coords[2*e],coords[2*e+1])<0;)t=this._addTriangle(q,i,e,-1,hullTri[e],hullTri[q]),this._legalize(t+2),hullTri[q]=t,hullNext[e]=e,hullSize--,e=q;this._hullStart=hullPrev[i]=e,hullNext[e]=hullPrev[n]=i,hullNext[i]=n,hullHash[this._hashKey(x,y)]=i,hullHash[this._hashKey(coords[2*e],coords[2*e+1])]=e}this.hull=new Uint32Array(hullSize);for(let i=0,e=this._hullStart;i<hullSize;i++)this.hull[i]=e,e=hullNext[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(x,y){return Math.floor(function pseudoAngle(dx,dy){const p=dx/(Math.abs(dx)+Math.abs(dy));return(dy>0?3-p:1+p)/4}(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:triangles,_halfedges:halfedges,coords}=this;let i=0,ar=0;for(;;){const b=halfedges[a],a0=a-a%3;if(ar=a0+(a+2)%3,-1===b){if(0===i)break;a=EDGE_STACK[--i];continue}const b0=b-b%3,al=a0+(a+1)%3,bl=b0+(b+2)%3,p0=triangles[ar],pr=triangles[a],pl=triangles[al],p1=triangles[bl];if(inCircle(coords[2*p0],coords[2*p0+1],coords[2*pr],coords[2*pr+1],coords[2*pl],coords[2*pl+1],coords[2*p1],coords[2*p1+1])){triangles[a]=p1,triangles[b]=p0;const hbl=halfedges[bl];if(-1===hbl){let e=this._hullStart;do{if(this._hullTri[e]===bl){this._hullTri[e]=a;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(a,hbl),this._link(b,halfedges[ar]),this._link(ar,bl);const br=b0+(b+1)%3;i<EDGE_STACK.length&&(EDGE_STACK[i++]=br)}else{if(0===i)break;a=EDGE_STACK[--i]}}return ar}_link(a,b){this._halfedges[a]=b,-1!==b&&(this._halfedges[b]=a)}_addTriangle(i0,i1,i2,a,b,c){const t=this.trianglesLen;return this._triangles[t]=i0,this._triangles[t+1]=i1,this._triangles[t+2]=i2,this._link(t,a),this._link(t+1,b),this._link(t+2,c),this.trianglesLen+=3,t}}function dist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}function inCircle(ax,ay,bx,by,cx,cy,px,py){const dx=ax-px,dy=ay-py,ex=bx-px,ey=by-py,fx=cx-px,fy=cy-py,bp=ex*ex+ey*ey,cp=fx*fx+fy*fy;return dx*(ey*cp-bp*fy)-dy*(ex*cp-bp*fx)+(dx*dx+dy*dy)*(ex*fy-ey*fx)<0}function circumradius(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex),x=(ey*bl-dy*cl)*d,y=(dx*cl-ex*bl)*d;return x*x+y*y}function quicksort(ids,dists,left,right){if(right-left<=20)for(let i=left+1;i<=right;i++){const temp=ids[i],tempDist=dists[temp];let j=i-1;for(;j>=left&&dists[ids[j]]>tempDist;)ids[j+1]=ids[j--];ids[j+1]=temp}else{let i=left+1,j=right;delaunator_swap(ids,left+right>>1,i),dists[ids[left]]>dists[ids[right]]&&delaunator_swap(ids,left,right),dists[ids[i]]>dists[ids[right]]&&delaunator_swap(ids,i,right),dists[ids[left]]>dists[ids[i]]&&delaunator_swap(ids,left,i);const temp=ids[i],tempDist=dists[temp];for(;;){do{i++}while(dists[ids[i]]<tempDist);do{j--}while(dists[ids[j]]>tempDist);if(j<i)break;delaunator_swap(ids,i,j)}ids[left+1]=ids[j],ids[j]=temp,right-i+1>=j-left?(quicksort(ids,dists,i,right),quicksort(ids,dists,left,j-1)):(quicksort(ids,dists,left,j-1),quicksort(ids,dists,i,right))}}function delaunator_swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}class path_Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(x,y){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(x,y){this._+=`L${this._x1=+x},${this._y1=+y}`}arc(x,y,r){const x0=(x=+x)+(r=+r),y0=y=+y;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${x0},${y0}`:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(this._+=`A${r},${r},0,1,1,${x-r},${y}A${r},${r},0,1,1,${this._x1=x0},${this._y1=y0}`)}rect(x,y,w,h){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}h${+w}v${+h}h${-w}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(x,y){this._.push([x,y])}closePath(){this._.push(this._[0].slice())}lineTo(x,y){this._.push([x,y])}value(){return this._.length?this._:null}}class Voronoi{constructor(delaunay,[xmin,ymin,xmax,ymax]=[0,0,960,500]){if(!((xmax=+xmax)>=(xmin=+xmin)&&(ymax=+ymax)>=(ymin=+ymin)))throw new Error("invalid bounds");this.delaunay=delaunay,this._circumcenters=new Float64Array(2*delaunay.points.length),this.vectors=new Float64Array(2*delaunay.points.length),this.xmax=xmax,this.xmin=xmin,this.ymax=ymax,this.ymin=ymin,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points,hull,triangles},vectors}=this,circumcenters=this.circumcenters=this._circumcenters.subarray(0,triangles.length/3*2);for(let x,y,i=0,j=0,n=triangles.length;i<n;i+=3,j+=2){const t1=2*triangles[i],t2=2*triangles[i+1],t3=2*triangles[i+2],x1=points[t1],y1=points[t1+1],x2=points[t2],y2=points[t2+1],x3=points[t3],y3=points[t3+1],dx=x2-x1,dy=y2-y1,ex=x3-x1,ey=y3-y1,ab=2*(dx*ey-dy*ex);if(Math.abs(ab)<1e-9){let a=1e9;const r=2*triangles[0];a*=Math.sign((points[r]-x1)*ey-(points[r+1]-y1)*ex),x=(x1+x3)/2-a*ey,y=(y1+y3)/2+a*ex}else{const d=1/ab,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey;x=x1+(ey*bl-dy*cl)*d,y=y1+(dx*cl-ex*bl)*d}circumcenters[j]=x,circumcenters[j+1]=y}let p0,x0,y0,h=hull[hull.length-1],p1=4*h,x1=points[2*h],y1=points[2*h+1];vectors.fill(0);for(let i=0;i<hull.length;++i)h=hull[i],p0=p1,x0=x1,y0=y1,p1=4*h,x1=points[2*h],y1=points[2*h+1],vectors[p0+2]=vectors[p1]=y0-y1,vectors[p0+3]=vectors[p1+1]=x1-x0}render(context){const buffer=null==context?context=new path_Path:void 0,{delaunay:{halfedges,inedges,hull},circumcenters,vectors}=this;if(hull.length<=1)return null;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*Math.floor(i/3),tj=2*Math.floor(j/3),xi=circumcenters[ti],yi=circumcenters[ti+1],xj=circumcenters[tj],yj=circumcenters[tj+1];this._renderSegment(xi,yi,xj,yj,context)}let h0,h1=hull[hull.length-1];for(let i=0;i<hull.length;++i){h0=h1,h1=hull[i];const t=2*Math.floor(inedges[h1]/3),x=circumcenters[t],y=circumcenters[t+1],v=4*h0,p=this._project(x,y,vectors[v+2],vectors[v+3]);p&&this._renderSegment(x,y,p[0],p[1],context)}return buffer&&buffer.value()}renderBounds(context){const buffer=null==context?context=new path_Path:void 0;return context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),buffer&&buffer.value()}renderCell(i,context){const buffer=null==context?context=new path_Path:void 0,points=this._clip(i);if(null===points||!points.length)return;context.moveTo(points[0],points[1]);let n=points.length;for(;points[0]===points[n-2]&&points[1]===points[n-1]&&n>1;)n-=2;for(let i=2;i<n;i+=2)points[i]===points[i-2]&&points[i+1]===points[i-1]||context.lineTo(points[i],points[i+1]);return context.closePath(),buffer&&buffer.value()}*cellPolygons(){const{delaunay:{points}}=this;for(let i=0,n=points.length/2;i<n;++i){const cell=this.cellPolygon(i);cell&&(cell.index=i,yield cell)}}cellPolygon(i){const polygon=new Polygon;return this.renderCell(i,polygon),polygon.value()}_renderSegment(x0,y0,x1,y1,context){let S;const c0=this._regioncode(x0,y0),c1=this._regioncode(x1,y1);0===c0&&0===c1?(context.moveTo(x0,y0),context.lineTo(x1,y1)):(S=this._clipSegment(x0,y0,x1,y1,c0,c1))&&(context.moveTo(S[0],S[1]),context.lineTo(S[2],S[3]))}contains(i,x,y){return(x=+x)==x&&(y=+y)==y&&this.delaunay._step(i,x,y)===i}*neighbors(i){const ci=this._clip(i);if(ci)for(const j of this.delaunay.neighbors(i)){const cj=this._clip(j);if(cj)loop:for(let ai=0,li=ci.length;ai<li;ai+=2)for(let aj=0,lj=cj.length;aj<lj;aj+=2)if(ci[ai]==cj[aj]&&ci[ai+1]==cj[aj+1]&&ci[(ai+2)%li]==cj[(aj+lj-2)%lj]&&ci[(ai+3)%li]==cj[(aj+lj-1)%lj]){yield j;break loop}}}_cell(i){const{circumcenters,delaunay:{inedges,halfedges,triangles}}=this,e0=inedges[i];if(-1===e0)return null;const points=[];let e=e0;do{const t=Math.floor(e/3);if(points.push(circumcenters[2*t],circumcenters[2*t+1]),e=e%3==2?e-2:e+1,triangles[e]!==i)break;e=halfedges[e]}while(e!==e0&&-1!==e);return points}_clip(i){if(0===i&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const points=this._cell(i);if(null===points)return null;const{vectors:V}=this,v=4*i;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],V[v+2],V[v+3]):this._clipFinite(i,points)}_clipFinite(i,points){const n=points.length;let x0,y0,c0,e0,P=null,x1=points[n-2],y1=points[n-1],c1=this._regioncode(x1,y1),e1=0;for(let j=0;j<n;j+=2)if(x0=x1,y0=y1,x1=points[j],y1=points[j+1],c0=c1,c1=this._regioncode(x1,y1),0===c0&&0===c1)e0=e1,e1=0,P?P.push(x1,y1):P=[x1,y1];else{let S,sx0,sy0,sx1,sy1;if(0===c0){if(null===(S=this._clipSegment(x0,y0,x1,y1,c0,c1)))continue;[sx0,sy0,sx1,sy1]=S}else{if(null===(S=this._clipSegment(x1,y1,x0,y0,c1,c0)))continue;[sx1,sy1,sx0,sy0]=S,e0=e1,e1=this._edgecode(sx0,sy0),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx0,sy0):P=[sx0,sy0]}e0=e1,e1=this._edgecode(sx1,sy1),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx1,sy1):P=[sx1,sy1]}if(P)e0=e1,e1=this._edgecode(P[0],P[1]),e0&&e1&&this._edge(i,e0,e1,P,P.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return P}_clipSegment(x0,y0,x1,y1,c0,c1){for(;;){if(0===c0&&0===c1)return[x0,y0,x1,y1];if(c0&c1)return null;let x,y,c=c0||c1;8&c?(x=x0+(x1-x0)*(this.ymax-y0)/(y1-y0),y=this.ymax):4&c?(x=x0+(x1-x0)*(this.ymin-y0)/(y1-y0),y=this.ymin):2&c?(y=y0+(y1-y0)*(this.xmax-x0)/(x1-x0),x=this.xmax):(y=y0+(y1-y0)*(this.xmin-x0)/(x1-x0),x=this.xmin),c0?(x0=x,y0=y,c0=this._regioncode(x0,y0)):(x1=x,y1=y,c1=this._regioncode(x1,y1))}}_clipInfinite(i,points,vx0,vy0,vxn,vyn){let p,P=Array.from(points);if((p=this._project(P[0],P[1],vx0,vy0))&&P.unshift(p[0],p[1]),(p=this._project(P[P.length-2],P[P.length-1],vxn,vyn))&&P.push(p[0],p[1]),P=this._clipFinite(i,P))for(let c0,j=0,n=P.length,c1=this._edgecode(P[n-2],P[n-1]);j<n;j+=2)c0=c1,c1=this._edgecode(P[j],P[j+1]),c0&&c1&&(j=this._edge(i,c0,c1,P,j),n=P.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(P=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return P}_edge(i,e0,e1,P,j){for(;e0!==e1;){let x,y;switch(e0){case 5:e0=4;continue;case 4:e0=6,x=this.xmax,y=this.ymin;break;case 6:e0=2;continue;case 2:e0=10,x=this.xmax,y=this.ymax;break;case 10:e0=8;continue;case 8:e0=9,x=this.xmin,y=this.ymax;break;case 9:e0=1;continue;case 1:e0=5,x=this.xmin,y=this.ymin}P[j]===x&&P[j+1]===y||!this.contains(i,x,y)||(P.splice(j,0,x,y),j+=2)}if(P.length>4)for(let i=0;i<P.length;i+=2){const j=(i+2)%P.length,k=(i+4)%P.length;(P[i]===P[j]&&P[j]===P[k]||P[i+1]===P[j+1]&&P[j+1]===P[k+1])&&(P.splice(j,2),i-=2)}return j}_project(x0,y0,vx,vy){let c,x,y,t=1/0;if(vy<0){if(y0<=this.ymin)return null;(c=(this.ymin-y0)/vy)<t&&(y=this.ymin,x=x0+(t=c)*vx)}else if(vy>0){if(y0>=this.ymax)return null;(c=(this.ymax-y0)/vy)<t&&(y=this.ymax,x=x0+(t=c)*vx)}if(vx>0){if(x0>=this.xmax)return null;(c=(this.xmax-x0)/vx)<t&&(x=this.xmax,y=y0+(t=c)*vy)}else if(vx<0){if(x0<=this.xmin)return null;(c=(this.xmin-x0)/vx)<t&&(x=this.xmin,y=y0+(t=c)*vy)}return[x,y]}_edgecode(x,y){return(x===this.xmin?1:x===this.xmax?2:0)|(y===this.ymin?4:y===this.ymax?8:0)}_regioncode(x,y){return(x<this.xmin?1:x>this.xmax?2:0)|(y<this.ymin?4:y>this.ymax?8:0)}}const delaunay_tau=2*Math.PI,delaunay_pow=Math.pow;function pointX(p){return p[0]}function pointY(p){return p[1]}function jitter(x,y,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}class Delaunay{static from(points,fx=pointX,fy=pointY,that){return new Delaunay("length"in points?function flatArray(points,fx,fy,that){const n=points.length,array=new Float64Array(2*n);for(let i=0;i<n;++i){const p=points[i];array[2*i]=fx.call(that,p,i,points),array[2*i+1]=fy.call(that,p,i,points)}return array}(points,fx,fy,that):Float64Array.from(function*flatIterable(points,fx,fy,that){let i=0;for(const p of points)yield fx.call(that,p,i,points),yield fy.call(that,p,i,points),++i}(points,fx,fy,that)))}constructor(points){this._delaunator=new Delaunator(points),this.inedges=new Int32Array(points.length/2),this._hullIndex=new Int32Array(points.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const d=this._delaunator,points=this.points;if(d.hull&&d.hull.length>2&&function delaunay_collinear(d){const{triangles,coords}=d;for(let i=0;i<triangles.length;i+=3){const a=2*triangles[i],b=2*triangles[i+1],c=2*triangles[i+2];if((coords[c]-coords[a])*(coords[b+1]-coords[a+1])-(coords[b]-coords[a])*(coords[c+1]-coords[a+1])>1e-10)return!1}return!0}(d)){this.collinear=Int32Array.from({length:points.length/2},((_,i)=>i)).sort(((i,j)=>points[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]));const e=this.collinear[0],f=this.collinear[this.collinear.length-1],bounds=[points[2*e],points[2*e+1],points[2*f],points[2*f+1]],r=1e-8*Math.hypot(bounds[3]-bounds[1],bounds[2]-bounds[0]);for(let i=0,n=points.length/2;i<n;++i){const p=jitter(points[2*i],points[2*i+1],r);points[2*i]=p[0],points[2*i+1]=p[1]}this._delaunator=new Delaunator(points)}else delete this.collinear;const halfedges=this.halfedges=this._delaunator.halfedges,hull=this.hull=this._delaunator.hull,triangles=this.triangles=this._delaunator.triangles,inedges=this.inedges.fill(-1),hullIndex=this._hullIndex.fill(-1);for(let e=0,n=halfedges.length;e<n;++e){const p=triangles[e%3==2?e-2:e+1];-1!==halfedges[e]&&-1!==inedges[p]||(inedges[p]=e)}for(let i=0,n=hull.length;i<n;++i)hullIndex[hull[i]]=i;hull.length<=2&&hull.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=hull[0],inedges[hull[0]]=1,2===hull.length&&(inedges[hull[1]]=0,this.triangles[1]=hull[1],this.triangles[2]=hull[1]))}voronoi(bounds){return new Voronoi(this,bounds)}*neighbors(i){const{inedges,hull,_hullIndex,halfedges,triangles,collinear}=this;if(collinear){const l=collinear.indexOf(i);return l>0&&(yield collinear[l-1]),void(l<collinear.length-1&&(yield collinear[l+1]))}const e0=inedges[i];if(-1===e0)return;let e=e0,p0=-1;do{if(yield p0=triangles[e],e=e%3==2?e-2:e+1,triangles[e]!==i)return;if(e=halfedges[e],-1===e){const p=hull[(_hullIndex[i]+1)%hull.length];return void(p!==p0&&(yield p))}}while(e!==e0)}find(x,y,i=0){if((x=+x)!=x||(y=+y)!=y)return-1;const i0=i;let c;for(;(c=this._step(i,x,y))>=0&&c!==i&&c!==i0;)i=c;return c}_step(i,x,y){const{inedges,hull,_hullIndex,halfedges,triangles,points}=this;if(-1===inedges[i]||!points.length)return(i+1)%(points.length>>1);let c=i,dc=delaunay_pow(x-points[2*i],2)+delaunay_pow(y-points[2*i+1],2);const e0=inedges[i];let e=e0;do{let t=triangles[e];const dt=delaunay_pow(x-points[2*t],2)+delaunay_pow(y-points[2*t+1],2);if(dt<dc&&(dc=dt,c=t),e=e%3==2?e-2:e+1,triangles[e]!==i)break;if(e=halfedges[e],-1===e){if(e=hull[(_hullIndex[i]+1)%hull.length],e!==t&&delaunay_pow(x-points[2*e],2)+delaunay_pow(y-points[2*e+1],2)<dc)return e;break}}while(e!==e0);return c}render(context){const buffer=null==context?context=new path_Path:void 0,{points,halfedges,triangles}=this;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*triangles[i],tj=2*triangles[j];context.moveTo(points[ti],points[ti+1]),context.lineTo(points[tj],points[tj+1])}return this.renderHull(context),buffer&&buffer.value()}renderPoints(context,r){void 0!==r||context&&"function"==typeof context.moveTo||(r=context,context=null),r=null==r?2:+r;const buffer=null==context?context=new path_Path:void 0,{points}=this;for(let i=0,n=points.length;i<n;i+=2){const x=points[i],y=points[i+1];context.moveTo(x+r,y),context.arc(x,y,r,0,delaunay_tau)}return buffer&&buffer.value()}renderHull(context){const buffer=null==context?context=new path_Path:void 0,{hull,points}=this,h=2*hull[0],n=hull.length;context.moveTo(points[h],points[h+1]);for(let i=1;i<n;++i){const h=2*hull[i];context.lineTo(points[h],points[h+1])}return context.closePath(),buffer&&buffer.value()}hullPolygon(){const polygon=new Polygon;return this.renderHull(polygon),polygon.value()}renderTriangle(i,context){const buffer=null==context?context=new path_Path:void 0,{points,triangles}=this,t0=2*triangles[i*=3],t1=2*triangles[i+1],t2=2*triangles[i+2];return context.moveTo(points[t0],points[t0+1]),context.lineTo(points[t1],points[t1+1]),context.lineTo(points[t2],points[t2+1]),context.closePath(),buffer&&buffer.value()}*trianglePolygons(){const{triangles}=this;for(let i=0,n=triangles.length/3;i<n;++i)yield this.trianglePolygon(i)}trianglePolygon(i){const polygon=new Polygon;return this.renderTriangle(i,polygon),polygon.value()}}function vega_voronoi_module_Voronoi(params){Transform.call(this,null,params)}vega_voronoi_module_Voronoi.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const defaultExtent=[-1e5,-1e5,1e5,1e5];function toPathString(p){const x=p[0][0],y=p[0][1];let n=p.length-1;for(;p[n][0]===x&&p[n][1]===y;--n);return"M"+p.slice(0,n+1).join("L")+"Z"}inherits(vega_voronoi_module_Voronoi,Transform,{transform(_,pulse){const as=_.as||"path",data=pulse.source;if(!data||!data.length)return pulse;let s=_.size;s=s?[0,0,s[0],s[1]]:(s=_.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:defaultExtent;const voronoi=this.value=Delaunay.from(data,_.x,_.y).voronoi(s);for(let i=0,n=data.length;i<n;++i){const polygon=voronoi.cellPolygon(i);data[i][as]=polygon?toPathString(polygon):null}return pulse.reflow(_.modified()).modifies(as)}});var cloudRadians=Math.PI/180,ch=2048;function cloud(){var text,font,fontSize,fontStyle,fontWeight,rotate,padding,size=[256,256],spiral=archimedeanSpiral,words=[],random=Math.random,cloud={};function place(board,tag,bounds){for(var dxdy,dx,dy,startX=tag.x,startY=tag.y,maxDelta=Math.sqrt(size[0]*size[0]+size[1]*size[1]),s=spiral(size),dt=random()<.5?1:-1,t=-dt;(dxdy=s(t+=dt))&&(dx=~~dxdy[0],dy=~~dxdy[1],!(Math.min(Math.abs(dx),Math.abs(dy))>=maxDelta));)if(tag.x=startX+dx,tag.y=startY+dy,!(tag.x+tag.x0<0||tag.y+tag.y0<0||tag.x+tag.x1>size[0]||tag.y+tag.y1>size[1])&&(!bounds||!cloudCollide(tag,board,size[0]))&&(!bounds||collideRects(tag,bounds))){for(var last,sprite=tag.sprite,w=tag.width>>5,sw=size[0]>>5,lx=tag.x-(w<<4),sx=127&lx,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),j=0;j<h;j++){last=0;for(var i=0;i<=w;i++)board[x+i]|=last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0);x+=sw}return tag.sprite=null,!0}return!1}return cloud.layout=function(){for(var contextAndRatio=function getContext(canvas){canvas.width=canvas.height=1;var ratio=Math.sqrt(canvas.getContext("2d").getImageData(0,0,1,1).data.length>>2);canvas.width=2048/ratio,canvas.height=ch/ratio;var context=canvas.getContext("2d");return context.fillStyle=context.strokeStyle="red",context.textAlign="center",{context,ratio}}(domCanvas()),board=function zeroArray(n){var a=[],i=-1;for(;++i<n;)a[i]=0;return a}((size[0]>>5)*size[1]),bounds=null,n=words.length,i=-1,tags=[],data=words.map((d=>({text:text(d),font:font(d),style:fontStyle(d),weight:fontWeight(d),rotate:rotate(d),size:~~(fontSize(d)+1e-14),padding:padding(d),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:d}))).sort(((a,b)=>b.size-a.size));++i<n;){var d=data[i];d.x=size[0]*(random()+.5)>>1,d.y=size[1]*(random()+.5)>>1,cloudSprite(contextAndRatio,d,data,i),d.hasText&&place(board,d,bounds)&&(tags.push(d),bounds?cloudBounds(bounds,d):bounds=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}],d.x-=size[0]>>1,d.y-=size[1]>>1)}return tags},cloud.words=function(_){return arguments.length?(words=_,cloud):words},cloud.size=function(_){return arguments.length?(size=[+_[0],+_[1]],cloud):size},cloud.font=function(_){return arguments.length?(font=functor(_),cloud):font},cloud.fontStyle=function(_){return arguments.length?(fontStyle=functor(_),cloud):fontStyle},cloud.fontWeight=function(_){return arguments.length?(fontWeight=functor(_),cloud):fontWeight},cloud.rotate=function(_){return arguments.length?(rotate=functor(_),cloud):rotate},cloud.text=function(_){return arguments.length?(text=functor(_),cloud):text},cloud.spiral=function(_){return arguments.length?(spiral=spirals[_]||_,cloud):spiral},cloud.fontSize=function(_){return arguments.length?(fontSize=functor(_),cloud):fontSize},cloud.padding=function(_){return arguments.length?(padding=functor(_),cloud):padding},cloud.random=function(_){return arguments.length?(random=_,cloud):random},cloud}function cloudSprite(contextAndRatio,d,data,di){if(!d.sprite){var c=contextAndRatio.context,ratio=contextAndRatio.ratio;c.clearRect(0,0,2048/ratio,ch/ratio);var w,w32,h,i,j,x=0,y=0,maxh=0,n=data.length;for(--di;++di<n;){if(d=data[di],c.save(),c.font=d.style+" "+d.weight+" "+~~((d.size+1)/ratio)+"px "+d.font,w=c.measureText(d.text+"m").width*ratio,h=d.size<<1,d.rotate){var sr=Math.sin(d.rotate*cloudRadians),cr=Math.cos(d.rotate*cloudRadians),wcr=w*cr,wsr=w*sr,hcr=h*cr,hsr=h*sr;w=Math.max(Math.abs(wcr+hsr),Math.abs(wcr-hsr))+31>>5<<5,h=~~Math.max(Math.abs(wsr+hcr),Math.abs(wsr-hcr))}else w=w+31>>5<<5;if(h>maxh&&(maxh=h),x+w>=2048&&(x=0,y+=maxh,maxh=0),y+h>=ch)break;c.translate((x+(w>>1))/ratio,(y+(h>>1))/ratio),d.rotate&&c.rotate(d.rotate*cloudRadians),c.fillText(d.text,0,0),d.padding&&(c.lineWidth=2*d.padding,c.strokeText(d.text,0,0)),c.restore(),d.width=w,d.height=h,d.xoff=x,d.yoff=y,d.x1=w>>1,d.y1=h>>1,d.x0=-d.x1,d.y0=-d.y1,d.hasText=!0,x+=w}for(var pixels=c.getImageData(0,0,2048/ratio,ch/ratio).data,sprite=[];--di>=0;)if((d=data[di]).hasText){for(w32=(w=d.width)>>5,h=d.y1-d.y0,i=0;i<h*w32;i++)sprite[i]=0;if(null==(x=d.xoff))return;y=d.yoff;var seen=0,seenRow=-1;for(j=0;j<h;j++){for(i=0;i<w;i++){var k=w32*j+(i>>5),m=pixels[2048*(y+j)+(x+i)<<2]?1<<31-i%32:0;sprite[k]|=m,seen|=m}seen?seenRow=j:(d.y0++,h--,j--,y++)}d.y1=d.y0+seenRow,d.sprite=sprite.slice(0,(d.y1-d.y0)*w32)}}}function cloudCollide(tag,board,sw){sw>>=5;for(var last,sprite=tag.sprite,w=tag.width>>5,lx=tag.x-(w<<4),sx=127&lx,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),j=0;j<h;j++){last=0;for(var i=0;i<=w;i++)if((last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0))&board[x+i])return!0;x+=sw}return!1}function cloudBounds(bounds,d){var b0=bounds[0],b1=bounds[1];d.x+d.x0<b0.x&&(b0.x=d.x+d.x0),d.y+d.y0<b0.y&&(b0.y=d.y+d.y0),d.x+d.x1>b1.x&&(b1.x=d.x+d.x1),d.y+d.y1>b1.y&&(b1.y=d.y+d.y1)}function collideRects(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function archimedeanSpiral(size){var e=size[0]/size[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function functor(d){return"function"==typeof d?d:function(){return d}}var spirals={archimedean:archimedeanSpiral,rectangular:function rectangularSpiral(size){var dx=4*size[0]/size[1],x=0,y=0;return function(t){var sign=t<0?-1:1;switch(Math.sqrt(1+4*sign*t)-sign&3){case 0:x+=dx;break;case 1:y+=4;break;case 2:x-=dx;break;default:y-=4}return[x,y]}}};const vega_wordcloud_module_Output=["x","y","font","fontSize","fontStyle","fontWeight","angle"],vega_wordcloud_module_Params=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wordcloud(params){Transform.call(this,cloud(),params)}Wordcloud.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:vega_wordcloud_module_Output}]},inherits(Wordcloud,Transform,{transform(_,pulse){!_.size||_.size[0]&&_.size[1]||error("Wordcloud size dimensions must be non-zero.");const mod=_.modified();if(!(mod||pulse.changed(pulse.ADD_REM)||vega_wordcloud_module_Params.some((function modp(param){const p=_[param];return isFunction(p)&&pulse.modified(p.fields)}))))return;const data=pulse.materialize(pulse.SOURCE).source,layout=this.value,as=_.as||vega_wordcloud_module_Output;let range,fontSize=_.fontSize||14;if(isFunction(fontSize)?range=_.fontSizeRange:fontSize=vega_util_module_constant(fontSize),range){const fsize=fontSize,sizeScale=vega_scale_module_scale("sqrt")().domain(extent(data,fsize)).range(range);fontSize=x=>sizeScale(fsize(x))}data.forEach((t=>{t[as[0]]=NaN,t[as[1]]=NaN,t[as[3]]=0}));const words=layout.words(data).text(_.text).size(_.size||[500,500]).padding(_.padding||1).spiral(_.spiral||"archimedean").rotate(_.rotate||0).font(_.font||"sans-serif").fontStyle(_.fontStyle||"normal").fontWeight(_.fontWeight||"normal").fontSize(fontSize).random(random).layout(),size=layout.size(),dx=size[0]>>1,dy=size[1]>>1,n=words.length;for(let w,t,i=0;i<n;++i)w=words[i],t=w.datum,t[as[0]]=w.x+dx,t[as[1]]=w.y+dy,t[as[2]]=w.font,t[as[3]]=w.size,t[as[4]]=w.style,t[as[5]]=w.weight,t[as[6]]=w.rotate;return pulse.reflow(mod).modifies(as)}});const array8=n=>new Uint8Array(n),array16=n=>new Uint16Array(n),array32=n=>new Uint32Array(n);function vega_crossfilter_module_array(n,m,array){const copy=(m<257?array8:m<65537?array16:array32)(n);return array&&copy.set(array),copy}function Dimension(index,i,query){const bit=1<<i;return{one:bit,zero:~bit,range:query.slice(),bisect:index.bisect,index:index.index,size:index.size,onAdd(added,curr){const range=this.bisect(this.range,added.value),idx=added.index,lo=range[0],hi=range[1],n1=idx.length;let i;for(i=0;i<lo;++i)curr[idx[i]]|=bit;for(i=hi;i<n1;++i)curr[idx[i]]|=bit;return this}}}function SortedIndex(){let index=array32(0),value=[],size=0;return{insert:function insert(key,data,base){if(!data.length)return[];const n0=size,n1=data.length,addi=array32(n1);let oldv,oldi,i,addv=Array(n1);for(i=0;i<n1;++i)addv[i]=key(data[i]),addi[i]=i;if(addv=function vega_crossfilter_module_sort(values,index){return values.sort.call(index,((a,b)=>{const x=values[a],y=values[b];return x<y?-1:x>y?1:0})),function permute_permute(source,keys){return Array.from(keys,(key=>source[key]))}(values,index)}(addv,addi),n0)oldv=value,oldi=index,value=Array(n0+n1),index=array32(n0+n1),function vega_crossfilter_module_merge(base,value0,index0,n0,value1,index1,n1,value,index){let i,i0=0,i1=0;for(i=0;i0<n0&&i1<n1;++i)value0[i0]<value1[i1]?(value[i]=value0[i0],index[i]=index0[i0++]):(value[i]=value1[i1],index[i]=index1[i1++]+base);for(;i0<n0;++i0,++i)value[i]=value0[i0],index[i]=index0[i0];for(;i1<n1;++i1,++i)value[i]=value1[i1],index[i]=index1[i1]+base}(base,oldv,oldi,n0,addv,addi,n1,value,index);else{if(base>0)for(i=0;i<n1;++i)addi[i]+=base;value=addv,index=addi}return size=n0+n1,{index:addi,value:addv}},remove:function remove(num,map){const n=size;let idx,i,j;for(i=0;!map[index[i]]&&i<n;++i);for(j=i;i<n;++i)map[idx=index[i]]||(index[j]=idx,value[j]=value[i],++j);size=n-num},bisect:function bisect(range,array){let n;return array?n=array.length:(array=value,n=size),[bisectLeft(array,range[0],0,n),bisectRight(array,range[1],0,n)]},reindex:function reindex(map){for(let i=0,n=size;i<n;++i)index[i]=map[index[i]]},index:()=>index,size:()=>size}}function CrossFilter(params){Transform.call(this,function Bitmaps(){let width=8,data=[],seen=array32(0),curr=vega_crossfilter_module_array(0,width),prev=vega_crossfilter_module_array(0,width);return{data:()=>data,seen:()=>seen=function lengthen(array,length,copy){return array.length>=length?array:((copy=copy||new array.constructor(length)).set(array),copy)}(seen,data.length),add(array){for(let t,i=0,j=data.length,n=array.length;i<n;++i)t=array[i],t._index=j++,data.push(t)},remove(num,map){const n=data.length,copy=Array(n-num),reindex=data;let t,i,j;for(i=0;!map[i]&&i<n;++i)copy[i]=data[i],reindex[i]=i;for(j=i;i<n;++i)t=data[i],map[i]?reindex[i]=-1:(reindex[i]=j,curr[j]=curr[i],prev[j]=prev[i],copy[j]=t,t._index=j++),curr[i]=0;return data=copy,reindex},size:()=>data.length,curr:()=>curr,prev:()=>prev,reset:k=>prev[k]=curr[k],all:()=>width<257?255:width<65537?65535:4294967295,set(k,one){curr[k]|=one},clear(k,one){curr[k]&=~one},resize(n,m){(n>curr.length||m>width)&&(width=Math.max(m,width),curr=vega_crossfilter_module_array(n,width,curr),prev=vega_crossfilter_module_array(n,width))}}}(),params),this._indices=null,this._dims=null}function ResolveFilter(params){Transform.call(this,null,params)}CrossFilter.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},inherits(CrossFilter,Transform,{transform(_,pulse){return this._dims?_.modified("fields")||_.fields.some((f=>pulse.modified(f.fields)))?this.reinit(_,pulse):this.eval(_,pulse):this.init(_,pulse)},init(_,pulse){const fields=_.fields,query=_.query,indices=this._indices={},dims=this._dims=[],m=query.length;let key,index,i=0;for(;i<m;++i)key=fields[i].fname,index=indices[key]||(indices[key]=SortedIndex()),dims.push(Dimension(index,i,query[i]));return this.eval(_,pulse)},reinit(_,pulse){const output=pulse.materialize().fork(),fields=_.fields,query=_.query,indices=this._indices,dims=this._dims,bits=this.value,curr=bits.curr(),prev=bits.prev(),all=bits.all(),out=output.rem=output.add,mod=output.mod,m=query.length,adds={};let add,index,key,mods,remMap,modMap,i,n,f;if(prev.set(curr),pulse.rem.length&&(remMap=this.remove(_,pulse,output)),pulse.add.length&&bits.add(pulse.add),pulse.mod.length)for(modMap={},mods=pulse.mod,i=0,n=mods.length;i<n;++i)modMap[mods[i]._index]=1;for(i=0;i<m;++i)f=fields[i],(!dims[i]||_.modified("fields",i)||pulse.modified(f.fields))&&(key=f.fname,(add=adds[key])||(indices[key]=index=SortedIndex(),adds[key]=add=index.insert(f,pulse.source,0)),dims[i]=Dimension(index,i,query[i]).onAdd(add,curr));for(i=0,n=bits.data().length;i<n;++i)remMap[i]||(prev[i]!==curr[i]?out.push(i):modMap[i]&&curr[i]!==all&&mod.push(i));return bits.mask=(1<<m)-1,output},eval(_,pulse){const output=pulse.materialize().fork(),m=this._dims.length;let mask=0;return pulse.rem.length&&(this.remove(_,pulse,output),mask|=(1<<m)-1),_.modified("query")&&!_.modified("fields")&&(mask|=this.update(_,pulse,output)),pulse.add.length&&(this.insert(_,pulse,output),mask|=(1<<m)-1),pulse.mod.length&&(this.modify(pulse,output),mask|=(1<<m)-1),this.value.mask=mask,output},insert(_,pulse,output){const tuples=pulse.add,bits=this.value,dims=this._dims,indices=this._indices,fields=_.fields,adds={},out=output.add,n=bits.size()+tuples.length,m=dims.length;let j,key,add,k=bits.size();bits.resize(n,m),bits.add(tuples);const curr=bits.curr(),prev=bits.prev(),all=bits.all();for(j=0;j<m;++j)key=fields[j].fname,add=adds[key]||(adds[key]=indices[key].insert(fields[j],tuples,k)),dims[j].onAdd(add,curr);for(;k<n;++k)prev[k]=all,curr[k]!==all&&out.push(k)},modify(pulse,output){const out=output.mod,bits=this.value,curr=bits.curr(),all=bits.all(),tuples=pulse.mod;let i,n,k;for(i=0,n=tuples.length;i<n;++i)k=tuples[i]._index,curr[k]!==all&&out.push(k)},remove(_,pulse,output){const indices=this._indices,bits=this.value,curr=bits.curr(),prev=bits.prev(),all=bits.all(),map={},out=output.rem,tuples=pulse.rem;let i,n,k,f;for(i=0,n=tuples.length;i<n;++i)k=tuples[i]._index,map[k]=1,prev[k]=f=curr[k],curr[k]=all,f!==all&&out.push(k);for(k in indices)indices[k].remove(n,map);return this.reindex(pulse,n,map),map},reindex(pulse,num,map){const indices=this._indices,bits=this.value;pulse.runAfter((()=>{const indexMap=bits.remove(num,map);for(const key in indices)indices[key].reindex(indexMap)}))},update(_,pulse,output){const dims=this._dims,query=_.query,stamp=pulse.stamp,m=dims.length;let i,q,mask=0;for(output.filters=0,q=0;q<m;++q)_.modified("query",q)&&(i=q,++mask);if(1===mask)mask=dims[i].one,this.incrementOne(dims[i],query[i],output.add,output.rem);else for(q=0,mask=0;q<m;++q)_.modified("query",q)&&(mask|=dims[q].one,this.incrementAll(dims[q],query[q],stamp,output.add),output.rem=output.add);return mask},incrementAll(dim,query,stamp,out){const bits=this.value,seen=bits.seen(),curr=bits.curr(),prev=bits.prev(),index=dim.index(),old=dim.bisect(dim.range),range=dim.bisect(query),lo1=range[0],hi1=range[1],lo0=old[0],hi0=old[1],one=dim.one;let i,j,k;if(lo1<lo0)for(i=lo1,j=Math.min(lo0,hi1);i<j;++i)k=index[i],seen[k]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;else if(lo1>lo0)for(i=lo0,j=Math.min(lo1,hi0);i<j;++i)k=index[i],seen[k]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;if(hi1>hi0)for(i=Math.max(lo1,hi0),j=hi1;i<j;++i)k=index[i],seen[k]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;else if(hi1<hi0)for(i=Math.max(lo0,hi1),j=hi0;i<j;++i)k=index[i],seen[k]!==stamp&&(prev[k]=curr[k],seen[k]=stamp,out.push(k)),curr[k]^=one;dim.range=query.slice()},incrementOne(dim,query,add,rem){const curr=this.value.curr(),index=dim.index(),old=dim.bisect(dim.range),range=dim.bisect(query),lo1=range[0],hi1=range[1],lo0=old[0],hi0=old[1],one=dim.one;let i,j,k;if(lo1<lo0)for(i=lo1,j=Math.min(lo0,hi1);i<j;++i)k=index[i],curr[k]^=one,add.push(k);else if(lo1>lo0)for(i=lo0,j=Math.min(lo1,hi0);i<j;++i)k=index[i],curr[k]^=one,rem.push(k);if(hi1>hi0)for(i=Math.max(lo1,hi0),j=hi1;i<j;++i)k=index[i],curr[k]^=one,add.push(k);else if(hi1<hi0)for(i=Math.max(lo0,hi1),j=hi0;i<j;++i)k=index[i],curr[k]^=one,rem.push(k);dim.range=query.slice()}}),ResolveFilter.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},inherits(ResolveFilter,Transform,{transform(_,pulse){const ignore=~(_.ignore||0),bitmap=_.filter,mask=bitmap.mask;if(0==(mask&ignore))return pulse.StopPropagation;const output=pulse.fork(pulse.ALL),data=bitmap.data(),curr=bitmap.curr(),prev=bitmap.prev(),pass=k=>curr[k]&ignore?null:data[k];return output.filter(output.MOD,pass),mask&mask-1?(output.filter(output.ADD,(k=>{const c=curr[k]&ignore;return!c&&c^prev[k]&ignore?data[k]:null})),output.filter(output.REM,(k=>{const c=curr[k]&ignore;return c&&!(c^c^prev[k]&ignore)?data[k]:null}))):(output.filter(output.ADD,pass),output.filter(output.REM,(k=>(curr[k]&ignore)===mask?data[k]:null))),output.filter(output.SOURCE,(t=>pass(t._index)))}});function ASTNode(type){this.type=type}var TokenName,vega_expression_module_source,vega_expression_module_index,vega_expression_module_length,lookahead;ASTNode.prototype.visit=function(visitor){let c,i,n;if(visitor(this))return 1;for(c=function vega_expression_module_children(node){switch(node.type){case"ArrayExpression":return node.elements;case"BinaryExpression":case"LogicalExpression":return[node.left,node.right];case"CallExpression":return[node.callee].concat(node.arguments);case"ConditionalExpression":return[node.test,node.consequent,node.alternate];case"MemberExpression":return[node.object,node.property];case"ObjectExpression":return node.properties;case"Property":return[node.key,node.value];case"UnaryExpression":return[node.argument];default:return[]}}(this),i=0,n=c.length;i<n;++i)if(c[i].visit(visitor))return 1};(TokenName={})[1]="Boolean",TokenName[2]="<end>",TokenName[3]="Identifier",TokenName[4]="Keyword",TokenName[5]="Null",TokenName[6]="Numeric",TokenName[7]="Punctuator",TokenName[8]="String",TokenName[9]="RegularExpression";var ILLEGAL="ILLEGAL",RegexNonAsciiIdentifierStart=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),RegexNonAsciiIdentifierPart=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert(condition,message){if(!condition)throw new Error("ASSERT: "+message)}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return 32===ch||9===ch||11===ch||12===ch||160===ch||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return 10===ch||13===ch||8232===ch||8233===ch}function isIdentifierStart(ch){return 36===ch||95===ch||ch>=65&&ch<=90||ch>=97&&ch<=122||92===ch||ch>=128&&RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return 36===ch||95===ch||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||92===ch||ch>=128&&RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}const keywords={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment(){for(;vega_expression_module_index<vega_expression_module_length;){const ch=vega_expression_module_source.charCodeAt(vega_expression_module_index);if(!isWhiteSpace(ch)&&!isLineTerminator(ch))break;++vega_expression_module_index}}function scanHexEscape(prefix){var i,len,ch,code=0;for(len="u"===prefix?4:2,i=0;i<len;++i)vega_expression_module_index<vega_expression_module_length&&isHexDigit(vega_expression_module_source[vega_expression_module_index])?(ch=vega_expression_module_source[vega_expression_module_index++],code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase())):throwError({},"Unexpected token %0",ILLEGAL);return String.fromCharCode(code)}function scanUnicodeCodePointEscape(){var ch,code,cu1,cu2;for(code=0,"}"===(ch=vega_expression_module_source[vega_expression_module_index])&&throwError({},"Unexpected token %0",ILLEGAL);vega_expression_module_index<vega_expression_module_length&&isHexDigit(ch=vega_expression_module_source[vega_expression_module_index++]);)code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase());return(code>1114111||"}"!==ch)&&throwError({},"Unexpected token %0",ILLEGAL),code<=65535?String.fromCharCode(code):(cu1=55296+(code-65536>>10),cu2=56320+(code-65536&1023),String.fromCharCode(cu1,cu2))}function getEscapedIdentifier(){var ch,id;for(ch=vega_expression_module_source.charCodeAt(vega_expression_module_index++),id=String.fromCharCode(ch),92===ch&&(117!==vega_expression_module_source.charCodeAt(vega_expression_module_index)&&throwError({},"Unexpected token %0",ILLEGAL),++vega_expression_module_index,(ch=scanHexEscape("u"))&&"\\"!==ch&&isIdentifierStart(ch.charCodeAt(0))||throwError({},"Unexpected token %0",ILLEGAL),id=ch);vega_expression_module_index<vega_expression_module_length&&isIdentifierPart(ch=vega_expression_module_source.charCodeAt(vega_expression_module_index));)++vega_expression_module_index,id+=String.fromCharCode(ch),92===ch&&(id=id.substr(0,id.length-1),117!==vega_expression_module_source.charCodeAt(vega_expression_module_index)&&throwError({},"Unexpected token %0",ILLEGAL),++vega_expression_module_index,(ch=scanHexEscape("u"))&&"\\"!==ch&&isIdentifierPart(ch.charCodeAt(0))||throwError({},"Unexpected token %0",ILLEGAL),id+=ch);return id}function scanIdentifier(){var start,id;return start=vega_expression_module_index,id=92===vega_expression_module_source.charCodeAt(vega_expression_module_index)?getEscapedIdentifier():function getIdentifier(){var start,ch;for(start=vega_expression_module_index++;vega_expression_module_index<vega_expression_module_length;){if(92===(ch=vega_expression_module_source.charCodeAt(vega_expression_module_index)))return vega_expression_module_index=start,getEscapedIdentifier();if(!isIdentifierPart(ch))break;++vega_expression_module_index}return vega_expression_module_source.slice(start,vega_expression_module_index)}(),{type:1===id.length?3:keywords.hasOwnProperty(id)?4:"null"===id?5:"true"===id||"false"===id?1:3,value:id,start,end:vega_expression_module_index}}function scanPunctuator(){var code2,ch2,ch3,ch4,start=vega_expression_module_index,code=vega_expression_module_source.charCodeAt(vega_expression_module_index),ch1=vega_expression_module_source[vega_expression_module_index];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++vega_expression_module_index,{type:7,value:String.fromCharCode(code),start,end:vega_expression_module_index};default:if(61===(code2=vega_expression_module_source.charCodeAt(vega_expression_module_index+1)))switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return vega_expression_module_index+=2,{type:7,value:String.fromCharCode(code)+String.fromCharCode(code2),start,end:vega_expression_module_index};case 33:case 61:return vega_expression_module_index+=2,61===vega_expression_module_source.charCodeAt(vega_expression_module_index)&&++vega_expression_module_index,{type:7,value:vega_expression_module_source.slice(start,vega_expression_module_index),start,end:vega_expression_module_index}}}return">>>="===(ch4=vega_expression_module_source.substr(vega_expression_module_index,4))?{type:7,value:ch4,start,end:vega_expression_module_index+=4}:">>>"===(ch3=ch4.substr(0,3))||"<<="===ch3||">>="===ch3?{type:7,value:ch3,start,end:vega_expression_module_index+=3}:ch1===(ch2=ch3.substr(0,2))[1]&&"+-<>&|".indexOf(ch1)>=0||"=>"===ch2?{type:7,value:ch2,start,end:vega_expression_module_index+=2}:("//"===ch2&&throwError({},"Unexpected token %0",ILLEGAL),"<>=!+-*%&|^/".indexOf(ch1)>=0?{type:7,value:ch1,start,end:++vega_expression_module_index}:void throwError({},"Unexpected token %0",ILLEGAL))}function scanNumericLiteral(){var number,start,ch;if(assert(isDecimalDigit((ch=vega_expression_module_source[vega_expression_module_index]).charCodeAt(0))||"."===ch,"Numeric literal must start with a decimal digit or a decimal point"),start=vega_expression_module_index,number="","."!==ch){if(number=vega_expression_module_source[vega_expression_module_index++],ch=vega_expression_module_source[vega_expression_module_index],"0"===number){if("x"===ch||"X"===ch)return++vega_expression_module_index,function scanHexLiteral(start){let number="";for(;vega_expression_module_index<vega_expression_module_length&&isHexDigit(vega_expression_module_source[vega_expression_module_index]);)number+=vega_expression_module_source[vega_expression_module_index++];return 0===number.length&&throwError({},"Unexpected token %0",ILLEGAL),isIdentifierStart(vega_expression_module_source.charCodeAt(vega_expression_module_index))&&throwError({},"Unexpected token %0",ILLEGAL),{type:6,value:parseInt("0x"+number,16),start,end:vega_expression_module_index}}(start);if(isOctalDigit(ch))return function scanOctalLiteral(start){let number="0"+vega_expression_module_source[vega_expression_module_index++];for(;vega_expression_module_index<vega_expression_module_length&&isOctalDigit(vega_expression_module_source[vega_expression_module_index]);)number+=vega_expression_module_source[vega_expression_module_index++];return(isIdentifierStart(vega_expression_module_source.charCodeAt(vega_expression_module_index))||isDecimalDigit(vega_expression_module_source.charCodeAt(vega_expression_module_index)))&&throwError({},"Unexpected token %0",ILLEGAL),{type:6,value:parseInt(number,8),octal:!0,start,end:vega_expression_module_index}}(start);ch&&isDecimalDigit(ch.charCodeAt(0))&&throwError({},"Unexpected token %0",ILLEGAL)}for(;isDecimalDigit(vega_expression_module_source.charCodeAt(vega_expression_module_index));)number+=vega_expression_module_source[vega_expression_module_index++];ch=vega_expression_module_source[vega_expression_module_index]}if("."===ch){for(number+=vega_expression_module_source[vega_expression_module_index++];isDecimalDigit(vega_expression_module_source.charCodeAt(vega_expression_module_index));)number+=vega_expression_module_source[vega_expression_module_index++];ch=vega_expression_module_source[vega_expression_module_index]}if("e"===ch||"E"===ch)if(number+=vega_expression_module_source[vega_expression_module_index++],"+"!==(ch=vega_expression_module_source[vega_expression_module_index])&&"-"!==ch||(number+=vega_expression_module_source[vega_expression_module_index++]),isDecimalDigit(vega_expression_module_source.charCodeAt(vega_expression_module_index)))for(;isDecimalDigit(vega_expression_module_source.charCodeAt(vega_expression_module_index));)number+=vega_expression_module_source[vega_expression_module_index++];else throwError({},"Unexpected token %0",ILLEGAL);return isIdentifierStart(vega_expression_module_source.charCodeAt(vega_expression_module_index))&&throwError({},"Unexpected token %0",ILLEGAL),{type:6,value:parseFloat(number),start,end:vega_expression_module_index}}function scanRegExp(){var start,body,flags,value;return lookahead=null,skipComment(),start=vega_expression_module_index,body=function scanRegExpBody(){var ch,str,classMarker,terminated;for(assert("/"===(ch=vega_expression_module_source[vega_expression_module_index]),"Regular expression literal must start with a slash"),str=vega_expression_module_source[vega_expression_module_index++],classMarker=!1,terminated=!1;vega_expression_module_index<vega_expression_module_length;)if(str+=ch=vega_expression_module_source[vega_expression_module_index++],"\\"===ch)isLineTerminator((ch=vega_expression_module_source[vega_expression_module_index++]).charCodeAt(0))&&throwError({},"Invalid regular expression: missing /"),str+=ch;else if(isLineTerminator(ch.charCodeAt(0)))throwError({},"Invalid regular expression: missing /");else if(classMarker)"]"===ch&&(classMarker=!1);else{if("/"===ch){terminated=!0;break}"["===ch&&(classMarker=!0)}return terminated||throwError({},"Invalid regular expression: missing /"),{value:str.substr(1,str.length-2),literal:str}}(),flags=function scanRegExpFlags(){var ch,str,flags;for(str="",flags="";vega_expression_module_index<vega_expression_module_length&&isIdentifierPart((ch=vega_expression_module_source[vega_expression_module_index]).charCodeAt(0));)++vega_expression_module_index,"\\"===ch&&vega_expression_module_index<vega_expression_module_length?throwError({},"Unexpected token %0",ILLEGAL):(flags+=ch,str+=ch);return flags.search(/[^gimuy]/g)>=0&&throwError({},"Invalid regular expression",flags),{value:flags,literal:str}}(),value=function testRegExp(pattern,flags){let tmp=pattern;flags.indexOf("u")>=0&&(tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}/g,(($0,$1)=>{if(parseInt($1,16)<=1114111)return"x";throwError({},"Invalid regular expression")})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(tmp)}catch(e){throwError({},"Invalid regular expression")}try{return new RegExp(pattern,flags)}catch(exception){return null}}(body.value,flags.value),{literal:body.literal+flags.literal,value,regex:{pattern:body.value,flags:flags.value},start,end:vega_expression_module_index}}function advance(){if(skipComment(),vega_expression_module_index>=vega_expression_module_length)return{type:2,start:vega_expression_module_index,end:vega_expression_module_index};const ch=vega_expression_module_source.charCodeAt(vega_expression_module_index);return isIdentifierStart(ch)?scanIdentifier():40===ch||41===ch||59===ch?scanPunctuator():39===ch||34===ch?function scanStringLiteral(){var quote,start,ch,code,str="",octal=!1;for(assert("'"===(quote=vega_expression_module_source[vega_expression_module_index])||'"'===quote,"String literal must starts with a quote"),start=vega_expression_module_index,++vega_expression_module_index;vega_expression_module_index<vega_expression_module_length;){if((ch=vega_expression_module_source[vega_expression_module_index++])===quote){quote="";break}if("\\"===ch)if((ch=vega_expression_module_source[vega_expression_module_index++])&&isLineTerminator(ch.charCodeAt(0)))"\r"===ch&&"\n"===vega_expression_module_source[vega_expression_module_index]&&++vega_expression_module_index;else switch(ch){case"u":case"x":"{"===vega_expression_module_source[vega_expression_module_index]?(++vega_expression_module_index,str+=scanUnicodeCodePointEscape()):str+=scanHexEscape(ch);break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;default:isOctalDigit(ch)?(0!==(code="01234567".indexOf(ch))&&(octal=!0),vega_expression_module_index<vega_expression_module_length&&isOctalDigit(vega_expression_module_source[vega_expression_module_index])&&(octal=!0,code=8*code+"01234567".indexOf(vega_expression_module_source[vega_expression_module_index++]),"0123".indexOf(ch)>=0&&vega_expression_module_index<vega_expression_module_length&&isOctalDigit(vega_expression_module_source[vega_expression_module_index])&&(code=8*code+"01234567".indexOf(vega_expression_module_source[vega_expression_module_index++]))),str+=String.fromCharCode(code)):str+=ch}else{if(isLineTerminator(ch.charCodeAt(0)))break;str+=ch}}return""!==quote&&throwError({},"Unexpected token %0",ILLEGAL),{type:8,value:str,octal,start,end:vega_expression_module_index}}():46===ch?isDecimalDigit(vega_expression_module_source.charCodeAt(vega_expression_module_index+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){const token=lookahead;return vega_expression_module_index=token.end,lookahead=advance(),vega_expression_module_index=token.end,token}function vega_expression_module_peek(){const pos=vega_expression_module_index;lookahead=advance(),vega_expression_module_index=pos}function finishBinaryExpression(operator,left,right){const node=new ASTNode("||"===operator||"&&"===operator?"LogicalExpression":"BinaryExpression");return node.operator=operator,node.left=left,node.right=right,node}function finishCallExpression(callee,args){const node=new ASTNode("CallExpression");return node.callee=callee,node.arguments=args,node}function finishIdentifier(name){const node=new ASTNode("Identifier");return node.name=name,node}function finishLiteral(token){const node=new ASTNode("Literal");return node.value=token.value,node.raw=vega_expression_module_source.slice(token.start,token.end),token.regex&&("//"===node.raw&&(node.raw="/(?:)/"),node.regex=token.regex),node}function finishMemberExpression(accessor,object,property){const node=new ASTNode("MemberExpression");return node.computed="["===accessor,node.object=object,node.property=property,node.computed||(property.member=!0),node}function finishProperty(kind,key,value){const node=new ASTNode("Property");return node.key=key,node.value=value,node.kind=kind,node}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,((whole,index)=>(assert(index<args.length,"Message reference must be in range"),args[index])));throw(error=new Error(msg)).index=vega_expression_module_index,error.description=msg,error}function throwUnexpected(token){2===token.type&&throwError(token,"Unexpected end of input"),6===token.type&&throwError(token,"Unexpected number"),8===token.type&&throwError(token,"Unexpected string"),3===token.type&&throwError(token,"Unexpected identifier"),4===token.type&&throwError(token,"Unexpected reserved word"),throwError(token,"Unexpected token %0",token.value)}function expect(value){const token=lex();7===token.type&&token.value===value||throwUnexpected(token)}function match(value){return 7===lookahead.type&&lookahead.value===value}function matchKeyword(keyword){return 4===lookahead.type&&lookahead.value===keyword}function parseArrayInitialiser(){const elements=[];for(vega_expression_module_index=lookahead.start,expect("[");!match("]");)match(",")?(lex(),elements.push(null)):(elements.push(parseConditionalExpression()),match("]")||expect(","));return lex(),function finishArrayExpression(elements){const node=new ASTNode("ArrayExpression");return node.elements=elements,node}(elements)}function parseObjectPropertyKey(){vega_expression_module_index=lookahead.start;const token=lex();return 8===token.type||6===token.type?(token.octal&&throwError(token,"Octal literals are not allowed in strict mode."),finishLiteral(token)):finishIdentifier(token.value)}function parseObjectProperty(){var token,key,id;return vega_expression_module_index=lookahead.start,3===(token=lookahead).type?(id=parseObjectPropertyKey(),expect(":"),finishProperty("init",id,parseConditionalExpression())):2!==token.type&&7!==token.type?(key=parseObjectPropertyKey(),expect(":"),finishProperty("init",key,parseConditionalExpression())):void throwUnexpected(token)}function parseObjectInitialiser(){var property,key,properties=[],map={},toString=String;for(vega_expression_module_index=lookahead.start,expect("{");!match("}");)key="$"+("Identifier"===(property=parseObjectProperty()).key.type?property.key.name:toString(property.key.value)),Object.prototype.hasOwnProperty.call(map,key)?throwError({},"Duplicate data property in object literal not allowed in strict mode"):map[key]=!0,properties.push(property),match("}")||expect(",");return expect("}"),function finishObjectExpression(properties){const node=new ASTNode("ObjectExpression");return node.properties=properties,node}(properties)}const legalKeywords={if:1};function parsePrimaryExpression(){var type,token,expr;if(match("("))return function parseGroupExpression(){expect("(");const expr=parseExpression();return expect(")"),expr}();if(match("["))return parseArrayInitialiser();if(match("{"))return parseObjectInitialiser();if(type=lookahead.type,vega_expression_module_index=lookahead.start,3===type||legalKeywords[lookahead.value])expr=finishIdentifier(lex().value);else if(8===type||6===type)lookahead.octal&&throwError(lookahead,"Octal literals are not allowed in strict mode."),expr=finishLiteral(lex());else{if(4===type)throw new Error("Disabled.");1===type?((token=lex()).value="true"===token.value,expr=finishLiteral(token)):5===type?((token=lex()).value=null,expr=finishLiteral(token)):match("/")||match("/=")?(expr=finishLiteral(scanRegExp()),vega_expression_module_peek()):throwUnexpected(lex())}return expr}function parseArguments(){const args=[];if(expect("("),!match(")"))for(;vega_expression_module_index<vega_expression_module_length&&(args.push(parseConditionalExpression()),!match(")"));)expect(",");return expect(")"),args}function parseNonComputedMember(){return expect("."),function parseNonComputedProperty(){vega_expression_module_index=lookahead.start;const token=lex();return function isIdentifierName(token){return 3===token.type||4===token.type||1===token.type||5===token.type}(token)||throwUnexpected(token),finishIdentifier(token.value)}()}function parseComputedMember(){expect("[");const expr=parseExpression();return expect("]"),expr}function parsePostfixExpression(){const expr=function parseLeftHandSideExpressionAllowCall(){var expr;for(expr=parsePrimaryExpression();;)if(match("."))expr=finishMemberExpression(".",expr,parseNonComputedMember());else if(match("("))expr=finishCallExpression(expr,parseArguments());else{if(!match("["))break;expr=finishMemberExpression("[",expr,parseComputedMember())}return expr}();if(7===lookahead.type&&(match("++")||match("--")))throw new Error("Disabled.");return expr}function parseUnaryExpression(){var token,expr;if(7!==lookahead.type&&4!==lookahead.type)expr=parsePostfixExpression();else{if(match("++")||match("--"))throw new Error("Disabled.");if(match("+")||match("-")||match("~")||match("!"))token=lex(),expr=parseUnaryExpression(),expr=function finishUnaryExpression(operator,argument){const node=new ASTNode("UnaryExpression");return node.operator=operator,node.argument=argument,node.prefix=!0,node}(token.value,expr);else{if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof"))throw new Error("Disabled.");expr=parsePostfixExpression()}}return expr}function binaryPrecedence(token){let prec=0;if(7!==token.type&&4!==token.type)return 0;switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"|":prec=3;break;case"^":prec=4;break;case"&":prec=5;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":prec=7;break;case"<<":case">>":case">>>":prec=8;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11}return prec}function parseConditionalExpression(){var expr,consequent;return expr=function parseBinaryExpression(){var marker,markers,expr,token,prec,stack,right,operator,left,i;if(marker=lookahead,left=parseUnaryExpression(),0===(prec=binaryPrecedence(token=lookahead)))return left;for(token.prec=prec,lex(),markers=[marker,lookahead],stack=[left,token,right=parseUnaryExpression()];(prec=binaryPrecedence(lookahead))>0;){for(;stack.length>2&&prec<=stack[stack.length-2].prec;)right=stack.pop(),operator=stack.pop().value,left=stack.pop(),markers.pop(),expr=finishBinaryExpression(operator,left,right),stack.push(expr);(token=lex()).prec=prec,stack.push(token),markers.push(lookahead),expr=parseUnaryExpression(),stack.push(expr)}for(expr=stack[i=stack.length-1],markers.pop();i>1;)markers.pop(),expr=finishBinaryExpression(stack[i-1].value,stack[i-2],expr),i-=2;return expr}(),match("?")&&(lex(),consequent=parseConditionalExpression(),expect(":"),expr=function finishConditionalExpression(test,consequent,alternate){const node=new ASTNode("ConditionalExpression");return node.test=test,node.consequent=consequent,node.alternate=alternate,node}(expr,consequent,parseConditionalExpression())),expr}function parseExpression(){const expr=parseConditionalExpression();if(match(","))throw new Error("Disabled.");return expr}function parser(code){vega_expression_module_index=0,vega_expression_module_length=(vega_expression_module_source=code).length,lookahead=null,vega_expression_module_peek();const expr=parseExpression();if(2!==lookahead.type)throw new Error("Unexpect token after expression.");return expr}var Constants={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Functions(codegen){function fn(name,cast,type){return args=>function fncall(name,args,cast,type){let obj=codegen(args[0]);return cast&&(obj=cast+"("+obj+")",0===cast.lastIndexOf("new ",0)&&(obj="("+obj+")")),obj+"."+name+(type<0?"":0===type?"()":"("+args.slice(1).map(codegen).join(",")+")")}(name,args,cast,type)}const DATE="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(args){args.length<3&&error("Missing arguments to clamp function."),args.length>3&&error("Too many arguments to clamp function.");const a=args.map(codegen);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:DATE,date:fn("getDate",DATE,0),day:fn("getDay",DATE,0),year:fn("getFullYear",DATE,0),month:fn("getMonth",DATE,0),hours:fn("getHours",DATE,0),minutes:fn("getMinutes",DATE,0),seconds:fn("getSeconds",DATE,0),milliseconds:fn("getMilliseconds",DATE,0),time:fn("getTime",DATE,0),timezoneoffset:fn("getTimezoneOffset",DATE,0),utcdate:fn("getUTCDate",DATE,0),utcday:fn("getUTCDay",DATE,0),utcyear:fn("getUTCFullYear",DATE,0),utcmonth:fn("getUTCMonth",DATE,0),utchours:fn("getUTCHours",DATE,0),utcminutes:fn("getUTCMinutes",DATE,0),utcseconds:fn("getUTCSeconds",DATE,0),utcmilliseconds:fn("getUTCMilliseconds",DATE,0),length:fn("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase","String",0),lower:fn("toLowerCase","String",0),substring:fn("substring","String"),split:fn("split","String"),trim:fn("trim","String",0),regexp:"RegExp",test:fn("test","RegExp"),if:function(args){args.length<3&&error("Missing arguments to if function."),args.length>3&&error("Too many arguments to if function.");const a=args.map(codegen);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function codegen(opt){const allowed=(opt=opt||{}).allowed?toSet(opt.allowed):{},forbidden=opt.forbidden?toSet(opt.forbidden):{},constants=opt.constants||Constants,functions=(opt.functions||Functions)(visit),globalvar=opt.globalvar,fieldvar=opt.fieldvar,outputGlobal=isFunction(globalvar)?globalvar:id=>`${globalvar}["${id}"]`;let globals={},fields={},memberDepth=0;function visit(ast){if(isString(ast))return ast;const generator=Generators[ast.type];return null==generator&&error("Unsupported type: "+ast.type),generator(ast)}const Generators={Literal:n=>n.raw,Identifier:n=>{const id=n.name;return memberDepth>0?id:has(forbidden,id)?error("Illegal identifier: "+id):has(constants,id)?constants[id]:has(allowed,id)?id:(globals[id]=1,outputGlobal(id))},MemberExpression:n=>{const d=!n.computed,o=visit(n.object);d&&(memberDepth+=1);const p=visit(n.property);return o===fieldvar&&(fields[function stripQuotes(s){const n=s&&s.length-1;return n&&('"'===s[0]&&'"'===s[n]||"'"===s[0]&&"'"===s[n])?s.slice(1,-1):s}(p)]=1),d&&(memberDepth-=1),o+(d?"."+p:"["+p+"]")},CallExpression:n=>{"Identifier"!==n.callee.type&&error("Illegal callee type: "+n.callee.type);const callee=n.callee.name,args=n.arguments,fn=has(functions,callee)&&functions[callee];return fn||error("Unrecognized function: "+callee),isFunction(fn)?fn(args):fn+"("+args.map(visit).join(",")+")"},ArrayExpression:n=>"["+n.elements.map(visit).join(",")+"]",BinaryExpression:n=>"("+visit(n.left)+" "+n.operator+" "+visit(n.right)+")",UnaryExpression:n=>"("+n.operator+visit(n.argument)+")",ConditionalExpression:n=>"("+visit(n.test)+"?"+visit(n.consequent)+":"+visit(n.alternate)+")",LogicalExpression:n=>"("+visit(n.left)+n.operator+visit(n.right)+")",ObjectExpression:n=>"{"+n.properties.map(visit).join(",")+"}",Property:n=>{memberDepth+=1;const k=visit(n.key);return memberDepth-=1,k+":"+visit(n.value)}};function codegen(ast){const result={code:visit(ast),globals:Object.keys(globals),fields:Object.keys(fields)};return globals={},fields={},result}return codegen.functions=functions,codegen.constants=constants,codegen}var lambda00,phi00,lambda0,cosPhi0,sinPhi0,bounds_lambda0,phi0,lambda1,phi1,lambda2,bounds_lambda00,bounds_phi00,p0,deltaSum,ranges,bounds_range,area_areaRingSum=new Adder,area_areaSum=new Adder,area_areaStream={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function(){area_areaRingSum=new Adder,area_areaStream.lineStart=area_areaRingStart,area_areaStream.lineEnd=area_areaRingEnd},polygonEnd:function(){var areaRing=+area_areaRingSum;area_areaSum.add(areaRing<0?math_tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop_noop},sphere:function(){area_areaSum.add(math_tau)}};function area_areaRingStart(){area_areaStream.point=area_areaPointFirst}function area_areaRingEnd(){area_areaPoint(lambda00,phi00)}function area_areaPointFirst(lambda,phi){area_areaStream.point=area_areaPoint,lambda00=lambda,phi00=phi,lambda0=lambda*=src_math_radians,cosPhi0=math_cos(phi=(phi*=src_math_radians)/2+quarterPi),sinPhi0=math_sin(phi)}function area_areaPoint(lambda,phi){var dLambda=(lambda*=src_math_radians)-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=math_cos(phi=(phi*=src_math_radians)/2+quarterPi),sinPhi=math_sin(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*math_cos(adLambda),v=k*sdLambda*math_sin(adLambda);area_areaRingSum.add(math_atan2(v,u)),lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi}var W0,W1,centroid_X0,centroid_Y0,centroid_Z0,centroid_X1,centroid_Y1,centroid_Z1,centroid_X2,centroid_Y2,centroid_Z2,centroid_lambda00,centroid_phi00,src_centroid_x0,src_centroid_y0,z0,bounds_boundsStream={point:bounds_boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){bounds_boundsStream.point=boundsRingPoint,bounds_boundsStream.lineStart=boundsRingStart,bounds_boundsStream.lineEnd=boundsRingEnd,deltaSum=new Adder,area_areaStream.polygonStart()},polygonEnd:function(){area_areaStream.polygonEnd(),bounds_boundsStream.point=bounds_boundsPoint,bounds_boundsStream.lineStart=boundsLineStart,bounds_boundsStream.lineEnd=boundsLineEnd,area_areaRingSum<0?(bounds_lambda0=-(lambda1=180),phi0=-(phi1=90)):deltaSum>1e-6?phi1=90:deltaSum<-1e-6&&(phi0=-90),bounds_range[0]=bounds_lambda0,bounds_range[1]=lambda1},sphere:function(){bounds_lambda0=-(lambda1=180),phi0=-(phi1=90)}};function bounds_boundsPoint(lambda,phi){ranges.push(bounds_range=[bounds_lambda0=lambda,lambda1=lambda]),phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){var p=cartesian([lambda*src_math_radians,phi*src_math_radians]);if(p0){var normal=cartesianCross(p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=spherical(inflection);var phii,delta=lambda-lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*src_math_degrees*sign,antimeridian=math_abs(delta)>180;antimeridian^(sign*lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*src_math_degrees)>phi1&&(phi1=phii):antimeridian^(sign*lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*src_math_degrees)<phi0&&(phi0=phii):(phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)),antimeridian?lambda<lambda2?angle(bounds_lambda0,lambda)>angle(bounds_lambda0,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(bounds_lambda0,lambda1)&&(bounds_lambda0=lambda):lambda1>=bounds_lambda0?(lambda<bounds_lambda0&&(bounds_lambda0=lambda),lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?angle(bounds_lambda0,lambda)>angle(bounds_lambda0,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(bounds_lambda0,lambda1)&&(bounds_lambda0=lambda)}else ranges.push(bounds_range=[bounds_lambda0=lambda,lambda1=lambda]);phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi),p0=p,lambda2=lambda}function boundsLineStart(){bounds_boundsStream.point=linePoint}function boundsLineEnd(){bounds_range[0]=bounds_lambda0,bounds_range[1]=lambda1,bounds_boundsStream.point=bounds_boundsPoint,p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(math_abs(delta)>180?delta+(delta>0?360:-360):delta)}else bounds_lambda00=lambda,bounds_phi00=phi;area_areaStream.point(lambda,phi),linePoint(lambda,phi)}function boundsRingStart(){area_areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(bounds_lambda00,bounds_phi00),area_areaStream.lineEnd(),math_abs(deltaSum)>1e-6&&(bounds_lambda0=-(lambda1=180)),bounds_range[0]=bounds_lambda0,bounds_range[1]=lambda1,p0=null}function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var centroid_centroidStream={sphere:noop_noop,point:centroid_centroidPoint,lineStart:centroid_centroidLineStart,lineEnd:centroid_centroidLineEnd,polygonStart:function(){centroid_centroidStream.lineStart=centroid_centroidRingStart,centroid_centroidStream.lineEnd=centroid_centroidRingEnd},polygonEnd:function(){centroid_centroidStream.lineStart=centroid_centroidLineStart,centroid_centroidStream.lineEnd=centroid_centroidLineEnd}};function centroid_centroidPoint(lambda,phi){lambda*=src_math_radians;var cosPhi=math_cos(phi*=src_math_radians);centroidPointCartesian(cosPhi*math_cos(lambda),cosPhi*math_sin(lambda),math_sin(phi))}function centroidPointCartesian(x,y,z){++W0,centroid_X0+=(x-centroid_X0)/W0,centroid_Y0+=(y-centroid_Y0)/W0,centroid_Z0+=(z-centroid_Z0)/W0}function centroid_centroidLineStart(){centroid_centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=src_math_radians;var cosPhi=math_cos(phi*=src_math_radians);src_centroid_x0=cosPhi*math_cos(lambda),src_centroid_y0=cosPhi*math_sin(lambda),z0=math_sin(phi),centroid_centroidStream.point=centroidLinePoint,centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function centroidLinePoint(lambda,phi){lambda*=src_math_radians;var cosPhi=math_cos(phi*=src_math_radians),x=cosPhi*math_cos(lambda),y=cosPhi*math_sin(lambda),z=math_sin(phi),w=math_atan2(math_sqrt((w=src_centroid_y0*z-z0*y)*w+(w=z0*x-src_centroid_x0*z)*w+(w=src_centroid_x0*y-src_centroid_y0*x)*w),src_centroid_x0*x+src_centroid_y0*y+z0*z);W1+=w,centroid_X1+=w*(src_centroid_x0+(src_centroid_x0=x)),centroid_Y1+=w*(src_centroid_y0+(src_centroid_y0=y)),centroid_Z1+=w*(z0+(z0=z)),centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function centroid_centroidLineEnd(){centroid_centroidStream.point=centroid_centroidPoint}function centroid_centroidRingStart(){centroid_centroidStream.point=centroidRingPointFirst}function centroid_centroidRingEnd(){centroidRingPoint(centroid_lambda00,centroid_phi00),centroid_centroidStream.point=centroid_centroidPoint}function centroidRingPointFirst(lambda,phi){centroid_lambda00=lambda,centroid_phi00=phi,lambda*=src_math_radians,phi*=src_math_radians,centroid_centroidStream.point=centroidRingPoint;var cosPhi=math_cos(phi);src_centroid_x0=cosPhi*math_cos(lambda),src_centroid_y0=cosPhi*math_sin(lambda),z0=math_sin(phi),centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function centroidRingPoint(lambda,phi){lambda*=src_math_radians;var cosPhi=math_cos(phi*=src_math_radians),x=cosPhi*math_cos(lambda),y=cosPhi*math_sin(lambda),z=math_sin(phi),cx=src_centroid_y0*z-z0*y,cy=z0*x-src_centroid_x0*z,cz=src_centroid_x0*y-src_centroid_y0*x,m=hypot(cx,cy,cz),w=math_asin(m),v=m&&-w/m;centroid_X2.add(v*cx),centroid_Y2.add(v*cy),centroid_Z2.add(v*cz),W1+=w,centroid_X1+=w*(src_centroid_x0+(src_centroid_x0=x)),centroid_Y1+=w*(src_centroid_y0+(src_centroid_y0=y)),centroid_Z1+=w*(z0+(z0=z)),centroidPointCartesian(src_centroid_x0,src_centroid_y0,z0)}function src_ascending_ascending(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function intersection_set(values){return values instanceof InternSet?values:new InternSet(values)}const $selectionId=field("_vgsid_");function testPoint(datum,entry){for(var dval,f,fields=entry.fields,values=entry.values,n=fields.length,i=0;i<n;++i)if((f=fields[i]).getter=field.getter||field(f.field),isDate(dval=f.getter(datum))&&(dval=toNumber(dval)),isDate(values[i])&&(values[i]=toNumber(values[i])),isDate(values[i][0])&&(values[i]=values[i].map(toNumber)),"E"===f.type){if(isArray(values[i])?values[i].indexOf(dval)<0:dval!==values[i])return!1}else if("R"===f.type){if(!inrange(dval,values[i]))return!1}else if("R-RE"===f.type){if(!inrange(dval,values[i],!0,!1))return!1}else if("R-E"===f.type){if(!inrange(dval,values[i],!1,!1))return!1}else if("R-LE"===f.type&&!inrange(dval,values[i],!1,!0))return!1;return!0}const vega_selection_module_bisect=function bisector_bisector(f){let delta=f,compare1=f,compare2=f;function left(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;compare2(a[mid],x)<0?lo=mid+1:hi=mid}while(lo<hi)}return lo}return 2!==f.length&&(delta=(d,x)=>f(d)-x,compare1=src_ascending_ascending,compare2=(d,x)=>src_ascending_ascending(f(d),x)),{left,center:function center(a,x,lo=0,hi=a.length){const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i},right:function right(a,x,lo=0,hi=a.length){if(lo<hi){if(0!==compare1(x,x))return hi;do{const mid=lo+hi>>>1;compare2(a[mid],x)<=0?lo=mid+1:hi=mid}while(lo<hi)}return lo}}}($selectionId),vega_selection_module_bisectLeft=vega_selection_module_bisect.left,vega_selection_module_bisectRight=vega_selection_module_bisect.right;var ops={["".concat("_vgsid_","_union")]:function union(...others){const set=new InternSet;for(const other of others)for(const o of other)set.add(o);return set},["".concat("_vgsid_","_intersect")]:function intersection(values,...others){values=new InternSet(values),others=others.map(intersection_set);out:for(const value of values)for(const other of others)if(!other.has(value)){values.delete(value);continue out}return values},E_union:function(base,value){if(!base.length)return value;for(var i=0,n=value.length;i<n;++i)base.indexOf(value[i])<0&&base.push(value[i]);return base},E_intersect:function(base,value){return base.length?base.filter((v=>value.indexOf(v)>=0)):value},R_union:function(base,value){var lo=toNumber(value[0]),hi=toNumber(value[1]);return lo>hi&&(lo=value[1],hi=value[0]),base.length?(base[0]>lo&&(base[0]=lo),base[1]<hi&&(base[1]=hi),base):[lo,hi]},R_intersect:function(base,value){var lo=toNumber(value[0]),hi=toNumber(value[1]);return lo>hi&&(lo=value[1],hi=value[0]),base.length?hi<base[0]||base[1]<lo?[]:(base[0]<lo&&(base[0]=lo),base[1]>hi&&(base[1]=hi),base):[lo,hi]}};function selectionVisitor(name,args,scope,params){"Literal"!==args[0].type&&error("First argument to selection functions must be a string literal.");const data=args[0].value,dataName=":"+data;"intersect"!==(args.length>=2&&peek(args).value)||has(params,"@unit")||(params["@unit"]=scope.getData(data).indataRef(scope,"unit")),has(params,dataName)||(params[dataName]=scope.getData(data).tuplesRef())}function vega_functions_module_data(name){const data=this.context.data[name];return data?data.values.value:[]}const wrap=method=>function(value,spec){return this.context.dataflow.locale()[method](spec)(value)},vega_functions_module_format=wrap("format"),vega_functions_module_timeFormat=wrap("timeFormat"),vega_functions_module_utcFormat=wrap("utcFormat"),vega_functions_module_timeParse=wrap("timeParse"),vega_functions_module_utcParse=wrap("utcParse"),dateObj=new Date(2e3,0,1);function vega_functions_module_time(month,day,specifier){return Number.isInteger(month)&&Number.isInteger(day)?(dateObj.setYear(2e3),dateObj.setMonth(month),dateObj.setDate(day),vega_functions_module_timeFormat.call(this,dateObj,specifier)):""}function dataVisitor(name,args,scope,params){"Literal"!==args[0].type&&error("First argument to data functions must be a string literal.");const data=args[0].value,dataName=":"+data;if(!has(dataName,params))try{params[dataName]=scope.getData(data).tuplesRef()}catch(err){}}function scaleVisitor(name,args,scope,params){if("Literal"===args[0].type)addScaleDependency(scope,params,args[0].value);else for(name in scope.scales)addScaleDependency(scope,params,name)}function addScaleDependency(scope,params,name){const scaleName="%"+name;if(!has(params,scaleName))try{params[scaleName]=scope.scaleRef(name)}catch(err){}}function getScale(name,ctx){let s;return isFunction(name)?name:isString(name)?(s=ctx.scales[name])&&s.value:void 0}function internalScaleFunctions(codegen,fnctx,visitors){fnctx.__bandwidth=s=>s&&s.bandwidth?s.bandwidth():0,visitors._bandwidth=scaleVisitor,visitors._range=scaleVisitor,visitors._scale=scaleVisitor;const ref=arg=>"_["+("Literal"===arg.type?$("%"+arg.value):$("%")+"+"+codegen(arg))+"]";return{_bandwidth:args=>"this.__bandwidth(".concat(ref(args[0]),")"),_range:args=>"".concat(ref(args[0]),".range()"),_scale:args=>"".concat(ref(args[0]),"(").concat(codegen(args[1]),")")}}function geoMethod(methodName,globalMethod){return function(projection,geojson,group){if(projection){const p=getScale(projection,(group||this).context);return p&&p.path[methodName](geojson)}return globalMethod(geojson)}}const geoArea=geoMethod("area",(function d3_geo_src_area(object){return area_areaSum=new Adder,src_stream(object,area_areaStream),2*area_areaSum})),geoBounds=geoMethod("bounds",(function src_bounds(feature){var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(bounds_lambda0=phi0=1/0),ranges=[],src_stream(feature,bounds_boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,bounds_lambda0=b[0],lambda1=a[1])}return ranges=bounds_range=null,bounds_lambda0===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[bounds_lambda0,phi0],[lambda1,phi1]]})),geoCentroid=geoMethod("centroid",(function src_centroid(object){W0=W1=centroid_X0=centroid_Y0=centroid_Z0=centroid_X1=centroid_Y1=centroid_Z1=0,centroid_X2=new Adder,centroid_Y2=new Adder,centroid_Z2=new Adder,src_stream(object,centroid_centroidStream);var x=+centroid_X2,y=+centroid_Y2,z=+centroid_Z2,m=hypot(x,y,z);return m<1e-12&&(x=centroid_X1,y=centroid_Y1,z=centroid_Z1,W1<1e-6&&(x=centroid_X0,y=centroid_Y0,z=centroid_Z0),(m=hypot(x,y,z))<1e-12)?[NaN,NaN]:[math_atan2(y,x)*src_math_degrees,math_asin(z/m)*src_math_degrees]}));function vega_functions_module_log(df,method,args){try{df[method].apply(df,["EXPRESSION"].concat([].slice.call(args)))}catch(err){df.warn(err)}return args[args.length-1]}function channel_luminance_value(channelValue){const val=channelValue/255;return val<=.03928?val/12.92:Math.pow((val+.055)/1.055,2.4)}function luminance(color){const c=color_rgb(color);return.2126*channel_luminance_value(c.r)+.7152*channel_luminance_value(c.g)+.0722*channel_luminance_value(c.b)}function equal(a,b){return a===b||a!=a&&b!=b||(isArray(a)?!(!isArray(b)||a.length!==b.length)&&function equalArray(a,b){for(let i=0,n=a.length;i<n;++i)if(!equal(a[i],b[i]))return!1;return!0}(a,b):!(!isObject(a)||!isObject(b))&&equalObject(a,b))}function equalObject(a,b){for(const key in a)if(!equal(a[key],b[key]))return!1;return!0}function removePredicate(props){return _=>equalObject(props,_)}const accessors={};function vega_functions_module_array(seq){return isArray(seq)||ArrayBuffer.isView(seq)?seq:null}function vega_functions_module_sequence(seq){return vega_functions_module_array(seq)||(isString(seq)?seq:null)}const datum=d=>d.data;function treeNodes(name,context){const tree=vega_functions_module_data.call(context,name);return tree.root&&tree.root.lookup||{}}const _window=()=>"undefined"!=typeof window&&window||null;function vega_functions_module_intersect(b,opt,group){if(!b)return[];const[u,v]=b,box=(new Bounds).set(u[0],u[1],v[0],v[1]);return vega_scenegraph_module_intersect(group||this.context.dataflow.scenegraph().root,box,function vega_functions_module_filter(opt){let p=null;if(opt){const types=array(opt.marktype),names=array(opt.markname);p=_=>(!types.length||types.some((t=>_.marktype===t)))&&(!names.length||names.some((s=>_.name===s)))}return p}(opt))}const functionContext={random:()=>random(),cumulativeNormal,cumulativeLogNormal,cumulativeUniform,densityNormal,densityLogNormal,densityUniform,quantileNormal,quantileLogNormal,quantileUniform,sampleNormal,sampleLogNormal,sampleUniform,isArray,isBoolean,isDate,isDefined:_=>void 0!==_,isNumber,isObject,isRegExp,isString,isTuple,isValid:_=>null!=_&&_==_,toBoolean,toDate:_=>toDate(_),toNumber,toString:vega_util_module_toString,indexof:function indexof(seq){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return vega_functions_module_sequence(seq).indexOf(...args)},join:function vega_functions_module_join(seq){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return vega_functions_module_array(seq).join(...args)},lastindexof:function lastindexof(seq){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return vega_functions_module_sequence(seq).lastIndexOf(...args)},replace:function vega_functions_module_replace(str,pattern,repl){return isFunction(repl)&&error("Function argument passed to replace."),String(str).replace(pattern,repl)},reverse:function vega_functions_module_reverse(seq){return vega_functions_module_array(seq).slice().reverse()},slice:function vega_functions_module_slice(seq){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];return vega_functions_module_sequence(seq).slice(...args)},flush,lerp,merge:function vega_functions_module_merge(){const args=[].slice.call(arguments);return args.unshift({}),extend(...args)},pad,peek,pluck:function pluck(data,name){const accessor=accessors[name]||(accessors[name]=field(name));return isArray(data)?data.map(accessor):accessor(data)},span,inrange,truncate,rgb:color_rgb,lab,hcl,hsl,luminance,contrast:function contrast(color1,color2){const lum1=luminance(color1),lum2=luminance(color2);return(Math.max(lum1,lum2)+.05)/(Math.min(lum1,lum2)+.05)},sequence:range,format:vega_functions_module_format,utcFormat:vega_functions_module_utcFormat,utcParse:vega_functions_module_utcParse,utcOffset,utcSequence,timeFormat:vega_functions_module_timeFormat,timeParse:vega_functions_module_timeParse,timeOffset,timeSequence,timeUnitSpecifier,monthFormat:function monthFormat(month){return vega_functions_module_time.call(this,month,1,"%B")},monthAbbrevFormat:function monthAbbrevFormat(month){return vega_functions_module_time.call(this,month,1,"%b")},dayFormat:function dayFormat(day){return vega_functions_module_time.call(this,0,2+day,"%A")},dayAbbrevFormat:function dayAbbrevFormat(day){return vega_functions_module_time.call(this,0,2+day,"%a")},quarter,utcquarter,week,utcweek,dayofyear,utcdayofyear,warn:function warn(){return vega_functions_module_log(this.context.dataflow,"warn",arguments)},info:function info(){return vega_functions_module_log(this.context.dataflow,"info",arguments)},debug:function debug(){return vega_functions_module_log(this.context.dataflow,"debug",arguments)},extent:_=>extent(_),inScope:function inScope(item){const group=this.context.group;let value=!1;if(group)for(;item;){if(item===group){value=!0;break}item=item.mark.group}return value},intersect:vega_functions_module_intersect,clampRange,pinchDistance:function pinchDistance(event){const t=event.touches,dx=t[0].clientX-t[1].clientX,dy=t[0].clientY-t[1].clientY;return Math.sqrt(dx*dx+dy*dy)},pinchAngle:function pinchAngle(event){const t=event.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function screen(){const w=_window();return w?w.screen:{}},containerSize:function containerSize(){const view=this.context.dataflow,el=view.container&&view.container();return el?[el.clientWidth,el.clientHeight]:[void 0,void 0]},windowSize:function windowSize(){const w=_window();return w?[w.innerWidth,w.innerHeight]:[void 0,void 0]},bandspace:function bandspace(count,paddingInner,paddingOuter){return bandSpace(count||0,paddingInner||0,paddingOuter||0)},setdata:function setdata(name,tuples){const df=this.context.dataflow,input=this.context.data[name].input;return df.pulse(input,df.changeset().remove(truthy).insert(tuples)),1},pathShape:function pathShape(path){let p=null;return function(context){return context?pathRender(context,p=p||vega_scenegraph_module_parse(path)):path}},panLinear,panLog,panPow,panSymlog,zoomLinear,zoomLog,zoomPow,zoomSymlog,encode:function encode(item,name,retval){if(item){const df=this.context.dataflow,target=item.mark.source;df.pulse(target,df.changeset().encode(item,name))}return void 0!==retval?retval:item},modify:function modify(name,insert,remove,toggle,modify,values){const df=this.context.dataflow,data=this.context.data[name],input=data.input,stamp=df.stamp();let predicate,key,changes=data.changes;if(!1===df._trigger||!(input.value.length||insert||toggle))return 0;if((!changes||changes.stamp<stamp)&&(data.changes=changes=df.changeset(),changes.stamp=stamp,df.runAfter((()=>{data.modified=!0,df.pulse(input,changes).run()}),!0,1)),remove&&(predicate=!0===remove?truthy:isArray(remove)||isTuple(remove)?remove:removePredicate(remove),changes.remove(predicate)),insert&&changes.insert(insert),toggle&&(predicate=removePredicate(toggle),input.value.some(predicate)?changes.remove(predicate):changes.insert(toggle)),modify)for(key in values)changes.modify(modify,key,values[key]);return 1},lassoAppend:function lassoAppend(lasso,x,y){let minDist=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const last=lasso[lasso.length-1];return void 0===last||Math.sqrt((last[0]-x)**2+(last[1]-y)**2)>minDist?(lasso.push([x,y]),[...lasso]):lasso},lassoPath:function lassoPath(lasso){return(null!=lasso?lasso:[]).reduce(((svg,_ref,i)=>{let[x,y]=_ref;return svg+(0==i?"M ".concat(x,",").concat(y," "):i===lasso.length-1?" Z":"L ".concat(x,",").concat(y," "))}),"")},intersectLasso:function intersectLasso(markname,pixelLasso,unit){const{x,y,mark}=unit,bb=(new Bounds).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[px,py]of pixelLasso)px<bb.x1&&(bb.x1=px),px>bb.x2&&(bb.x2=px),py<bb.y1&&(bb.y1=py),py>bb.y2&&(bb.y2=py);return bb.translate(x,y),vega_functions_module_intersect([[bb.x1,bb.y1],[bb.x2,bb.y2]],markname,mark).filter((tuple=>function pointInPolygon(testx,testy,polygon){let intersections=0;for(let i=0,j=polygon.length-1;i<polygon.length;j=i++){const[prevX,prevY]=polygon[j],[x,y]=polygon[i];y>testy!=prevY>testy&&testx<(prevX-x)*(testy-y)/(prevY-y)+x&&intersections++}return 1&intersections}(tuple.x,tuple.y,pixelLasso)))}},eventFunctions=["view","item","group","xy","x","y"],astVisitors={},codegenParams={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:id=>"_[".concat($("$"+id),"]"),functions:function buildFunctions(codegen){const fn=Functions(codegen);eventFunctions.forEach((name=>fn[name]="event.vega."+name));for(const name in functionContext)fn[name]="this."+name;return extend(fn,internalScaleFunctions(codegen,functionContext,astVisitors)),fn},constants:Constants,visitors:astVisitors},codeGenerator=codegen(codegenParams);function expressionFunction(name,fn,visitor){return 1===arguments.length?functionContext[name]:(functionContext[name]=fn,visitor&&(astVisitors[name]=visitor),codeGenerator&&(codeGenerator.functions[name]="this."+name),this)}function vega_functions_module_parser(expr,scope){const params={};let ast;try{ast=parser(expr=isString(expr)?expr:$(expr)+"")}catch(err){error("Expression parse error: "+expr)}ast.visit((node=>{if("CallExpression"!==node.type)return;const name=node.callee.name,visit=codegenParams.visitors[name];visit&&visit(name,node.arguments,scope,params)}));const gen=codeGenerator(ast);return gen.globals.forEach((name=>{const signalName="$"+name;!has(params,signalName)&&scope.getSignal(name)&&(params[signalName]=scope.signalRef(name))})),{$expr:extend({code:gen.code},scope.options.ast?{ast}:null),$fields:gen.fields,$params:params}}expressionFunction("bandwidth",(function bandwidth(name,group){const s=getScale(name,(group||this).context);return s&&s.bandwidth?s.bandwidth():0}),scaleVisitor),expressionFunction("copy",(function vega_functions_module_copy(name,group){const s=getScale(name,(group||this).context);return s?s.copy():void 0}),scaleVisitor),expressionFunction("domain",(function domain(name,group){const s=getScale(name,(group||this).context);return s?s.domain():[]}),scaleVisitor),expressionFunction("range",(function vega_functions_module_range(name,group){const s=getScale(name,(group||this).context);return s&&s.range?s.range():[]}),scaleVisitor),expressionFunction("invert",(function invert(name,range,group){const s=getScale(name,(group||this).context);return s?isArray(range)?(s.invertRange||s.invert)(range):(s.invert||s.invertExtent)(range):void 0}),scaleVisitor),expressionFunction("scale",(function vega_functions_module_scale(name,value,group){const s=getScale(name,(group||this).context);return s?s(value):void 0}),scaleVisitor),expressionFunction("gradient",(function scaleGradient(scale,p0,p1,count,group){scale=getScale(scale,(group||this).context);const gradient=Gradient(p0,p1);let stops=scale.domain(),min=stops[0],max=peek(stops),fraction=identity;return max-min?fraction=scaleFraction(scale,min,max):scale=(scale.interpolator?vega_scale_module_scale("sequential")().interpolator(scale.interpolator()):vega_scale_module_scale("linear")().interpolate(scale.interpolate()).range(scale.range())).domain([min=0,max=1]),scale.ticks&&(stops=scale.ticks(+count||15),min!==stops[0]&&stops.unshift(min),max!==peek(stops)&&stops.push(max)),stops.forEach((_=>gradient.stop(fraction(_),scale(_)))),gradient}),scaleVisitor),expressionFunction("geoArea",geoArea,scaleVisitor),expressionFunction("geoBounds",geoBounds,scaleVisitor),expressionFunction("geoCentroid",geoCentroid,scaleVisitor),expressionFunction("geoShape",(function geoShape(projection,geojson,group){const p=getScale(projection,(group||this).context);return function(context){return p?p.path.context(context)(geojson):""}}),scaleVisitor),expressionFunction("indata",(function indata(name,field,value){const index=this.context.data[name]["index:"+field],entry=index?index.value.get(value):void 0;return entry?entry.count:entry}),(function indataVisitor(name,args,scope,params){"Literal"!==args[0].type&&error("First argument to indata must be a string literal."),"Literal"!==args[1].type&&error("Second argument to indata must be a string literal.");const data=args[0].value,field=args[1].value,indexName="@"+field;has(indexName,params)||(params[indexName]=scope.getData(data).indataRef(scope,field))})),expressionFunction("data",vega_functions_module_data,dataVisitor),expressionFunction("treePath",(function treePath(name,source,target){const nodes=treeNodes(name,this),s=nodes[source],t=nodes[target];return s&&t?s.path(t).map(datum):void 0}),dataVisitor),expressionFunction("treeAncestors",(function treeAncestors(name,node){const n=treeNodes(name,this)[node];return n?n.ancestors().map(datum):void 0}),dataVisitor),expressionFunction("vlSelectionTest",(function selectionTest(name,datum,op){for(var entry,miss,count,unit,b,data=this.context.data[name],entries=data?data.values.value:[],unitIdx=data?data["index:unit"]&&data["index:unit"].value:void 0,intersect="intersect"===op,n=entries.length,i=0;i<n;++i)if(entry=entries[i],unitIdx&&intersect){if(-1===(count=(miss=miss||{})[unit=entry.unit]||0))continue;if(b=testPoint(datum,entry),miss[unit]=b?-1:++count,b&&1===unitIdx.size)return!0;if(!b&&count===unitIdx.get(unit).count)return!1}else if(intersect^(b=testPoint(datum,entry)))return b;return n&&intersect}),selectionVisitor),expressionFunction("vlSelectionIdTest",(function selectionIdTest(name,datum,op){const data=this.context.data[name],entries=data?data.values.value:[],unitIdx=data?data["index:unit"]&&data["index:unit"].value:void 0,intersect="intersect"===op,value=$selectionId(datum),index=vega_selection_module_bisectLeft(entries,value);if(index===entries.length)return!1;if($selectionId(entries[index])!==value)return!1;if(unitIdx&&intersect){if(1===unitIdx.size)return!0;if(vega_selection_module_bisectRight(entries,value)-index<unitIdx.size)return!1}return!0}),selectionVisitor),expressionFunction("vlSelectionResolve",(function selectionResolve(name,op,isMulti,vl5){for(var entry,fields,values,unit,field,value,res,resUnit,type,union,j,m,data=this.context.data[name],entries=data?data.values.value:[],resolved={},multiRes={},types={},n=entries.length,i=0;i<n;++i)if(unit=(entry=entries[i]).unit,fields=entry.fields,values=entry.values,fields&&values){for(j=0,m=fields.length;j<m;++j)field=fields[j],resUnit=(res=resolved[field.field]||(resolved[field.field]={}))[unit]||(res[unit]=[]),types[field.field]=type=field.type.charAt(0),union=ops["".concat(type,"_union")],res[unit]=union(resUnit,array(values[j]));isMulti&&(resUnit=multiRes[unit]||(multiRes[unit]=[])).push(array(values).reduce(((obj,curr,j)=>(obj[fields[j].field]=curr,obj)),{}))}else field="_vgsid_",value=$selectionId(entry),(resUnit=(res=resolved[field]||(resolved[field]={}))[unit]||(res[unit]=[])).push(value),isMulti&&(resUnit=multiRes[unit]||(multiRes[unit]=[])).push({_vgsid_:value});if(op=op||"union",resolved._vgsid_?resolved._vgsid_=ops["".concat("_vgsid_","_").concat(op)](...Object.values(resolved._vgsid_)):Object.keys(resolved).forEach((field=>{resolved[field]=Object.keys(resolved[field]).map((unit=>resolved[field][unit])).reduce(((acc,curr)=>void 0===acc?curr:ops["".concat(types[field],"_").concat(op)](acc,curr)))})),entries=Object.keys(multiRes),isMulti&&entries.length){resolved[vl5?"vlPoint":"vlMulti"]="union"===op?{or:entries.reduce(((acc,k)=>(acc.push(...multiRes[k]),acc)),[])}:{and:entries.map((k=>({or:multiRes[k]})))}}return resolved}),selectionVisitor),expressionFunction("vlSelectionTuples",(function selectionTuples(array,base){return array.map((x=>extend(base.fields?{values:base.fields.map((f=>(f.getter||(f.getter=field(f.field)))(x.datum)))}:{_vgsid_:$selectionId(x.datum)},base)))}));const Skip=toSet(["rule"]),Swap=toSet(["group","image","rect"]);function canonicalType(type){return(type+"").toLowerCase()}function expression(ctx,args,code){";"!==code[code.length-1]&&(code="return("+code+");");const fn=Function(...args.concat(code));return ctx&&ctx.functions?fn.bind(ctx.functions):fn}var expressionCodegen={operator:(ctx,expr)=>expression(ctx,["_"],expr.code),parameter:(ctx,expr)=>expression(ctx,["datum","_"],expr.code),event:(ctx,expr)=>expression(ctx,["event"],expr.code),handler:(ctx,expr)=>expression(ctx,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(expr.code,";")),encode:(ctx,encode)=>{const{marktype,channels}=encode;let code="var o=item,datum=o.datum,m=0,$;";for(const name in channels){const o="o["+$(name)+"]";code+="$=".concat(channels[name].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return code+=function adjustSpatial(encode,marktype){let code="";return Skip[marktype]||(encode.x2&&(encode.x?(Swap[marktype]&&(code+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),code+="o.width=o.x2-o.x;"):code+="o.x=o.x2-(o.width||0);"),encode.xc&&(code+="o.x=o.xc-(o.width||0)/2;"),encode.y2&&(encode.y?(Swap[marktype]&&(code+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),code+="o.height=o.y2-o.y;"):code+="o.y=o.y2-(o.height||0);"),encode.yc&&(code+="o.y=o.yc-(o.height||0)/2;")),code}(channels,marktype),code+="return m;",expression(ctx,["item","_"],code)},codegen:{get(path){const ref="[".concat(path.map($).join("]["),"]"),get=Function("_","return _".concat(ref,";"));return get.path=ref,get},comparator(fields,orders){let t;const fn=Function("a","b","var u, v; return "+fields.map(((f,i)=>{const o=orders[i];let u,v;return f.path?(u="a".concat(f.path),v="b".concat(f.path)):((t=t||{})["f"+i]=f,u="this.f".concat(i,"(a)"),v="this.f".concat(i,"(b)")),function _compare(u,v,lt,gt){return"((u = ".concat(u,") < (v = ").concat(v,") || u == null) && v != null ? ").concat(lt,"\n  : (u > v || v == null) && u != null ? ").concat(gt,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(lt,"\n  : v !== v && u === u ? ").concat(gt," : ")}(u,v,-o,o)})).join("")+"0;");return t?fn.bind(t):fn}}};function parseParameter(spec,ctx,params){if(!spec||!isObject(spec))return spec;for(let p,i=0,n=PARSERS.length;i<n;++i)if(p=PARSERS[i],has(spec,p.key))return p.parse(spec,ctx,params);return spec}var PARSERS=[{key:"$ref",parse:function getOperator(_,ctx){return ctx.get(_.$ref)||error("Operator not defined: "+_.$ref)}},{key:"$key",parse:function getKey(_,ctx){const k="k:"+_.$key+"_"+!!_.$flat;return ctx.fn[k]||(ctx.fn[k]=key(_.$key,_.$flat,ctx.expr.codegen))}},{key:"$expr",parse:function getExpression(_,ctx,params){_.$params&&ctx.parseParameters(_.$params,params);const k="e:"+_.$expr.code+"_"+_.$name;return ctx.fn[k]||(ctx.fn[k]=accessor(ctx.parameterExpression(_.$expr),_.$fields,_.$name))}},{key:"$field",parse:function vega_runtime_module_getField(_,ctx){if(!_.$field)return null;const k="f:"+_.$field+"_"+_.$name;return ctx.fn[k]||(ctx.fn[k]=field(_.$field,_.$name,ctx.expr.codegen))}},{key:"$encode",parse:function getEncode(_,ctx){const spec=_.$encode,encode={};for(const name in spec){const enc=spec[name];encode[name]=accessor(ctx.encodeExpression(enc.$expr),enc.$fields),encode[name].output=enc.$output}return encode}},{key:"$compare",parse:function getCompare(_,ctx){const k="c:"+_.$compare+"_"+_.$order,c=array(_.$compare).map((_=>_&&_.$tupleid?tupleid:_));return ctx.fn[k]||(ctx.fn[k]=vega_util_module_compare(c,_.$order,ctx.expr.codegen))}},{key:"$context",parse:function getContext(_,ctx){return ctx}},{key:"$subflow",parse:function getSubflow(_,ctx){const spec=_.$subflow;return function(dataflow,key,parent){const subctx=ctx.fork().parse(spec),op=subctx.get(spec.operators[0].id),p=subctx.signals.parent;return p&&p.set(parent),op.detachSubflow=()=>ctx.detach(subctx),op}}},{key:"$tupleid",parse:function getTupleId(){return tupleid}}];const vega_runtime_module_SKIP={skip:!0};function vega_runtime_module_context(df,transforms,functions,expr){return new Context(df,transforms,functions,expr)}function Context(df,transforms,functions,expr){this.dataflow=df,this.transforms=transforms,this.events=df.events.bind(df),this.expr=expr||expressionCodegen,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},functions&&(this.functions=Object.create(functions),this.functions.context=this)}function Subcontext(ctx){this.dataflow=ctx.dataflow,this.transforms=ctx.transforms,this.events=ctx.events,this.expr=ctx.expr,this.signals=Object.create(ctx.signals),this.scales=Object.create(ctx.scales),this.nodes=Object.create(ctx.nodes),this.data=Object.create(ctx.data),this.fn=Object.create(ctx.fn),ctx.functions&&(this.functions=Object.create(ctx.functions),this.functions.context=this)}function ariaLabel(el,desc){el&&(null==desc?el.removeAttribute("aria-label"):el.setAttribute("aria-label",desc))}Context.prototype=Subcontext.prototype={fork(){const ctx=new Subcontext(this);return(this.subcontext||(this.subcontext=[])).push(ctx),ctx},detach(ctx){this.subcontext=this.subcontext.filter((c=>c!==ctx));const keys=Object.keys(ctx.nodes);for(const key of keys)ctx.nodes[key]._targets=null;for(const key of keys)ctx.nodes[key].detach();ctx.nodes=null},get(id){return this.nodes[id]},set(id,node){return this.nodes[id]=node},add(spec,op){const ctx=this,df=ctx.dataflow,data=spec.value;if(ctx.set(spec.id,op),function isCollect(type){return"collect"===canonicalType(type)}(spec.type)&&data&&(data.$ingest?df.ingest(op,data.$ingest,data.$format):data.$request?df.preload(op,data.$request,data.$format):df.pulse(op,df.changeset().insert(data))),spec.root&&(ctx.root=op),spec.parent){let p=ctx.get(spec.parent.$ref);p?(df.connect(p,[op]),op.targets().add(p)):(ctx.unresolved=ctx.unresolved||[]).push((()=>{p=ctx.get(spec.parent.$ref),df.connect(p,[op]),op.targets().add(p)}))}if(spec.signal&&(ctx.signals[spec.signal]=op),spec.scale&&(ctx.scales[spec.scale]=op),spec.data)for(const name in spec.data){const data=ctx.data[name]||(ctx.data[name]={});spec.data[name].forEach((role=>data[role]=op))}},resolve(){return(this.unresolved||[]).forEach((fn=>fn())),delete this.unresolved,this},operator(spec,update){this.add(spec,this.dataflow.add(spec.value,update))},transform(spec,type){this.add(spec,this.dataflow.add(this.transforms[canonicalType(type)]))},stream(spec,stream){this.set(spec.id,stream)},update(spec,stream,target,update,params){this.dataflow.on(stream,target,update,params,spec.options)},operatorExpression(expr){return this.expr.operator(this,expr)},parameterExpression(expr){return this.expr.parameter(this,expr)},eventExpression(expr){return this.expr.event(this,expr)},handlerExpression(expr){return this.expr.handler(this,expr)},encodeExpression(encode){return this.expr.encode(this,encode)},parse:function vega_runtime_module_parse(spec){const ctx=this,operators=spec.operators||[];return spec.background&&(ctx.background=spec.background),spec.eventConfig&&(ctx.eventConfig=spec.eventConfig),spec.locale&&(ctx.locale=spec.locale),operators.forEach((entry=>ctx.parseOperator(entry))),operators.forEach((entry=>ctx.parseOperatorParameters(entry))),(spec.streams||[]).forEach((entry=>ctx.parseStream(entry))),(spec.updates||[]).forEach((entry=>ctx.parseUpdate(entry))),ctx.resolve()},parseOperator:function parseOperator(spec){const ctx=this;!function isOperator(type){return"operator"===canonicalType(type)}(spec.type)&&spec.type?ctx.transform(spec,spec.type):ctx.operator(spec,spec.update?ctx.operatorExpression(spec.update):null)},parseOperatorParameters:function parseOperatorParameters(spec){const ctx=this;if(spec.params){const op=ctx.get(spec.id);op||error("Invalid operator id: "+spec.id),ctx.dataflow.connect(op,op.parameters(ctx.parseParameters(spec.params),spec.react,spec.initonly))}},parseParameters:function parseParameters(spec,params){params=params||{};const ctx=this;for(const key in spec){const value=spec[key];params[key]=isArray(value)?value.map((v=>parseParameter(v,ctx,params))):parseParameter(value,ctx,params)}return params},parseStream:function parseStream(spec){var args,ctx=this,filter=null!=spec.filter?ctx.eventExpression(spec.filter):void 0,stream=null!=spec.stream?ctx.get(spec.stream):void 0;spec.source?stream=ctx.events(spec.source,spec.type,filter):spec.merge&&(stream=(args=spec.merge.map((_=>ctx.get(_))))[0].merge.apply(args[0],args.slice(1))),spec.between&&(args=spec.between.map((_=>ctx.get(_))),stream=stream.between(args[0],args[1])),spec.filter&&(stream=stream.filter(filter)),null!=spec.throttle&&(stream=stream.throttle(+spec.throttle)),null!=spec.debounce&&(stream=stream.debounce(+spec.debounce)),null==stream&&error("Invalid stream definition: "+JSON.stringify(spec)),spec.consume&&stream.consume(!0),ctx.stream(spec,stream)},parseUpdate:function parseUpdate(spec){var target,srcid=isObject(srcid=spec.source)?srcid.$ref:srcid,source=this.get(srcid),update=spec.update,params=void 0;source||error("Source not defined: "+spec.source),target=spec.target&&spec.target.$expr?this.eventExpression(spec.target.$expr):this.get(spec.target),update&&update.$expr&&(update.$params&&(params=this.parseParameters(update.$params)),update=this.handlerExpression(update.$expr)),this.update(spec,source,target,update,params)},getState:function getState(options){var ctx=this,state={};if(options.signals){var signals=state.signals={};Object.keys(ctx.signals).forEach((key=>{const op=ctx.signals[key];options.signals(key,op)&&(signals[key]=op.value)}))}if(options.data){var data=state.data={};Object.keys(ctx.data).forEach((key=>{const dataset=ctx.data[key];options.data(key,dataset)&&(data[key]=dataset.input.value)}))}return ctx.subcontext&&!1!==options.recurse&&(state.subcontext=ctx.subcontext.map((ctx=>ctx.getState(options)))),state},setState:function setState(state){var ctx=this,df=ctx.dataflow,data=state.data,signals=state.signals;Object.keys(signals||{}).forEach((key=>{df.update(ctx.signals[key],signals[key],vega_runtime_module_SKIP)})),Object.keys(data||{}).forEach((key=>{df.pulse(ctx.data[key].input,df.changeset().remove(truthy).insert(data[key]))})),(state.subcontext||[]).forEach(((substate,i)=>{const subctx=ctx.subcontext[i];subctx&&subctx.setState(substate)}))}};function setCursor(view,cursor){const el=view.globalCursor()?"undefined"!=typeof document&&document.body:view.container();if(el)return null==cursor?el.style.removeProperty("cursor"):el.style.cursor=cursor}function dataref(view,name){var data=view._runtime.data;return has(data,name)||error("Unrecognized data set: "+name),data[name]}function change(name,changes){isChangeSet(changes)||error("Second argument to changes must be a changeset.");const dataset=dataref(this,name);return dataset.modified=!0,this.pulse(dataset.input,changes)}function width(view){var padding=view.padding();return Math.max(0,view._viewWidth+padding.left+padding.right)}function height(view){var padding=view.padding();return Math.max(0,view._viewHeight+padding.top+padding.bottom)}function vega_view_module_offset(view){var padding=view.padding(),origin=view._origin;return[padding.left+origin[0],padding.top+origin[1]]}function eventExtend(view,event,item){var p,translate,r=view._renderer,el=r&&r.canvas();return el&&(translate=vega_view_module_offset(view),(p=vega_scenegraph_module_point(event.changedTouches?event.changedTouches[0]:event,el))[0]-=translate[0],p[1]-=translate[1]),event.dataflow=view,event.item=item,event.vega=function extension(view,item,point){const itemGroup=item?"group"===item.mark.marktype?item:item.mark.group:null;function group(name){var i,g=itemGroup;if(name)for(i=item;i;i=i.mark.group)if(i.mark.name===name){g=i;break}return g&&g.mark&&g.mark.interactive?g:{}}function xy(item){if(!item)return point;isString(item)&&(item=group(item));const p=point.slice();for(;item;)p[0]-=item.x||0,p[1]-=item.y||0,item=item.mark&&item.mark.group;return p}return{view:vega_util_module_constant(view),item:vega_util_module_constant(item||{}),group,xy,x:item=>xy(item)[0],y:item=>xy(item)[1]}}(view,item,p),event}const NO_TRAP={trap:!1};function trackEventListener(view,sources,type,handler){view._eventListeners.push({type,sources:array(sources),handler})}function permit(view,key,type){const rule=view._eventConfig&&view._eventConfig[key];return!(!1===rule||isObject(rule)&&!rule[type])||(view.warn("Blocked ".concat(key," ").concat(type," event listener.")),!1)}function itemFilter(event){return event.item}function markTarget(event){return event.item.mark.source}function invoke(name){return function(_,event){return event.vega.view().changeset().encode(event.item,name)}}function vega_view_module_element(tag,attr,text){const el=document.createElement(tag);for(const key in attr)el.setAttribute(key,attr[key]);return null!=text&&(el.textContent=text),el}function target(bind,node,param,view){const type=param.event||"input",handler=()=>bind.update(node.value);view.signal(param.signal,node.value),node.addEventListener(type,handler),trackEventListener(view,node,type,handler),bind.set=value=>{node.value=value,node.dispatchEvent(function vega_view_module_event(type){return"undefined"!=typeof Event?new Event(type):{type}}(type))}}function vega_view_module_generate(bind,el,param,view){const value=view.signal(param.signal),div=vega_view_module_element("div",{class:"vega-bind"}),wrapper="radio"===param.input?div:div.appendChild(vega_view_module_element("label"));wrapper.appendChild(vega_view_module_element("span",{class:"vega-bind-name"},param.name||param.signal)),el.appendChild(div);let input=vega_view_module_form;switch(param.input){case"checkbox":input=vega_view_module_checkbox;break;case"select":input=vega_view_module_select;break;case"radio":input=vega_view_module_radio;break;case"range":input=vega_view_module_range}input(bind,wrapper,param,value)}function vega_view_module_form(bind,el,param,value){const node=vega_view_module_element("input");for(const key in param)"signal"!==key&&"element"!==key&&node.setAttribute("input"===key?"type":key,param[key]);node.setAttribute("name",param.signal),node.value=value,el.appendChild(node),node.addEventListener("input",(()=>bind.update(node.value))),bind.elements=[node],bind.set=value=>node.value=value}function vega_view_module_checkbox(bind,el,param,value){const attr={type:"checkbox",name:param.signal};value&&(attr.checked=!0);const node=vega_view_module_element("input",attr);el.appendChild(node),node.addEventListener("change",(()=>bind.update(node.checked))),bind.elements=[node],bind.set=value=>node.checked=!!value||null}function vega_view_module_select(bind,el,param,value){const node=vega_view_module_element("select",{name:param.signal}),labels=param.labels||[];param.options.forEach(((option,i)=>{const attr={value:option};valuesEqual(option,value)&&(attr.selected=!0),node.appendChild(vega_view_module_element("option",attr,(labels[i]||option)+""))})),el.appendChild(node),node.addEventListener("change",(()=>{bind.update(param.options[node.selectedIndex])})),bind.elements=[node],bind.set=value=>{for(let i=0,n=param.options.length;i<n;++i)if(valuesEqual(param.options[i],value))return void(node.selectedIndex=i)}}function vega_view_module_radio(bind,el,param,value){const group=vega_view_module_element("span",{class:"vega-bind-radio"}),labels=param.labels||[];el.appendChild(group),bind.elements=param.options.map(((option,i)=>{const attr={type:"radio",name:param.signal,value:option};valuesEqual(option,value)&&(attr.checked=!0);const input=vega_view_module_element("input",attr);input.addEventListener("change",(()=>bind.update(option)));const label=vega_view_module_element("label",{},(labels[i]||option)+"");return label.prepend(input),group.appendChild(label),input})),bind.set=value=>{const nodes=bind.elements,n=nodes.length;for(let i=0;i<n;++i)valuesEqual(nodes[i].value,value)&&(nodes[i].checked=!0)}}function vega_view_module_range(bind,el,param,value){value=void 0!==value?value:(+param.max+ +param.min)/2;const max=null!=param.max?param.max:Math.max(100,+value)||100,min=param.min||Math.min(0,max,+value)||0,step=param.step||tickStep(min,max,100),node=vega_view_module_element("input",{type:"range",name:param.signal,min,max,step});node.value=value;const span=vega_view_module_element("span",{},+value);el.appendChild(node),el.appendChild(span);const update=()=>{span.textContent=node.value,bind.update(+node.value)};node.addEventListener("input",update),node.addEventListener("change",update),bind.elements=[node],bind.set=value=>{node.value=value,span.textContent=value}}function valuesEqual(a,b){return a===b||a+""==b+""}function initializeRenderer(view,r,el,constructor,scaleFactor,opt){return(r=r||new constructor(view.loader())).initialize(el,width(view),height(view),vega_view_module_offset(view),scaleFactor,opt).background(view.background())}function trap(view,fn){return fn?function(){try{fn.apply(this,arguments)}catch(error){view.error(error)}}:null}function vega_view_module_lookup(view,el,clear){if("string"==typeof el){if("undefined"==typeof document)return view.error("DOM document instance not found."),null;if(!(el=document.querySelector(el)))return view.error("Signal bind element not found: "+el),null}if(el&&clear)try{el.textContent=""}catch(e){el=null,view.error(e)}return el}const vega_view_module_number=_=>+_||0;function padding(_){return isObject(_)?{top:vega_view_module_number(_.top),bottom:vega_view_module_number(_.bottom),left:vega_view_module_number(_.left),right:vega_view_module_number(_.right)}:(_=>({top:_,bottom:_,left:_,right:_}))(vega_view_module_number(_))}async function renderHeadless(view,type,scaleFactor,opt){const module=renderModule(type),ctr=module&&module.headless;return ctr||error("Unrecognized renderer type: "+type),await view.runAsync(),initializeRenderer(view,null,null,ctr,scaleFactor,opt).renderAsync(view._scenegraph.root)}var vega_view_module_Skip={skip:!0};function viewWidth(view,width){var a=view.autosize(),p=view.padding();return width-(a&&"padding"===a.contains?p.left+p.right:0)}function viewHeight(view,height){var a=view.autosize(),p=view.padding();return height-(a&&"padding"===a.contains?p.top+p.bottom:0)}function dataTest(name,data){return data.modified&&isArray(data.input.value)&&name.indexOf("_:vega:_")}function signalTest(name,op){return!("parent"===name||op instanceof transforms.proxy)}function vega_view_module_defaultTooltip(handler,event,item,value){const el=handler.element();el&&el.setAttribute("title",function formatTooltip(value){return null==value?"":isArray(value)?formatArray(value):isObject(value)&&!isDate(value)?function formatObject(obj){return Object.keys(obj).map((key=>{const v=obj[key];return key+": "+(isArray(v)?formatArray(v):vega_view_module_formatValue(v))})).join("\n")}(value):value+""}(value))}function formatArray(value){return"["+value.map(vega_view_module_formatValue).join(", ")+"]"}function vega_view_module_formatValue(value){return isArray(value)?"[]":isObject(value)&&!isDate(value)?"{}":value}function View(spec,options){const view=this;if(options=options||{},Dataflow.call(view),options.loader&&view.loader(options.loader),options.logger&&view.logger(options.logger),null!=options.logLevel&&view.logLevel(options.logLevel),options.locale||spec.locale){const loc=extend({},spec.locale,options.locale);view.locale(vega_format_module_locale(loc.number,loc.time))}view._el=null,view._elBind=null,view._renderType=options.renderer||RenderType.Canvas,view._scenegraph=new Scenegraph;const root=view._scenegraph.root;view._renderer=null,view._tooltip=options.tooltip||vega_view_module_defaultTooltip,view._redraw=!0,view._handler=(new CanvasHandler).scene(root),view._globalCursor=!1,view._preventDefault=!1,view._timers=[],view._eventListeners=[],view._resizeListeners=[],view._eventConfig=function initializeEventConfig(config){const events=extend({defaults:{}},config),unpack=(obj,keys)=>{keys.forEach((k=>{isArray(obj[k])&&(obj[k]=toSet(obj[k]))}))};return unpack(events.defaults,["prevent","allow"]),unpack(events,["view","window","selector"]),events}(spec.eventConfig),view.globalCursor(view._eventConfig.globalCursor);const ctx=function runtime(view,spec,expr){return vega_runtime_module_context(view,transforms,functionContext,expr).parse(spec)}(view,spec,options.expr);view._runtime=ctx,view._signals=ctx.signals,view._bind=(spec.bindings||[]).map((_=>({state:null,param:extend({},_)}))),ctx.root&&ctx.root.set(root),root.source=ctx.data.root.input,view.pulse(ctx.data.root.input,view.changeset().insert(root.items)),view._width=view.width(),view._height=view.height(),view._viewWidth=viewWidth(view,view._width),view._viewHeight=viewHeight(view,view._height),view._origin=[0,0],view._resize=0,view._autosize=1,function initializeResize(view){var s=view._signals,w=s.width,h=s.height,p=s.padding;function resetSize(){view._autosize=view._resize=1}view._resizeWidth=view.add(null,(_=>{view._width=_.size,view._viewWidth=viewWidth(view,_.size),resetSize()}),{size:w}),view._resizeHeight=view.add(null,(_=>{view._height=_.size,view._viewHeight=viewHeight(view,_.size),resetSize()}),{size:h});const resizePadding=view.add(null,resetSize,{pad:p});view._resizeWidth.rank=w.rank+1,view._resizeHeight.rank=h.rank+1,resizePadding.rank=p.rank+1}(view),function vega_view_module_background(view){view.add(null,(_=>(view._background=_.bg,view._resize=1,_.bg)),{bg:view._signals.background})}(view),function cursor(view){const cursor=view._signals.cursor||(view._signals.cursor=view.add({user:"default",item:null}));view.on(view.events("view","mousemove"),cursor,((_,event)=>{const value=cursor.value,user=value?isString(value)?value:value.user:"default",item=event.item&&event.item.cursor||null;return value&&user===value.user&&item==value.item?value:{user,item}})),view.add(null,(function(_){let user=_.cursor,item=this.value;return isString(user)||(item=user.item,user=user.user),setCursor(view,user&&"default"!==user?user:item||user),item}),{cursor})}(view),view.description(spec.description),options.hover&&view.hover(),options.container&&view.initialize(options.container,options.bind)}function lookupSignal(view,name){return has(view._signals,name)?view._signals[name]:error("Unrecognized signal name: "+$(name))}function findOperatorHandler(op,handler){const h=(op._targets||[]).filter((op=>op._update&&op._update.handler===handler));return h.length?h[0]:null}function addOperatorListener(view,name,op,handler){let h=findOperatorHandler(op,handler);return h||(h=trap(view,(()=>handler(name,op.value))),h.handler=handler,view.on(op,null,h)),view}function removeOperatorListener(view,op,handler){const h=findOperatorHandler(op,handler);return h&&op._targets.remove(h),view}inherits(View,Dataflow,{async evaluate(encode,prerun,postrun){if(await Dataflow.prototype.evaluate.call(this,encode,prerun),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,function resizeRenderer(view){var origin=vega_view_module_offset(view),w=width(view),h=height(view);view._renderer.background(view.background()),view._renderer.resize(w,h,origin),view._handler.origin(origin),view._resizeListeners.forEach((handler=>{try{handler(w,h)}catch(error){view.error(error)}}))}(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}return postrun&&asyncCallback(this,postrun),this},dirty(item){this._redraw=!0,this._renderer&&this._renderer.dirty(item)},description(text){if(arguments.length){const desc=null!=text?text+"":null;return desc!==this._desc&&ariaLabel(this._el,this._desc=desc),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(name,value,options){const op=lookupSignal(this,name);return 1===arguments.length?op.value:this.update(op,value,options)},width(_){return arguments.length?this.signal("width",_):this.signal("width")},height(_){return arguments.length?this.signal("height",_):this.signal("height")},padding(_){return arguments.length?this.signal("padding",padding(_)):padding(this.signal("padding"))},autosize(_){return arguments.length?this.signal("autosize",_):this.signal("autosize")},background(_){return arguments.length?this.signal("background",_):this.signal("background")},renderer(type){return arguments.length?(renderModule(type)||error("Unrecognized renderer type: "+type),type!==this._renderType&&(this._renderType=type,this._resetRenderer()),this):this._renderType},tooltip(handler){return arguments.length?(handler!==this._tooltip&&(this._tooltip=handler,this._resetRenderer()),this):this._tooltip},loader(loader){return arguments.length?(loader!==this._loader&&(Dataflow.prototype.loader.call(this,loader),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lookupSignal(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function resizeView(viewWidth,viewHeight,width,height,origin,auto){this.runAfter((view=>{let rerun=0;view._autosize=0,view.width()!==width&&(rerun=1,view.signal("width",width,vega_view_module_Skip),view._resizeWidth.skip(!0)),view.height()!==height&&(rerun=1,view.signal("height",height,vega_view_module_Skip),view._resizeHeight.skip(!0)),view._viewWidth!==viewWidth&&(view._resize=1,view._viewWidth=viewWidth),view._viewHeight!==viewHeight&&(view._resize=1,view._viewHeight=viewHeight),view._origin[0]===origin[0]&&view._origin[1]===origin[1]||(view._resize=1,view._origin=origin),rerun&&view.run("enter"),auto&&view.runAfter((v=>v.resize()))}),!1,1)},addEventListener(type,handler,options){let callback=handler;return options&&!1===options.trap||(callback=trap(this,handler),callback.raw=handler),this._handler.on(type,callback),this},removeEventListener(type,handler){for(var h,t,handlers=this._handler.handlers(type),i=handlers.length;--i>=0;)if(t=handlers[i].type,h=handlers[i].handler,type===t&&(handler===h||handler===h.raw)){this._handler.off(t,h);break}return this},addResizeListener(handler){const l=this._resizeListeners;return l.indexOf(handler)<0&&l.push(handler),this},removeResizeListener(handler){var l=this._resizeListeners,i=l.indexOf(handler);return i>=0&&l.splice(i,1),this},addSignalListener(name,handler){return addOperatorListener(this,name,lookupSignal(this,name),handler)},removeSignalListener(name,handler){return removeOperatorListener(this,lookupSignal(this,name),handler)},addDataListener(name,handler){return addOperatorListener(this,name,dataref(this,name).values,handler)},removeDataListener(name,handler){return removeOperatorListener(this,dataref(this,name).values,handler)},globalCursor(_){if(arguments.length){if(this._globalCursor!==!!_){const prev=setCursor(this,null);this._globalCursor=!!_,prev&&setCursor(this,prev)}return this}return this._globalCursor},preventDefault(_){return arguments.length?(this._preventDefault=_,this):this._preventDefault},timer:function vega_view_module_timer(callback,delay){this._timers.push(function src_interval(callback,delay,time){var t=new Timer,total=delay;return null==delay?(t.restart(callback,delay,time),t):(t._restart=t.restart,t.restart=function(callback,delay,time){delay=+delay,time=null==time?now():+time,t._restart((function tick(elapsed){elapsed+=total,t._restart(tick,total+=delay,time),callback(elapsed)}),delay,time)},t.restart(callback,delay,time),t)}((function tick(elapsed){callback({timestamp:Date.now(),elapsed})}),delay))},events:function vega_view_module_events(source,type,filter){var sources,view=this,s=new EventStream(filter),send=function(e,item){view.runAsync(null,(()=>{"view"===source&&function prevent(view,type){var def=view._eventConfig.defaults,prevent=def.prevent,allow=def.allow;return!1!==prevent&&!0!==allow&&(!0===prevent||!1===allow||(prevent?prevent[type]:allow?!allow[type]:view.preventDefault()))}(view,type)&&e.preventDefault(),s.receive(eventExtend(view,e,item))}))};if("timer"===source)permit(view,"timer",type)&&view.timer(send,type);else if("view"===source)permit(view,"view",type)&&view.addEventListener(type,send,NO_TRAP);else if("window"===source?permit(view,"window",type)&&"undefined"!=typeof window&&(sources=[window]):"undefined"!=typeof document&&permit(view,"selector",type)&&(sources=document.querySelectorAll(source)),sources){for(var i=0,n=sources.length;i<n;++i)sources[i].addEventListener(type,send);trackEventListener(view,sources,type,send)}else view.warn("Can not resolve event source: "+source);return s},finalize:function finalize(){var n,m,e,tooltip=this._tooltip,timers=this._timers,listeners=this._eventListeners;for(n=timers.length;--n>=0;)timers[n].stop();for(n=listeners.length;--n>=0;)for(m=(e=listeners[n]).sources.length;--m>=0;)e.sources[m].removeEventListener(e.type,e.handler);return tooltip&&tooltip.call(this,this._handler,null,null,null),this},hover:function hover(hoverSet,leaveSet){return leaveSet=[leaveSet||"update",(hoverSet=[hoverSet||"hover"])[0]],this.on(this.events("view","mouseover",itemFilter),markTarget,invoke(hoverSet)),this.on(this.events("view","mouseout",itemFilter),markTarget,invoke(leaveSet)),this},data:function vega_view_module_data(name,values){return arguments.length<2?dataref(this,name).values.value:change.call(this,name,changeset().remove(truthy).insert(values))},change,insert:function insert(name,_){return change.call(this,name,changeset().insert(_))},remove:function vega_view_module_remove(name,_){return change.call(this,name,changeset().remove(_))},scale:function vega_view_module_scale(name){var scales=this._runtime.scales;return has(scales,name)||error("Unrecognized scale or projection: "+name),scales[name].value},initialize:function vega_view_module_initialize(el,elBind){const view=this,type=view._renderType,config=view._eventConfig.bind,module=renderModule(type);el=view._el=el?vega_view_module_lookup(view,el,!0):null,function initializeAria(view){const el=view.container();el&&(el.setAttribute("role","graphics-document"),el.setAttribute("aria-roleDescription","visualization"),ariaLabel(el,view.description()))}(view),module||view.error("Unrecognized renderer type: "+type);const Handler=module.handler||CanvasHandler,Renderer=el?module.renderer:module.headless;return view._renderer=Renderer?initializeRenderer(view,view._renderer,el,Renderer):null,view._handler=function initializeHandler(view,prevHandler,el,constructor){const handler=new constructor(view.loader(),trap(view,view.tooltip())).scene(view.scenegraph().root).initialize(el,vega_view_module_offset(view),view);return prevHandler&&prevHandler.handlers().forEach((h=>{handler.on(h.type,h.handler)})),handler}(view,view._handler,el,Handler),view._redraw=!0,el&&"none"!==config&&(elBind=elBind?view._elBind=vega_view_module_lookup(view,elBind,!0):el.appendChild(vega_view_module_element("form",{class:"vega-bindings"})),view._bind.forEach((_=>{_.param.element&&"container"!==config&&(_.element=vega_view_module_lookup(view,_.param.element,!!_.param.input))})),view._bind.forEach((_=>{!function vega_view_module_bind(view,el,binding){if(!el)return;const param=binding.param;let bind=binding.state;return bind||(bind=binding.state={elements:null,active:!1,set:null,update:value=>{value!=view.signal(param.signal)&&view.runAsync(null,(()=>{bind.source=!0,view.signal(param.signal,value)}))}},param.debounce&&(bind.update=debounce(param.debounce,bind.update))),(null==param.input&&param.element?target:vega_view_module_generate)(bind,el,param,view),bind.active||(view.on(view._signals[param.signal],null,(()=>{bind.source?bind.source=!1:bind.set(view.signal(param.signal))})),bind.active=!0),bind}(view,_.element||elBind,_)}))),view},toImageURL:async function renderToImageURL(type,scaleFactor){type!==RenderType.Canvas&&type!==RenderType.SVG&&type!==RenderType.PNG&&error("Unrecognized image type: "+type);const r=await renderHeadless(this,type,scaleFactor);return type===RenderType.SVG?function toBlobURL(data,mime){const blob=new Blob([data],{type:mime});return window.URL.createObjectURL(blob)}(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png")},toCanvas:async function renderToCanvas(scaleFactor,opt){return(await renderHeadless(this,RenderType.Canvas,scaleFactor,opt)).canvas()},toSVG:async function renderToSVG(scaleFactor){return(await renderHeadless(this,RenderType.SVG,scaleFactor)).svg()},getState:function vega_view_module_getState(options){return this._runtime.getState(options||{data:dataTest,signals:signalTest,recurse:!0})},setState:function vega_view_module_setState(state){return this.runAsync(null,(v=>{v._trigger=!1,v._runtime.setState(state)}),(v=>{v._trigger=!0})),this}});const vega_event_selector_module_ILLEGAL=/[[\]{}]/,DEFAULT_MARKS={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let DEFAULT_SOURCE,MARKS;function eventSelector(selector,source,marks){return DEFAULT_SOURCE=source||"view",MARKS=marks||DEFAULT_MARKS,parseMerge(selector.trim()).map(parseSelector)}function vega_event_selector_module_find(s,i,endChar,pushChar,popChar){const n=s.length;let c,count=0;for(;i<n;++i){if(c=s[i],!count&&c===endChar)return i;popChar&&popChar.indexOf(c)>=0?--count:pushChar&&pushChar.indexOf(c)>=0&&++count}return i}function parseMerge(s){const output=[],n=s.length;let start=0,i=0;for(;i<n;)i=vega_event_selector_module_find(s,i,",","[{","]}"),output.push(s.substring(start,i).trim()),start=++i;if(0===output.length)throw"Empty event selector: "+s;return output}function parseSelector(s){return"["===s[0]?function parseBetween(s){const n=s.length;let b,i=1;if(i=vega_event_selector_module_find(s,i,"]","[","]"),i===n)throw"Empty between selector: "+s;if(b=parseMerge(s.substring(1,i)),2!==b.length)throw"Between selector must have two elements: "+s;if(">"!==(s=s.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+s;b=b.map(parseSelector);const stream=parseSelector(s.slice(1).trim());if(stream.between)return{between:b,stream};stream.between=b;return stream}(s):function vega_event_selector_module_parseStream(s){const stream={source:DEFAULT_SOURCE},source=[];let j,filter,throttle=[0,0],markname=0,start=0,n=s.length,i=0;if("}"===s[n-1]){if(i=s.lastIndexOf("{"),!(i>=0))throw"Unmatched right brace: "+s;try{throttle=function parseThrottle(s){const a=s.split(",");if(!s.length||a.length>2)throw s;return a.map((_=>{const x=+_;if(x!=x)throw s;return x}))}(s.substring(i+1,n-1))}catch(e){throw"Invalid throttle specification: "+s}n=(s=s.slice(0,i).trim()).length,i=0}if(!n)throw s;"@"===s[0]&&(markname=++i);j=vega_event_selector_module_find(s,i,":"),j<n&&(source.push(s.substring(start,j).trim()),start=i=++j);if(i=vega_event_selector_module_find(s,i,"["),i===n)source.push(s.substring(start,n).trim());else if(source.push(s.substring(start,i).trim()),filter=[],start=++i,start===n)throw"Unmatched left bracket: "+s;for(;i<n;){if(i=vega_event_selector_module_find(s,i,"]"),i===n)throw"Unmatched left bracket: "+s;if(filter.push(s.substring(start,i).trim()),i<n-1&&"["!==s[++i])throw"Expected left bracket: "+s;start=++i}if(!(n=source.length)||vega_event_selector_module_ILLEGAL.test(source[n-1]))throw"Invalid event selector: "+s;n>1?(stream.type=source[1],markname?stream.markname=source[0].slice(1):!function isMarkType(type){return MARKS[type]}(source[0])?stream.source=source[0]:stream.marktype=source[0]):stream.type=source[0];"!"===stream.type.slice(-1)&&(stream.consume=!0,stream.type=stream.type.slice(0,-1));null!=filter&&(stream.filter=filter);throttle[0]&&(stream.throttle=throttle[0]);throttle[1]&&(stream.debounce=throttle[1]);return stream}(s)}function parseAutosize(spec){return isObject(spec)?spec:{type:spec||"pad"}}const vega_parser_module_number=_=>+_||0;function parsePadding(spec){return isObject(spec)?spec.signal?spec:{top:vega_parser_module_number(spec.top),bottom:vega_parser_module_number(spec.bottom),left:vega_parser_module_number(spec.left),right:vega_parser_module_number(spec.right)}:{top:_=vega_parser_module_number(spec),bottom:_,left:_,right:_};var _}const encoder=_=>isObject(_)&&!isArray(_)?extend({},_):{value:_};function addEncode(object,name,value,set){if(null!=value){return isObject(value)&&!isArray(value)||isArray(value)&&value.length&&isObject(value[0])?object.update[name]=value:object[set||"enter"][name]={value},1}return 0}function addEncoders(object,enter,update){for(const name in enter)addEncode(object,name,enter[name]);for(const name in update)addEncode(object,name,update[name],"update")}function extendEncode(encode,extra,skip){for(const name in extra)skip&&has(skip,name)||(encode[name]=extend(encode[name]||{},extra[name]));return encode}function vega_parser_module_has(key,encode){return encode&&(encode.enter&&encode.enter[key]||encode.update&&encode.update[key])}function applyDefault(defaults,key,value){defaults[key]=value&&value.signal?{signal:value.signal}:{value}}const scaleRef=scale=>isString(scale)?$(scale):scale.signal?`(${scale.signal})`:vega_parser_module_field(scale);function entry$1(enc){if(null!=enc.gradient)return function vega_parser_module_gradient(enc){const args=[enc.start,enc.stop,enc.count].map((_=>null==_?null:$(_)));for(;args.length&&null==peek(args);)args.pop();return args.unshift(scaleRef(enc.gradient)),`gradient(${args.join(",")})`}(enc);let value=enc.signal?`(${enc.signal})`:enc.color?function vega_parser_module_color(enc){return enc.c?_color("hcl",enc.h,enc.c,enc.l):enc.h||enc.s?_color("hsl",enc.h,enc.s,enc.l):enc.l||enc.a?_color("lab",enc.l,enc.a,enc.b):enc.r||enc.g||enc.b?_color("rgb",enc.r,enc.g,enc.b):null}(enc.color):null!=enc.field?vega_parser_module_field(enc.field):void 0!==enc.value?$(enc.value):void 0;return null!=enc.scale&&(value=function vega_parser_module_scale(enc,value){const scale=scaleRef(enc.scale);null!=enc.range?value=`lerp(_range(${scale}), ${+enc.range})`:(void 0!==value&&(value=`_scale(${scale}, ${value})`),enc.band&&(value=(value?value+"+":"")+`_bandwidth(${scale})`+(1==+enc.band?"":"*"+property(enc.band)),enc.extra&&(value=`(datum.extra ? _scale(${scale}, datum.extra.value) : ${value})`)),null==value&&(value="0"));return value}(enc,value)),void 0===value&&(value=null),null!=enc.exponent&&(value=`pow(${value},${property(enc.exponent)})`),null!=enc.mult&&(value+=`*${property(enc.mult)}`),null!=enc.offset&&(value+=`+${property(enc.offset)}`),enc.round&&(value=`round(${value})`),value}const _color=(type,x,y,z)=>`(${type}(${[x,y,z].map(entry$1).join(",")})+'')`;function property(property){return isObject(property)?"("+entry$1(property)+")":property}function vega_parser_module_field(ref){return resolveField(isObject(ref)?ref:{datum:ref})}function resolveField(ref){let object,level,field;if(ref.signal)object="datum",field=ref.signal;else if(ref.group||ref.parent){for(level=Math.max(1,ref.level||1),object="item";level-- >0;)object+=".mark.group";ref.parent?(field=ref.parent,object+=".datum"):field=ref.group}else ref.datum?(object="datum",field=ref.datum):error("Invalid field reference: "+$(ref));return ref.signal||(field=isString(field)?splitAccessPath(field).map($).join("]["):resolveField(field)),object+"["+field+"]"}function parseEncode(encode,type,role,style,scope,params){const enc={};(params=params||{}).encoders={$encode:enc},encode=function applyDefaults(encode,type,role,style,config){const defaults={},enter={};let update,key,skip,props;for(key in key="lineBreak","text"!==type||null==config[key]||vega_parser_module_has(key,encode)||applyDefault(defaults,key,config[key]),("legend"==role||String(role).startsWith("axis"))&&(role=null),props="frame"===role?config.group:"mark"===role?extend({},config.mark,config[type]):null,props)skip=vega_parser_module_has(key,encode)||("fill"===key||"stroke"===key)&&(vega_parser_module_has("fill",encode)||vega_parser_module_has("stroke",encode)),skip||applyDefault(defaults,key,props[key]);for(key in array(style).forEach((name=>{const props=config.style&&config.style[name];for(const key in props)vega_parser_module_has(key,encode)||applyDefault(defaults,key,props[key])})),encode=extend({},encode),defaults)props=defaults[key],props.signal?(update=update||{})[key]=props:enter[key]=props;return encode.enter=extend(enter,encode.enter),update&&(encode.update=extend(update,encode.update)),encode}(encode,type,role,style,scope.config);for(const key in encode)enc[key]=parseBlock(encode[key],type,params,scope);return params}function parseBlock(block,marktype,params,scope){const channels={},fields={};for(const name in block)null!=block[name]&&(channels[name]=parse$1((enc=block[name],isArray(enc)?function vega_parser_module_rule(enc){let code="";return enc.forEach((rule=>{const value=entry$1(rule);code+=rule.test?`(${rule.test})?${value}:`:value})),":"===peek(code)&&(code+="null"),code}(enc):entry$1(enc)),scope,params,fields));var enc;return{$expr:{marktype,channels},$fields:Object.keys(fields),$output:Object.keys(block)}}function parse$1(code,scope,params,fields){const expr=vega_functions_module_parser(code,scope);return expr.$fields.forEach((name=>fields[name]=1)),extend(params,expr.$params),expr.$expr}const OUTER_INVALID=["value","update","init","react","bind"];function outerError(prefix,name){error(prefix+' for "outer" push: '+$(name))}function parseSignal(signal,scope){const name=signal.name;if("outer"===signal.push)scope.signals[name]||outerError("No prior signal definition",name),OUTER_INVALID.forEach((prop=>{void 0!==signal[prop]&&outerError("Invalid property ",prop)}));else{const op=scope.addSignal(name,signal.value);!1===signal.react&&(op.react=!1),signal.bind&&scope.addBinding(name,signal.bind)}}function Entry(type,value,params,parent){this.id=-1,this.type=type,this.value=value,this.params=params,parent&&(this.parent=parent)}function entry(type,value,params,parent){return new Entry(type,value,params,parent)}function operator(value,params){return entry("operator",value,params)}function ref(op){const ref={$ref:op.id};return op.id<0&&(op.refs=op.refs||[]).push(ref),ref}function fieldRef$1(field,name){return name?{$field:field,$name:name}:{$field:field}}const keyFieldRef=fieldRef$1("key");function compareRef(fields,orders){return{$compare:fields,$order:orders}}function aggrField(op,field){return(op&&op.signal?"$"+op.signal:op||"")+(op&&field?"_":"")+(field&&field.signal?"$"+field.signal:field||"")}function isSignal(_){return _&&_.signal}function hasSignal(_){if(isSignal(_))return!0;if(isObject(_))for(const key in _)if(hasSignal(_[key]))return!0;return!1}function vega_parser_module_value(specValue,defaultValue){return null!=specValue?specValue:defaultValue}function deref(v){return v&&v.signal||v}function vega_parser_module_parseStream(stream,scope){return(stream.merge?mergeStream:stream.stream?nestedStream:stream.type?eventStream:error("Invalid stream specification: "+$(stream)))(stream,scope)}function mergeStream(stream,scope){const list=stream.merge.map((s=>vega_parser_module_parseStream(s,scope))),entry=streamParameters({merge:list},stream,scope);return scope.addStream(entry).id}function nestedStream(stream,scope){const entry=streamParameters({stream:vega_parser_module_parseStream(stream.stream,scope)},stream,scope);return scope.addStream(entry).id}function eventStream(stream,scope){let id;"timer"===stream.type?(id=scope.event("timer",stream.throttle),stream={between:stream.between,filter:stream.filter}):id=scope.event(function eventSource(source){return"scope"===source?"view":source||"view"}(stream.source),stream.type);const entry=streamParameters({stream:id},stream,scope);return 1===Object.keys(entry).length?id:scope.addStream(entry).id}function streamParameters(entry,stream,scope){let param=stream.between;return param&&(2!==param.length&&error('Stream "between" parameter must have 2 entries: '+$(stream)),entry.between=[vega_parser_module_parseStream(param[0],scope),vega_parser_module_parseStream(param[1],scope)]),param=stream.filter?[].concat(stream.filter):[],(stream.marktype||stream.markname||stream.markrole)&&param.push(function filterMark(type,name,role){const item="event.item";return item+(type&&"*"!==type?"&&"+item+".mark.marktype==='"+type+"'":"")+(role?"&&"+item+".mark.role==='"+role+"'":"")+(name?"&&"+item+".mark.name==='"+name+"'":"")}(stream.marktype,stream.markname,stream.markrole)),"scope"===stream.source&&param.push("inScope(event.item)"),param.length&&(entry.filter=vega_functions_module_parser("("+param.join(")&&(")+")",scope).$expr),null!=(param=stream.throttle)&&(entry.throttle=+param),null!=(param=stream.debounce)&&(entry.debounce=+param),stream.consume&&(entry.consume=!0),entry}const OP_VALUE_EXPR={code:"_.$value",ast:{type:"Identifier",value:"value"}};function vega_parser_module_parseUpdate(spec,scope,target){const encode=spec.encode,entry={target};let events=spec.events,update=spec.update,sources=[];events||error("Signal update missing events specification."),isString(events)&&(events=eventSelector(events,scope.isSubscope()?"scope":"view")),events=array(events).filter((s=>s.signal||s.scale?(sources.push(s),0):1)),sources.length>1&&(sources=[mergeSources(sources)]),events.length&&sources.push(events.length>1?{merge:events}:events[0]),null!=encode&&(update&&error("Signal encode and update are mutually exclusive."),update="encode(item(),"+$(encode)+")"),entry.update=isString(update)?vega_functions_module_parser(update,scope):null!=update.expr?vega_functions_module_parser(update.expr,scope):null!=update.value?update.value:null!=update.signal?{$expr:OP_VALUE_EXPR,$params:{$value:scope.signalRef(update.signal)}}:error("Invalid signal update specification."),spec.force&&(entry.options={force:!0}),sources.forEach((source=>scope.addUpdate(extend(function streamSource(stream,scope){return{source:stream.signal?scope.signalRef(stream.signal):stream.scale?scope.scaleRef(stream.scale):vega_parser_module_parseStream(stream,scope)}}(source,scope),entry))))}function mergeSources(sources){return{signal:"["+sources.map((s=>s.scale?'scale("'+s.scale+'")':s.signal))+"]"}}const vega_parser_module_transform=name=>(params,value,parent)=>entry(name,value,params||void 0,parent),vega_parser_module_Aggregate=vega_parser_module_transform("aggregate"),vega_parser_module_AxisTicks=vega_parser_module_transform("axisticks"),vega_parser_module_Bound=vega_parser_module_transform("bound"),vega_parser_module_Collect=vega_parser_module_transform("collect"),vega_parser_module_Compare=vega_parser_module_transform("compare"),vega_parser_module_DataJoin=vega_parser_module_transform("datajoin"),vega_parser_module_Encode=vega_parser_module_transform("encode"),vega_parser_module_Expression=vega_parser_module_transform("expression"),vega_parser_module_Facet=vega_parser_module_transform("facet"),vega_parser_module_Field=vega_parser_module_transform("field"),vega_parser_module_Key=vega_parser_module_transform("key"),vega_parser_module_LegendEntries=vega_parser_module_transform("legendentries"),vega_parser_module_Load=vega_parser_module_transform("load"),vega_parser_module_Mark=vega_parser_module_transform("mark"),vega_parser_module_MultiExtent=vega_parser_module_transform("multiextent"),vega_parser_module_MultiValues=vega_parser_module_transform("multivalues"),vega_parser_module_Overlap=vega_parser_module_transform("overlap"),vega_parser_module_Params=vega_parser_module_transform("params"),vega_parser_module_PreFacet=vega_parser_module_transform("prefacet"),vega_parser_module_Projection=vega_parser_module_transform("projection"),vega_parser_module_Proxy=vega_parser_module_transform("proxy"),vega_parser_module_Relay=vega_parser_module_transform("relay"),vega_parser_module_Render=vega_parser_module_transform("render"),vega_parser_module_Scale=vega_parser_module_transform("scale"),vega_parser_module_Sieve=vega_parser_module_transform("sieve"),vega_parser_module_SortItems=vega_parser_module_transform("sortitems"),vega_parser_module_ViewLayout=vega_parser_module_transform("viewlayout"),vega_parser_module_Values=vega_parser_module_transform("values");let FIELD_REF_ID=0;const MULTIDOMAIN_SORT_OPS={min:"min",max:"max",count:"sum"};function parseScale(spec,scope){const params=scope.getScale(spec.name).params;let key;for(key in params.domain=parseScaleDomain(spec.domain,spec,scope),null!=spec.range&&(params.range=parseScaleRange(spec,scope,params)),null!=spec.interpolate&&function parseScaleInterpolate(interpolate,params){params.interpolate=parseLiteral(interpolate.type||interpolate),null!=interpolate.gamma&&(params.interpolateGamma=parseLiteral(interpolate.gamma))}(spec.interpolate,params),null!=spec.nice&&(params.nice=function parseScaleNice(nice){return isObject(nice)?{interval:parseLiteral(nice.interval),step:parseLiteral(nice.step)}:parseLiteral(nice)}(spec.nice)),null!=spec.bins&&(params.bins=function parseScaleBins(v,scope){return v.signal||isArray(v)?parseArray(v,scope):scope.objectProperty(v)}(spec.bins,scope)),spec)has(params,key)||"name"===key||(params[key]=parseLiteral(spec[key],scope))}function parseLiteral(v,scope){return isObject(v)?v.signal?scope.signalRef(v.signal):error("Unsupported object: "+$(v)):v}function parseArray(v,scope){return v.signal?scope.signalRef(v.signal):v.map((v=>parseLiteral(v,scope)))}function dataLookupError(name){error("Can not find data set: "+$(name))}function parseScaleDomain(domain,spec,scope){if(domain)return domain.signal?scope.signalRef(domain.signal):(isArray(domain)?explicitDomain:domain.fields?multipleDomain:singularDomain)(domain,spec,scope);null==spec.domainMin&&null==spec.domainMax||error("No scale domain defined for domainMin/domainMax to override.")}function explicitDomain(domain,spec,scope){return domain.map((v=>parseLiteral(v,scope)))}function singularDomain(domain,spec,scope){const data=scope.getData(domain.data);return data||dataLookupError(domain.data),isDiscrete(spec.type)?data.valuesRef(scope,domain.field,parseSort(domain.sort,!1)):isQuantile(spec.type)?data.domainRef(scope,domain.field):data.extentRef(scope,domain.field)}function multipleDomain(domain,spec,scope){const data=domain.data,fields=domain.fields.reduce(((dom,d)=>(d=isString(d)?{data,field:d}:isArray(d)||d.signal?function fieldRef(data,scope){const name="_:vega:_"+FIELD_REF_ID++,coll=vega_parser_module_Collect({});if(isArray(data))coll.value={$ingest:data};else if(data.signal){const code="setdata("+$(name)+","+data.signal+")";coll.params.input=scope.signalRef(code)}return scope.addDataPipeline(name,[coll,vega_parser_module_Sieve({})]),{data:name,field:"data"}}(d,scope):d,dom.push(d),dom)),[]);return(isDiscrete(spec.type)?ordinalMultipleDomain:isQuantile(spec.type)?quantileMultipleDomain:numericMultipleDomain)(domain,scope,fields)}function ordinalMultipleDomain(domain,scope,fields){const sort=parseSort(domain.sort,!0);let a,v;const counts=fields.map((f=>{const data=scope.getData(f.data);return data||dataLookupError(f.data),data.countsRef(scope,f.field,sort)})),p={groupby:keyFieldRef,pulse:counts};sort&&(a=sort.op||"count",v=sort.field?aggrField(a,sort.field):"count",p.ops=[MULTIDOMAIN_SORT_OPS[a]],p.fields=[scope.fieldRef(v)],p.as=[v]),a=scope.add(vega_parser_module_Aggregate(p));const c=scope.add(vega_parser_module_Collect({pulse:ref(a)}));return v=scope.add(vega_parser_module_Values({field:keyFieldRef,sort:scope.sortRef(sort),pulse:ref(c)})),ref(v)}function parseSort(sort,multidomain){return sort&&(sort.field||sort.op?sort.field||"count"===sort.op?multidomain&&sort.field&&sort.op&&!MULTIDOMAIN_SORT_OPS[sort.op]&&error("Multiple domain scales can not be sorted using "+sort.op):error("No field provided for sort aggregate op: "+sort.op):isObject(sort)?sort.field="key":sort={field:"key"}),sort}function quantileMultipleDomain(domain,scope,fields){const values=fields.map((f=>{const data=scope.getData(f.data);return data||dataLookupError(f.data),data.domainRef(scope,f.field)}));return ref(scope.add(vega_parser_module_MultiValues({values})))}function numericMultipleDomain(domain,scope,fields){const extents=fields.map((f=>{const data=scope.getData(f.data);return data||dataLookupError(f.data),data.extentRef(scope,f.field)}));return ref(scope.add(vega_parser_module_MultiExtent({extents})))}function parseScaleRange(spec,scope,params){const config=scope.config.range;let range=spec.range;if(range.signal)return scope.signalRef(range.signal);if(isString(range)){if(config&&has(config,range))return parseScaleRange(spec=extend({},spec,{range:config[range]}),scope,params);"width"===range?range=[0,{signal:"width"}]:"height"===range?range=isDiscrete(spec.type)?[0,{signal:"height"}]:[{signal:"height"},0]:error("Unrecognized scale range value: "+$(range))}else{if(range.scheme)return params.scheme=isArray(range.scheme)?parseArray(range.scheme,scope):parseLiteral(range.scheme,scope),range.extent&&(params.schemeExtent=parseArray(range.extent,scope)),void(range.count&&(params.schemeCount=parseLiteral(range.count,scope)));if(range.step)return void(params.rangeStep=parseLiteral(range.step,scope));if(isDiscrete(spec.type)&&!isArray(range))return parseScaleDomain(range,spec,scope);isArray(range)||error("Unsupported range type: "+$(range))}return range.map((v=>(isArray(v)?parseArray:parseLiteral)(v,scope)))}function parseParameter$1(_,name,scope){return isArray(_)?_.map((_=>parseParameter$1(_,name,scope))):isObject(_)?_.signal?scope.signalRef(_.signal):"fit"===name?_:error("Unsupported parameter object: "+$(_)):_}const Value="value",LegendScales=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],vega_parser_module_Skip={name:1,style:1,interactive:1},vega_parser_module_zero={value:0},vega_parser_module_one={value:1};function guideGroup(mark){return mark.type="group",mark.interactive=mark.interactive||!1,mark}function vega_parser_module_lookup(spec,config){const _=(name,dflt)=>vega_parser_module_value(spec[name],vega_parser_module_value(config[name],dflt));return _.isVertical=s=>"vertical"===vega_parser_module_value(spec.direction,config.direction||(s?config.symbolDirection:config.gradientDirection)),_.gradientLength=()=>vega_parser_module_value(spec.gradientLength,config.gradientLength||config.gradientWidth),_.gradientThickness=()=>vega_parser_module_value(spec.gradientThickness,config.gradientThickness||config.gradientHeight),_.entryColumns=()=>vega_parser_module_value(spec.columns,vega_parser_module_value(config.columns,+_.isVertical(!0))),_}function getEncoding(name,encode){const v=encode&&(encode.update&&encode.update[name]||encode.enter&&encode.enter[name]);return v&&v.signal?v:v?v.value:null}function anchorExpr(s,e,m){return`item.anchor === 'start' ? ${s} : item.anchor === 'end' ? ${e} : ${m}`}const alignExpr$1=anchorExpr($("left"),$("right"),$("center"));function extendOffset(value,offset){return offset?value?isObject(value)?Object.assign({},value,{offset:extendOffset(value.offset,offset)}):{value,offset}:offset:value}function guideMark(mark,extras){return extras?(mark.name=extras.name,mark.style=extras.style||mark.style,mark.interactive=!!extras.interactive,mark.encode=extendEncode(mark.encode,extras,vega_parser_module_Skip)):mark.interactive=!1,mark}function legendGradient(spec,scale,config,userEncode){const _=vega_parser_module_lookup(spec,config),vertical=_.isVertical(),thickness=_.gradientThickness(),length=_.gradientLength();let enter,start,stop,width,height;vertical?(start=[0,1],stop=[0,0],width=thickness,height=length):(start=[0,0],stop=[1,0],width=length,height=thickness);const encode={enter:enter={opacity:vega_parser_module_zero,x:vega_parser_module_zero,y:vega_parser_module_zero,width:encoder(width),height:encoder(height)},update:extend({},enter,{opacity:vega_parser_module_one,fill:{gradient:scale,start,stop}}),exit:{opacity:vega_parser_module_zero}};return addEncoders(encode,{stroke:_("gradientStrokeColor"),strokeWidth:_("gradientStrokeWidth")},{opacity:_("gradientOpacity")}),guideMark({type:"rect",role:"legend-gradient",encode},userEncode)}function legendGradientDiscrete(spec,scale,config,userEncode,dataRef){const _=vega_parser_module_lookup(spec,config),vertical=_.isVertical(),thickness=_.gradientThickness(),length=_.gradientLength();let u,v,uu,vv,adjust="";vertical?(u="y",uu="y2",v="x",vv="width",adjust="1-"):(u="x",uu="x2",v="y",vv="height");const enter={opacity:vega_parser_module_zero,fill:{scale,field:Value}};enter[u]={signal:adjust+"datum.perc",mult:length},enter[v]=vega_parser_module_zero,enter[uu]={signal:adjust+"datum.perc2",mult:length},enter[vv]=encoder(thickness);const encode={enter,update:extend({},enter,{opacity:vega_parser_module_one}),exit:{opacity:vega_parser_module_zero}};return addEncoders(encode,{stroke:_("gradientStrokeColor"),strokeWidth:_("gradientStrokeWidth")},{opacity:_("gradientOpacity")}),guideMark({type:"rect",role:"legend-band",key:Value,from:dataRef,encode},userEncode)}function legendGradientLabels(spec,config,userEncode,dataRef){const _=vega_parser_module_lookup(spec,config),vertical=_.isVertical(),thickness=encoder(_.gradientThickness()),length=_.gradientLength();let enter,update,u,v,overlap=_("labelOverlap"),adjust="";const encode={enter:enter={opacity:vega_parser_module_zero},update:update={opacity:vega_parser_module_one,text:{field:"label"}},exit:{opacity:vega_parser_module_zero}};return addEncoders(encode,{fill:_("labelColor"),fillOpacity:_("labelOpacity"),font:_("labelFont"),fontSize:_("labelFontSize"),fontStyle:_("labelFontStyle"),fontWeight:_("labelFontWeight"),limit:vega_parser_module_value(spec.labelLimit,config.gradientLabelLimit)}),vertical?(enter.align={value:"left"},enter.baseline=update.baseline={signal:'datum.perc<=0?"bottom":datum.perc>=1?"top":"middle"'},u="y",v="x",adjust="1-"):(enter.align=update.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},enter.baseline={value:"top"},u="x",v="y"),enter[u]=update[u]={signal:adjust+"datum.perc",mult:length},enter[v]=update[v]=thickness,thickness.offset=vega_parser_module_value(spec.labelOffset,config.gradientLabelOffset)||0,overlap=overlap?{separation:_("labelSeparation"),method:overlap,order:"datum.index"}:void 0,guideMark({type:"text",role:"legend-label",style:"guide-label",key:Value,from:dataRef,encode,overlap},userEncode)}function legendSymbolGroups(spec,config,userEncode,dataRef,columns){const _=vega_parser_module_lookup(spec,config),entries=userEncode.entries,interactive=!(!entries||!entries.interactive),name=entries?entries.name:void 0,height=_("clipHeight"),symbolOffset=_("symbolOffset"),valueRef={data:"value"},xSignal=`(${columns}) ? datum.offset : datum.size`,yEncode=height?encoder(height):{field:"size"},index="datum.index",ncols=`max(1, ${columns})`;let encode,enter,update,nrows,sort;yEncode.mult=.5,encode={enter:enter={opacity:vega_parser_module_zero,x:{signal:xSignal,mult:.5,offset:symbolOffset},y:yEncode},update:update={opacity:vega_parser_module_one,x:enter.x,y:enter.y},exit:{opacity:vega_parser_module_zero}};let baseFill=null,baseStroke=null;spec.fill||(baseFill=config.symbolBaseFillColor,baseStroke=config.symbolBaseStrokeColor),addEncoders(encode,{fill:_("symbolFillColor",baseFill),shape:_("symbolType"),size:_("symbolSize"),stroke:_("symbolStrokeColor",baseStroke),strokeDash:_("symbolDash"),strokeDashOffset:_("symbolDashOffset"),strokeWidth:_("symbolStrokeWidth")},{opacity:_("symbolOpacity")}),LegendScales.forEach((scale=>{spec[scale]&&(update[scale]=enter[scale]={scale:spec[scale],field:Value})}));const symbols=guideMark({type:"symbol",role:"legend-symbol",key:Value,from:valueRef,clip:!!height||void 0,encode},userEncode.symbols),labelOffset=encoder(symbolOffset);labelOffset.offset=_("labelOffset"),encode={enter:enter={opacity:vega_parser_module_zero,x:{signal:xSignal,offset:labelOffset},y:yEncode},update:update={opacity:vega_parser_module_one,text:{field:"label"},x:enter.x,y:enter.y},exit:{opacity:vega_parser_module_zero}},addEncoders(encode,{align:_("labelAlign"),baseline:_("labelBaseline"),fill:_("labelColor"),fillOpacity:_("labelOpacity"),font:_("labelFont"),fontSize:_("labelFontSize"),fontStyle:_("labelFontStyle"),fontWeight:_("labelFontWeight"),limit:_("labelLimit")});const labels=guideMark({type:"text",role:"legend-label",style:"guide-label",key:Value,from:valueRef,encode},userEncode.labels);return encode={enter:{noBound:{value:!height},width:vega_parser_module_zero,height:height?encoder(height):vega_parser_module_zero,opacity:vega_parser_module_zero},exit:{opacity:vega_parser_module_zero},update:update={opacity:vega_parser_module_one,row:{signal:null},column:{signal:null}}},_.isVertical(!0)?(nrows=`ceil(item.mark.items.length / ${ncols})`,update.row.signal=`${index}%${nrows}`,update.column.signal=`floor(${index} / ${nrows})`,sort={field:["row",index]}):(update.row.signal=`floor(${index} / ${ncols})`,update.column.signal=`${index} % ${ncols}`,sort={field:index}),update.column.signal=`(${columns})?${update.column.signal}:${index}`,guideGroup({role:"scope",from:dataRef={facet:{data:dataRef,name:"value",groupby:"index"}},encode:extendEncode(encode,entries,vega_parser_module_Skip),marks:[symbols,labels],name,interactive,sort})}const isL='item.orient === "left"',isR='item.orient === "right"',isLR=`(${isL} || ${isR})`,isVG=`datum.vgrad && ${isLR}`,baseline=anchorExpr('"top"','"bottom"','"middle"'),exprAlign=`datum.vgrad && ${isR} ? (${anchorExpr('"right"','"left"','"center"')}) : (${isLR} && !(datum.vgrad && ${isL})) ? "left" : ${alignExpr$1}`,exprAnchor=`item._anchor || (${isLR} ? "middle" : "start")`,exprAngle=`${isVG} ? (${isL} ? -90 : 90) : 0`,exprBaseline=`${isLR} ? (datum.vgrad ? (${isR} ? "bottom" : "top") : ${baseline}) : "top"`;function vega_parser_module_clip(clip,scope){let expr;return isObject(clip)&&(clip.signal?expr=clip.signal:clip.path?expr="pathShape("+param(clip.path)+")":clip.sphere&&(expr="geoShape("+param(clip.sphere)+', {type: "Sphere"})')),expr?scope.signalRef(expr):!!clip}function param(value){return isObject(value)&&value.signal?value.signal:$(value)}function getRole(spec){const role=spec.role||"";return role.indexOf("axis")&&role.indexOf("legend")&&role.indexOf("title")?"group"===spec.type?"scope":role||"mark":role}function vega_parser_module_definition(spec){return{marktype:spec.type,name:spec.name||void 0,role:spec.role||getRole(spec),zindex:+spec.zindex||void 0,aria:spec.aria,description:spec.description}}function interactive(spec,scope){return spec&&spec.signal?scope.signalRef(spec.signal):!1!==spec}function parseTransform(spec,scope){const def=definition(spec.type);def||error("Unrecognized transform type: "+$(spec.type));const t=entry(def.type.toLowerCase(),null,vega_parser_module_parseParameters(def,spec,scope));return spec.signal&&scope.addSignal(spec.signal,scope.proxy(t)),t.metadata=def.metadata||{},t}function vega_parser_module_parseParameters(def,spec,scope){const params={},n=def.params.length;for(let i=0;i<n;++i){const pdef=def.params[i];params[pdef.name]=vega_parser_module_parseParameter(pdef,spec,scope)}return params}function vega_parser_module_parseParameter(def,spec,scope){const type=def.type,value=spec[def.name];return"index"===type?function parseIndexParameter(def,spec,scope){isString(spec.from)||error('Lookup "from" parameter must be a string literal.');return scope.getData(spec.from).lookupRef(scope,spec.key)}(0,spec,scope):void 0!==value?"param"===type?function parseSubParameters(def,spec,scope){const value=spec[def.name];return def.array?(isArray(value)||error("Expected an array of sub-parameters. Instead: "+$(value)),value.map((v=>parseSubParameter(def,v,scope)))):parseSubParameter(def,value,scope)}(def,spec,scope):"projection"===type?scope.projectionRef(spec[def.name]):def.array&&!isSignal(value)?value.map((v=>parameterValue(def,v,scope))):parameterValue(def,value,scope):void(def.required&&error("Missing required "+$(spec.type)+" parameter: "+$(def.name)))}function parameterValue(def,value,scope){const type=def.type;if(isSignal(value))return isExpr(type)?error("Expression references can not be signals."):isField(type)?scope.fieldRef(value):isCompare(type)?scope.compareRef(value):scope.signalRef(value.signal);{const expr=def.expr||isField(type);return expr&&outerExpr(value)?scope.exprRef(value.expr,value.as):expr&&outerField(value)?fieldRef$1(value.field,value.as):isExpr(type)?vega_functions_module_parser(value,scope):isData(type)?ref(scope.getData(value).values):isField(type)?fieldRef$1(value):isCompare(type)?scope.compareRef(value):value}}function parseSubParameter(def,value,scope){const n=def.params.length;let pdef;for(let i=0;i<n;++i){pdef=def.params[i];for(const k in pdef.key)if(pdef.key[k]!==value[k]){pdef=null;break}if(pdef)break}pdef||error("Unsupported parameter: "+$(value));const params=extend(vega_parser_module_parseParameters(pdef,value,scope),pdef.key);return ref(scope.add(vega_parser_module_Params(params)))}const outerExpr=_=>_&&_.expr,outerField=_=>_&&_.field,isData=_=>"data"===_,isExpr=_=>"expr"===_,isField=_=>"field"===_,isCompare=_=>"compare"===_;function getDataRef(from,scope){return from.$ref?from:from.data&&from.data.$ref?from.data:ref(scope.getData(from.data).output)}function DataScope(scope,input,output,values,aggr){this.scope=scope,this.input=input,this.output=output,this.values=values,this.aggregate=aggr,this.index={}}function fieldKey(field){return isString(field)?field:null}function addSortField(scope,p,sort){const as=aggrField(sort.op,sort.field);let s;if(p.ops){for(let i=0,n=p.as.length;i<n;++i)if(p.as[i]===as)return}else p.ops=["count"],p.fields=[null],p.as=["count"];sort.op&&(p.ops.push((s=sort.op.signal)?scope.signalRef(s):sort.op),p.fields.push(scope.fieldRef(sort.field)),p.as.push(as))}function cache(scope,ds,name,optype,field,counts,index){const cache=ds[name]||(ds[name]={}),sort=function sortKey(sort){return isObject(sort)?("descending"===sort.order?"-":"+")+aggrField(sort.op,sort.field):""}(counts);let v,op,k=fieldKey(field);if(null!=k&&(scope=ds.scope,k+=sort?"|"+sort:"",v=cache[k]),!v){const params=counts?{field:keyFieldRef,pulse:ds.countsRef(scope,field,counts)}:{field:scope.fieldRef(field),pulse:ref(ds.output)};sort&&(params.sort=scope.sortRef(counts)),op=scope.add(entry(optype,void 0,params)),index&&(ds.index[field]=op),v=ref(op),null!=k&&(cache[k]=v)}return v}function parseTrigger(spec,scope,name){const remove=spec.remove,insert=spec.insert,toggle=spec.toggle,modify=spec.modify,values=spec.values,op=scope.add(operator()),expr=vega_functions_module_parser("if("+spec.trigger+',modify("'+name+'",'+[insert,remove,toggle,modify,values].map((_=>null==_?"null":_)).join(",")+"),0)",scope);op.update=expr.$expr,op.params=expr.$params}function parseMark(spec,scope){const role=getRole(spec),group="group"===spec.type,facet=spec.from&&spec.from.facet,overlap=spec.overlap;let ops,op,store,enc,name,layoutRef,boundRef,layout=spec.layout||"scope"===role||"frame"===role;const nested="mark"===role||layout||facet,input=function parseData$1(from,group,scope){let facet,key,op,dataRef,parent;return from?(facet=from.facet)&&(group||error("Only group marks can be faceted."),null!=facet.field?dataRef=parent=getDataRef(facet,scope):(from.data?parent=ref(scope.getData(from.data).aggregate):(op=parseTransform(extend({type:"aggregate",groupby:array(facet.groupby)},facet.aggregate),scope),op.params.key=scope.keyRef(facet.groupby),op.params.pulse=getDataRef(facet,scope),dataRef=parent=ref(scope.add(op))),key=scope.keyRef(facet.groupby,!0))):dataRef=ref(scope.add(vega_parser_module_Collect(null,[{}]))),dataRef||(dataRef=getDataRef(from,scope)),{key,pulse:dataRef,parent}}(spec.from,group,scope);op=scope.add(vega_parser_module_DataJoin({key:input.key||(spec.key?fieldRef$1(spec.key):void 0),pulse:input.pulse,clean:!group}));const joinRef=ref(op);op=store=scope.add(vega_parser_module_Collect({pulse:joinRef})),op=scope.add(vega_parser_module_Mark({markdef:vega_parser_module_definition(spec),interactive:interactive(spec.interactive,scope),clip:vega_parser_module_clip(spec.clip,scope),context:{$context:!0},groups:scope.lookup(),parent:scope.signals.parent?scope.signalRef("parent"):null,index:scope.markpath(),pulse:ref(op)}));const markRef=ref(op);op=enc=scope.add(vega_parser_module_Encode(parseEncode(spec.encode,spec.type,role,spec.style,scope,{mod:!1,pulse:markRef}))),op.params.parent=scope.encode(),spec.transform&&spec.transform.forEach((_=>{const tx=parseTransform(_,scope),md=tx.metadata;(md.generates||md.changes)&&error("Mark transforms should not generate new data."),md.nomod||(enc.params.mod=!0),tx.params.pulse=ref(op),scope.add(op=tx)})),spec.sort&&(op=scope.add(vega_parser_module_SortItems({sort:scope.compareRef(spec.sort),pulse:ref(op)})));const encodeRef=ref(op);(facet||layout)&&(layout=scope.add(vega_parser_module_ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,mark:markRef,pulse:encodeRef})),layoutRef=ref(layout));const bound=scope.add(vega_parser_module_Bound({mark:markRef,pulse:layoutRef||encodeRef}));boundRef=ref(bound),group&&(nested&&(ops=scope.operators,ops.pop(),layout&&ops.pop()),scope.pushState(encodeRef,layoutRef||boundRef,joinRef),facet?function parseFacet(spec,scope,group){const facet=spec.from.facet,name=facet.name,data=getDataRef(facet,scope);let op;facet.name||error("Facet must have a name: "+$(facet)),facet.data||error("Facet must reference a data set: "+$(facet)),facet.field?op=scope.add(vega_parser_module_PreFacet({field:scope.fieldRef(facet.field),pulse:data})):facet.groupby?op=scope.add(vega_parser_module_Facet({key:scope.keyRef(facet.groupby),group:ref(scope.proxy(group.parent)),pulse:data})):error("Facet must specify groupby or field: "+$(facet));const subscope=scope.fork(),source=subscope.add(vega_parser_module_Collect()),values=subscope.add(vega_parser_module_Sieve({pulse:ref(source)}));subscope.addData(name,new DataScope(subscope,source,source,values)),subscope.addSignal("parent",null),op.params.subflow={$subflow:subscope.parse(spec).toRuntime()}}(spec,scope,input):nested?function parseSubflow(spec,scope,input){const op=scope.add(vega_parser_module_PreFacet({pulse:input.pulse})),subscope=scope.fork();subscope.add(vega_parser_module_Sieve()),subscope.addSignal("parent",null),op.params.subflow={$subflow:subscope.parse(spec).toRuntime()}}(spec,scope,input):scope.parse(spec),scope.popState(),nested&&(layout&&ops.push(layout),ops.push(bound))),overlap&&(boundRef=function parseOverlap(overlap,source,scope){const method=overlap.method,bound=overlap.bound,sep=overlap.separation,params={separation:isSignal(sep)?scope.signalRef(sep.signal):sep,method:isSignal(method)?scope.signalRef(method.signal):method,pulse:source};overlap.order&&(params.sort=scope.compareRef({field:overlap.order}));if(bound){const tol=bound.tolerance;params.boundTolerance=isSignal(tol)?scope.signalRef(tol.signal):+tol,params.boundScale=scope.scaleRef(bound.scale),params.boundOrient=bound.orient}return ref(scope.add(vega_parser_module_Overlap(params)))}(overlap,boundRef,scope));const render=scope.add(vega_parser_module_Render({pulse:boundRef})),sieve=scope.add(vega_parser_module_Sieve({pulse:ref(render)},void 0,scope.parent()));null!=spec.name&&(name=spec.name,scope.addData(name,new DataScope(scope,store,render,sieve)),spec.on&&spec.on.forEach((on=>{(on.insert||on.remove||on.toggle)&&error("Marks only support modify triggers."),parseTrigger(on,scope,name)})))}function parseLegend(spec,scope){const config=scope.config.legend,encode=spec.encode||{},_=vega_parser_module_lookup(spec,config),legendEncode=encode.legend||{},name=legendEncode.name||void 0,interactive=legendEncode.interactive,style=legendEncode.style,scales={};let entryLayout,params,children,scale=0;LegendScales.forEach((s=>spec[s]?(scales[s]=spec[s],scale=scale||spec[s]):0)),scale||error("Missing valid scale for legend.");const type=function legendType(spec,scaleType){let type=spec.type||"symbol";spec.type||1!==function scaleCount(spec){return LegendScales.reduce(((count,type)=>count+(spec[type]?1:0)),0)}(spec)||!spec.fill&&!spec.stroke||(type=isContinuous(scaleType)?"gradient":isDiscretizing(scaleType)?"discrete":"symbol");return"gradient"!==type?type:isDiscretizing(scaleType)?"discrete":"gradient"}(spec,scope.scaleType(scale)),datum={title:null!=spec.title,scales,type,vgrad:"symbol"!==type&&_.isVertical()},dataRef=ref(scope.add(vega_parser_module_Collect(null,[datum]))),entryRef=ref(scope.add(vega_parser_module_LegendEntries(params={type,scale:scope.scaleRef(scale),count:scope.objectProperty(_("tickCount")),limit:scope.property(_("symbolLimit")),values:scope.objectProperty(spec.values),minstep:scope.property(spec.tickMinStep),formatType:scope.property(spec.formatType),formatSpecifier:scope.property(spec.format)})));return"gradient"===type?(children=[legendGradient(spec,scale,config,encode.gradient),legendGradientLabels(spec,config,encode.labels,entryRef)],params.count=params.count||scope.signalRef(`max(2,2*floor((${deref(_.gradientLength())})/100))`)):"discrete"===type?children=[legendGradientDiscrete(spec,scale,config,encode.gradient,entryRef),legendGradientLabels(spec,config,encode.labels,entryRef)]:(entryLayout=function legendSymbolLayout(spec,config){const _=vega_parser_module_lookup(spec,config);return{align:_("gridAlign"),columns:_.entryColumns(),center:{row:!0,column:!1},padding:{row:_("rowPadding"),column:_("columnPadding")}}}(spec,config),children=[legendSymbolGroups(spec,config,encode,entryRef,deref(entryLayout.columns))],params.size=function sizeExpression(spec,scope,marks){const size=deref(getChannel("size",spec,marks)),strokeWidth=deref(getChannel("strokeWidth",spec,marks)),fontSize=deref(function getFontSize(encode,scope,style){return getEncoding("fontSize",encode)||function getStyle(name,scope,style){const s=scope.config.style[style];return s&&s[name]}("fontSize",scope,style)}(marks[1].encode,scope,"guide-label"));return vega_functions_module_parser(`max(ceil(sqrt(${size})+${strokeWidth}),${fontSize})`,scope)}(spec,scope,children[0].marks)),children=[guideGroup({role:"legend-entry",from:dataRef,encode:{enter:{x:{value:0},y:{value:0}}},marks:children,layout:entryLayout,interactive})],datum.title&&children.push(function legendTitle(spec,config,userEncode,dataRef){const _=vega_parser_module_lookup(spec,config),encode={enter:{opacity:vega_parser_module_zero},update:{opacity:vega_parser_module_one,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:vega_parser_module_zero}};return addEncoders(encode,{orient:_("titleOrient"),_anchor:_("titleAnchor"),anchor:{signal:exprAnchor},angle:{signal:exprAngle},align:{signal:exprAlign},baseline:{signal:exprBaseline},text:spec.title,fill:_("titleColor"),fillOpacity:_("titleOpacity"),font:_("titleFont"),fontSize:_("titleFontSize"),fontStyle:_("titleFontStyle"),fontWeight:_("titleFontWeight"),limit:_("titleLimit"),lineHeight:_("titleLineHeight")},{align:_("titleAlign"),baseline:_("titleBaseline")}),guideMark({type:"text",role:"legend-title",style:"guide-title",from:dataRef,encode},userEncode)}(spec,config,encode.title,dataRef)),parseMark(guideGroup({role:"legend",from:dataRef,encode:extendEncode(buildLegendEncode(_,spec,config),legendEncode,vega_parser_module_Skip),marks:children,aria:_("aria"),description:_("description"),zindex:_("zindex"),name,interactive,style}),scope)}function buildLegendEncode(_,spec,config){const encode={enter:{},update:{}};return addEncoders(encode,{orient:_("orient"),offset:_("offset"),padding:_("padding"),titlePadding:_("titlePadding"),cornerRadius:_("cornerRadius"),fill:_("fillColor"),stroke:_("strokeColor"),strokeWidth:config.strokeWidth,strokeDash:config.strokeDash,x:_("legendX"),y:_("legendY"),format:spec.format,formatType:spec.formatType}),encode}function getChannel(name,spec,marks){return spec[name]?`scale("${spec[name]}",datum)`:getEncoding(name,marks[0].encode)}DataScope.fromEntries=function(scope,entries){const n=entries.length,values=entries[n-1],output=entries[n-2];let input=entries[0],aggr=null,i=1;for(input&&"load"===input.type&&(input=entries[1]),scope.add(entries[0]);i<n;++i)entries[i].params.pulse=ref(entries[i-1]),scope.add(entries[i]),"aggregate"===entries[i].type&&(aggr=entries[i]);return new DataScope(scope,input,output,values,aggr)},DataScope.prototype={countsRef(scope,field,sort){const ds=this,cache=ds.counts||(ds.counts={}),k=fieldKey(field);let v,a,p;return null!=k&&(scope=ds.scope,v=cache[k]),v?sort&&sort.field&&addSortField(scope,v.agg.params,sort):(p={groupby:scope.fieldRef(field,"key"),pulse:ref(ds.output)},sort&&sort.field&&addSortField(scope,p,sort),a=scope.add(vega_parser_module_Aggregate(p)),v=scope.add(vega_parser_module_Collect({pulse:ref(a)})),v={agg:a,ref:ref(v)},null!=k&&(cache[k]=v)),v.ref},tuplesRef(){return ref(this.values)},extentRef(scope,field){return cache(scope,this,"extent","extent",field,!1)},domainRef(scope,field){return cache(scope,this,"domain","values",field,!1)},valuesRef(scope,field,sort){return cache(scope,this,"vals","values",field,sort||!0)},lookupRef(scope,field){return cache(scope,this,"lookup","tupleindex",field,!1)},indataRef(scope,field){return cache(scope,this,"indata","tupleindex",field,!0,!0)}};function parseTitle(spec,scope){const _=vega_parser_module_lookup(spec=isString(spec)?{text:spec}:spec,scope.config.title),encode=spec.encode||{},userEncode=encode.group||{},name=userEncode.name||void 0,interactive=userEncode.interactive,style=userEncode.style,children=[],dataRef=ref(scope.add(vega_parser_module_Collect(null,[{}])));return children.push(function buildTitle(spec,_,userEncode,dataRef){const zero={value:0},text=spec.text,encode={enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};return addEncoders(encode,{text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:_("dx"),dy:_("dy"),fill:_("color"),font:_("font"),fontSize:_("fontSize"),fontStyle:_("fontStyle"),fontWeight:_("fontWeight"),lineHeight:_("lineHeight")},{align:_("align"),angle:_("angle"),baseline:_("baseline")}),guideMark({type:"text",role:"title-text",style:"group-title",from:dataRef,encode},userEncode)}(spec,_,function titleEncode(spec){const encode=spec.encode;return encode&&encode.title||extend({name:spec.name,interactive:spec.interactive,style:spec.style},encode)}(spec),dataRef)),spec.subtitle&&children.push(function buildSubTitle(spec,_,userEncode,dataRef){const zero={value:0},text=spec.subtitle,encode={enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};return addEncoders(encode,{text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:_("dx"),dy:_("dy"),fill:_("subtitleColor"),font:_("subtitleFont"),fontSize:_("subtitleFontSize"),fontStyle:_("subtitleFontStyle"),fontWeight:_("subtitleFontWeight"),lineHeight:_("subtitleLineHeight")},{align:_("align"),angle:_("angle"),baseline:_("baseline")}),guideMark({type:"text",role:"title-subtitle",style:"group-subtitle",from:dataRef,encode},userEncode)}(spec,_,encode.subtitle,dataRef)),parseMark(guideGroup({role:"title",from:dataRef,encode:groupEncode(_,userEncode),marks:children,aria:_("aria"),description:_("description"),zindex:_("zindex"),name,interactive,style}),scope)}function groupEncode(_,userEncode){const encode={enter:{},update:{}};return addEncoders(encode,{orient:_("orient"),anchor:_("anchor"),align:{signal:alignExpr$1},angle:{signal:'item.orient==="left"?-90:item.orient==="right"?90:0'},limit:_("limit"),frame:_("frame"),offset:_("offset")||0,padding:_("subtitlePadding")}),extendEncode(encode,userEncode,vega_parser_module_Skip)}function parseData(data,scope){const transforms=[];data.transform&&data.transform.forEach((tx=>{transforms.push(parseTransform(tx,scope))})),data.on&&data.on.forEach((on=>{parseTrigger(on,scope,data.name)})),scope.addDataPipeline(data.name,function analyze(data,scope,ops){const output=[];let upstream,i,n,t,m,source=null,modify=!1,generate=!1;data.values?isSignal(data.values)||hasSignal(data.format)?(output.push(vega_parser_module_load(scope,data)),output.push(source=collect())):output.push(source=collect({$ingest:data.values,$format:data.format})):data.url?hasSignal(data.url)||hasSignal(data.format)?(output.push(vega_parser_module_load(scope,data)),output.push(source=collect())):output.push(source=collect({$request:data.url,$format:data.format})):data.source&&(source=upstream=array(data.source).map((d=>ref(scope.getData(d).output))),output.push(null));for(i=0,n=ops.length;i<n;++i)t=ops[i],m=t.metadata,source||m.source||output.push(source=collect()),output.push(t),m.generates&&(generate=!0),m.modifies&&!generate&&(modify=!0),m.source?source=t:m.changes&&(source=null);upstream&&(n=upstream.length-1,output[0]=vega_parser_module_Relay({derive:modify,pulse:n?upstream:upstream[0]}),(modify||n)&&output.splice(1,0,collect()));source||output.push(collect());return output.push(vega_parser_module_Sieve({})),output}(data,scope,transforms))}function collect(values){const s=vega_parser_module_Collect({},values);return s.metadata={source:!0},s}function vega_parser_module_load(scope,data){return vega_parser_module_Load({url:data.url?scope.property(data.url):void 0,async:data.async?scope.property(data.async):void 0,values:data.values?scope.property(data.values):void 0,format:scope.objectProperty(data.format)})}const isX=orient=>"bottom"===orient||"top"===orient,getSign=(orient,a,b)=>isSignal(orient)?ifLeftTopExpr(orient.signal,a,b):"left"===orient||"top"===orient?a:b,ifX=(orient,a,b)=>isSignal(orient)?ifXEnc(orient.signal,a,b):isX(orient)?a:b,ifY=(orient,a,b)=>isSignal(orient)?ifYEnc(orient.signal,a,b):isX(orient)?b:a,ifTop=(orient,a,b)=>isSignal(orient)?ifTopExpr(orient.signal,a,b):"top"===orient?{value:a}:{value:b},ifXEnc=($orient,a,b)=>ifEnc(`${$orient} === 'top' || ${$orient} === 'bottom'`,a,b),ifYEnc=($orient,a,b)=>ifEnc(`${$orient} !== 'top' && ${$orient} !== 'bottom'`,a,b),ifLeftTopExpr=($orient,a,b)=>ifExpr(`${$orient} === 'left' || ${$orient} === 'top'`,a,b),ifTopExpr=($orient,a,b)=>ifExpr(`${$orient} === 'top'`,a,b),ifRightExpr=($orient,a,b)=>ifExpr(`${$orient} === 'right'`,a,b),ifEnc=(test,a,b)=>(a=null!=a?encoder(a):a,b=null!=b?encoder(b):b,isSimple(a)&&isSimple(b)?{signal:`${test} ? (${a=a?a.signal||$(a.value):null}) : (${b=b?b.signal||$(b.value):null})`}:[extend({test},a)].concat(b||[])),isSimple=enc=>null==enc||1===Object.keys(enc).length,ifExpr=(test,a,b)=>({signal:`${test} ? (${toExpr(a)}) : (${toExpr(b)})`}),ifOrient=($orient,t,b,l,r)=>({signal:(null!=l?`${$orient} === 'left' ? (${toExpr(l)}) : `:"")+(null!=b?`${$orient} === 'bottom' ? (${toExpr(b)}) : `:"")+(null!=r?`${$orient} === 'right' ? (${toExpr(r)}) : `:"")+(null!=t?`${$orient} === 'top' ? (${toExpr(t)}) : `:"")+"(null)"}),toExpr=v=>isSignal(v)?v.signal:null==v?null:$(v),patch=(value,base)=>{const s=value.signal;return s&&s.endsWith("(null)")?{signal:s.slice(0,-6)+base.signal}:value};function fallback(prop,config,axisConfig,style){let styleProp;if(config&&has(config,prop))return config[prop];if(has(axisConfig,prop))return axisConfig[prop];if(prop.startsWith("title")){switch(prop){case"titleColor":styleProp="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":styleProp=prop[5].toLowerCase()+prop.slice(6)}return style["guide-title"][styleProp]}if(prop.startsWith("label")){switch(prop){case"labelColor":styleProp="fill";break;case"labelFont":case"labelFontSize":styleProp=prop[5].toLowerCase()+prop.slice(6)}return style["guide-label"][styleProp]}return null}function vega_parser_module_keys(objects){const map={};for(const obj of objects)if(obj)for(const key in obj)map[key]=1;return Object.keys(map)}function position(spec,pos){return{scale:spec.scale,range:pos}}function axisGrid(spec,config,userEncode,dataRef,band){const _=vega_parser_module_lookup(spec,config),orient=spec.orient,vscale=spec.gridScale,sign=getSign(orient,1,-1),offset=function vega_parser_module_offsetValue(offset,sign){if(1===sign);else if(isObject(offset)){let entry=offset=extend({},offset);for(;null!=entry.mult;){if(!isObject(entry.mult))return entry.mult=isSignal(sign)?{signal:`(${entry.mult}) * (${sign.signal})`}:entry.mult*sign,offset;entry=entry.mult=extend({},entry.mult)}entry.mult=sign}else offset=isSignal(sign)?{signal:`(${sign.signal}) * (${offset||0})`}:sign*(offset||0);return offset}(spec.offset,sign);let enter,exit,update;const encode={enter:enter={opacity:vega_parser_module_zero},update:update={opacity:vega_parser_module_one},exit:exit={opacity:vega_parser_module_zero}};addEncoders(encode,{stroke:_("gridColor"),strokeCap:_("gridCap"),strokeDash:_("gridDash"),strokeDashOffset:_("gridDashOffset"),strokeOpacity:_("gridOpacity"),strokeWidth:_("gridWidth")});const tickPos={scale:spec.scale,field:Value,band:band.band,extra:band.extra,offset:band.offset,round:_("tickRound")},sz=ifX(orient,{signal:"height"},{signal:"width"}),gridStart=vscale?{scale:vscale,range:0,mult:sign,offset}:{value:0,offset},gridEnd=vscale?{scale:vscale,range:1,mult:sign,offset}:extend(sz,{mult:sign,offset});return enter.x=update.x=ifX(orient,tickPos,gridStart),enter.y=update.y=ifY(orient,tickPos,gridStart),enter.x2=update.x2=ifY(orient,gridEnd),enter.y2=update.y2=ifX(orient,gridEnd),exit.x=ifX(orient,tickPos),exit.y=ifY(orient,tickPos),guideMark({type:"rule",role:"axis-grid",key:Value,from:dataRef,encode},userEncode)}function flushExpr(scale,threshold,a,b,c){return{signal:'flush(range("'+scale+'"), scale("'+scale+'", datum.value), '+threshold+","+a+","+b+","+c+")"}}function axisLabels(spec,config,userEncode,dataRef,size,band){const _=vega_parser_module_lookup(spec,config),orient=spec.orient,scale=spec.scale,sign=getSign(orient,-1,1),flush=deref(_("labelFlush")),flushOffset=deref(_("labelFlushOffset")),labelAlign=_("labelAlign"),labelBaseline=_("labelBaseline");let update,flushOn=0===flush||!!flush;const tickSize=encoder(size);tickSize.mult=sign,tickSize.offset=encoder(_("labelPadding")||0),tickSize.offset.mult=sign;const tickPos={scale,field:Value,band:.5,offset:extendOffset(band.offset,_("labelOffset"))},align=ifX(orient,flushOn?flushExpr(scale,flush,'"left"','"right"','"center"'):{value:"center"},((orient,a,b)=>isSignal(orient)?ifRightExpr(orient.signal,a,b):"right"===orient?{value:a}:{value:b})(orient,"left","right")),baseline=ifX(orient,ifTop(orient,"bottom","top"),flushOn?flushExpr(scale,flush,'"top"','"bottom"','"middle"'):{value:"middle"}),offsetExpr=flushExpr(scale,flush,`-(${flushOffset})`,flushOffset,0);flushOn=flushOn&&flushOffset;const enter={opacity:vega_parser_module_zero,x:ifX(orient,tickPos,tickSize),y:ifY(orient,tickPos,tickSize)},encode={enter,update:update={opacity:vega_parser_module_one,text:{field:"label"},x:enter.x,y:enter.y,align,baseline},exit:{opacity:vega_parser_module_zero,x:enter.x,y:enter.y}};addEncoders(encode,{dx:!labelAlign&&flushOn?ifX(orient,offsetExpr):null,dy:!labelBaseline&&flushOn?ifY(orient,offsetExpr):null}),addEncoders(encode,{angle:_("labelAngle"),fill:_("labelColor"),fillOpacity:_("labelOpacity"),font:_("labelFont"),fontSize:_("labelFontSize"),fontWeight:_("labelFontWeight"),fontStyle:_("labelFontStyle"),limit:_("labelLimit"),lineHeight:_("labelLineHeight")},{align:labelAlign,baseline:labelBaseline});const bound=_("labelBound");let overlap=_("labelOverlap");return overlap=overlap||bound?{separation:_("labelSeparation"),method:overlap,order:"datum.index",bound:bound?{scale,orient,tolerance:bound}:null}:void 0,update.align!==align&&(update.align=patch(update.align,align)),update.baseline!==baseline&&(update.baseline=patch(update.baseline,baseline)),guideMark({type:"text",role:"axis-label",style:"guide-label",key:Value,from:dataRef,encode,overlap},userEncode)}function axisTitle(spec,config,userEncode,dataRef){const _=vega_parser_module_lookup(spec,config),orient=spec.orient,sign=getSign(orient,-1,1);let enter,update;const encode={enter:enter={opacity:vega_parser_module_zero,anchor:encoder(_("titleAnchor",null)),align:{signal:alignExpr$1}},update:update=extend({},enter,{opacity:vega_parser_module_one,text:encoder(spec.title)}),exit:{opacity:vega_parser_module_zero}},titlePos={signal:`lerp(range("${spec.scale}"), ${anchorExpr(0,1,.5)})`};return update.x=ifX(orient,titlePos),update.y=ifY(orient,titlePos),enter.angle=ifX(orient,vega_parser_module_zero,((sign,value)=>0===value?0:isSignal(sign)?{signal:`(${sign.signal}) * ${value}`}:{value:sign*value})(sign,90)),enter.baseline=ifX(orient,ifTop(orient,"bottom","top"),{value:"bottom"}),update.angle=enter.angle,update.baseline=enter.baseline,addEncoders(encode,{fill:_("titleColor"),fillOpacity:_("titleOpacity"),font:_("titleFont"),fontSize:_("titleFontSize"),fontStyle:_("titleFontStyle"),fontWeight:_("titleFontWeight"),limit:_("titleLimit"),lineHeight:_("titleLineHeight")},{align:_("titleAlign"),angle:_("titleAngle"),baseline:_("titleBaseline")}),function autoLayout(_,orient,encode,userEncode){const auto=(value,dim)=>null!=value?(encode.update[dim]=patch(encoder(value),encode.update[dim]),!1):!vega_parser_module_has(dim,userEncode),autoY=auto(_("titleX"),"x"),autoX=auto(_("titleY"),"y");encode.enter.auto=autoX===autoY?encoder(autoX):ifX(orient,encoder(autoX),encoder(autoY))}(_,orient,encode,userEncode),encode.update.align=patch(encode.update.align,enter.align),encode.update.angle=patch(encode.update.angle,enter.angle),encode.update.baseline=patch(encode.update.baseline,enter.baseline),guideMark({type:"text",role:"axis-title",style:"guide-title",from:dataRef,encode},userEncode)}function parseAxis(spec,scope){const config=function axisConfig(spec,scope){var xy,or,key,config=scope.config,style=config.style,axis=config.axis,band="band"===scope.scaleType(spec.scale)&&config.axisBand,orient=spec.orient;if(isSignal(orient)){const xyKeys=vega_parser_module_keys([config.axisX,config.axisY]),orientKeys=vega_parser_module_keys([config.axisTop,config.axisBottom,config.axisLeft,config.axisRight]);for(key of(xy={},xyKeys))xy[key]=ifX(orient,fallback(key,config.axisX,axis,style),fallback(key,config.axisY,axis,style));for(key of(or={},orientKeys))or[key]=ifOrient(orient.signal,fallback(key,config.axisTop,axis,style),fallback(key,config.axisBottom,axis,style),fallback(key,config.axisLeft,axis,style),fallback(key,config.axisRight,axis,style))}else xy="top"===orient||"bottom"===orient?config.axisX:config.axisY,or=config["axis"+orient[0].toUpperCase()+orient.slice(1)];return xy||or||band?extend({},axis,xy,or,band):axis}(spec,scope),encode=spec.encode||{},axisEncode=encode.axis||{},name=axisEncode.name||void 0,interactive=axisEncode.interactive,style=axisEncode.style,_=vega_parser_module_lookup(spec,config),band=function tickBand(_){const v=_("tickBand");let band,extra,offset=_("tickOffset");return v?v.signal?(band={signal:`(${v.signal}) === 'extent' ? 1 : 0.5`},extra={signal:`(${v.signal}) === 'extent'`},isObject(offset)||(offset={signal:`(${v.signal}) === 'extent' ? 0 : ${offset}`})):"extent"===v?(band=1,extra=!0,offset=0):(band=.5,extra=!1):(band=_("bandPosition"),extra=_("tickExtra")),{extra,band,offset}}(_),datum={scale:spec.scale,ticks:!!_("ticks"),labels:!!_("labels"),grid:!!_("grid"),domain:!!_("domain"),title:null!=spec.title},dataRef=ref(scope.add(vega_parser_module_Collect({},[datum]))),ticksRef=ref(scope.add(vega_parser_module_AxisTicks({scale:scope.scaleRef(spec.scale),extra:scope.property(band.extra),count:scope.objectProperty(spec.tickCount),values:scope.objectProperty(spec.values),minstep:scope.property(spec.tickMinStep),formatType:scope.property(spec.formatType),formatSpecifier:scope.property(spec.format)}))),children=[];let size;return datum.grid&&children.push(axisGrid(spec,config,encode.grid,ticksRef,band)),datum.ticks&&(size=_("tickSize"),children.push(function axisTicks(spec,config,userEncode,dataRef,size,band){const _=vega_parser_module_lookup(spec,config),orient=spec.orient,sign=getSign(orient,-1,1);let enter,exit,update;const encode={enter:enter={opacity:vega_parser_module_zero},update:update={opacity:vega_parser_module_one},exit:exit={opacity:vega_parser_module_zero}};addEncoders(encode,{stroke:_("tickColor"),strokeCap:_("tickCap"),strokeDash:_("tickDash"),strokeDashOffset:_("tickDashOffset"),strokeOpacity:_("tickOpacity"),strokeWidth:_("tickWidth")});const tickSize=encoder(size);tickSize.mult=sign;const tickPos={scale:spec.scale,field:Value,band:band.band,extra:band.extra,offset:band.offset,round:_("tickRound")};return update.y=enter.y=ifX(orient,vega_parser_module_zero,tickPos),update.y2=enter.y2=ifX(orient,tickSize),exit.x=ifX(orient,tickPos),update.x=enter.x=ifY(orient,vega_parser_module_zero,tickPos),update.x2=enter.x2=ifY(orient,tickSize),exit.y=ifY(orient,tickPos),guideMark({type:"rule",role:"axis-tick",key:Value,from:dataRef,encode},userEncode)}(spec,config,encode.ticks,ticksRef,size,band))),datum.labels&&(size=datum.ticks?size:0,children.push(axisLabels(spec,config,encode.labels,ticksRef,size,band))),datum.domain&&children.push(function axisDomain(spec,config,userEncode,dataRef){const _=vega_parser_module_lookup(spec,config),orient=spec.orient;let enter,update;const encode={enter:enter={opacity:vega_parser_module_zero},update:update={opacity:vega_parser_module_one},exit:{opacity:vega_parser_module_zero}};addEncoders(encode,{stroke:_("domainColor"),strokeCap:_("domainCap"),strokeDash:_("domainDash"),strokeDashOffset:_("domainDashOffset"),strokeWidth:_("domainWidth"),strokeOpacity:_("domainOpacity")});const pos0=position(spec,0),pos1=position(spec,1);return enter.x=update.x=ifX(orient,pos0,vega_parser_module_zero),enter.x2=update.x2=ifX(orient,pos1),enter.y=update.y=ifY(orient,pos0,vega_parser_module_zero),enter.y2=update.y2=ifY(orient,pos1),guideMark({type:"rule",role:"axis-domain",from:dataRef,encode},userEncode)}(spec,config,encode.domain,dataRef)),datum.title&&children.push(axisTitle(spec,config,encode.title,dataRef)),parseMark(guideGroup({role:"axis",from:dataRef,encode:extendEncode(buildAxisEncode(_,spec),axisEncode,vega_parser_module_Skip),marks:children,aria:_("aria"),description:_("description"),zindex:_("zindex"),name,interactive,style}),scope)}function buildAxisEncode(_,spec){const encode={enter:{},update:{}};return addEncoders(encode,{orient:_("orient"),offset:_("offset")||0,position:vega_parser_module_value(spec.position,0),titlePadding:_("titlePadding"),minExtent:_("minExtent"),maxExtent:_("maxExtent"),range:{signal:`abs(span(range("${spec.scale}")))`},translate:_("translate"),format:spec.format,formatType:spec.formatType}),encode}function parseScope(spec,scope,preprocessed){const signals=array(spec.signals),scales=array(spec.scales);return preprocessed||signals.forEach((_=>parseSignal(_,scope))),array(spec.projections).forEach((_=>function parseProjection(proj,scope){const config=scope.config.projection||{},params={};for(const name in proj)"name"!==name&&(params[name]=parseParameter$1(proj[name],name,scope));for(const name in config)null==params[name]&&(params[name]=parseParameter$1(config[name],name,scope));scope.addProjection(proj.name,params)}(_,scope))),scales.forEach((_=>function initScale(spec,scope){const type=spec.type||"linear";isValidScaleType(type)||error("Unrecognized scale type: "+$(type)),scope.addScale(spec.name,{type,domain:void 0})}(_,scope))),array(spec.data).forEach((_=>parseData(_,scope))),scales.forEach((_=>parseScale(_,scope))),(preprocessed||signals).forEach((_=>function parseSignalUpdates(signal,scope){const op=scope.getSignal(signal.name);let expr=signal.update;signal.init&&(expr?error("Signals can not include both init and update expressions."):(expr=signal.init,op.initonly=!0)),expr&&(expr=vega_functions_module_parser(expr,scope),op.update=expr.$expr,op.params=expr.$params),signal.on&&signal.on.forEach((_=>vega_parser_module_parseUpdate(_,scope,op.id)))}(_,scope))),array(spec.axes).forEach((_=>parseAxis(_,scope))),array(spec.marks).forEach((_=>parseMark(_,scope))),array(spec.legends).forEach((_=>parseLegend(_,scope))),spec.title&&parseTitle(spec.title,scope),scope.parseLambdas(),scope}function parseView(spec,scope){const config=scope.config,root=ref(scope.root=scope.add(operator())),signals=function collectSignals(spec,config){const _=name=>vega_parser_module_value(spec[name],config[name]),signals=[signalObject("background",_("background")),signalObject("autosize",parseAutosize(_("autosize"))),signalObject("padding",parsePadding(_("padding"))),signalObject("width",_("width")||0),signalObject("height",_("height")||0)],pre=signals.reduce(((p,s)=>(p[s.name]=s,p)),{}),map={};return array(spec.signals).forEach((s=>{has(pre,s.name)?s=extend(pre[s.name],s):signals.push(s),map[s.name]=s})),array(config.signals).forEach((s=>{has(map,s.name)||has(pre,s.name)||signals.push(s)})),signals}(spec,config);signals.forEach((_=>parseSignal(_,scope))),scope.description=spec.description||config.description,scope.eventConfig=config.events,scope.legends=scope.objectProperty(config.legend&&config.legend.layout),scope.locale=config.locale;const input=scope.add(vega_parser_module_Collect()),encode=scope.add(vega_parser_module_Encode(parseEncode((spec=>extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},spec))(spec.encode),"group","frame",spec.style,scope,{pulse:ref(input)}))),parent=scope.add(vega_parser_module_ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,autosize:scope.signalRef("autosize"),mark:root,pulse:ref(encode)}));scope.operators.pop(),scope.pushState(ref(encode),ref(parent),null),parseScope(spec,scope,signals),scope.operators.push(parent);let op=scope.add(vega_parser_module_Bound({mark:root,pulse:ref(parent)}));return op=scope.add(vega_parser_module_Render({pulse:ref(op)})),op=scope.add(vega_parser_module_Sieve({pulse:ref(op)})),scope.addData("root",new DataScope(scope,input,input,op)),scope}function signalObject(name,value){return value&&value.signal?{name,update:value.signal}:{name,value}}function Scope(config,options){this.config=config||{},this.options=options||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Subscope(scope){this.config=scope.config,this.options=scope.options,this.legends=scope.legends,this.field=Object.create(scope.field),this.signals=Object.create(scope.signals),this.lambdas=Object.create(scope.lambdas),this.scales=Object.create(scope.scales),this.events=Object.create(scope.events),this.data=Object.create(scope.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++scope._nextsub[0],this._nextsub=scope._nextsub,this._parent=scope._parent.slice(),this._encode=scope._encode.slice(),this._lookup=scope._lookup.slice(),this._markpath=scope._markpath}function propertyLambda(spec){return(isArray(spec)?arrayLambda:objectLambda)(spec)}function arrayLambda(array){const n=array.length;let code="[";for(let i=0;i<n;++i){const value=array[i];code+=(i>0?",":"")+(isObject(value)?value.signal||propertyLambda(value):$(value))}return code+"]"}function objectLambda(obj){let key,value,code="{",i=0;for(key in obj)value=obj[key],code+=(++i>1?",":"")+$(key)+":"+(isObject(value)?value.signal||propertyLambda(value):$(value));return code+"}"}function vega_parser_module_parse(spec,config,options){return isObject(spec)||error("Input Vega specification must be an object."),parseView(spec,new Scope(config=mergeConfig({description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},config,spec.config),options)).toRuntime()}Scope.prototype=Subscope.prototype={parse(spec){return parseScope(spec,this)},fork(){return new Subscope(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(op){return this.operators.push(op),op.id=this.id(),op.refs&&(op.refs.forEach((ref=>{ref.$ref=op.id})),op.refs=null),op},proxy(op){const vref=op instanceof Entry?ref(op):op;return this.add(vega_parser_module_Proxy({value:vref}))},addStream(stream){return this.streams.push(stream),stream.id=this.id(),stream},addUpdate(update){return this.updates.push(update),update},finish(){let name,ds;for(name in this.root&&(this.root.root=!0),this.signals)this.signals[name].signal=name;for(name in this.scales)this.scales[name].scale=name;function annotate(op,name,type){let data,list;op&&(data=op.data||(op.data={}),list=data[name]||(data[name]=[]),list.push(type))}for(name in this.data){ds=this.data[name],annotate(ds.input,name,"input"),annotate(ds.output,name,"output"),annotate(ds.values,name,"values");for(const field in ds.index)annotate(ds.index[field],name,"index:"+field)}return this},pushState(encode,parent,lookup){this._encode.push(ref(this.add(vega_parser_module_Sieve({pulse:encode})))),this._parent.push(parent),this._lookup.push(lookup?ref(this.proxy(lookup)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return peek(this._parent)},encode(){return peek(this._encode)},lookup(){return peek(this._lookup)},markpath(){const p=this._markpath;return++p[p.length-1]},fieldRef(field,name){if(isString(field))return fieldRef$1(field,name);field.signal||error("Unsupported field reference: "+$(field));const s=field.signal;let f=this.field[s];if(!f){const params={name:this.signalRef(s)};name&&(params.as=name),this.field[s]=f=ref(this.add(vega_parser_module_Field(params)))}return f},compareRef(cmp){let signal=!1;const check=_=>isSignal(_)?(signal=!0,this.signalRef(_.signal)):function isExpr$1(_){return _&&_.expr}(_)?(signal=!0,this.exprRef(_.expr)):_,fields=array(cmp.field).map(check),orders=array(cmp.order).map(check);return signal?ref(this.add(vega_parser_module_Compare({fields,orders}))):compareRef(fields,orders)},keyRef(fields,flat){let signal=!1;const sig=this.signals;return fields=array(fields).map((_=>isSignal(_)?(signal=!0,ref(sig[_.signal])):_)),signal?ref(this.add(vega_parser_module_Key({fields,flat}))):function keyRef(fields,flat){const ref={$key:fields};return flat&&(ref.$flat=!0),ref}(fields,flat)},sortRef(sort){if(!sort)return sort;const a=aggrField(sort.op,sort.field),o=sort.order||"ascending";return o.signal?ref(this.add(vega_parser_module_Compare({fields:a,orders:this.signalRef(o.signal)}))):compareRef(a,o)},event(source,type){const key=source+":"+type;if(!this.events[key]){const id=this.id();this.streams.push({id,source,type}),this.events[key]=id}return this.events[key]},hasOwnSignal(name){return has(this.signals,name)},addSignal(name,value){this.hasOwnSignal(name)&&error("Duplicate signal name: "+$(name));const op=value instanceof Entry?value:this.add(operator(value));return this.signals[name]=op},getSignal(name){return this.signals[name]||error("Unrecognized signal name: "+$(name)),this.signals[name]},signalRef(s){return this.signals[s]?ref(this.signals[s]):(has(this.lambdas,s)||(this.lambdas[s]=this.add(operator(null))),ref(this.lambdas[s]))},parseLambdas(){const code=Object.keys(this.lambdas);for(let i=0,n=code.length;i<n;++i){const s=code[i],e=vega_functions_module_parser(s,this),op=this.lambdas[s];op.params=e.$params,op.update=e.$expr}},property(spec){return spec&&spec.signal?this.signalRef(spec.signal):spec},objectProperty(spec){return spec&&isObject(spec)?this.signalRef(spec.signal||propertyLambda(spec)):spec},exprRef(code,name){const params={expr:vega_functions_module_parser(code,this)};return name&&(params.expr.$name=name),ref(this.add(vega_parser_module_Expression(params)))},addBinding(name,bind){this.bindings||error("Nested signals do not support binding: "+$(name)),this.bindings.push(extend({signal:name},bind))},addScaleProj(name,transform){has(this.scales,name)&&error("Duplicate scale or projection name: "+$(name)),this.scales[name]=this.add(transform)},addScale(name,params){this.addScaleProj(name,vega_parser_module_Scale(params))},addProjection(name,params){this.addScaleProj(name,vega_parser_module_Projection(params))},getScale(name){return this.scales[name]||error("Unrecognized scale name: "+$(name)),this.scales[name]},scaleRef(name){return ref(this.getScale(name))},scaleType(name){return this.getScale(name).params.type},projectionRef(name){return this.scaleRef(name)},projectionType(name){return this.scaleType(name)},addData(name,dataScope){return has(this.data,name)&&error("Duplicate data set name: "+$(name)),this.data[name]=dataScope},getData(name){return this.data[name]||error("Undefined data set name: "+$(name)),this.data[name]},addDataPipeline(name,entries){return has(this.data,name)&&error("Duplicate data set name: "+$(name)),this.addData(name,DataScope.fromEntries(this,entries))}};var version="5.22.1";extend(transforms,vega_transforms_module_namespaceObject,vega_view_transforms_module_namespaceObject,vega_encode_module_namespaceObject,vega_geo_module_namespaceObject,vega_force_module_namespaceObject,vega_label_module_namespaceObject,vega_hierarchy_module_namespaceObject,vega_regression_module_namespaceObject,vega_voronoi_module_namespaceObject,vega_wordcloud_module_namespaceObject,vega_crossfilter_module_namespaceObject);var vega_interpreter_module_Constants={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Ops={"*":(a,b)=>a*b,"+":(a,b)=>a+b,"-":(a,b)=>a-b,"/":(a,b)=>a/b,"%":(a,b)=>a%b,">":(a,b)=>a>b,"<":(a,b)=>a<b,"<=":(a,b)=>a<=b,">=":(a,b)=>a>=b,"==":(a,b)=>a==b,"!=":(a,b)=>a!=b,"===":(a,b)=>a===b,"!==":(a,b)=>a!==b,"&":(a,b)=>a&b,"|":(a,b)=>a|b,"^":(a,b)=>a^b,"<<":(a,b)=>a<<b,">>":(a,b)=>a>>b,">>>":(a,b)=>a>>>b},Unary={"+":a=>+a,"-":a=>-a,"~":a=>~a,"!":a=>!a};const vega_interpreter_module_slice=Array.prototype.slice,vega_interpreter_module_apply=(m,args,cast)=>{const obj=cast?cast(args[0]):args[0];return obj[m].apply(obj,vega_interpreter_module_slice.call(args,1))};var vega_interpreter_module_Functions={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(a,b,c)=>Math.max(b,Math.min(c,a)),now:Date.now,utc:Date.UTC,datetime:(y,m,d,H,M,S,ms)=>new Date(y,m||0,null!=d?d:1,H||0,M||0,S||0,ms||0),date:d=>new Date(d).getDate(),day:d=>new Date(d).getDay(),year:d=>new Date(d).getFullYear(),month:d=>new Date(d).getMonth(),hours:d=>new Date(d).getHours(),minutes:d=>new Date(d).getMinutes(),seconds:d=>new Date(d).getSeconds(),milliseconds:d=>new Date(d).getMilliseconds(),time:d=>new Date(d).getTime(),timezoneoffset:d=>new Date(d).getTimezoneOffset(),utcdate:d=>new Date(d).getUTCDate(),utcday:d=>new Date(d).getUTCDay(),utcyear:d=>new Date(d).getUTCFullYear(),utcmonth:d=>new Date(d).getUTCMonth(),utchours:d=>new Date(d).getUTCHours(),utcminutes:d=>new Date(d).getUTCMinutes(),utcseconds:d=>new Date(d).getUTCSeconds(),utcmilliseconds:d=>new Date(d).getUTCMilliseconds(),length:x=>x.length,join:function(){return vega_interpreter_module_apply("join",arguments)},indexof:function(){return vega_interpreter_module_apply("indexOf",arguments)},lastindexof:function(){return vega_interpreter_module_apply("lastIndexOf",arguments)},slice:function(){return vega_interpreter_module_apply("slice",arguments)},reverse:x=>x.slice().reverse(),parseFloat,parseInt,upper:x=>String(x).toUpperCase(),lower:x=>String(x).toLowerCase(),substring:function(){return vega_interpreter_module_apply("substring",arguments,String)},split:function(){return vega_interpreter_module_apply("split",arguments,String)},replace:function(){return vega_interpreter_module_apply("replace",arguments,String)},trim:x=>String(x).trim(),regexp:RegExp,test:(r,t)=>RegExp(r).test(t)};const EventFunctions=["view","item","group","xy","x","y"],Visitors={Literal:($,n)=>n.value,Identifier:($,n)=>{const id=n.name;return $.memberDepth>0?id:"datum"===id?$.datum:"event"===id?$.event:"item"===id?$.item:vega_interpreter_module_Constants[id]||$.params["$"+id]},MemberExpression:($,n)=>{const d=!n.computed,o=$(n.object);d&&($.memberDepth+=1);const p=$(n.property);return d&&($.memberDepth-=1),o[p]},CallExpression:($,n)=>{const args=n.arguments;let name=n.callee.name;return name.startsWith("_")&&(name=name.slice(1)),"if"===name?$(args[0])?$(args[1]):$(args[2]):($.fn[name]||vega_interpreter_module_Functions[name]).apply($.fn,args.map($))},ArrayExpression:($,n)=>n.elements.map($),BinaryExpression:($,n)=>Ops[n.operator]($(n.left),$(n.right)),UnaryExpression:($,n)=>Unary[n.operator]($(n.argument)),ConditionalExpression:($,n)=>$(n.test)?$(n.consequent):$(n.alternate),LogicalExpression:($,n)=>"&&"===n.operator?$(n.left)&&$(n.right):$(n.left)||$(n.right),ObjectExpression:($,n)=>n.properties.reduce(((o,p)=>{$.memberDepth+=1;const k=$(p.key);return $.memberDepth-=1,o[k]=$(p.value),o}),{})};function interpret(ast,fn,params,datum,event,item){const $=n=>Visitors[n.type]($,n);return $.memberDepth=0,$.fn=Object.create(fn),$.params=params,$.datum=datum,$.event=event,$.item=item,EventFunctions.forEach((f=>$.fn[f]=(...args)=>event.vega[f](...args))),$(ast)}var vega_interpreter_module_expression={operator(ctx,expr){const ast=expr.ast,fn=ctx.functions;return _=>interpret(ast,fn,_)},parameter(ctx,expr){const ast=expr.ast,fn=ctx.functions;return(datum,_)=>interpret(ast,fn,_,datum)},event(ctx,expr){const ast=expr.ast,fn=ctx.functions;return event=>interpret(ast,fn,void 0,void 0,event)},handler(ctx,expr){const ast=expr.ast,fn=ctx.functions;return(_,event)=>{const datum=event.item&&event.item.datum;return interpret(ast,fn,_,datum,event)}},encode(ctx,encode){const{marktype,channels}=encode,fn=ctx.functions,swap="group"===marktype||"image"===marktype||"rect"===marktype;return(item,_)=>{const datum=item.datum;let v,m=0;for(const name in channels)v=interpret(channels[name].ast,fn,_,datum,void 0,item),item[name]!==v&&(item[name]=v,m=1);return"rule"!==marktype&&function vega_interpreter_module_adjustSpatial(item,encode,swap){let t;encode.x2&&(encode.x?(swap&&item.x>item.x2&&(t=item.x,item.x=item.x2,item.x2=t),item.width=item.x2-item.x):item.x=item.x2-(item.width||0)),encode.xc&&(item.x=item.xc-(item.width||0)/2),encode.y2&&(encode.y?(swap&&item.y>item.y2&&(t=item.y,item.y=item.y2,item.y2=t),item.height=item.y2-item.y):item.y=item.y2-(item.height||0)),encode.yc&&(item.y=item.yc-(item.height||0)/2)}(item,channels,swap),m}}};var clone=__webpack_require__("../../node_modules/clone/clone.js"),clone_default=__webpack_require__.n(clone),fast_deep_equal=__webpack_require__("../../node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),fast_json_stable_stringify=__webpack_require__("../../node_modules/fast-json-stable-stringify/index.js"),fast_json_stable_stringify_default=__webpack_require__.n(fast_json_stable_stringify);function isLogicalOr(op){return!!op.or}function isLogicalAnd(op){return!!op.and}function isLogicalNot(op){return!!op.not}function forEachLeaf(op,fn){if(isLogicalNot(op))forEachLeaf(op.not,fn);else if(isLogicalAnd(op))for(const subop of op.and)forEachLeaf(subop,fn);else if(isLogicalOr(op))for(const subop of op.or)forEachLeaf(subop,fn);else fn(op)}function normalizeLogicalComposition(op,normalizer){return isLogicalNot(op)?{not:normalizeLogicalComposition(op.not,normalizer)}:isLogicalAnd(op)?{and:op.and.map((o=>normalizeLogicalComposition(o,normalizer)))}:isLogicalOr(op)?{or:op.or.map((o=>normalizeLogicalComposition(o,normalizer)))}:normalizer(op)}const deepEqual=fast_deep_equal_default(),duplicate=clone_default();function never(message){throw new Error(message)}function util_pick(obj,props){const copy={};for(const prop of props)has(obj,prop)&&(copy[prop]=obj[prop]);return copy}function omit(obj,props){const copy=Object.assign({},obj);for(const prop of props)delete copy[prop];return copy}Set.prototype.toJSON=function(){return`Set(${[...this].map((x=>fast_json_stable_stringify_default()(x))).join(",")})`};const stringify=fast_json_stable_stringify_default();function hash(a){if(isNumber(a))return a;const str=isString(a)?a:fast_json_stable_stringify_default()(a);if(str.length<250)return str;let h=0;for(let i=0;i<str.length;i++){h=(h<<5)-h+str.charCodeAt(i),h&=h}return h}function isNullOrFalse(x){return!1===x||null===x}function util_contains(array,item){return array.includes(item)}function some(arr,f){let i=0;for(const[k,a]of arr.entries())if(f(a,k,i++))return!0;return!1}function every(arr,f){let i=0;for(const[k,a]of arr.entries())if(!f(a,k,i++))return!1;return!0}function mergeDeep(dest,...src){for(const s of src)deepMerge_(dest,null!=s?s:{});return dest}function deepMerge_(dest,src){for(const property of util_keys(src))writeConfig(dest,property,src[property],!0)}function unique(values,f){const results=[],u={};let v;for(const val of values)v=f(val),v in u||(u[v]=1,results.push(val));return results}function isEqual(dict,other){const dictKeys=util_keys(dict),otherKeys=util_keys(other);if(dictKeys.length!==otherKeys.length)return!1;for(const key of dictKeys)if(dict[key]!==other[key])return!1;return!0}function setEqual(a,b){if(a.size!==b.size)return!1;for(const e of a)if(!b.has(e))return!1;return!0}function hasIntersection(a,b){for(const key of a)if(b.has(key))return!0;return!1}function prefixGenerator(a){const prefixes=new Set;for(const x of a){const wrappedWithAccessors=splitAccessPath(x).map(((y,i)=>0===i?y:`[${y}]`)),computedPrefixes=wrappedWithAccessors.map(((_,i)=>wrappedWithAccessors.slice(0,i+1).join("")));for(const y of computedPrefixes)prefixes.add(y)}return prefixes}function fieldIntersection(a,b){return void 0===a||void 0===b||hasIntersection(prefixGenerator(a),prefixGenerator(b))}function isEmpty(obj){return 0===util_keys(obj).length}const util_keys=Object.keys,vals=Object.values,entries=Object.entries;function util_isBoolean(b){return!0===b||!1===b}function varName(s){const alphanumericS=s.replace(/\W/g,"_");return(s.match(/^\d+/)?"_":"")+alphanumericS}function logicalExpr(op,cb){return isLogicalNot(op)?`!(${logicalExpr(op.not,cb)})`:isLogicalAnd(op)?`(${op.and.map((and=>logicalExpr(and,cb))).join(") && (")})`:isLogicalOr(op)?`(${op.or.map((or=>logicalExpr(or,cb))).join(") || (")})`:cb(op)}function deleteNestedProperty(obj,orderedProps){if(0===orderedProps.length)return!0;const prop=orderedProps.shift();return prop in obj&&deleteNestedProperty(obj[prop],orderedProps)&&delete obj[prop],isEmpty(obj)}function titleCase(s){return s.charAt(0).toUpperCase()+s.substr(1)}function accessPathWithDatum(path,datum="datum"){const pieces=splitAccessPath(path),prefixes=[];for(let i=1;i<=pieces.length;i++){const prefix=`[${pieces.slice(0,i).map($).join("][")}]`;prefixes.push(`${datum}${prefix}`)}return prefixes.join(" && ")}function flatAccessWithDatum(path,datum="datum"){return`${datum}[${$(splitAccessPath(path).join("."))}]`}function escapePathAccess(string){return string.replace(/(\[|\]|\.|'|")/g,"\\$1")}function replacePathInField(path){return`${splitAccessPath(path).map(escapePathAccess).join("\\.")}`}function replaceAll(string,find,replacement){return string.replace(new RegExp(find.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),replacement)}function removePathFromField(path){return`${splitAccessPath(path).join(".")}`}function accessPathDepth(path){return path?splitAccessPath(path).length:0}function getFirstDefined(...args){for(const arg of args)if(void 0!==arg)return arg}let idCounter=42;function uniqueId(prefix){const id=++idCounter;return prefix?String(prefix)+id:id}function resetIdCounter(){idCounter=42}function internalField(name){return isInternalField(name)?name:`__${name}`}function isInternalField(name){return name.startsWith("__")}function normalizeAngle(angle){if(void 0!==angle)return(angle%360+360)%360}function isNumeric(value){return!!isNumber(value)||!isNaN(value)&&!isNaN(parseFloat(value))}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ROW="row",COLUMN="column",XOFFSET="xOffset",RADIUS="radius",RADIUS2="radius2",THETA="theta",THETA2="theta2",LATITUDE="latitude",LONGITUDE="longitude",LATITUDE2="latitude2",LONGITUDE2="longitude2",COLOR="color",FILL="fill",STROKE="stroke",SHAPE="shape",ANGLE="angle",OPACITY="opacity",TEXT="text",KEY="key",POLAR_POSITION_CHANNEL_INDEX={theta:1,theta2:1,radius:1,radius2:1};function isPolarPositionChannel(c){return c in POLAR_POSITION_CHANNEL_INDEX}const GEO_POSIITON_CHANNEL_INDEX={longitude:1,longitude2:1,latitude:1,latitude2:1};const GEOPOSITION_CHANNELS=util_keys(GEO_POSIITON_CHANNEL_INDEX),UNIT_CHANNEL_INDEX=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),POLAR_POSITION_CHANNEL_INDEX),GEO_POSIITON_CHANNEL_INDEX),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function isColorChannel(channel){return channel===COLOR||channel===FILL||channel===STROKE}const FACET_CHANNEL_INDEX={row:1,column:1,facet:1},FACET_CHANNELS=util_keys(FACET_CHANNEL_INDEX),CHANNEL_INDEX=Object.assign(Object.assign({},UNIT_CHANNEL_INDEX),FACET_CHANNEL_INDEX),CHANNELS=util_keys(CHANNEL_INDEX),{order:_o,detail:_d,tooltip:_tt1}=CHANNEL_INDEX,SINGLE_DEF_CHANNEL_INDEX=__rest(CHANNEL_INDEX,["order","detail","tooltip"]),{row:_r,column:_c,facet:_f}=SINGLE_DEF_CHANNEL_INDEX,SINGLE_DEF_UNIT_CHANNEL_INDEX=__rest(SINGLE_DEF_CHANNEL_INDEX,["row","column","facet"]);util_keys(SINGLE_DEF_CHANNEL_INDEX),util_keys(SINGLE_DEF_UNIT_CHANNEL_INDEX);function isChannel(str){return!!CHANNEL_INDEX[str]}const SECONDARY_RANGE_CHANNEL=["x2","y2","latitude2","longitude2",THETA2,"radius2"];function isSecondaryRangeChannel(c){return getMainRangeChannel(c)!==c}function getMainRangeChannel(channel){switch(channel){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude";case THETA2:return THETA;case"radius2":return RADIUS}return channel}function getVgPositionChannel(channel){if(isPolarPositionChannel(channel))switch(channel){case THETA:return"startAngle";case THETA2:return"endAngle";case RADIUS:return"outerRadius";case"radius2":return"innerRadius"}return channel}function getSecondaryRangeChannel(channel){switch(channel){case"x":return"x2";case"y":return"y2";case"latitude":return"latitude2";case"longitude":return"longitude2";case THETA:return THETA2;case RADIUS:return"radius2"}}function getSizeChannel(channel){switch(channel){case"x":case"x2":return"width";case"y":case"y2":return"height"}}function getOffsetScaleChannel(channel){switch(channel){case"x":return"xOffset";case"y":return"yOffset"}}function getMainChannelFromOffsetChannel(channel){switch(channel){case"xOffset":return"x";case"yOffset":return"y"}}const UNIT_CHANNELS=util_keys(UNIT_CHANNEL_INDEX),{x:_x,y:_y,x2:_x2,y2:_y2,xOffset:_xo,yOffset:_yo,latitude:_latitude,longitude:_longitude,latitude2:_latitude2,longitude2:_longitude2,theta:_theta,theta2:_theta2,radius:_radius,radius2:_radius2}=UNIT_CHANNEL_INDEX,NONPOSITION_CHANNEL_INDEX=__rest(UNIT_CHANNEL_INDEX,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),NONPOSITION_CHANNELS=util_keys(NONPOSITION_CHANNEL_INDEX),POSITION_SCALE_CHANNEL_INDEX={x:1,y:1},POSITION_SCALE_CHANNELS=util_keys(POSITION_SCALE_CHANNEL_INDEX);function isXorY(channel){return channel in POSITION_SCALE_CHANNEL_INDEX}const POLAR_POSITION_SCALE_CHANNEL_INDEX={theta:1,radius:1},POLAR_POSITION_SCALE_CHANNELS=util_keys(POLAR_POSITION_SCALE_CHANNEL_INDEX);function getPositionScaleChannel(sizeType){return"width"===sizeType?"x":"y"}const OFFSET_SCALE_CHANNEL_INDEX={xOffset:1,yOffset:1};util_keys(OFFSET_SCALE_CHANNEL_INDEX);function isXorYOffset(channel){return channel in OFFSET_SCALE_CHANNEL_INDEX}const{text:_t,tooltip:_tt,href:_hr,url:_u,description:_al,detail:_dd,key:_k,order:_oo}=NONPOSITION_CHANNEL_INDEX,NONPOSITION_SCALE_CHANNEL_INDEX=__rest(NONPOSITION_CHANNEL_INDEX,["text","tooltip","href","url","description","detail","key","order"]),NONPOSITION_SCALE_CHANNELS=util_keys(NONPOSITION_SCALE_CHANNEL_INDEX);const SCALE_CHANNEL_INDEX=Object.assign(Object.assign(Object.assign(Object.assign({},POSITION_SCALE_CHANNEL_INDEX),POLAR_POSITION_SCALE_CHANNEL_INDEX),OFFSET_SCALE_CHANNEL_INDEX),NONPOSITION_SCALE_CHANNEL_INDEX),SCALE_CHANNELS=util_keys(SCALE_CHANNEL_INDEX);function isScaleChannel(channel){return!!SCALE_CHANNEL_INDEX[channel]}function supportMark(channel,mark){return function getSupportedMark(channel){switch(channel){case COLOR:case FILL:case STROKE:case"description":case"detail":case"key":case"tooltip":case"href":case"order":case OPACITY:case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"facet":case ROW:case COLUMN:return ALL_MARKS;case"x":case"y":case"xOffset":case"yOffset":case LATITUDE:case"longitude":return ALL_MARKS_EXCEPT_GEOSHAPE;case"x2":case"y2":case LATITUDE2:case LONGITUDE2:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case"size":return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case"strokeDash":return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case SHAPE:return{point:"always",geoshape:"always"};case"text":return{text:"always"};case ANGLE:return{point:"always",square:"always",text:"always"};case"url":return{image:"always"};case THETA:case RADIUS:return{text:"always",arc:"always"};case THETA2:case RADIUS2:return{arc:"always"}}}(channel)[mark]}const ALL_MARKS={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:_g}=ALL_MARKS,ALL_MARKS_EXCEPT_GEOSHAPE=__rest(ALL_MARKS,["geoshape"]);function rangeType(channel){switch(channel){case"x":case"y":case THETA:case RADIUS:case"xOffset":case"yOffset":case"size":case ANGLE:case"strokeWidth":case OPACITY:case"fillOpacity":case"strokeOpacity":case"x2":case"y2":case THETA2:case RADIUS2:return;case"facet":case ROW:case COLUMN:case SHAPE:case"strokeDash":case"text":case"tooltip":case"href":case"url":case"description":return"discrete";case COLOR:case FILL:case STROKE:return"flexible";case LATITUDE:case"longitude":case LATITUDE2:case LONGITUDE2:case"detail":case"key":case"order":return}}const AGGREGATE_OP_INDEX={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},MULTIDOMAIN_SORT_OP_INDEX={count:1,min:1,max:1};function isArgminDef(a){return!!a&&!!a.argmin}function isArgmaxDef(a){return!!a&&!!a.argmax}function isAggregateOp(a){return isString(a)&&!!AGGREGATE_OP_INDEX[a]}const COUNTING_OPS=new Set(["count","valid","missing","distinct"]);function isCountingAggregateOp(aggregate){return isString(aggregate)&&COUNTING_OPS.has(aggregate)}const SUM_OPS=new Set(["count","sum","distinct","valid","missing"]),SHARED_DOMAIN_OPS=new Set(["mean","average","median","q1","q3","min","max"]);function binToString(bin){return isBoolean(bin)&&(bin=normalizeBin(bin,void 0)),"bin"+util_keys(bin).map((p=>isParameterExtent(bin[p])?varName(`_${p}_${entries(bin[p])}`):varName(`_${p}_${bin[p]}`))).join("")}function isBinning(bin){return!0===bin||isBinParams(bin)&&!bin.binned}function isBinned(bin){return"binned"===bin||isBinParams(bin)&&!0===bin.binned}function isBinParams(bin){return isObject(bin)}function isParameterExtent(extent){return null==extent?void 0:extent.param}function autoMaxBins(channel){switch(channel){case ROW:case COLUMN:case"size":case COLOR:case FILL:case STROKE:case"strokeWidth":case OPACITY:case"fillOpacity":case"strokeOpacity":case SHAPE:return 6;case"strokeDash":return 4;default:return 10}}function isExprRef(o){return!!(null==o?void 0:o.expr)}function replaceExprRef(index){const props=util_keys(index||{}),newIndex={};for(const prop of props)newIndex[prop]=signalRefOrValue(index[prop]);return newIndex}var title_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function extractTitleConfig(titleConfig){const{anchor,frame,offset,orient,angle,limit,color,subtitleColor,subtitleFont,subtitleFontSize,subtitleFontStyle,subtitleFontWeight,subtitleLineHeight,subtitlePadding}=titleConfig,rest=title_rest(titleConfig,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),titleMarkConfig=Object.assign(Object.assign({},rest),color?{fill:color}:{}),nonMarkTitleProperties=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},anchor?{anchor}:{}),frame?{frame}:{}),offset?{offset}:{}),orient?{orient}:{}),void 0!==angle?{angle}:{}),void 0!==limit?{limit}:{}),subtitle=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},subtitleColor?{subtitleColor}:{}),subtitleFont?{subtitleFont}:{}),subtitleFontSize?{subtitleFontSize}:{}),subtitleFontStyle?{subtitleFontStyle}:{}),subtitleFontWeight?{subtitleFontWeight}:{}),subtitleLineHeight?{subtitleLineHeight}:{}),subtitlePadding?{subtitlePadding}:{});return{titleMarkConfig,subtitleMarkConfig:util_pick(titleConfig,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties,subtitle}}function isText(v){return isString(v)||isArray(v)&&isString(v[0])}function isSignalRef(o){return!!(null==o?void 0:o.signal)}function isVgRangeStep(range){return!!range.step}function isDataRefDomain(domain){return!isArray(domain)&&("field"in domain&&"data"in domain)}const VG_MARK_CONFIGS=util_keys({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),VG_MARK_INDEX={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},VG_CORNERRADIUS_CHANNELS=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var common_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function signalOrValueRefWithCondition(val){const condition=isArray(val.condition)?val.condition.map(conditionalSignalRefOrValue):conditionalSignalRefOrValue(val.condition);return Object.assign(Object.assign({},signalRefOrValue(val)),{condition})}function signalRefOrValue(value){if(isExprRef(value)){const{expr}=value,rest=common_rest(value,["expr"]);return Object.assign({signal:expr},rest)}return value}function conditionalSignalRefOrValue(value){if(isExprRef(value)){const{expr}=value,rest=common_rest(value,["expr"]);return Object.assign({signal:expr},rest)}return value}function signalOrValueRef(value){if(isExprRef(value)){const{expr}=value,rest=common_rest(value,["expr"]);return Object.assign({signal:expr},rest)}return isSignalRef(value)?value:void 0!==value?{value}:void 0}function exprFromSignalRefOrValue(ref){return isSignalRef(ref)?ref.signal:$(ref)}function exprFromValueRefOrSignalRef(ref){return isSignalRef(ref)?ref.signal:$(ref.value)}function signalOrStringValue(v){return isSignalRef(v)?v.signal:null==v?null:$(v)}function getStyles(mark){var _a;return[].concat(mark.type,null!==(_a=mark.style)&&void 0!==_a?_a:[])}function getMarkPropOrConfig(channel,mark,config,opt={}){const{vgChannel,ignoreVgConfig}=opt;return vgChannel&&void 0!==mark[vgChannel]?mark[vgChannel]:void 0!==mark[channel]?mark[channel]:!ignoreVgConfig||vgChannel&&vgChannel!==channel?getMarkConfig(channel,mark,config,opt):void 0}function getMarkConfig(channel,mark,config,{vgChannel}={}){return getFirstDefined(vgChannel?getMarkStyleConfig(channel,mark,config.style):void 0,getMarkStyleConfig(channel,mark,config.style),vgChannel?config[mark.type][vgChannel]:void 0,config[mark.type][channel],vgChannel?config.mark[vgChannel]:config.mark[channel])}function getMarkStyleConfig(prop,mark,styleConfigIndex){return getStyleConfig(prop,getStyles(mark),styleConfigIndex)}function getStyleConfig(p,styles,styleConfigIndex){let value;styles=array(styles);for(const style of styles){const styleConfig=styleConfigIndex[style];styleConfig&&void 0!==styleConfig[p]&&(value=styleConfig[p])}return value}function sortParams(orderDef,fieldRefOption){return array(orderDef).reduce(((s,orderChannelDef)=>{var _a;return s.field.push(vgField(orderChannelDef,fieldRefOption)),s.order.push(null!==(_a=orderChannelDef.sort)&&void 0!==_a?_a:"ascending"),s}),{field:[],order:[]})}function mergeTitleFieldDefs(f1,f2){const merged=[...f1];return f2.forEach((fdToMerge=>{for(const fieldDef1 of merged)if(deepEqual(fieldDef1,fdToMerge))return;merged.push(fdToMerge)})),merged}function mergeTitle(title1,title2){return deepEqual(title1,title2)||!title2?title1:title1?[...array(title1),...array(title2)].join(", "):title2}function mergeTitleComponent(v1,v2){const v1Val=v1.value,v2Val=v2.value;if(null==v1Val||null===v2Val)return{explicit:v1.explicit,value:null};if((isText(v1Val)||isSignalRef(v1Val))&&(isText(v2Val)||isSignalRef(v2Val)))return{explicit:v1.explicit,value:mergeTitle(v1Val,v2Val)};if(isText(v1Val)||isSignalRef(v1Val))return{explicit:v1.explicit,value:v1Val};if(isText(v2Val)||isSignalRef(v2Val))return{explicit:v1.explicit,value:v2Val};if(!(isText(v1Val)||isSignalRef(v1Val)||isText(v2Val)||isSignalRef(v2Val)))return{explicit:v1.explicit,value:mergeTitleFieldDefs(v1Val,v2Val)};throw new Error("It should never reach here")}function invalidSpec(spec){return`Invalid specification ${stringify(spec)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.';function containerSizeNonSingle(name){return`${"width"==name?"Width":"Height"} "container" only works for single views and layered views.`}function containerSizeNotCompatibleWithAutosize(name){return`${"width"==name?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==name?"x":"y"}".`}function droppingFit(channel){return channel?`Dropping "fit-${channel}" because spec has discrete ${getSizeChannel(channel)}.`:'Dropping "fit" because spec has discrete size.'}function unknownField(channel){return`Unknown field for ${channel}. Cannot calculate view size.`}function cannotProjectOnChannelWithoutField(channel){return`Cannot project a selection on encoding channel "${channel}", which has no field.`}function cannotProjectAggregate(channel,aggregate){return`Cannot project a selection on encoding channel "${channel}" as it uses an aggregate function ("${aggregate}").`}function selectionNotSupported(mark){return`Selection not supported for ${mark} yet.`}const NEEDS_SAME_SELECTION="The same selection must be used to override scale domains in a layered view.";function columnsNotSupportByRowCol(type){return`The "columns" property cannot be used when "${type}" has nested row/column.`}function differentParse(field,local,ancestor){return`An ancestor parsed field "${field}" as ${ancestor} but a child wants to parse the field as ${local}.`}function invalidTransformIgnored(transform){return`Ignoring an invalid transform: ${stringify(transform)}.`}function customFormatTypeNotAllowed(channel){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${channel} are dropped.`}function offsetNestedInsideContinuousPositionScaleDropped(mainChannel){return`${mainChannel}Offset dropped because ${mainChannel} is continuous`}function replaceOffsetWithMainChannel(mainChannel){return`There is no ${mainChannel} encoding. Replacing ${mainChannel}Offset encoding as ${mainChannel}.`}function invalidFieldType(type){return`Invalid field type "${type}".`}function droppingColor(type,opt){const{fill,stroke}=opt;return`Dropping color ${type} as the plot also has ${fill&&stroke?"fill and stroke":fill?"fill":"stroke"}.`}function emptyFieldDef(fieldDef,channel){return`Dropping ${stringify(fieldDef)} from channel "${channel}" since it does not contain any data field, datum, value, or signal.`}function incompatibleChannel(channel,markOrFacet,when){return`${channel} dropped as it is incompatible with "${markOrFacet}"${when?` when ${when}`:""}.`}function offsetEncodingScaleIgnored(channel){return`${channel} encoding has no scale, so specified scale is ignored.`}function channelShouldBeDiscrete(channel){return`${channel} encoding should be discrete (ordinal / nominal / binned).`}function channelShouldBeDiscreteOrDiscretizing(channel){return`${channel} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function discreteChannelCannotEncode(channel,type){return`Using discrete channel "${channel}" to encode "${type}" field can be misleading as it does not encode ${"ordinal"===type?"order":"magnitude"}.`}function unaggregateDomainHasNoEffectForRawField(fieldDef){return`Using unaggregated domain with raw field has no effect (${stringify(fieldDef)}).`}function unaggregateDomainWithNonSharedDomainOp(aggregate){return`Unaggregated domain not applicable for "${aggregate}" since it produces values outside the origin domain of the source data.`}function unaggregatedDomainWithLogScale(fieldDef){return`Unaggregated domain is currently unsupported for log scale (${stringify(fieldDef)}).`}function scalePropertyNotWorkWithScaleType(scaleType,propName,channel){return`${channel}-scale's "${propName}" is dropped as it does not work with ${scaleType} scale.`}function stepDropped(channel){return`The step for "${channel}" is dropped because the ${"width"===channel?"x":"y"} is continuous.`}const MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function invalidTimeUnit(unitName,value){return`Invalid ${unitName}: ${stringify(value)}.`}function errorBand1DNotSupport(property){return`1D error band does not support ${property}.`}function channelRequiredForBinned(channel){return`Channel ${channel} is required for "binned" bin.`}const main=logger(vega_util_module_Warn);let current=main;function log_reset(){return current=main,current}function log_warn(...args){current.warn(...args)}function isDateTime(o){if(o&&isObject(o))for(const part of TIMEUNIT_PARTS)if(part in o)return!0;return!1}new WeakMap;const MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],SHORT_MONTHS=MONTHS.map((m=>m.substr(0,3))),DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],SHORT_DAYS=DAYS.map((d=>d.substr(0,3)));function dateTimeParts(d,normalize){const parts=[];if(normalize&&void 0!==d.day&&util_keys(d).length>1&&(log_warn(function droppedDay(d){return`Dropping day from datetime ${stringify(d)} as day cannot be combined with other units.`}(d)),delete(d=duplicate(d)).day),void 0!==d.year?parts.push(d.year):parts.push(2012),void 0!==d.month){const month=normalize?function normalizeMonth(m){if(isNumeric(m)&&(m=+m),isNumber(m))return m-1;{const lowerM=m.toLowerCase(),monthIndex=MONTHS.indexOf(lowerM);if(-1!==monthIndex)return monthIndex;const shortM=lowerM.substr(0,3),shortMonthIndex=SHORT_MONTHS.indexOf(shortM);if(-1!==shortMonthIndex)return shortMonthIndex;throw new Error(invalidTimeUnit("month",m))}}(d.month):d.month;parts.push(month)}else if(void 0!==d.quarter){const quarter=normalize?function normalizeQuarter(q){if(isNumeric(q)&&(q=+q),isNumber(q))return q>4&&log_warn(invalidTimeUnit("quarter",q)),q-1;throw new Error(invalidTimeUnit("quarter",q))}(d.quarter):d.quarter;parts.push(isNumber(quarter)?3*quarter:`${quarter}*3`)}else parts.push(0);if(void 0!==d.date)parts.push(d.date);else if(void 0!==d.day){const day=normalize?function normalizeDay(d){if(isNumeric(d)&&(d=+d),isNumber(d))return d%7;{const lowerD=d.toLowerCase(),dayIndex=DAYS.indexOf(lowerD);if(-1!==dayIndex)return dayIndex;const shortD=lowerD.substr(0,3),shortDayIndex=SHORT_DAYS.indexOf(shortD);if(-1!==shortDayIndex)return shortDayIndex;throw new Error(invalidTimeUnit("day",d))}}(d.day):d.day;parts.push(isNumber(day)?day+1:`${day}+1`)}else parts.push(1);for(const timeUnit of["hours","minutes","seconds","milliseconds"]){const unit=d[timeUnit];parts.push(void 0===unit?0:unit)}return parts}function dateTimeToExpr(d){const string=dateTimeParts(d,!0).join(", ");return d.utc?`utc(${string})`:`datetime(${string})`}var timeunit_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const LOCAL_SINGLE_TIMEUNIT_INDEX={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},TIMEUNIT_PARTS=util_keys(LOCAL_SINGLE_TIMEUNIT_INDEX);function isUTCTimeUnit(t){return t.startsWith("utc")}const VEGALITE_TIMEFORMAT={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function getTimeUnitParts(timeUnit){return TIMEUNIT_PARTS.filter((part=>containsTimeUnit(timeUnit,part)))}function containsTimeUnit(fullTimeUnit,timeUnit){const index=fullTimeUnit.indexOf(timeUnit);return!(index<0)&&(!(index>0&&"seconds"===timeUnit&&"i"===fullTimeUnit.charAt(index-1))&&(!(fullTimeUnit.length>index+3&&"day"===timeUnit&&"o"===fullTimeUnit.charAt(index+3))&&!(index>0&&"year"===timeUnit&&"f"===fullTimeUnit.charAt(index-1))))}function timeunit_fieldExpr(fullTimeUnit,field,{end}={end:!1}){const fieldRef=accessPathWithDatum(field),utc=isUTCTimeUnit(fullTimeUnit)?"utc":"";let lastTimeUnit;const dateExpr={};for(const part of TIMEUNIT_PARTS)containsTimeUnit(fullTimeUnit,part)&&(dateExpr[part]="quarter"===(timeUnit=part)?`(${utc}quarter(${fieldRef})-1)`:`${utc}${timeUnit}(${fieldRef})`,lastTimeUnit=part);var timeUnit;return end&&(dateExpr[lastTimeUnit]+="+1"),function dateTimeExprToExpr(d){const string=dateTimeParts(d,!1).join(", ");return d.utc?`utc(${string})`:`datetime(${string})`}(dateExpr)}function timeUnitSpecifierExpression(timeUnit){if(!timeUnit)return;const timeUnitParts=getTimeUnitParts(timeUnit);return`timeUnitSpecifier(${stringify(timeUnitParts)}, ${stringify(VEGALITE_TIMEFORMAT)})`}function normalizeTimeUnit(timeUnit){if(!timeUnit)return;let params;return isString(timeUnit)?params={unit:timeUnit}:isObject(timeUnit)&&(params=Object.assign(Object.assign({},timeUnit),timeUnit.unit?{unit:timeUnit.unit}:{})),isUTCTimeUnit(params.unit)&&(params.utc=!0,params.unit=function getLocalTimeUnit(t){return t.substr(3)}(params.unit)),params}function isFieldEqualPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&void 0!==predicate.equal}function isFieldLTPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&void 0!==predicate.lt}function isFieldLTEPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&void 0!==predicate.lte}function isFieldGTPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&void 0!==predicate.gt}function isFieldGTEPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&void 0!==predicate.gte}function isFieldRangePredicate(predicate){if(null==predicate?void 0:predicate.field){if(isArray(predicate.range)&&2===predicate.range.length)return!0;if(isSignalRef(predicate.range))return!0}return!1}function isFieldOneOfPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&(isArray(predicate.oneOf)||isArray(predicate.in))}function isFieldPredicate(predicate){return isFieldOneOfPredicate(predicate)||isFieldEqualPredicate(predicate)||isFieldRangePredicate(predicate)||isFieldLTPredicate(predicate)||isFieldGTPredicate(predicate)||isFieldLTEPredicate(predicate)||isFieldGTEPredicate(predicate)}function predicateValueExpr(v,timeUnit){return valueExpr(v,{timeUnit,wrapTime:!0})}function fieldFilterExpression(predicate,useInRange=!0){var _a;const{field}=predicate,timeUnit=null===(_a=normalizeTimeUnit(predicate.timeUnit))||void 0===_a?void 0:_a.unit,fieldExpr=timeUnit?`time(${timeunit_fieldExpr(timeUnit,field)})`:vgField(predicate,{expr:"datum"});if(isFieldEqualPredicate(predicate))return`${fieldExpr}===${predicateValueExpr(predicate.equal,timeUnit)}`;if(isFieldLTPredicate(predicate)){return`${fieldExpr}<${predicateValueExpr(predicate.lt,timeUnit)}`}if(isFieldGTPredicate(predicate)){return`${fieldExpr}>${predicateValueExpr(predicate.gt,timeUnit)}`}if(isFieldLTEPredicate(predicate)){return`${fieldExpr}<=${predicateValueExpr(predicate.lte,timeUnit)}`}if(isFieldGTEPredicate(predicate)){return`${fieldExpr}>=${predicateValueExpr(predicate.gte,timeUnit)}`}if(isFieldOneOfPredicate(predicate))return`indexof([${function predicateValuesExpr(vals,timeUnit){return vals.map((v=>predicateValueExpr(v,timeUnit)))}(predicate.oneOf,timeUnit).join(",")}], ${fieldExpr}) !== -1`;if(function isFieldValidPredicate(predicate){return!!(null==predicate?void 0:predicate.field)&&void 0!==predicate.valid}(predicate))return fieldValidPredicate(fieldExpr,predicate.valid);if(isFieldRangePredicate(predicate)){const{range}=predicate,lower=isSignalRef(range)?{signal:`${range.signal}[0]`}:range[0],upper=isSignalRef(range)?{signal:`${range.signal}[1]`}:range[1];if(null!==lower&&null!==upper&&useInRange)return"inrange("+fieldExpr+", ["+predicateValueExpr(lower,timeUnit)+", "+predicateValueExpr(upper,timeUnit)+"])";const exprs=[];return null!==lower&&exprs.push(`${fieldExpr} >= ${predicateValueExpr(lower,timeUnit)}`),null!==upper&&exprs.push(`${fieldExpr} <= ${predicateValueExpr(upper,timeUnit)}`),exprs.length>0?exprs.join(" && "):"true"}throw new Error(`Invalid field predicate: ${stringify(predicate)}`)}function fieldValidPredicate(fieldExpr,valid=!0){return valid?`isValid(${fieldExpr}) && isFinite(+${fieldExpr})`:`!isValid(${fieldExpr}) || !isFinite(+${fieldExpr})`}function normalizePredicate(f){var _a;return isFieldPredicate(f)&&f.timeUnit?Object.assign(Object.assign({},f),{timeUnit:null===(_a=normalizeTimeUnit(f.timeUnit))||void 0===_a?void 0:_a.unit}):f}const Type={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function type_isContinuous(type){return"quantitative"===type||"temporal"===type}function type_isDiscrete(type){return"ordinal"===type||"nominal"===type}const QUANTITATIVE=Type.quantitative,ORDINAL=Type.ordinal,TEMPORAL=Type.temporal,NOMINAL=Type.nominal,GEOJSON=Type.geojson;util_keys(Type);var scale_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ScaleType_LINEAR="linear",ScaleType_LOG="log",ScaleType_TIME="time",ScaleType_UTC="utc",ScaleType_POINT="point",ScaleType_BAND="band",SCALE_CATEGORY_INDEX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};util_keys(SCALE_CATEGORY_INDEX);function scaleCompatible(scaleType1,scaleType2){const scaleCategory1=SCALE_CATEGORY_INDEX[scaleType1],scaleCategory2=SCALE_CATEGORY_INDEX[scaleType2];return scaleCategory1===scaleCategory2||"ordinal-position"===scaleCategory1&&"time"===scaleCategory2||"ordinal-position"===scaleCategory2&&"time"===scaleCategory1}const SCALE_PRECEDENCE_INDEX={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function scaleTypePrecedence(scaleType){return SCALE_PRECEDENCE_INDEX[scaleType]}const QUANTITATIVE_SCALES=new Set(["linear","log","pow","sqrt","symlog"]),CONTINUOUS_TO_CONTINUOUS_SCALES=new Set([...QUANTITATIVE_SCALES,"time","utc"]);function isQuantitative(type){return QUANTITATIVE_SCALES.has(type)}const CONTINUOUS_TO_DISCRETE_SCALES=new Set(["quantile","quantize","threshold"]),CONTINUOUS_DOMAIN_SCALES=new Set([...CONTINUOUS_TO_CONTINUOUS_SCALES,...CONTINUOUS_TO_DISCRETE_SCALES,"sequential","identity"]),DISCRETE_DOMAIN_SCALES=new Set(["ordinal","bin-ordinal","point","band"]);new Set(["time","utc"]);function hasDiscreteDomain(type){return DISCRETE_DOMAIN_SCALES.has(type)}function hasContinuousDomain(type){return CONTINUOUS_DOMAIN_SCALES.has(type)}function isContinuousToContinuous(type){return CONTINUOUS_TO_CONTINUOUS_SCALES.has(type)}function isContinuousToDiscrete(type){return CONTINUOUS_TO_DISCRETE_SCALES.has(type)}function isParameterDomain(domain){return null==domain?void 0:domain.param}const SCALE_PROPERTY_INDEX={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:scale_type,domain:scale_domain,range:scale_range,rangeMax,rangeMin,scheme:scale_scheme}=(util_keys(SCALE_PROPERTY_INDEX),SCALE_PROPERTY_INDEX),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX=scale_rest(SCALE_PROPERTY_INDEX,["type","domain","range","rangeMax","rangeMin","scheme"]),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=util_keys(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX);function scaleTypeSupportProperty(scaleType,propName){switch(propName){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(scaleType);case"bins":return!["point","band","identity","ordinal"].includes(scaleType);case"round":return isContinuousToContinuous(scaleType)||"band"===scaleType||"point"===scaleType;case"padding":case"rangeMin":case"rangeMax":return isContinuousToContinuous(scaleType)||["point","band"].includes(scaleType);case"paddingOuter":case"align":return["point","band"].includes(scaleType);case"paddingInner":return"band"===scaleType;case"domainMax":case"domainMid":case"domainMin":case"clamp":return isContinuousToContinuous(scaleType);case"nice":return isContinuousToContinuous(scaleType)||"quantize"===scaleType||"threshold"===scaleType;case"exponent":return"pow"===scaleType;case"base":return"log"===scaleType;case"constant":return"symlog"===scaleType;case"zero":return hasContinuousDomain(scaleType)&&!util_contains(["log","time","utc","threshold","quantile"],scaleType)}}function channelScalePropertyIncompatability(channel,propName){switch(propName){case"interpolate":case"scheme":case"domainMid":return isColorChannel(channel)?void 0:function cannotUseScalePropertyWithNonColor(prop){return`Cannot use the scale property "${prop}" with non-color channel.`}(propName);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const mark_Mark={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},ARC=mark_Mark.arc,AREA=mark_Mark.area,BAR=mark_Mark.bar,IMAGE=mark_Mark.image,LINE=mark_Mark.line,POINT=mark_Mark.point,RECT=mark_Mark.rect,RULE=mark_Mark.rule,mark_TEXT=mark_Mark.text,TICK=mark_Mark.tick,TRAIL=mark_Mark.trail,CIRCLE=mark_Mark.circle,SQUARE=mark_Mark.square,GEOSHAPE=mark_Mark.geoshape;function isPathMark(m){return["line","area","trail"].includes(m)}function isRectBasedMark(m){return["rect","bar","image","arc"].includes(m)}const PRIMITIVE_MARKS=new Set(util_keys(mark_Mark));function isMarkDef(mark){return mark.type}const FILL_STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],VL_ONLY_MARK_CONFIG_PROPERTIES=util_keys({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),MARK_CONFIGS=util_keys({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function isRelativeBandSize(o){return o&&null!=o.band}const BAR_CORNER_RADIUS_INDEX={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},defaultBarConfig={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},defaultRectConfig={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function midPointRefWithPositionInvalidTest(params){const{channel,channelDef,markDef,scale,config}=params,ref=midPoint(params);return isFieldDef(channelDef)&&!isCountingAggregateOp(channelDef.aggregate)&&scale&&isContinuousToContinuous(scale.get("type"))?function wrapPositionInvalidTest({fieldDef,channel,markDef,ref,config}){if(isPathMark(markDef.type))return ref;if(null===getMarkPropOrConfig("invalid",markDef,config))return[fieldInvalidTestValueRef(fieldDef,channel),ref];return ref}({fieldDef:channelDef,channel,markDef,ref,config}):ref}function fieldInvalidTestValueRef(fieldDef,channel){const test=fieldInvalidPredicate(fieldDef,!0),zeroValueRef="y"===getMainRangeChannel(channel)?{field:{group:"height"}}:{value:0};return Object.assign({test},zeroValueRef)}function fieldInvalidPredicate(field,invalid=!0){return fieldValidPredicate(isString(field)?field:vgField(field,{expr:"datum"}),!invalid)}function valueRefForFieldOrDatumDef(fieldDef,scaleName,opt,encode){const ref={};if(scaleName&&(ref.scale=scaleName),isDatumDef(fieldDef)){const{datum}=fieldDef;isDateTime(datum)?ref.signal=dateTimeToExpr(datum):isSignalRef(datum)?ref.signal=datum.signal:isExprRef(datum)?ref.signal=datum.expr:ref.value=datum}else ref.field=vgField(fieldDef,opt);if(encode){const{offset,band}=encode;offset&&(ref.offset=offset),band&&(ref.band=band)}return ref}function interpolatedSignalRef({scaleName,fieldOrDatumDef,fieldOrDatumDef2,offset,startSuffix,bandPosition=.5}){const expr=0<bandPosition&&bandPosition<1?"datum":void 0,start=vgField(fieldOrDatumDef,{expr,suffix:startSuffix}),end=void 0!==fieldOrDatumDef2?vgField(fieldOrDatumDef2,{expr}):vgField(fieldOrDatumDef,{suffix:"end",expr}),ref={};if(0===bandPosition||1===bandPosition){ref.scale=scaleName;const val=0===bandPosition?start:end;ref.field=val}else{const datum=isSignalRef(bandPosition)?`${bandPosition.signal} * ${start} + (1-${bandPosition.signal}) * ${end}`:`${bandPosition} * ${start} + ${1-bandPosition} * ${end}`;ref.signal=`scale("${scaleName}", ${datum})`}return offset&&(ref.offset=offset),ref}function midPoint({channel,channelDef,channel2Def,markDef,config,scaleName,scale,stack,offset,defaultRef,bandPosition}){var _a;if(channelDef){if(isFieldOrDatumDef(channelDef)){const scaleType=null==scale?void 0:scale.get("type");if(isTypedFieldDef(channelDef)){null!=bandPosition||(bandPosition=getBandPosition({fieldDef:channelDef,fieldDef2:channel2Def,markDef,config}));const{bin,timeUnit,type}=channelDef;if(isBinning(bin)||bandPosition&&timeUnit&&type===TEMPORAL)return(null==stack?void 0:stack.impute)?valueRefForFieldOrDatumDef(channelDef,scaleName,{binSuffix:"mid"},{offset}):bandPosition&&!hasDiscreteDomain(scaleType)?interpolatedSignalRef({scaleName,fieldOrDatumDef:channelDef,bandPosition,offset}):valueRefForFieldOrDatumDef(channelDef,scaleName,binRequiresRange(channelDef,channel)?{binSuffix:"range"}:{},{offset});if(isBinned(bin)){if(isFieldDef(channel2Def))return interpolatedSignalRef({scaleName,fieldOrDatumDef:channelDef,fieldOrDatumDef2:channel2Def,bandPosition,offset});log_warn(channelRequiredForBinned("x"===channel?"x2":"y2"))}}return valueRefForFieldOrDatumDef(channelDef,scaleName,hasDiscreteDomain(scaleType)?{binSuffix:"range"}:{},{offset,band:"band"===scaleType?null!==(_a=null!=bandPosition?bandPosition:channelDef.bandPosition)&&void 0!==_a?_a:.5:void 0})}if(isValueDef(channelDef)){const value=channelDef.value,offsetMixins=offset?{offset}:{};return Object.assign(Object.assign({},widthHeightValueOrSignalRef(channel,value)),offsetMixins)}}return isFunction(defaultRef)&&(defaultRef=defaultRef()),defaultRef?Object.assign(Object.assign({},defaultRef),offset?{offset}:{}):defaultRef}function widthHeightValueOrSignalRef(channel,value){return util_contains(["x","x2"],channel)&&"width"===value?{field:{group:"width"}}:util_contains(["y","y2"],channel)&&"height"===value?{field:{group:"height"}}:signalOrValueRef(value)}function isCustomFormatType(formatType){return formatType&&"number"!==formatType&&"time"!==formatType}function customFormatExpr(formatType,field,format){return`${formatType}(${field}${format?`, ${stringify(format)}`:""})`}function formatSignalRef({fieldOrDatumDef,format,formatType,expr,normalizeStack,config}){var _a,_b;if(isCustomFormatType(formatType))return formatCustomType({fieldOrDatumDef,format,formatType,expr,config});const field=fieldToFormat(fieldOrDatumDef,expr,normalizeStack),type=channelDefType(fieldOrDatumDef);if(void 0===format&&void 0===formatType&&config.customFormatTypes){if("quantitative"===type){if(normalizeStack&&config.normalizedNumberFormatType)return formatCustomType({fieldOrDatumDef,format:config.normalizedNumberFormat,formatType:config.normalizedNumberFormatType,expr,config});if(config.numberFormatType)return formatCustomType({fieldOrDatumDef,format:config.numberFormat,formatType:config.numberFormatType,expr,config})}if("temporal"===type&&config.timeFormatType&&isFieldDef(fieldOrDatumDef)&&void 0===fieldOrDatumDef.timeUnit)return formatCustomType({fieldOrDatumDef,format:config.timeFormat,formatType:config.timeFormatType,expr,config})}if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)){const signal=function timeFormatExpression({field,timeUnit,format,formatType,rawTimeFormat,isUTCScale}){return!timeUnit||format?!timeUnit&&formatType?`${formatType}(${field}, '${format}')`:`${isUTCScale?"utc":"time"}Format(${field}, '${format=isString(format)?format:rawTimeFormat}')`:function formatExpression(timeUnit,field,isUTCScale){if(!timeUnit)return;const expr=timeUnitSpecifierExpression(timeUnit);return`${isUTCScale||isUTCTimeUnit(timeUnit)?"utc":"time"}Format(${field}, ${expr})`}(timeUnit,field,isUTCScale)}({field,timeUnit:isFieldDef(fieldOrDatumDef)?null===(_a=normalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0===_a?void 0:_a.unit:void 0,format,formatType:config.timeFormatType,rawTimeFormat:config.timeFormat,isUTCScale:isScaleFieldDef(fieldOrDatumDef)&&(null===(_b=fieldOrDatumDef.scale)||void 0===_b?void 0:_b.type)===ScaleType_UTC});return signal?{signal}:void 0}if(format=numberFormat({type,specifiedFormat:format,config,normalizeStack}),isFieldDef(fieldOrDatumDef)&&isBinning(fieldOrDatumDef.bin)){return{signal:binFormatExpression(field,vgField(fieldOrDatumDef,{expr,binSuffix:"end"}),format,formatType,config)}}return format||"quantitative"===channelDefType(fieldOrDatumDef)?{signal:`${formatExpr(field,format)}`}:{signal:`isValid(${field}) ? ${field} : ""+${field}`}}function fieldToFormat(fieldOrDatumDef,expr,normalizeStack){return isFieldDef(fieldOrDatumDef)?normalizeStack?`${vgField(fieldOrDatumDef,{expr,suffix:"end"})}-${vgField(fieldOrDatumDef,{expr,suffix:"start"})}`:vgField(fieldOrDatumDef,{expr}):function datumDefToExpr(datumDef){const{datum}=datumDef;return isDateTime(datum)?dateTimeToExpr(datum):`${stringify(datum)}`}(fieldOrDatumDef)}function formatCustomType({fieldOrDatumDef,format,formatType,expr,normalizeStack,config,field}){if(null!=field||(field=fieldToFormat(fieldOrDatumDef,expr,normalizeStack)),"datum.value"!==field&&isFieldDef(fieldOrDatumDef)&&isBinning(fieldOrDatumDef.bin)){return{signal:binFormatExpression(field,vgField(fieldOrDatumDef,{expr,binSuffix:"end"}),format,formatType,config)}}return{signal:customFormatExpr(formatType,field,format)}}function guideFormat(fieldOrDatumDef,type,format,formatType,config,omitTimeFormatConfig){var _a;if(!isCustomFormatType(formatType)){if(void 0===format&&void 0===formatType&&config.customFormatTypes&&"quantitative"===channelDefType(fieldOrDatumDef)){if(config.normalizedNumberFormatType&&isPositionFieldOrDatumDef(fieldOrDatumDef)&&"normalize"===fieldOrDatumDef.stack)return;if(config.numberFormatType)return}if(isPositionFieldOrDatumDef(fieldOrDatumDef)&&"normalize"===fieldOrDatumDef.stack&&config.normalizedNumberFormat)return numberFormat({type:"quantitative",config,normalizeStack:!0});if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)){const timeUnit=isFieldDef(fieldOrDatumDef)?null===(_a=normalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0===_a?void 0:_a.unit:void 0;if(void 0===timeUnit&&config.customFormatTypes&&config.timeFormatType)return;return function format_timeFormat({specifiedFormat,timeUnit,config,omitTimeFormatConfig}){if(specifiedFormat)return specifiedFormat;if(timeUnit)return{signal:timeUnitSpecifierExpression(timeUnit)};return omitTimeFormatConfig?void 0:config.timeFormat}({specifiedFormat:format,timeUnit,config,omitTimeFormatConfig})}return numberFormat({type,specifiedFormat:format,config})}}function guideFormatType(formatType,fieldOrDatumDef,scaleType){var _a;return formatType&&(isSignalRef(formatType)||"number"===formatType||"time"===formatType)?formatType:isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)&&"time"!==scaleType&&"utc"!==scaleType?isFieldDef(fieldOrDatumDef)&&(null===(_a=normalizeTimeUnit(null==fieldOrDatumDef?void 0:fieldOrDatumDef.timeUnit))||void 0===_a?void 0:_a.utc)?"utc":"time":void 0}function numberFormat({type,specifiedFormat,config,normalizeStack}){return isString(specifiedFormat)?specifiedFormat:type===QUANTITATIVE?normalizeStack?config.normalizedNumberFormat:config.numberFormat:void 0}function formatExpr(field,format){return`format(${field}, "${format||""}")`}function binNumberFormatExpr(field,format,formatType,config){var _a;return isCustomFormatType(formatType)?customFormatExpr(formatType,field,format):formatExpr(field,null!==(_a=isString(format)?format:void 0)&&void 0!==_a?_a:config.numberFormat)}function binFormatExpression(startField,endField,format,formatType,config){if(void 0===format&&void 0===formatType&&config.customFormatTypes&&config.numberFormatType)return binFormatExpression(startField,endField,config.numberFormat,config.numberFormatType,config);const start=binNumberFormatExpr(startField,format,formatType,config),end=binNumberFormatExpr(endField,format,formatType,config);return`${fieldValidPredicate(startField,!1)} ? "null" : ${start} + "  " + ${end}`}const DEFAULT_SORT_OP="min",SORT_BY_CHANNEL_INDEX={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function isSortByChannel(c){return c in SORT_BY_CHANNEL_INDEX}function isSortByEncoding(sort){return!!(null==sort?void 0:sort.encoding)}function isSortField(sort){return sort&&("count"===sort.op||!!sort.field)}function isSortArray(sort){return sort&&isArray(sort)}function isFacetMapping(f){return"row"in f||"column"in f}function isFacetFieldDef(channelDef){return!!channelDef&&"header"in channelDef}function isFacetSpec(spec){return"facet"in spec}var channeldef_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function toFieldDefBase(fieldDef){const{field,timeUnit,bin,aggregate}=fieldDef;return Object.assign(Object.assign(Object.assign(Object.assign({},timeUnit?{timeUnit}:{}),bin?{bin}:{}),aggregate?{aggregate}:{}),{field})}function isSortableFieldDef(fieldDef){return"sort"in fieldDef}function getBandPosition({fieldDef,fieldDef2,markDef:mark,config}){if(isFieldOrDatumDef(fieldDef)&&void 0!==fieldDef.bandPosition)return fieldDef.bandPosition;if(isFieldDef(fieldDef)){const{timeUnit,bin}=fieldDef;if(timeUnit&&!fieldDef2)return isRectBasedMark(mark.type)?0:getMarkConfig("timeUnitBandPosition",mark,config);if(isBinning(bin))return.5}}function getBandSize({channel,fieldDef,fieldDef2,markDef:mark,config,scaleType,useVlSizeChannel}){var _a,_b,_c;const sizeChannel=getSizeChannel(channel),size=getMarkPropOrConfig(useVlSizeChannel?"size":sizeChannel,mark,config,{vgChannel:sizeChannel});if(void 0!==size)return size;if(isFieldDef(fieldDef)){const{timeUnit,bin}=fieldDef;if(timeUnit&&!fieldDef2)return{band:getMarkConfig("timeUnitBandSize",mark,config)};if(isBinning(bin)&&!hasDiscreteDomain(scaleType))return{band:1}}return isRectBasedMark(mark.type)?scaleType?hasDiscreteDomain(scaleType)?(null===(_a=config[mark.type])||void 0===_a?void 0:_a.discreteBandSize)||{band:1}:null===(_b=config[mark.type])||void 0===_b?void 0:_b.continuousBandSize:null===(_c=config[mark.type])||void 0===_c?void 0:_c.discreteBandSize:void 0}function hasBandEnd(fieldDef,fieldDef2,markDef,config){return!!(isBinning(fieldDef.bin)||fieldDef.timeUnit&&isTypedFieldDef(fieldDef)&&"temporal"===fieldDef.type)&&void 0!==getBandPosition({fieldDef,fieldDef2,markDef,config})}function isConditionalDef(channelDef){return channelDef&&"condition"in channelDef}function hasConditionalFieldDef(channelDef){const condition=null==channelDef?void 0:channelDef.condition;return!!condition&&!isArray(condition)&&isFieldDef(condition)}function hasConditionalFieldOrDatumDef(channelDef){const condition=null==channelDef?void 0:channelDef.condition;return!!condition&&!isArray(condition)&&isFieldOrDatumDef(condition)}function isFieldDef(channelDef){return channelDef&&(!!channelDef.field||"count"===channelDef.aggregate)}function channelDefType(channelDef){return null==channelDef?void 0:channelDef.type}function isDatumDef(channelDef){return channelDef&&"datum"in channelDef}function isContinuousFieldOrDatumDef(cd){return isTypedFieldDef(cd)&&!channeldef_isDiscrete(cd)||isNumericDataDef(cd)}function isNumericDataDef(cd){return isDatumDef(cd)&&isNumber(cd.datum)}function isFieldOrDatumDef(channelDef){return isFieldDef(channelDef)||isDatumDef(channelDef)}function isTypedFieldDef(channelDef){return channelDef&&("field"in channelDef||"count"===channelDef.aggregate)&&"type"in channelDef}function isValueDef(channelDef){return channelDef&&"value"in channelDef&&"value"in channelDef}function isScaleFieldDef(channelDef){return channelDef&&("scale"in channelDef||"sort"in channelDef)}function isPositionFieldOrDatumDef(channelDef){return channelDef&&("axis"in channelDef||"stack"in channelDef||"impute"in channelDef)}function isMarkPropFieldOrDatumDef(channelDef){return channelDef&&"legend"in channelDef}function isStringFieldOrDatumDef(channelDef){return channelDef&&("format"in channelDef||"formatType"in channelDef)}function toStringFieldDef(fieldDef){return omit(fieldDef,["legend","axis","header","scale"])}function vgField(fieldDef,opt={}){var _a,_b,_c;let field=fieldDef.field;const prefix=opt.prefix;let suffix=opt.suffix,argAccessor="";if(function isCount(fieldDef){return"count"===fieldDef.aggregate}(fieldDef))field=internalField("count");else{let fn;if(!opt.nofn)if(function isOpFieldDef(fieldDef){return"op"in fieldDef}(fieldDef))fn=fieldDef.op;else{const{bin,aggregate,timeUnit}=fieldDef;isBinning(bin)?(fn=binToString(bin),suffix=(null!==(_a=opt.binSuffix)&&void 0!==_a?_a:"")+(null!==(_b=opt.suffix)&&void 0!==_b?_b:"")):aggregate?isArgmaxDef(aggregate)?(argAccessor=`["${field}"]`,field=`argmax_${aggregate.argmax}`):isArgminDef(aggregate)?(argAccessor=`["${field}"]`,field=`argmin_${aggregate.argmin}`):fn=String(aggregate):timeUnit&&(fn=function timeUnitToString(tu){const _a=normalizeTimeUnit(tu),{utc}=_a,rest=timeunit_rest(_a,["utc"]);return rest.unit?(utc?"utc":"")+util_keys(rest).map((p=>varName(`${"unit"===p?"":`_${p}_`}${rest[p]}`))).join(""):(utc?"utc":"")+"timeunit"+util_keys(rest).map((p=>varName(`_${p}_${rest[p]}`))).join("")}(timeUnit),suffix=(!["range","mid"].includes(opt.binSuffix)&&opt.binSuffix||"")+(null!==(_c=opt.suffix)&&void 0!==_c?_c:""))}fn&&(field=field?`${fn}_${field}`:fn)}return suffix&&(field=`${field}_${suffix}`),prefix&&(field=`${prefix}_${field}`),opt.forAs?removePathFromField(field):opt.expr?flatAccessWithDatum(field,opt.expr)+argAccessor:replacePathInField(field)+argAccessor}function channeldef_isDiscrete(def){switch(def.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return isFieldDef(def)&&!!def.bin;case"temporal":return!1}throw new Error(invalidFieldType(def.type))}const defaultTitleFormatter=(fieldDef,config)=>{switch(config.fieldTitle){case"plain":return fieldDef.field;case"functional":return function functionalTitleFormatter(fieldDef){const{aggregate,bin,timeUnit,field}=fieldDef;if(isArgmaxDef(aggregate))return`${field} for argmax(${aggregate.argmax})`;if(isArgminDef(aggregate))return`${field} for argmin(${aggregate.argmin})`;const timeUnitParams=normalizeTimeUnit(timeUnit),fn=aggregate||(null==timeUnitParams?void 0:timeUnitParams.unit)||(null==timeUnitParams?void 0:timeUnitParams.maxbins)&&"timeunit"||isBinning(bin)&&"bin";return fn?`${fn.toUpperCase()}(${field})`:field}(fieldDef);default:return function verbalTitleFormatter(fieldDef,config){var _a;const{field,bin,timeUnit,aggregate}=fieldDef;if("count"===aggregate)return config.countTitle;if(isBinning(bin))return`${field} (binned)`;if(timeUnit){const unit=null===(_a=normalizeTimeUnit(timeUnit))||void 0===_a?void 0:_a.unit;if(unit)return`${field} (${getTimeUnitParts(unit).join("-")})`}else if(aggregate)return isArgmaxDef(aggregate)?`${field} for max ${aggregate.argmax}`:isArgminDef(aggregate)?`${field} for min ${aggregate.argmin}`:`${titleCase(aggregate)} of ${field}`;return field}(fieldDef,config)}};let titleFormatter=defaultTitleFormatter;function setTitleFormatter(formatter){titleFormatter=formatter}function channeldef_title(fieldOrDatumDef,config,{allowDisabling,includeDefault=!0}){var _a,_b;const guideTitle=null===(_a=getGuide(fieldOrDatumDef))||void 0===_a?void 0:_a.title;if(!isFieldDef(fieldOrDatumDef))return null!=guideTitle?guideTitle:fieldOrDatumDef.title;const fieldDef=fieldOrDatumDef,def=includeDefault?defaultTitle(fieldDef,config):void 0;return allowDisabling?getFirstDefined(guideTitle,fieldDef.title,def):null!==(_b=null!=guideTitle?guideTitle:fieldDef.title)&&void 0!==_b?_b:def}function getGuide(fieldDef){return isPositionFieldOrDatumDef(fieldDef)&&fieldDef.axis?fieldDef.axis:isMarkPropFieldOrDatumDef(fieldDef)&&fieldDef.legend?fieldDef.legend:isFacetFieldDef(fieldDef)&&fieldDef.header?fieldDef.header:void 0}function defaultTitle(fieldDef,config){return titleFormatter(fieldDef,config)}function getFormatMixins(fieldDef){var _a;if(isStringFieldOrDatumDef(fieldDef)){const{format,formatType}=fieldDef;return{format,formatType}}{const guide=null!==(_a=getGuide(fieldDef))&&void 0!==_a?_a:{},{format,formatType}=guide;return{format,formatType}}}function getFieldDef(channelDef){return isFieldDef(channelDef)?channelDef:hasConditionalFieldDef(channelDef)?channelDef.condition:void 0}function getFieldOrDatumDef(channelDef){return isFieldOrDatumDef(channelDef)?channelDef:hasConditionalFieldOrDatumDef(channelDef)?channelDef.condition:void 0}function initChannelDef(channelDef,channel,config,opt={}){if(isString(channelDef)||isNumber(channelDef)||isBoolean(channelDef)){return log_warn(function primitiveChannelDef(channel,type,value){return`Channel ${channel} is a ${type}. Converted to {value: ${stringify(value)}}.`}(channel,isString(channelDef)?"string":isNumber(channelDef)?"number":"boolean",channelDef)),{value:channelDef}}return isFieldOrDatumDef(channelDef)?initFieldOrDatumDef(channelDef,channel,config,opt):hasConditionalFieldOrDatumDef(channelDef)?Object.assign(Object.assign({},channelDef),{condition:initFieldOrDatumDef(channelDef.condition,channel,config,opt)}):channelDef}function initFieldOrDatumDef(fd,channel,config,opt){if(isStringFieldOrDatumDef(fd)){const{format,formatType}=fd,rest=channeldef_rest(fd,["format","formatType"]);if(isCustomFormatType(formatType)&&!config.customFormatTypes)return log_warn(customFormatTypeNotAllowed(channel)),initFieldOrDatumDef(rest,channel,config,opt)}else{const guideType=isPositionFieldOrDatumDef(fd)?"axis":isMarkPropFieldOrDatumDef(fd)?"legend":isFacetFieldDef(fd)?"header":null;if(guideType&&fd[guideType]){const _a=fd[guideType],{format,formatType}=_a,newGuide=channeldef_rest(_a,["format","formatType"]);if(isCustomFormatType(formatType)&&!config.customFormatTypes)return log_warn(customFormatTypeNotAllowed(channel)),initFieldOrDatumDef(Object.assign(Object.assign({},fd),{[guideType]:newGuide}),channel,config,opt)}}return isFieldDef(fd)?initFieldDef(fd,channel,opt):function initDatumDef(datumDef){let type=datumDef.type;if(type)return datumDef;const{datum}=datumDef;return type=isNumber(datum)?"quantitative":isString(datum)?"nominal":isDateTime(datum)?"temporal":void 0,Object.assign(Object.assign({},datumDef),{type})}(fd)}function initFieldDef(fd,channel,{compositeMark=!1}={}){const{aggregate,timeUnit,bin,field}=fd,fieldDef=Object.assign({},fd);if(compositeMark||!aggregate||isAggregateOp(aggregate)||isArgmaxDef(aggregate)||isArgminDef(aggregate)||(log_warn(function invalidAggregate(aggregate){return`Invalid aggregation operator "${aggregate}".`}(aggregate)),delete fieldDef.aggregate),timeUnit&&(fieldDef.timeUnit=normalizeTimeUnit(timeUnit)),field&&(fieldDef.field=`${field}`),isBinning(bin)&&(fieldDef.bin=normalizeBin(bin,channel)),isBinned(bin)&&!isXorY(channel)&&log_warn(function channelShouldNotBeUsedForBinned(channel){return`Channel ${channel} should not be used with "binned" bin.`}(channel)),isTypedFieldDef(fieldDef)){const{type}=fieldDef,fullType=function getFullName(type){if(type)switch(type=type.toLowerCase()){case"q":case QUANTITATIVE:return"quantitative";case"t":case TEMPORAL:return"temporal";case"o":case ORDINAL:return"ordinal";case"n":case NOMINAL:return"nominal";case GEOJSON:return"geojson"}}(type);type!==fullType&&(fieldDef.type=fullType),"quantitative"!==type&&isCountingAggregateOp(aggregate)&&(log_warn(function invalidFieldTypeForCountAggregate(type,aggregate){return`Invalid field type "${type}" for aggregate: "${aggregate}", using "quantitative" instead.`}(type,aggregate)),fieldDef.type="quantitative")}else if(!isSecondaryRangeChannel(channel)){const newType=function defaultType(fieldDef,channel){var _a;switch(channel){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(isSortableFieldDef(fieldDef)&&isArray(fieldDef.sort))return"ordinal";const{aggregate,bin,timeUnit}=fieldDef;if(timeUnit)return"temporal";if(bin||aggregate&&!isArgmaxDef(aggregate)&&!isArgminDef(aggregate))return"quantitative";if(isScaleFieldDef(fieldDef)&&(null===(_a=fieldDef.scale)||void 0===_a?void 0:_a.type))switch(SCALE_CATEGORY_INDEX[fieldDef.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(fieldDef,channel);fieldDef.type=newType}if(isTypedFieldDef(fieldDef)){const{compatible,warning}=function channelCompatibility(fieldDef,channel){const type=fieldDef.type;if("geojson"===type&&"shape"!==channel)return{compatible:!1,warning:`Channel ${channel} should not be used with a geojson data.`};switch(channel){case ROW:case COLUMN:case"facet":return channeldef_isDiscrete(fieldDef)?COMPATIBLE:{compatible:!1,warning:channelShouldBeDiscrete(channel)};case"x":case"y":case XOFFSET:case"yOffset":case COLOR:case FILL:case STROKE:case TEXT:case"detail":case KEY:case"tooltip":case"href":case"url":case ANGLE:case THETA:case RADIUS:case"description":return COMPATIBLE;case LONGITUDE:case LONGITUDE2:case LATITUDE:case LATITUDE2:return type!==QUANTITATIVE?{compatible:!1,warning:`Channel ${channel} should be used with a quantitative field only, not ${fieldDef.type} field.`}:COMPATIBLE;case OPACITY:case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case THETA2:case RADIUS2:case"x2":case"y2":return"nominal"!==type||fieldDef.sort?COMPATIBLE:{compatible:!1,warning:`Channel ${channel} should not be used with an unsorted discrete field.`};case SHAPE:case"strokeDash":return channeldef_isDiscrete(fieldDef)||function channeldef_isDiscretizing(def){var _a;return isScaleFieldDef(def)&&isContinuousToDiscrete(null===(_a=def.scale)||void 0===_a?void 0:_a.type)}(fieldDef)?COMPATIBLE:{compatible:!1,warning:channelShouldBeDiscreteOrDiscretizing(channel)};case"order":return"nominal"!==fieldDef.type||"sort"in fieldDef?COMPATIBLE:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(fieldDef,channel)||{};!1===compatible&&log_warn(warning)}if(isSortableFieldDef(fieldDef)&&isString(fieldDef.sort)){const{sort}=fieldDef;if(isSortByChannel(sort))return Object.assign(Object.assign({},fieldDef),{sort:{encoding:sort}});const sub=sort.substr(1);if("-"===sort.charAt(0)&&isSortByChannel(sub))return Object.assign(Object.assign({},fieldDef),{sort:{encoding:sub,order:"descending"}})}if(isFacetFieldDef(fieldDef)){const{header}=fieldDef;if(header){const{orient}=header,rest=channeldef_rest(header,["orient"]);if(orient)return Object.assign(Object.assign({},fieldDef),{header:Object.assign(Object.assign({},rest),{labelOrient:header.labelOrient||orient,titleOrient:header.titleOrient||orient})})}}return fieldDef}function normalizeBin(bin,channel){return isBoolean(bin)?{maxbins:autoMaxBins(channel)}:"binned"===bin?{binned:!0}:bin.maxbins||bin.step?bin:Object.assign(Object.assign({},bin),{maxbins:autoMaxBins(channel)})}const COMPATIBLE={compatible:!0};function isFieldOrDatumDefForTimeFormat(fieldOrDatumDef){const{formatType}=getFormatMixins(fieldOrDatumDef);return"time"===formatType||!formatType&&function isTimeFieldDef(def){return def&&("temporal"===def.type||isFieldDef(def)&&!!def.timeUnit)}(fieldOrDatumDef)}function valueExpr(v,{timeUnit,type,wrapTime,undefinedIfExprNotRequired}){var _a;const unit=timeUnit&&(null===(_a=normalizeTimeUnit(timeUnit))||void 0===_a?void 0:_a.unit);let expr,isTime=unit||"temporal"===type;return isExprRef(v)?expr=v.expr:isSignalRef(v)?expr=v.signal:isDateTime(v)?(isTime=!0,expr=dateTimeToExpr(v)):(isString(v)||isNumber(v))&&isTime&&(expr=`datetime(${stringify(v)})`,function isLocalSingleTimeUnit(timeUnit){return!!LOCAL_SINGLE_TIMEUNIT_INDEX[timeUnit]}(unit)&&(isNumber(v)&&v<1e4||isString(v)&&isNaN(Date.parse(v)))&&(expr=dateTimeToExpr({[unit]:v}))),expr?wrapTime&&isTime?`time(${expr})`:expr:undefinedIfExprNotRequired?void 0:stringify(v)}function valueArray(fieldOrDatumDef,values){const{type}=fieldOrDatumDef;return values.map((v=>{const expr=valueExpr(v,{timeUnit:isFieldDef(fieldOrDatumDef)?fieldOrDatumDef.timeUnit:void 0,type,undefinedIfExprNotRequired:!0});return void 0!==expr?{signal:expr}:v}))}function binRequiresRange(fieldDef,channel){return isBinning(fieldDef.bin)?isScaleChannel(channel)&&["ordinal","nominal"].includes(fieldDef.type):(console.warn("Only call this method for binned field defs."),!1)}const CONDITIONAL_AXIS_PROP_INDEX={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function isConditionalAxisValue(v){return null==v?void 0:v.condition}const AXIS_PARTS=["domain","grid","labels","ticks","title"],AXIS_PROPERTY_TYPE={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},COMMON_AXIS_PROPERTIES_INDEX={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},AXIS_PROPERTIES_INDEX=Object.assign(Object.assign({},COMMON_AXIS_PROPERTIES_INDEX),{style:1,labelExpr:1,encoding:1});function isAxisProperty(prop){return!!AXIS_PROPERTIES_INDEX[prop]}util_keys(AXIS_PROPERTIES_INDEX);const AXIS_CONFIGS=util_keys({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function isUnitSpec(spec){return"mark"in spec}class CompositeMarkNormalizer{constructor(name,run){this.name=name,this.run=run}hasMatchingType(spec){return!!isUnitSpec(spec)&&function getMarkType(m){return isMarkDef(m)?m.type:m}(spec.mark)===this.name}}var encoding_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function channelHasField(encoding,channel){const channelDef=encoding&&encoding[channel];return!!channelDef&&(isArray(channelDef)?some(channelDef,(fieldDef=>!!fieldDef.field)):isFieldDef(channelDef)||hasConditionalFieldDef(channelDef))}function channelHasFieldOrDatum(encoding,channel){const channelDef=encoding&&encoding[channel];return!!channelDef&&(isArray(channelDef)?some(channelDef,(fieldDef=>!!fieldDef.field)):isFieldDef(channelDef)||isDatumDef(channelDef)||hasConditionalFieldOrDatumDef(channelDef))}function channelHasNestedOffsetScale(encoding,channel){if(isXorY(channel)){const fieldDef=encoding[channel];if((isFieldDef(fieldDef)||isDatumDef(fieldDef))&&type_isDiscrete(fieldDef.type)){return channelHasFieldOrDatum(encoding,getOffsetScaleChannel(channel))}}return!1}function isAggregate(encoding){return some(CHANNELS,(channel=>{if(channelHasField(encoding,channel)){const channelDef=encoding[channel];if(isArray(channelDef))return some(channelDef,(fieldDef=>!!fieldDef.aggregate));{const fieldDef=getFieldDef(channelDef);return fieldDef&&!!fieldDef.aggregate}}return!1}))}function extractTransformsFromEncoding(oldEncoding,config){const groupby=[],bins=[],timeUnits=[],aggregate=[],encoding={};return forEach(oldEncoding,((channelDef,channel)=>{if(isFieldDef(channelDef)){const{field,aggregate:aggOp,bin,timeUnit}=channelDef,remaining=encoding_rest(channelDef,["field","aggregate","bin","timeUnit"]);if(aggOp||timeUnit||bin){const guide=getGuide(channelDef),isTitleDefined=null==guide?void 0:guide.title;let newField=vgField(channelDef,{forAs:!0});const newFieldDef=Object.assign(Object.assign(Object.assign({},isTitleDefined?[]:{title:channeldef_title(channelDef,config,{allowDisabling:!0})}),remaining),{field:newField});if(aggOp){let op;if(isArgmaxDef(aggOp)?(op="argmax",newField=vgField({op:"argmax",field:aggOp.argmax},{forAs:!0}),newFieldDef.field=`${newField}.${field}`):isArgminDef(aggOp)?(op="argmin",newField=vgField({op:"argmin",field:aggOp.argmin},{forAs:!0}),newFieldDef.field=`${newField}.${field}`):"boxplot"!==aggOp&&"errorbar"!==aggOp&&"errorband"!==aggOp&&(op=aggOp),op){const aggregateEntry={op,as:newField};field&&(aggregateEntry.field=field),aggregate.push(aggregateEntry)}}else if(groupby.push(newField),isTypedFieldDef(channelDef)&&isBinning(bin)){if(bins.push({bin,field,as:newField}),groupby.push(vgField(channelDef,{binSuffix:"end"})),binRequiresRange(channelDef,channel)&&groupby.push(vgField(channelDef,{binSuffix:"range"})),isXorY(channel)){const secondaryChannel={field:`${newField}_end`};encoding[`${channel}2`]=secondaryChannel}newFieldDef.bin="binned",isSecondaryRangeChannel(channel)||(newFieldDef.type=QUANTITATIVE)}else if(timeUnit){timeUnits.push({timeUnit,field,as:newField});const formatType=isTypedFieldDef(channelDef)&&channelDef.type!==TEMPORAL&&"time";formatType&&(channel===TEXT||"tooltip"===channel?newFieldDef.formatType=formatType:!function isNonPositionScaleChannel(channel){return!!NONPOSITION_CHANNEL_INDEX[channel]}(channel)?isXorY(channel)&&(newFieldDef.axis=Object.assign({formatType},newFieldDef.axis)):newFieldDef.legend=Object.assign({formatType},newFieldDef.legend))}encoding[channel]=newFieldDef}else groupby.push(field),encoding[channel]=oldEncoding[channel]}else encoding[channel]=oldEncoding[channel]})),{bins,timeUnits,aggregate,groupby,encoding}}function markChannelCompatible(encoding,channel,mark){const markSupported=supportMark(channel,mark);if(!markSupported)return!1;if("binned"===markSupported){const primaryFieldDef=encoding["x2"===channel?"x":"y"];return!!(isFieldDef(primaryFieldDef)&&isFieldDef(encoding[channel])&&isBinned(primaryFieldDef.bin))}return!0}function normalizeEncoding(encoding,config){const normalizedEncoding={};for(const channel of util_keys(encoding)){const newChannelDef=initChannelDef(encoding[channel],channel,config,{compositeMark:!0});normalizedEncoding[channel]=newChannelDef}return normalizedEncoding}function forEach(mapping,f,thisArg){if(mapping)for(const channel of util_keys(mapping)){const el=mapping[channel];if(isArray(el))for(const channelDef of el)f.call(thisArg,channelDef,channel);else f.call(thisArg,el,channel)}}function pathGroupingFields(mark,encoding){return util_keys(encoding).reduce(((details,channel)=>{switch(channel){case"x":case"y":case"href":case"description":case"url":case"x2":case"y2":case XOFFSET:case"yOffset":case THETA:case THETA2:case RADIUS:case RADIUS2:case LATITUDE:case LONGITUDE:case LATITUDE2:case LONGITUDE2:case TEXT:case SHAPE:case ANGLE:case"tooltip":return details;case"order":if("line"===mark||"trail"===mark)return details;case"detail":case KEY:{const channelDef=encoding[channel];if(isArray(channelDef)||isFieldDef(channelDef))for(const fieldDef of array(channelDef))fieldDef.aggregate||details.push(vgField(fieldDef,{}));return details}case"size":if("trail"===mark)return details;case COLOR:case FILL:case STROKE:case OPACITY:case"fillOpacity":case"strokeOpacity":case"strokeDash":case"strokeWidth":{const fieldDef=getFieldDef(encoding[channel]);return fieldDef&&!fieldDef.aggregate&&details.push(vgField(fieldDef,{})),details}}}),[])}var compositemark_common_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function getCompositeMarkTooltip(tooltipSummary,continuousAxisChannelDef,encodingWithoutContinuousAxis,withFieldName=!0){if("tooltip"in encodingWithoutContinuousAxis)return{tooltip:encodingWithoutContinuousAxis.tooltip};const fiveSummaryTooltip=tooltipSummary.map((({fieldPrefix,titlePrefix})=>{const mainTitle=withFieldName?` of ${getTitle(continuousAxisChannelDef)}`:"";return{field:fieldPrefix+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type,title:isSignalRef(titlePrefix)?{signal:`${titlePrefix}"${escape(mainTitle)}"`}:titlePrefix+mainTitle}})),tooltipFieldDefs=function fieldDefs(encoding){const arr=[];for(const channel of util_keys(encoding))if(channelHasField(encoding,channel)){const channelDefArray=array(encoding[channel]);for(const def of channelDefArray)isFieldDef(def)?arr.push(def):hasConditionalFieldDef(def)&&arr.push(def.condition)}return arr}(encodingWithoutContinuousAxis).map(toStringFieldDef);return{tooltip:[...fiveSummaryTooltip,...unique(tooltipFieldDefs,hash)]}}function getTitle(continuousAxisChannelDef){const{title,field}=continuousAxisChannelDef;return getFirstDefined(title,field)}function makeCompositeAggregatePartFactory(compositeMarkDef,continuousAxis,continuousAxisChannelDef,sharedEncoding,compositeMarkConfig){const{scale,axis}=continuousAxisChannelDef;return({partName,mark,positionPrefix,endPositionPrefix,extraEncoding={}})=>{const title=getTitle(continuousAxisChannelDef);return partLayerMixins(compositeMarkDef,partName,compositeMarkConfig,{mark,encoding:Object.assign(Object.assign(Object.assign({[continuousAxis]:Object.assign(Object.assign(Object.assign({field:`${positionPrefix}_${continuousAxisChannelDef.field}`,type:continuousAxisChannelDef.type},void 0!==title?{title}:{}),void 0!==scale?{scale}:{}),void 0!==axis?{axis}:{})},isString(endPositionPrefix)?{[`${continuousAxis}2`]:{field:`${endPositionPrefix}_${continuousAxisChannelDef.field}`}}:{}),sharedEncoding),extraEncoding)})}}function partLayerMixins(markDef,part,compositeMarkConfig,partBaseSpec){const{clip,color,opacity}=markDef,mark=markDef.type;return markDef[part]||void 0===markDef[part]&&compositeMarkConfig[part]?[Object.assign(Object.assign({},partBaseSpec),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},compositeMarkConfig[part]),clip?{clip}:{}),color?{color}:{}),opacity?{opacity}:{}),isMarkDef(partBaseSpec.mark)?partBaseSpec.mark:{type:partBaseSpec.mark}),{style:`${mark}-${String(part)}`}),isBoolean(markDef[part])?{}:markDef[part])})]:[]}function compositeMarkContinuousAxis(spec,orient,compositeMark){const{encoding}=spec,continuousAxis="vertical"===orient?"y":"x",continuousAxisChannelDef=encoding[continuousAxis],continuousAxisChannelDef2=encoding[`${continuousAxis}2`],continuousAxisChannelDefError=encoding[`${continuousAxis}Error`],continuousAxisChannelDefError2=encoding[`${continuousAxis}Error2`];return{continuousAxisChannelDef:filterAggregateFromChannelDef(continuousAxisChannelDef,compositeMark),continuousAxisChannelDef2:filterAggregateFromChannelDef(continuousAxisChannelDef2,compositeMark),continuousAxisChannelDefError:filterAggregateFromChannelDef(continuousAxisChannelDefError,compositeMark),continuousAxisChannelDefError2:filterAggregateFromChannelDef(continuousAxisChannelDefError2,compositeMark),continuousAxis}}function filterAggregateFromChannelDef(continuousAxisChannelDef,compositeMark){if(null==continuousAxisChannelDef?void 0:continuousAxisChannelDef.aggregate){const{aggregate}=continuousAxisChannelDef,continuousAxisWithoutAggregate=compositemark_common_rest(continuousAxisChannelDef,["aggregate"]);return aggregate!==compositeMark&&log_warn(function errorBarContinuousAxisHasCustomizedAggregate(aggregate,compositeMark){return`Continuous axis should not have customized aggregation function ${aggregate}; ${compositeMark} already agregates the axis.`}(aggregate,compositeMark)),continuousAxisWithoutAggregate}return continuousAxisChannelDef}function compositeMarkOrient(spec,compositeMark){const{mark,encoding}=spec,{x,y}=encoding;if(isMarkDef(mark)&&mark.orient)return mark.orient;if(isContinuousFieldOrDatumDef(x)){if(isContinuousFieldOrDatumDef(y)){const xAggregate=isFieldDef(x)&&x.aggregate,yAggregate=isFieldDef(y)&&y.aggregate;if(xAggregate||yAggregate!==compositeMark){if(yAggregate||xAggregate!==compositeMark){if(xAggregate===compositeMark&&yAggregate===compositeMark)throw new Error("Both x and y cannot have aggregate");return isFieldOrDatumDefForTimeFormat(y)&&!isFieldOrDatumDefForTimeFormat(x)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(isContinuousFieldOrDatumDef(y))return"vertical";throw new Error(`Need a valid continuous axis for ${compositeMark}s`)}var boxplot_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const boxPlotNormalizer=new CompositeMarkNormalizer("boxplot",normalizeBoxPlot);function getBoxPlotType(extent){return isNumber(extent)?"tukey":extent}function normalizeBoxPlot(spec,{config}){var _a,_b;spec=Object.assign(Object.assign({},spec),{encoding:normalizeEncoding(spec.encoding,config)});const{mark,encoding:_encoding,params,projection:_p}=spec,outerSpec=boxplot_rest(spec,["mark","encoding","params","projection"]),markDef=isMarkDef(mark)?mark:{type:mark};params&&log_warn(selectionNotSupported("boxplot"));const extent=null!==(_a=markDef.extent)&&void 0!==_a?_a:config.boxplot.extent,sizeValue=getMarkPropOrConfig("size",markDef,config),invalid=markDef.invalid,boxPlotType=getBoxPlotType(extent),{bins,timeUnits,transform,continuousAxisChannelDef,continuousAxis,groupby,aggregate,encodingWithoutContinuousAxis,ticksOrient,boxOrient,customTooltipWithoutAggregatedField}=function boxParams(spec,extent,config){const orient=compositeMarkOrient(spec,"boxplot"),{continuousAxisChannelDef,continuousAxis}=compositeMarkContinuousAxis(spec,orient,"boxplot"),continuousFieldName=continuousAxisChannelDef.field,boxPlotType=getBoxPlotType(extent),boxplotSpecificAggregate=[...boxParamsQuartiles(continuousFieldName),{op:"median",field:continuousFieldName,as:`mid_box_${continuousFieldName}`},{op:"min",field:continuousFieldName,as:("min-max"===boxPlotType?"lower_whisker_":"min_")+continuousFieldName},{op:"max",field:continuousFieldName,as:("min-max"===boxPlotType?"upper_whisker_":"max_")+continuousFieldName}],postAggregateCalculates="min-max"===boxPlotType||"tukey"===boxPlotType?[]:[{calculate:`datum["upper_box_${continuousFieldName}"] - datum["lower_box_${continuousFieldName}"]`,as:`iqr_${continuousFieldName}`},{calculate:`min(datum["upper_box_${continuousFieldName}"] + datum["iqr_${continuousFieldName}"] * ${extent}, datum["max_${continuousFieldName}"])`,as:`upper_whisker_${continuousFieldName}`},{calculate:`max(datum["lower_box_${continuousFieldName}"] - datum["iqr_${continuousFieldName}"] * ${extent}, datum["min_${continuousFieldName}"])`,as:`lower_whisker_${continuousFieldName}`}],_a=spec.encoding,_b=continuousAxis,oldEncodingWithoutContinuousAxis=(_a[_b],boxplot_rest(_a,["symbol"==typeof _b?_b:_b+""])),{customTooltipWithoutAggregatedField,filteredEncoding}=function filterTooltipWithAggregatedField(oldEncoding){const{tooltip}=oldEncoding,filteredEncoding=compositemark_common_rest(oldEncoding,["tooltip"]);if(!tooltip)return{filteredEncoding};let customTooltipWithAggregatedField,customTooltipWithoutAggregatedField;if(isArray(tooltip)){for(const t of tooltip)t.aggregate?(customTooltipWithAggregatedField||(customTooltipWithAggregatedField=[]),customTooltipWithAggregatedField.push(t)):(customTooltipWithoutAggregatedField||(customTooltipWithoutAggregatedField=[]),customTooltipWithoutAggregatedField.push(t));customTooltipWithAggregatedField&&(filteredEncoding.tooltip=customTooltipWithAggregatedField)}else tooltip.aggregate?filteredEncoding.tooltip=tooltip:customTooltipWithoutAggregatedField=tooltip;return isArray(customTooltipWithoutAggregatedField)&&1===customTooltipWithoutAggregatedField.length&&(customTooltipWithoutAggregatedField=customTooltipWithoutAggregatedField[0]),{customTooltipWithoutAggregatedField,filteredEncoding}}(oldEncodingWithoutContinuousAxis),{bins,timeUnits,aggregate,groupby,encoding:encodingWithoutContinuousAxis}=extractTransformsFromEncoding(filteredEncoding,config),ticksOrient="vertical"===orient?"horizontal":"vertical",boxOrient=orient,transform=[...bins,...timeUnits,{aggregate:[...aggregate,...boxplotSpecificAggregate],groupby},...postAggregateCalculates];return{bins,timeUnits,transform,groupby,aggregate,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,ticksOrient,boxOrient,customTooltipWithoutAggregatedField}}(spec,extent,config),{color,size}=encodingWithoutContinuousAxis,encodingWithoutSizeColorAndContinuousAxis=boxplot_rest(encodingWithoutContinuousAxis,["color","size"]),makeBoxPlotPart=sharedEncoding=>makeCompositeAggregatePartFactory(markDef,continuousAxis,continuousAxisChannelDef,sharedEncoding,config.boxplot),makeBoxPlotExtent=makeBoxPlotPart(encodingWithoutSizeColorAndContinuousAxis),makeBoxPlotBox=makeBoxPlotPart(encodingWithoutContinuousAxis),makeBoxPlotMidTick=makeBoxPlotPart(Object.assign(Object.assign({},encodingWithoutSizeColorAndContinuousAxis),size?{size}:{})),fiveSummaryTooltipEncoding=getCompositeMarkTooltip([{fieldPrefix:"min-max"===boxPlotType?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===boxPlotType?"lower_whisker_":"min_",titlePrefix:"Min"}],continuousAxisChannelDef,encodingWithoutContinuousAxis),endTick={type:"tick",color:"black",opacity:1,orient:ticksOrient,invalid,aria:!1},whiskerTooltipEncoding="min-max"===boxPlotType?fiveSummaryTooltipEncoding:getCompositeMarkTooltip([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],continuousAxisChannelDef,encodingWithoutContinuousAxis),whiskerLayers=[...makeBoxPlotExtent({partName:"rule",mark:{type:"rule",invalid,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:whiskerTooltipEncoding}),...makeBoxPlotExtent({partName:"rule",mark:{type:"rule",invalid,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:whiskerTooltipEncoding}),...makeBoxPlotExtent({partName:"ticks",mark:endTick,positionPrefix:"lower_whisker",extraEncoding:whiskerTooltipEncoding}),...makeBoxPlotExtent({partName:"ticks",mark:endTick,positionPrefix:"upper_whisker",extraEncoding:whiskerTooltipEncoding})],boxLayers=[..."tukey"!==boxPlotType?whiskerLayers:[],...makeBoxPlotBox({partName:"box",mark:Object.assign(Object.assign({type:"bar"},sizeValue?{size:sizeValue}:{}),{orient:boxOrient,invalid,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:fiveSummaryTooltipEncoding}),...makeBoxPlotMidTick({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid},isObject(config.boxplot.median)&&config.boxplot.median.color?{color:config.boxplot.median.color}:{}),sizeValue?{size:sizeValue}:{}),{orient:ticksOrient,aria:!1}),positionPrefix:"mid_box",extraEncoding:fiveSummaryTooltipEncoding})];if("min-max"===boxPlotType)return Object.assign(Object.assign({},outerSpec),{transform:(null!==(_b=outerSpec.transform)&&void 0!==_b?_b:[]).concat(transform),layer:boxLayers});const lowerBoxExpr=`datum["lower_box_${continuousAxisChannelDef.field}"]`,upperBoxExpr=`datum["upper_box_${continuousAxisChannelDef.field}"]`,iqrExpr=`(${upperBoxExpr} - ${lowerBoxExpr})`,lowerWhiskerExpr=`${lowerBoxExpr} - ${extent} * ${iqrExpr}`,upperWhiskerExpr=`${upperBoxExpr} + ${extent} * ${iqrExpr}`,fieldExpr=`datum["${continuousAxisChannelDef.field}"]`,joinaggregateTransform={joinaggregate:boxParamsQuartiles(continuousAxisChannelDef.field),groupby},filteredWhiskerSpec={transform:[{filter:`(${lowerWhiskerExpr} <= ${fieldExpr}) && (${fieldExpr} <= ${upperWhiskerExpr})`},{aggregate:[{op:"min",field:continuousAxisChannelDef.field,as:`lower_whisker_${continuousAxisChannelDef.field}`},{op:"max",field:continuousAxisChannelDef.field,as:`upper_whisker_${continuousAxisChannelDef.field}`},{op:"min",field:`lower_box_${continuousAxisChannelDef.field}`,as:`lower_box_${continuousAxisChannelDef.field}`},{op:"max",field:`upper_box_${continuousAxisChannelDef.field}`,as:`upper_box_${continuousAxisChannelDef.field}`},...aggregate],groupby}],layer:whiskerLayers},{tooltip}=encodingWithoutSizeColorAndContinuousAxis,encodingWithoutSizeColorContinuousAxisAndTooltip=boxplot_rest(encodingWithoutSizeColorAndContinuousAxis,["tooltip"]),{scale,axis}=continuousAxisChannelDef,title=getTitle(continuousAxisChannelDef),axisWithoutTitle=omit(axis,["title"]),outlierLayersMixins=partLayerMixins(markDef,"outliers",config.boxplot,{transform:[{filter:`(${fieldExpr} < ${lowerWhiskerExpr}) || (${fieldExpr} > ${upperWhiskerExpr})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[continuousAxis]:Object.assign(Object.assign(Object.assign({field:continuousAxisChannelDef.field,type:continuousAxisChannelDef.type},void 0!==title?{title}:{}),void 0!==scale?{scale}:{}),isEmpty(axisWithoutTitle)?{}:{axis:axisWithoutTitle})},encodingWithoutSizeColorContinuousAxisAndTooltip),color?{color}:{}),customTooltipWithoutAggregatedField?{tooltip:customTooltipWithoutAggregatedField}:{})})[0];let filteredLayersMixins;const filteredLayersMixinsTransforms=[...bins,...timeUnits,joinaggregateTransform];return outlierLayersMixins?filteredLayersMixins={transform:filteredLayersMixinsTransforms,layer:[outlierLayersMixins,filteredWhiskerSpec]}:(filteredLayersMixins=filteredWhiskerSpec,filteredLayersMixins.transform.unshift(...filteredLayersMixinsTransforms)),Object.assign(Object.assign({},outerSpec),{layer:[filteredLayersMixins,{transform,layer:boxLayers}]})}function boxParamsQuartiles(continousAxisField){return[{op:"q1",field:continousAxisField,as:`lower_box_${continousAxisField}`},{op:"q3",field:continousAxisField,as:`upper_box_${continousAxisField}`}]}var errorbar_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const errorBarNormalizer=new CompositeMarkNormalizer("errorbar",normalizeErrorBar);function normalizeErrorBar(spec,{config}){spec=Object.assign(Object.assign({},spec),{encoding:normalizeEncoding(spec.encoding,config)});const{transform,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,ticksOrient,markDef,outerSpec,tooltipEncoding}=errorBarParams(spec,"errorbar",config);delete encodingWithoutContinuousAxis.size;const makeErrorBarPart=makeCompositeAggregatePartFactory(markDef,continuousAxis,continuousAxisChannelDef,encodingWithoutContinuousAxis,config.errorbar),thickness=markDef.thickness,size=markDef.size,tick=Object.assign(Object.assign({type:"tick",orient:ticksOrient,aria:!1},void 0!==thickness?{thickness}:{}),void 0!==size?{size}:{}),layer=[...makeErrorBarPart({partName:"ticks",mark:tick,positionPrefix:"lower",extraEncoding:tooltipEncoding}),...makeErrorBarPart({partName:"ticks",mark:tick,positionPrefix:"upper",extraEncoding:tooltipEncoding}),...makeErrorBarPart({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==thickness?{size:thickness}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:tooltipEncoding})];return Object.assign(Object.assign(Object.assign({},outerSpec),{transform}),layer.length>1?{layer}:Object.assign({},layer[0]))}function errorBarOrientAndInputType(spec,compositeMark){const{encoding}=spec;if(function errorBarIsInputTypeRaw(encoding){return(isFieldOrDatumDef(encoding.x)||isFieldOrDatumDef(encoding.y))&&!isFieldOrDatumDef(encoding.x2)&&!isFieldOrDatumDef(encoding.y2)&&!isFieldOrDatumDef(encoding.xError)&&!isFieldOrDatumDef(encoding.xError2)&&!isFieldOrDatumDef(encoding.yError)&&!isFieldOrDatumDef(encoding.yError2)}(encoding))return{orient:compositeMarkOrient(spec,compositeMark),inputType:"raw"};const isTypeAggregatedUpperLower=function errorBarIsInputTypeAggregatedUpperLower(encoding){return isFieldOrDatumDef(encoding.x2)||isFieldOrDatumDef(encoding.y2)}(encoding),isTypeAggregatedError=function errorBarIsInputTypeAggregatedError(encoding){return isFieldOrDatumDef(encoding.xError)||isFieldOrDatumDef(encoding.xError2)||isFieldOrDatumDef(encoding.yError)||isFieldOrDatumDef(encoding.yError2)}(encoding),x=encoding.x,y=encoding.y;if(isTypeAggregatedUpperLower){if(isTypeAggregatedError)throw new Error(`${compositeMark} cannot be both type aggregated-upper-lower and aggregated-error`);const x2=encoding.x2,y2=encoding.y2;if(isFieldOrDatumDef(x2)&&isFieldOrDatumDef(y2))throw new Error(`${compositeMark} cannot have both x2 and y2`);if(isFieldOrDatumDef(x2)){if(isContinuousFieldOrDatumDef(x))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${compositeMark}`)}if(isFieldOrDatumDef(y2)){if(isContinuousFieldOrDatumDef(y))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${compositeMark}`)}throw new Error("No ranged axis")}{const xError=encoding.xError,xError2=encoding.xError2,yError=encoding.yError,yError2=encoding.yError2;if(isFieldOrDatumDef(xError2)&&!isFieldOrDatumDef(xError))throw new Error(`${compositeMark} cannot have xError2 without xError`);if(isFieldOrDatumDef(yError2)&&!isFieldOrDatumDef(yError))throw new Error(`${compositeMark} cannot have yError2 without yError`);if(isFieldOrDatumDef(xError)&&isFieldOrDatumDef(yError))throw new Error(`${compositeMark} cannot have both xError and yError with both are quantiative`);if(isFieldOrDatumDef(xError)){if(isContinuousFieldOrDatumDef(x))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(isFieldOrDatumDef(yError)){if(isContinuousFieldOrDatumDef(y))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function errorBarParams(spec,compositeMark,config){var _a;const{mark,encoding,params,projection:_p}=spec,outerSpec=errorbar_rest(spec,["mark","encoding","params","projection"]),markDef=isMarkDef(mark)?mark:{type:mark};params&&log_warn(selectionNotSupported(compositeMark));const{orient,inputType}=errorBarOrientAndInputType(spec,compositeMark),{continuousAxisChannelDef,continuousAxisChannelDef2,continuousAxisChannelDefError,continuousAxisChannelDefError2,continuousAxis}=compositeMarkContinuousAxis(spec,orient,compositeMark),{errorBarSpecificAggregate,postAggregateCalculates,tooltipSummary,tooltipTitleWithFieldName}=function errorBarAggregationAndCalculation(markDef,continuousAxisChannelDef,continuousAxisChannelDef2,continuousAxisChannelDefError,continuousAxisChannelDefError2,inputType,compositeMark,config){let errorBarSpecificAggregate=[],postAggregateCalculates=[];const continuousFieldName=continuousAxisChannelDef.field;let tooltipSummary,tooltipTitleWithFieldName=!1;if("raw"===inputType){const center=markDef.center?markDef.center:markDef.extent?"iqr"===markDef.extent?"median":"mean":config.errorbar.center,extent=markDef.extent?markDef.extent:"mean"===center?"stderr":"iqr";if("median"===center!=("iqr"===extent)&&log_warn(function errorBarCenterIsUsedWithWrongExtent(center,extent,mark){return`${center} is not usually used with ${extent} for ${mark}.`}(center,extent,compositeMark)),"stderr"===extent||"stdev"===extent)errorBarSpecificAggregate=[{op:extent,field:continuousFieldName,as:`extent_${continuousFieldName}`},{op:center,field:continuousFieldName,as:`center_${continuousFieldName}`}],postAggregateCalculates=[{calculate:`datum["center_${continuousFieldName}"] + datum["extent_${continuousFieldName}"]`,as:`upper_${continuousFieldName}`},{calculate:`datum["center_${continuousFieldName}"] - datum["extent_${continuousFieldName}"]`,as:`lower_${continuousFieldName}`}],tooltipSummary=[{fieldPrefix:"center_",titlePrefix:titleCase(center)},{fieldPrefix:"upper_",titlePrefix:getTitlePrefix(center,extent,"+")},{fieldPrefix:"lower_",titlePrefix:getTitlePrefix(center,extent,"-")}],tooltipTitleWithFieldName=!0;else{let centerOp,lowerExtentOp,upperExtentOp;"ci"===extent?(centerOp="mean",lowerExtentOp="ci0",upperExtentOp="ci1"):(centerOp="median",lowerExtentOp="q1",upperExtentOp="q3"),errorBarSpecificAggregate=[{op:lowerExtentOp,field:continuousFieldName,as:`lower_${continuousFieldName}`},{op:upperExtentOp,field:continuousFieldName,as:`upper_${continuousFieldName}`},{op:centerOp,field:continuousFieldName,as:`center_${continuousFieldName}`}],tooltipSummary=[{fieldPrefix:"upper_",titlePrefix:channeldef_title({field:continuousFieldName,aggregate:upperExtentOp,type:"quantitative"},config,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:channeldef_title({field:continuousFieldName,aggregate:lowerExtentOp,type:"quantitative"},config,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:channeldef_title({field:continuousFieldName,aggregate:centerOp,type:"quantitative"},config,{allowDisabling:!1})}]}}else{(markDef.center||markDef.extent)&&log_warn(function errorBarCenterAndExtentAreNotNeeded(center,extent){return`${extent?"extent ":""}${extent&&center?"and ":""}${center?"center ":""}${extent&&center?"are ":"is "}not needed when data are aggregated.`}(markDef.center,markDef.extent)),"aggregated-upper-lower"===inputType?(tooltipSummary=[],postAggregateCalculates=[{calculate:`datum["${continuousAxisChannelDef2.field}"]`,as:`upper_${continuousFieldName}`},{calculate:`datum["${continuousFieldName}"]`,as:`lower_${continuousFieldName}`}]):"aggregated-error"===inputType&&(tooltipSummary=[{fieldPrefix:"",titlePrefix:continuousFieldName}],postAggregateCalculates=[{calculate:`datum["${continuousFieldName}"] + datum["${continuousAxisChannelDefError.field}"]`,as:`upper_${continuousFieldName}`}],continuousAxisChannelDefError2?postAggregateCalculates.push({calculate:`datum["${continuousFieldName}"] + datum["${continuousAxisChannelDefError2.field}"]`,as:`lower_${continuousFieldName}`}):postAggregateCalculates.push({calculate:`datum["${continuousFieldName}"] - datum["${continuousAxisChannelDefError.field}"]`,as:`lower_${continuousFieldName}`}));for(const postAggregateCalculate of postAggregateCalculates)tooltipSummary.push({fieldPrefix:postAggregateCalculate.as.substring(0,6),titlePrefix:replaceAll(replaceAll(postAggregateCalculate.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates,errorBarSpecificAggregate,tooltipSummary,tooltipTitleWithFieldName}}(markDef,continuousAxisChannelDef,continuousAxisChannelDef2,continuousAxisChannelDefError,continuousAxisChannelDefError2,inputType,compositeMark,config),_b=encoding,_c=continuousAxis,_d=(_b[_c],"x"===continuousAxis?"x2":"y2"),_e=(_b[_d],"x"===continuousAxis?"xError":"yError"),_f=(_b[_e],"x"===continuousAxis?"xError2":"yError2"),oldEncodingWithoutContinuousAxis=(_b[_f],errorbar_rest(_b,["symbol"==typeof _c?_c:_c+"","symbol"==typeof _d?_d:_d+"","symbol"==typeof _e?_e:_e+"","symbol"==typeof _f?_f:_f+""])),{bins,timeUnits,aggregate:oldAggregate,groupby:oldGroupBy,encoding:encodingWithoutContinuousAxis}=extractTransformsFromEncoding(oldEncodingWithoutContinuousAxis,config),aggregate=[...oldAggregate,...errorBarSpecificAggregate],groupby="raw"!==inputType?[]:oldGroupBy,tooltipEncoding=getCompositeMarkTooltip(tooltipSummary,continuousAxisChannelDef,encodingWithoutContinuousAxis,tooltipTitleWithFieldName);return{transform:[...null!==(_a=outerSpec.transform)&&void 0!==_a?_a:[],...bins,...timeUnits,...0===aggregate.length?[]:[{aggregate,groupby}],...postAggregateCalculates],groupby,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,ticksOrient:"vertical"===orient?"horizontal":"vertical",markDef,outerSpec,tooltipEncoding}}function getTitlePrefix(center,extent,operation){return`${titleCase(center)} ${operation} ${extent}`}const errorBandNormalizer=new CompositeMarkNormalizer("errorband",normalizeErrorBand);function normalizeErrorBand(spec,{config}){spec=Object.assign(Object.assign({},spec),{encoding:normalizeEncoding(spec.encoding,config)});const{transform,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,markDef,outerSpec,tooltipEncoding}=errorBarParams(spec,"errorband",config),errorBandDef=markDef,makeErrorBandPart=makeCompositeAggregatePartFactory(errorBandDef,continuousAxis,continuousAxisChannelDef,encodingWithoutContinuousAxis,config.errorband),is2D=void 0!==spec.encoding.x&&void 0!==spec.encoding.y;let bandMark={type:is2D?"area":"rect"},bordersMark={type:is2D?"line":"rule"};const interpolate=Object.assign(Object.assign({},errorBandDef.interpolate?{interpolate:errorBandDef.interpolate}:{}),errorBandDef.tension&&errorBandDef.interpolate?{tension:errorBandDef.tension}:{});return is2D?(bandMark=Object.assign(Object.assign(Object.assign({},bandMark),interpolate),{ariaRoleDescription:"errorband"}),bordersMark=Object.assign(Object.assign(Object.assign({},bordersMark),interpolate),{aria:!1})):errorBandDef.interpolate?log_warn(errorBand1DNotSupport("interpolate")):errorBandDef.tension&&log_warn(errorBand1DNotSupport("tension")),Object.assign(Object.assign({},outerSpec),{transform,layer:[...makeErrorBandPart({partName:"band",mark:bandMark,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:tooltipEncoding}),...makeErrorBandPart({partName:"borders",mark:bordersMark,positionPrefix:"lower",extraEncoding:tooltipEncoding}),...makeErrorBandPart({partName:"borders",mark:bordersMark,positionPrefix:"upper",extraEncoding:tooltipEncoding})]})}const compositeMarkRegistry={};function compositemark_add(mark,run,parts){const normalizer=new CompositeMarkNormalizer(mark,run);compositeMarkRegistry[mark]={normalizer,parts}}compositemark_add("boxplot",normalizeBoxPlot,["box","median","outliers","rule","ticks"]),compositemark_add("errorbar",normalizeErrorBar,["ticks","rule"]),compositemark_add("errorband",normalizeErrorBand,["band","borders"]);const VL_ONLY_LEGEND_CONFIG=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],HEADER_TITLE_PROPERTIES_MAP={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},HEADER_LABEL_PROPERTIES_MAP={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},HEADER_TITLE_PROPERTIES=util_keys(HEADER_TITLE_PROPERTIES_MAP),HEADER_LABEL_PROPERTIES=util_keys(HEADER_LABEL_PROPERTIES_MAP),HEADER_CONFIGS=util_keys({header:1,headerRow:1,headerColumn:1,headerFacet:1}),LEGEND_SCALE_CHANNELS=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],COMMON_LEGEND_PROPERTY_INDEX={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},defaultConfig=(util_keys(COMMON_LEGEND_PROPERTY_INDEX),{point:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}});function isLegendBinding(bind){return"legend"===bind||!!(null==bind?void 0:bind.legend)}function isLegendStreamBinding(bind){return isLegendBinding(bind)&&isObject(bind)}function isSelectionParameter(param){return!!(null==param?void 0:param.select)}var parameter_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function assembleParameterSignals(params){const signals=[];for(const param of params||[]){if(isSelectionParameter(param))continue;const{expr,bind}=param,rest=parameter_rest(param,["expr","bind"]);if(bind&&expr){const signal=Object.assign(Object.assign({},rest),{bind,init:expr});signals.push(signal)}else{const signal=Object.assign(Object.assign(Object.assign({},rest),expr?{update:expr}:{}),bind?{bind}:{});signals.push(signal)}}return signals}function isConcatSpec(spec){return"concat"in spec}function isVConcatSpec(spec){return"vconcat"in spec}function isHConcatSpec(spec){return"hconcat"in spec}function getStepFor({step,offsetIsDiscrete}){var _a;return offsetIsDiscrete?null!==(_a=step.for)&&void 0!==_a?_a:"offset":"position"}function isStep(size){return isObject(size)&&void 0!==size.step}function isFrameMixins(o){return o.view||o.width||o.height}const COMPOSITION_LAYOUT_PROPERTIES=util_keys({align:1,bounds:1,center:1,columns:1,spacing:1});var config_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function getViewConfigContinuousSize(viewConfig,channel){var _a;return null!==(_a=viewConfig[channel])&&void 0!==_a?_a:viewConfig["width"===channel?"continuousWidth":"continuousHeight"]}function getViewConfigDiscreteStep(viewConfig,channel){const size=getViewConfigDiscreteSize(viewConfig,channel);return isStep(size)?size.step:DEFAULT_STEP}function getViewConfigDiscreteSize(viewConfig,channel){var _a;return getFirstDefined(null!==(_a=viewConfig[channel])&&void 0!==_a?_a:viewConfig["width"===channel?"discreteWidth":"discreteHeight"],{step:viewConfig.step})}const DEFAULT_STEP=20;const config_defaultConfig={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:DEFAULT_STEP},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:defaultBarConfig,circle:{},geoshape:{},image:{},line:{},point:{},rect:defaultRectConfig,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:defaultConfig,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},tab10=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],DEFAULT_FONT_SIZE={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},DEFAULT_COLOR={blue:tab10[0],orange:tab10[1],red:tab10[2],teal:tab10[3],green:tab10[4],yellow:tab10[5],purple:tab10[6],pink:tab10[7],brown:tab10[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function getAxisConfigInternal(axisConfig){const props=util_keys(axisConfig||{}),axisConfigInternal={};for(const prop of props){const val=axisConfig[prop];axisConfigInternal[prop]=isConditionalAxisValue(val)?signalOrValueRefWithCondition(val):signalRefOrValue(val)}return axisConfigInternal}const configPropsWithExpr=[...MARK_CONFIGS,...AXIS_CONFIGS,...HEADER_CONFIGS,"background","padding","legend","lineBreak","scale","style","title","view"];function initConfig(specifiedConfig={}){const{color,font,fontSize,selection}=specifiedConfig,restConfig=config_rest(specifiedConfig,["color","font","fontSize","selection"]),mergedConfig=mergeConfig({},duplicate(config_defaultConfig),font?function fontConfig(font){return{text:{font},style:{"guide-label":{font},"guide-title":{font},"group-title":{font},"group-subtitle":{font}}}}(font):{},color?function colorSignalConfig(color={}){return{signals:[{name:"color",value:isObject(color)?Object.assign(Object.assign({},DEFAULT_COLOR),color):DEFAULT_COLOR}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(color):{},fontSize?function fontSizeSignalConfig(fontSize){return{signals:[{name:"fontSize",value:isObject(fontSize)?Object.assign(Object.assign({},DEFAULT_FONT_SIZE),fontSize):DEFAULT_FONT_SIZE}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(fontSize):{},restConfig||{});selection&&writeConfig(mergedConfig,"selection",selection,!0);const outputConfig=omit(mergedConfig,configPropsWithExpr);for(const prop of["background","lineBreak","padding"])mergedConfig[prop]&&(outputConfig[prop]=signalRefOrValue(mergedConfig[prop]));for(const markConfigType of MARK_CONFIGS)mergedConfig[markConfigType]&&(outputConfig[markConfigType]=replaceExprRef(mergedConfig[markConfigType]));for(const axisConfigType of AXIS_CONFIGS)mergedConfig[axisConfigType]&&(outputConfig[axisConfigType]=getAxisConfigInternal(mergedConfig[axisConfigType]));for(const headerConfigType of HEADER_CONFIGS)mergedConfig[headerConfigType]&&(outputConfig[headerConfigType]=replaceExprRef(mergedConfig[headerConfigType]));return mergedConfig.legend&&(outputConfig.legend=replaceExprRef(mergedConfig.legend)),mergedConfig.scale&&(outputConfig.scale=replaceExprRef(mergedConfig.scale)),mergedConfig.style&&(outputConfig.style=function getStyleConfigInternal(styleConfig){const props=util_keys(styleConfig),styleConfigInternal={};for(const prop of props)styleConfigInternal[prop]=getAxisConfigInternal(styleConfig[prop]);return styleConfigInternal}(mergedConfig.style)),mergedConfig.title&&(outputConfig.title=replaceExprRef(mergedConfig.title)),mergedConfig.view&&(outputConfig.view=replaceExprRef(mergedConfig.view)),outputConfig}const MARK_STYLES=new Set(["view",...PRIMITIVE_MARKS]),VL_ONLY_CONFIG_PROPERTIES=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function stripAndRedirectConfig(config){config=duplicate(config);for(const prop of VL_ONLY_CONFIG_PROPERTIES)delete config[prop];if(config.axis)for(const prop in config.axis)isConditionalAxisValue(config.axis[prop])&&delete config.axis[prop];if(config.legend)for(const prop of VL_ONLY_LEGEND_CONFIG)delete config.legend[prop];if(config.mark){for(const prop of VL_ONLY_MARK_CONFIG_PROPERTIES)delete config.mark[prop];config.mark.tooltip&&isObject(config.mark.tooltip)&&delete config.mark.tooltip}config.params&&(config.signals=(config.signals||[]).concat(assembleParameterSignals(config.params)),delete config.params);for(const markType of MARK_STYLES){for(const prop of VL_ONLY_MARK_CONFIG_PROPERTIES)delete config[markType][prop];const vlOnlyMarkSpecificConfigs=VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];if(vlOnlyMarkSpecificConfigs)for(const prop of vlOnlyMarkSpecificConfigs)delete config[markType][prop];redirectConfigToStyleConfig(config,markType)}for(const m of function getAllCompositeMarks(){return util_keys(compositeMarkRegistry)}())delete config[m];!function redirectTitleConfig(config){const{titleMarkConfig,subtitleMarkConfig,subtitle}=extractTitleConfig(config.title);isEmpty(titleMarkConfig)||(config.style["group-title"]=Object.assign(Object.assign({},config.style["group-title"]),titleMarkConfig));isEmpty(subtitleMarkConfig)||(config.style["group-subtitle"]=Object.assign(Object.assign({},config.style["group-subtitle"]),subtitleMarkConfig));isEmpty(subtitle)?delete config.title:config.title=subtitle}(config);for(const prop in config)isObject(config[prop])&&isEmpty(config[prop])&&delete config[prop];return isEmpty(config)?void 0:config}function redirectConfigToStyleConfig(config,prop,toProp,compositeMarkPart){const propConfig=compositeMarkPart?config[prop][compositeMarkPart]:config[prop];"view"===prop&&(toProp="cell");const style=Object.assign(Object.assign({},propConfig),config.style[null!=toProp?toProp:prop]);isEmpty(style)||(config.style[null!=toProp?toProp:prop]=style),compositeMarkPart||delete config[prop]}function isLayerSpec(spec){return"layer"in spec}var map_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class SpecMapper{map(spec,params){return isFacetSpec(spec)?this.mapFacet(spec,params):function isRepeatSpec(spec){return"repeat"in spec}(spec)?this.mapRepeat(spec,params):isHConcatSpec(spec)?this.mapHConcat(spec,params):isVConcatSpec(spec)?this.mapVConcat(spec,params):isConcatSpec(spec)?this.mapConcat(spec,params):this.mapLayerOrUnit(spec,params)}mapLayerOrUnit(spec,params){if(isLayerSpec(spec))return this.mapLayer(spec,params);if(isUnitSpec(spec))return this.mapUnit(spec,params);throw new Error(invalidSpec(spec))}mapLayer(spec,params){return Object.assign(Object.assign({},spec),{layer:spec.layer.map((subspec=>this.mapLayerOrUnit(subspec,params)))})}mapHConcat(spec,params){return Object.assign(Object.assign({},spec),{hconcat:spec.hconcat.map((subspec=>this.map(subspec,params)))})}mapVConcat(spec,params){return Object.assign(Object.assign({},spec),{vconcat:spec.vconcat.map((subspec=>this.map(subspec,params)))})}mapConcat(spec,params){const{concat}=spec,rest=map_rest(spec,["concat"]);return Object.assign(Object.assign({},rest),{concat:concat.map((subspec=>this.map(subspec,params)))})}mapFacet(spec,params){return Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})}mapRepeat(spec,params){return Object.assign(Object.assign({},spec),{spec:this.map(spec.spec,params)})}}const STACK_OFFSET_INDEX={zero:1,center:1,normalize:1};const STACKABLE_MARKS=new Set([ARC,BAR,AREA,RULE,POINT,CIRCLE,SQUARE,LINE,mark_TEXT,TICK]),STACK_BY_DEFAULT_MARKS=new Set([BAR,AREA,ARC]);function isUnbinnedQuantitative(channelDef){return isFieldDef(channelDef)&&"quantitative"===channelDefType(channelDef)&&!channelDef.bin}function potentialStackedChannel(encoding,x){var _a,_b;const y="x"===x?"y":"radius",xDef=encoding[x],yDef=encoding[y];if(isFieldDef(xDef)&&isFieldDef(yDef))if(isUnbinnedQuantitative(xDef)&&isUnbinnedQuantitative(yDef)){if(xDef.stack)return x;if(yDef.stack)return y;const xAggregate=isFieldDef(xDef)&&!!xDef.aggregate;if(xAggregate!==(isFieldDef(yDef)&&!!yDef.aggregate))return xAggregate?x:y;{const xScale=null===(_a=xDef.scale)||void 0===_a?void 0:_a.type,yScale=null===(_b=yDef.scale)||void 0===_b?void 0:_b.type;if(xScale&&"linear"!==xScale)return y;if(yScale&&"linear"!==yScale)return x}}else{if(isUnbinnedQuantitative(xDef))return x;if(isUnbinnedQuantitative(yDef))return y}else{if(isUnbinnedQuantitative(xDef))return x;if(isUnbinnedQuantitative(yDef))return y}}function stack(m,encoding){var _a,_b;const mark=isMarkDef(m)?m.type:m;if(!STACKABLE_MARKS.has(mark))return null;const fieldChannel=potentialStackedChannel(encoding,"x")||potentialStackedChannel(encoding,"theta");if(!fieldChannel)return null;const stackedFieldDef=encoding[fieldChannel],stackedField=isFieldDef(stackedFieldDef)?vgField(stackedFieldDef,{}):void 0,dimensionChannel=function getDimensionChannel(channel){switch(channel){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(fieldChannel),groupbyChannels=[],groupbyFields=new Set;if(encoding[dimensionChannel]){const dimensionDef=encoding[dimensionChannel],dimensionField=isFieldDef(dimensionDef)?vgField(dimensionDef,{}):void 0;dimensionField&&dimensionField!==stackedField&&(groupbyChannels.push(dimensionChannel),groupbyFields.add(dimensionField));const dimensionOffsetChannel="x"===dimensionChannel?"xOffset":"yOffset",dimensionOffsetDef=encoding[dimensionOffsetChannel],dimensionOffsetField=isFieldDef(dimensionOffsetDef)?vgField(dimensionOffsetDef,{}):void 0;dimensionOffsetField&&dimensionOffsetField!==stackedField&&(groupbyChannels.push(dimensionOffsetChannel),groupbyFields.add(dimensionOffsetField))}const stackBy=NONPOSITION_CHANNELS.reduce(((sc,channel)=>{if("tooltip"!==channel&&channelHasField(encoding,channel)){const channelDef=encoding[channel];for(const cDef of array(channelDef)){const fieldDef=getFieldDef(cDef);if(fieldDef.aggregate)continue;const f=vgField(fieldDef,{});f&&groupbyFields.has(f)||sc.push({channel,fieldDef})}}return sc}),[]);let offset;return void 0!==stackedFieldDef.stack?offset=isBoolean(stackedFieldDef.stack)?stackedFieldDef.stack?"zero":null:stackedFieldDef.stack:STACK_BY_DEFAULT_MARKS.has(mark)&&(offset="zero"),offset&&function isStackOffset(s){return s in STACK_OFFSET_INDEX}(offset)?isAggregate(encoding)&&0===stackBy.length?null:(null===(_a=null==stackedFieldDef?void 0:stackedFieldDef.scale)||void 0===_a?void 0:_a.type)&&(null===(_b=null==stackedFieldDef?void 0:stackedFieldDef.scale)||void 0===_b?void 0:_b.type)!==ScaleType_LINEAR?(log_warn(function cannotStackNonLinearScale(scaleType){return`Cannot stack non-linear scale (${scaleType}).`}(stackedFieldDef.scale.type)),null):isFieldOrDatumDef(encoding[getSecondaryRangeChannel(fieldChannel)])?(void 0!==stackedFieldDef.stack&&log_warn(function cannotStackRangedMark(channel){return`Cannot stack "${channel}" if there is already "${channel}2".`}(fieldChannel)),null):(isFieldDef(stackedFieldDef)&&stackedFieldDef.aggregate&&!SUM_OPS.has(stackedFieldDef.aggregate)&&log_warn(function stackNonSummativeAggregate(aggregate){return`Stacking is applied even though the aggregate function is non-summative ("${aggregate}").`}(stackedFieldDef.aggregate)),{groupbyChannels,groupbyFields,fieldChannel,impute:null!==stackedFieldDef.impute&&isPathMark(mark),stackBy,offset}):null}var pathoverlay_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function dropLineAndPoint(markDef){const{point:_point,line:_line}=markDef,mark=pathoverlay_rest(markDef,["point","line"]);return util_keys(mark).length>1?mark:mark.type}function dropLineAndPointFromConfig(config){for(const mark of["line","area","rule","trail"])config[mark]&&(config=Object.assign(Object.assign({},config),{[mark]:omit(config[mark],["point","line"])}));return config}function getPointOverlay(markDef,markConfig={},encoding){return"transparent"===markDef.point?{opacity:0}:markDef.point?isObject(markDef.point)?markDef.point:{}:void 0!==markDef.point?null:markConfig.point||encoding.shape?isObject(markConfig.point)?markConfig.point:{}:void 0}function getLineOverlay(markDef,markConfig={}){return markDef.line?!0===markDef.line?{}:markDef.line:void 0!==markDef.line?null:markConfig.line?!0===markConfig.line?{}:markConfig.line:void 0}class PathOverlayNormalizer{constructor(){this.name="path-overlay"}hasMatchingType(spec,config){if(isUnitSpec(spec)){const{mark,encoding}=spec,markDef=isMarkDef(mark)?mark:{type:mark};switch(markDef.type){case"line":case"rule":case"trail":return!!getPointOverlay(markDef,config[markDef.type],encoding);case"area":return!!getPointOverlay(markDef,config[markDef.type],encoding)||!!getLineOverlay(markDef,config[markDef.type])}}return!1}run(spec,normParams,normalize){const{config}=normParams,{params,projection,mark,encoding:e}=spec,outerSpec=pathoverlay_rest(spec,["params","projection","mark","encoding"]),encoding=normalizeEncoding(e,config),markDef=isMarkDef(mark)?mark:{type:mark},pointOverlay=getPointOverlay(markDef,config[markDef.type],encoding),lineOverlay="area"===markDef.type&&getLineOverlay(markDef,config[markDef.type]),layer=[Object.assign(Object.assign({},params?{params}:{}),{mark:dropLineAndPoint(Object.assign(Object.assign({},"area"===markDef.type&&void 0===markDef.opacity&&void 0===markDef.fillOpacity?{opacity:.7}:{}),markDef)),encoding:omit(encoding,["shape"])})],stackProps=stack(markDef,encoding);let overlayEncoding=encoding;if(stackProps){const{fieldChannel:stackFieldChannel,offset}=stackProps;overlayEncoding=Object.assign(Object.assign({},encoding),{[stackFieldChannel]:Object.assign(Object.assign({},encoding[stackFieldChannel]),offset?{stack:offset}:{})})}return overlayEncoding=omit(overlayEncoding,["y2","x2"]),lineOverlay&&layer.push(Object.assign(Object.assign({},projection?{projection}:{}),{mark:Object.assign(Object.assign({type:"line"},util_pick(markDef,["clip","interpolate","tension","tooltip"])),lineOverlay),encoding:overlayEncoding})),pointOverlay&&layer.push(Object.assign(Object.assign({},projection?{projection}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},util_pick(markDef,["clip","tooltip"])),pointOverlay),encoding:overlayEncoding})),normalize(Object.assign(Object.assign({},outerSpec),{layer}),Object.assign(Object.assign({},normParams),{config:dropLineAndPointFromConfig(config)}))}}var repeater_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function replaceRepeaterInFacet(facet,repeater){return repeater?isFacetMapping(facet)?replaceRepeaterInMapping(facet,repeater):replaceRepeaterInFieldDef(facet,repeater):facet}function replaceRepeaterInEncoding(encoding,repeater){return repeater?replaceRepeaterInMapping(encoding,repeater):encoding}function replaceRepeatInProp(prop,o,repeater){const val=o[prop];return function isRepeatRef(field){return field&&!isString(field)&&"repeat"in field}(val)?val.repeat in repeater?Object.assign(Object.assign({},o),{[prop]:repeater[val.repeat]}):void log_warn(function noSuchRepeatedValue(field){return`Unknown repeated value "${field}".`}(val.repeat)):o}function replaceRepeaterInFieldDef(fieldDef,repeater){if(void 0!==(fieldDef=replaceRepeatInProp("field",fieldDef,repeater))){if(null===fieldDef)return null;if(isSortableFieldDef(fieldDef)&&isSortField(fieldDef.sort)){const sort=replaceRepeatInProp("field",fieldDef.sort,repeater);fieldDef=Object.assign(Object.assign({},fieldDef),sort?{sort}:{})}return fieldDef}}function replaceRepeaterInFieldOrDatumDef(def,repeater){if(isFieldDef(def))return replaceRepeaterInFieldDef(def,repeater);{const datumDef=replaceRepeatInProp("datum",def,repeater);return datumDef===def||datumDef.type||(datumDef.type="nominal"),datumDef}}function replaceRepeaterInChannelDef(channelDef,repeater){if(!isFieldOrDatumDef(channelDef)){if(hasConditionalFieldOrDatumDef(channelDef)){const fd=replaceRepeaterInFieldOrDatumDef(channelDef.condition,repeater);if(fd)return Object.assign(Object.assign({},channelDef),{condition:fd});{const{condition}=channelDef;return repeater_rest(channelDef,["condition"])}}return channelDef}{const fd=replaceRepeaterInFieldOrDatumDef(channelDef,repeater);if(fd)return fd;if(isConditionalDef(channelDef))return{condition:channelDef.condition}}}function replaceRepeaterInMapping(mapping,repeater){const out={};for(const channel in mapping)if(has(mapping,channel)){const channelDef=mapping[channel];if(isArray(channelDef))out[channel]=channelDef.map((cd=>replaceRepeaterInChannelDef(cd,repeater))).filter((cd=>cd));else{const cd=replaceRepeaterInChannelDef(channelDef,repeater);void 0!==cd&&(out[channel]=cd)}}return out}class RuleForRangedLineNormalizer{constructor(){this.name="RuleForRangedLine"}hasMatchingType(spec){if(isUnitSpec(spec)){const{encoding,mark}=spec;if("line"===mark||isMarkDef(mark)&&"line"===mark.type)for(const channel of SECONDARY_RANGE_CHANNEL){const mainChannelDef=encoding[getMainRangeChannel(channel)];if(encoding[channel]&&(isFieldDef(mainChannelDef)&&!isBinned(mainChannelDef.bin)||isDatumDef(mainChannelDef)))return!0}}return!1}run(spec,params,normalize){const{encoding,mark}=spec;return log_warn(function lineWithRange(hasX2,hasY2){return`Line mark is for continuous lines and thus cannot be used with ${hasX2&&hasY2?"x2 and y2":hasX2?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!encoding.x2,!!encoding.y2)),normalize(Object.assign(Object.assign({},spec),{mark:isObject(mark)?Object.assign(Object.assign({},mark),{type:"rule"}):"rule"}),params)}}var core_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function mergeEncoding({parentEncoding,encoding={},layer}){let merged={};if(parentEncoding){const channels=new Set([...util_keys(parentEncoding),...util_keys(encoding)]);for(const channel of channels){const channelDef=encoding[channel],parentChannelDef=parentEncoding[channel];if(isFieldOrDatumDef(channelDef)){const mergedChannelDef=Object.assign(Object.assign({},parentChannelDef),channelDef);merged[channel]=mergedChannelDef}else hasConditionalFieldOrDatumDef(channelDef)?merged[channel]=Object.assign(Object.assign({},channelDef),{condition:Object.assign(Object.assign({},parentChannelDef),channelDef.condition)}):channelDef||null===channelDef?merged[channel]=channelDef:(layer||isValueDef(parentChannelDef)||isSignalRef(parentChannelDef)||isFieldOrDatumDef(parentChannelDef)||isArray(parentChannelDef))&&(merged[channel]=parentChannelDef)}}else merged=encoding;return!merged||isEmpty(merged)?void 0:merged}function mergeProjection(opt){const{parentProjection,projection}=opt;return parentProjection&&projection&&log_warn(function projectionOverridden(opt){const{parentProjection,projection}=opt;return`Layer's shared projection ${stringify(parentProjection)} is overridden by a child projection ${stringify(projection)}.`}({parentProjection,projection})),null!=projection?projection:parentProjection}function isFilter(t){return"filter"in t}function isImputeSequence(t){return void 0!==(null==t?void 0:t.stop)}function isLookup(t){return"lookup"in t}function isPivot(t){return"pivot"in t}function isDensity(t){return"density"in t}function transform_isQuantile(t){return"quantile"in t}function isRegression(t){return"regression"in t}function isLoess(t){return"loess"in t}function isSample(t){return"sample"in t}function isWindow(t){return"window"in t}function isJoinAggregate(t){return"joinaggregate"in t}function isFlatten(t){return"flatten"in t}function isCalculate(t){return"calculate"in t}function isBin(t){return"bin"in t}function isImpute(t){return"impute"in t}function isTimeUnit(t){return"timeUnit"in t}function transform_isAggregate(t){return"aggregate"in t}function isStack(t){return"stack"in t}function isFold(t){return"fold"in t}var selectioncompat_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function normalizeTransforms(spec,normParams){const{transform:tx}=spec,rest=selectioncompat_rest(spec,["transform"]);if(tx){const transform=tx.map((t=>{if(isFilter(t))return{filter:selectioncompat_normalizePredicate(t,normParams)};if(isBin(t)&&isBinParams(t.bin))return Object.assign(Object.assign({},t),{bin:normalizeBinExtent(t.bin)});if(isLookup(t)){const _a=t.from,{selection:param}=_a,from=selectioncompat_rest(_a,["selection"]);return param?Object.assign(Object.assign({},t),{from:Object.assign({param},from)}):t}return t}));return Object.assign(Object.assign({},rest),{transform})}return spec}function normalizeChannelDef(obj,normParams){var _a,_b;const enc=duplicate(obj);if(isFieldDef(enc)&&isBinParams(enc.bin)&&(enc.bin=normalizeBinExtent(enc.bin)),isScaleFieldDef(enc)&&(null===(_b=null===(_a=enc.scale)||void 0===_a?void 0:_a.domain)||void 0===_b?void 0:_b.selection)){const _c=enc.scale.domain,{selection:param}=_c,domain=selectioncompat_rest(_c,["selection"]);enc.scale.domain=Object.assign(Object.assign({},domain),param?{param}:{})}if(isConditionalDef(enc))if(isArray(enc.condition))enc.condition=enc.condition.map((c=>{const{selection,param,test}=c,cond=selectioncompat_rest(c,["selection","param","test"]);return param?c:Object.assign(Object.assign({},cond),{test:selectioncompat_normalizePredicate(c,normParams)})}));else{const _d=normalizeChannelDef(enc.condition,normParams),{selection,param,test}=_d,cond=selectioncompat_rest(_d,["selection","param","test"]);enc.condition=param?enc.condition:Object.assign(Object.assign({},cond),{test:selectioncompat_normalizePredicate(enc.condition,normParams)})}return enc}function normalizeBinExtent(bin){const ext=bin.extent;if(null==ext?void 0:ext.selection){const{selection:param}=ext,rest=selectioncompat_rest(ext,["selection"]);return Object.assign(Object.assign({},bin),{extent:Object.assign(Object.assign({},rest),{param})})}return bin}function selectioncompat_normalizePredicate(op,normParams){const normalizeSelectionComposition=o=>normalizeLogicalComposition(o,(param=>{var _a,_b,_c;const pred={param,empty:null===(_a=normParams.emptySelections[param])||void 0===_a||_a};return null!==(_b=(_c=normParams.selectionPredicates)[param])&&void 0!==_b||(_c[param]=[]),normParams.selectionPredicates[param].push(pred),pred}));return op.selection?normalizeSelectionComposition(op.selection):normalizeLogicalComposition(op.test||op.filter,(o=>o.selection?normalizeSelectionComposition(o.selection):o))}class TopLevelSelectionsNormalizer extends SpecMapper{map(spec,normParams){var _a;const selections=null!==(_a=normParams.selections)&&void 0!==_a?_a:[];if(spec.params&&!isUnitSpec(spec)){const params=[];for(const param of spec.params)isSelectionParameter(param)?selections.push(param):params.push(param);spec.params=params}return normParams.selections=selections,super.map(spec,addSpecNameToParams(spec,normParams))}mapUnit(spec,normParams){var _a;const selections=normParams.selections;if(!selections||!selections.length)return spec;const path=(null!==(_a=normParams.path)&&void 0!==_a?_a:[]).concat(spec.name),params=[];for(const selection of selections)if(selection.views&&selection.views.length)for(const view of selection.views)(isString(view)&&(view===spec.name||path.indexOf(view)>=0)||isArray(view)&&view.map((v=>path.indexOf(v))).every(((v,i,arr)=>-1!==v&&(0===i||v>arr[i-1]))))&&params.push(selection);else params.push(selection);return params.length&&(spec.params=params),spec}}for(const method of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const proto=TopLevelSelectionsNormalizer.prototype[method];TopLevelSelectionsNormalizer.prototype[method]=function(spec,params){return proto.call(this,spec,addSpecNameToParams(spec,params))}}function addSpecNameToParams(spec,params){var _a;return spec.name?Object.assign(Object.assign({},params),{path:(null!==(_a=params.path)&&void 0!==_a?_a:[]).concat(spec.name)}):params}function normalize_normalize(spec,config){void 0===config&&(config=initConfig(spec.config));const normalizedSpec=function normalizeGenericSpec(spec,config={}){const normParams={config};return topLevelSelectionNormalizer.map(coreNormalizer.map(selectionCompatNormalizer.map(spec,normParams),normParams),normParams)}(spec,config),{width,height}=spec,autosize=function normalizeAutoSize(spec,sizeInfo,config){let{width,height}=sizeInfo;const isFitCompatible=isUnitSpec(spec)||isLayerSpec(spec),autosizeDefault={};isFitCompatible?"container"==width&&"container"==height?(autosizeDefault.type="fit",autosizeDefault.contains="padding"):"container"==width?(autosizeDefault.type="fit-x",autosizeDefault.contains="padding"):"container"==height&&(autosizeDefault.type="fit-y",autosizeDefault.contains="padding"):("container"==width&&(log_warn(containerSizeNonSingle("width")),width=void 0),"container"==height&&(log_warn(containerSizeNonSingle("height")),height=void 0));const autosize=Object.assign(Object.assign(Object.assign({type:"pad"},autosizeDefault),config?_normalizeAutoSize(config.autosize):{}),_normalizeAutoSize(spec.autosize));"fit"!==autosize.type||isFitCompatible||(log_warn(FIT_NON_SINGLE),autosize.type="pad");"container"==width&&"fit"!=autosize.type&&"fit-x"!=autosize.type&&log_warn(containerSizeNotCompatibleWithAutosize("width"));"container"==height&&"fit"!=autosize.type&&"fit-y"!=autosize.type&&log_warn(containerSizeNotCompatibleWithAutosize("height"));if(deepEqual(autosize,{type:"pad"}))return;return autosize}(normalizedSpec,{width,height,autosize:spec.autosize},config);return Object.assign(Object.assign({},normalizedSpec),autosize?{autosize}:{})}const coreNormalizer=new class CoreNormalizer extends SpecMapper{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[boxPlotNormalizer,errorBarNormalizer,errorBandNormalizer,new PathOverlayNormalizer,new RuleForRangedLineNormalizer]}map(spec,params){if(isUnitSpec(spec)){const hasRow=channelHasField(spec.encoding,ROW),hasColumn=channelHasField(spec.encoding,COLUMN),hasFacet=channelHasField(spec.encoding,"facet");if(hasRow||hasColumn||hasFacet)return this.mapFacetedUnit(spec,params)}return super.map(spec,params)}mapUnit(spec,params){const{parentEncoding,parentProjection}=params,encoding=replaceRepeaterInEncoding(spec.encoding,params.repeater),specWithReplacedEncoding=Object.assign(Object.assign({},spec),encoding?{encoding}:{});if(parentEncoding||parentProjection)return this.mapUnitWithParentEncodingOrProjection(specWithReplacedEncoding,params);const normalizeLayerOrUnit=this.mapLayerOrUnit.bind(this);for(const unitNormalizer of this.nonFacetUnitNormalizers)if(unitNormalizer.hasMatchingType(specWithReplacedEncoding,params.config))return unitNormalizer.run(specWithReplacedEncoding,params,normalizeLayerOrUnit);return specWithReplacedEncoding}mapRepeat(spec,params){return function isLayerRepeatSpec(spec){return!isArray(spec.repeat)&&spec.repeat.layer}(spec)?this.mapLayerRepeat(spec,params):this.mapNonLayerRepeat(spec,params)}mapLayerRepeat(spec,params){const{repeat,spec:childSpec}=spec,rest=core_rest(spec,["repeat","spec"]),{row,column,layer}=repeat,{repeater={},repeaterPrefix=""}=params;return row||column?this.mapRepeat(Object.assign(Object.assign({},spec),{repeat:Object.assign(Object.assign({},row?{row}:{}),column?{column}:{}),spec:{repeat:{layer},spec:childSpec}}),params):Object.assign(Object.assign({},rest),{layer:layer.map((layerValue=>{const childRepeater=Object.assign(Object.assign({},repeater),{layer:layerValue}),childName=`${(childSpec.name||"")+repeaterPrefix}child__layer_${varName(layerValue)}`,child=this.mapLayerOrUnit(childSpec,Object.assign(Object.assign({},params),{repeater:childRepeater,repeaterPrefix:childName}));return child.name=childName,child}))})}mapNonLayerRepeat(spec,params){var _a;const{repeat,spec:childSpec,data}=spec,remainingProperties=core_rest(spec,["repeat","spec","data"]);!isArray(repeat)&&spec.columns&&(spec=omit(spec,["columns"]),log_warn(columnsNotSupportByRowCol("repeat")));const concat=[],{repeater={},repeaterPrefix=""}=params,row=!isArray(repeat)&&repeat.row||[repeater?repeater.row:null],column=!isArray(repeat)&&repeat.column||[repeater?repeater.column:null],repeatValues=isArray(repeat)&&repeat||[repeater?repeater.repeat:null];for(const repeatValue of repeatValues)for(const rowValue of row)for(const columnValue of column){const childRepeater={repeat:repeatValue,row:rowValue,column:columnValue,layer:repeater.layer},childName=(childSpec.name||"")+repeaterPrefix+"child__"+(isArray(repeat)?`${varName(repeatValue)}`:(repeat.row?`row_${varName(rowValue)}`:"")+(repeat.column?`column_${varName(columnValue)}`:"")),child=this.map(childSpec,Object.assign(Object.assign({},params),{repeater:childRepeater,repeaterPrefix:childName}));child.name=childName,concat.push(omit(child,["data"]))}const columns=isArray(repeat)?spec.columns:repeat.column?repeat.column.length:1;return Object.assign(Object.assign({data:null!==(_a=childSpec.data)&&void 0!==_a?_a:data,align:"all"},remainingProperties),{columns,concat})}mapFacet(spec,params){const{facet}=spec;return isFacetMapping(facet)&&spec.columns&&(spec=omit(spec,["columns"]),log_warn(columnsNotSupportByRowCol("facet"))),super.mapFacet(spec,params)}mapUnitWithParentEncodingOrProjection(spec,params){const{encoding,projection}=spec,{parentEncoding,parentProjection,config}=params,mergedProjection=mergeProjection({parentProjection,projection}),mergedEncoding=mergeEncoding({parentEncoding,encoding:replaceRepeaterInEncoding(encoding,params.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},spec),mergedProjection?{projection:mergedProjection}:{}),mergedEncoding?{encoding:mergedEncoding}:{}),{config})}mapFacetedUnit(spec,normParams){const _a=spec.encoding,{row,column,facet}=_a,encoding=core_rest(_a,["row","column","facet"]),{mark,width,projection,height,view,params,encoding:_}=spec,outerSpec=core_rest(spec,["mark","width","projection","height","view","params","encoding"]),{facetMapping,layout}=this.getFacetMappingAndLayout({row,column,facet},normParams),newEncoding=replaceRepeaterInEncoding(encoding,normParams.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},outerSpec),layout),{facet:facetMapping,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},width?{width}:{}),height?{height}:{}),view?{view}:{}),projection?{projection}:{}),{mark,encoding:newEncoding}),params?{params}:{})}),normParams)}getFacetMappingAndLayout(facets,params){var _a;const{row,column,facet}=facets;if(row||column){facet&&log_warn(function facetChannelDropped(channels){return`Facet encoding dropped as ${channels.join(" and ")} ${channels.length>1?"are":"is"} also specified.`}([...row?[ROW]:[],...column?[COLUMN]:[]]));const facetMapping={},layout={};for(const channel of[ROW,COLUMN]){const def=facets[channel];if(def){const{align,center,spacing,columns}=def,defWithoutLayout=core_rest(def,["align","center","spacing","columns"]);facetMapping[channel]=defWithoutLayout;for(const prop of["align","center","spacing"])void 0!==def[prop]&&(null!==(_a=layout[prop])&&void 0!==_a||(layout[prop]={}),layout[prop][channel]=def[prop])}}return{facetMapping,layout}}{const{align,center,spacing,columns}=facet;return{facetMapping:replaceRepeaterInFacet(core_rest(facet,["align","center","spacing","columns"]),params.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},align?{align}:{}),center?{center}:{}),spacing?{spacing}:{}),columns?{columns}:{})}}}mapLayer(spec,_a){var{parentEncoding,parentProjection}=_a,otherParams=core_rest(_a,["parentEncoding","parentProjection"]);const{encoding,projection}=spec,rest=core_rest(spec,["encoding","projection"]),params=Object.assign(Object.assign({},otherParams),{parentEncoding:mergeEncoding({parentEncoding,encoding,layer:!0}),parentProjection:mergeProjection({parentProjection,projection})});return super.mapLayer(rest,params)}},selectionCompatNormalizer=new class SelectionCompatibilityNormalizer extends SpecMapper{map(spec,normParams){var _a,_b;return null!==(_a=normParams.emptySelections)&&void 0!==_a||(normParams.emptySelections={}),null!==(_b=normParams.selectionPredicates)&&void 0!==_b||(normParams.selectionPredicates={}),spec=normalizeTransforms(spec,normParams),super.map(spec,normParams)}mapLayerOrUnit(spec,normParams){if((spec=normalizeTransforms(spec,normParams)).encoding){const encoding={};for(const[channel,enc]of entries(spec.encoding))encoding[channel]=normalizeChannelDef(enc,normParams);spec=Object.assign(Object.assign({},spec),{encoding})}return super.mapLayerOrUnit(spec,normParams)}mapUnit(spec,normParams){const _a=spec,{selection}=_a,rest=selectioncompat_rest(_a,["selection"]);return selection?Object.assign(Object.assign({},rest),{params:entries(selection).map((([name,selDef])=>{var _a;const _b=selDef,{init:value,bind,empty}=_b,select=selectioncompat_rest(_b,["init","bind","empty"]);"single"===select.type?(select.type="point",select.toggle=!1):"multi"===select.type&&(select.type="point"),normParams.emptySelections[name]="none"!==empty;for(const pred of vals(null!==(_a=normParams.selectionPredicates[name])&&void 0!==_a?_a:{}))pred.empty="none"!==empty;return{name,value,select,bind}}))}):spec}},topLevelSelectionNormalizer=new TopLevelSelectionsNormalizer;function _normalizeAutoSize(autosize){return isString(autosize)?{type:autosize}:null!=autosize?autosize:{}}const TOP_LEVEL_PROPERTIES=["background","padding"];function extractTopLevelProperties(t,includeParams){const o={};for(const p of TOP_LEVEL_PROPERTIES)t&&void 0!==t[p]&&(o[p]=signalRefOrValue(t[p]));return includeParams&&(o.params=t.params),o}class Split{constructor(explicit={},implicit={}){this.explicit=explicit,this.implicit=implicit}clone(){return new Split(duplicate(this.explicit),duplicate(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(key){return getFirstDefined(this.explicit[key],this.implicit[key])}getWithExplicit(key){return void 0!==this.explicit[key]?{explicit:!0,value:this.explicit[key]}:void 0!==this.implicit[key]?{explicit:!1,value:this.implicit[key]}:{explicit:!1,value:void 0}}setWithExplicit(key,{value,explicit}){void 0!==value&&this.set(key,value,explicit)}set(key,value,explicit){return delete this[explicit?"implicit":"explicit"][key],this[explicit?"explicit":"implicit"][key]=value,this}copyKeyFromSplit(key,{explicit,implicit}){void 0!==explicit[key]?this.set(key,explicit[key],!0):void 0!==implicit[key]&&this.set(key,implicit[key],!1)}copyKeyFromObject(key,s){void 0!==s[key]&&this.set(key,s[key],!0)}copyAll(other){for(const key of util_keys(other.combine())){const val=other.getWithExplicit(key);this.setWithExplicit(key,val)}}}function makeExplicit(value){return{explicit:!0,value}}function makeImplicit(value){return{explicit:!1,value}}function tieBreakByComparing(compare){return(v1,v2,property,propertyOf)=>{const diff=compare(v1.value,v2.value);return diff>0?v1:diff<0?v2:defaultTieBreaker(v1,v2,property,propertyOf)}}function defaultTieBreaker(v1,v2,property,propertyOf){return v1.explicit&&v2.explicit&&log_warn(function mergeConflictingProperty(property,propertyOf,v1,v2){return`Conflicting ${propertyOf.toString()} property "${property.toString()}" (${stringify(v1)} and ${stringify(v2)}). Using ${stringify(v1)}.`}(property,propertyOf,v1.value,v2.value)),v1}function mergeValuesWithExplicit(v1,v2,property,propertyOf,tieBreaker=defaultTieBreaker){return void 0===v1||void 0===v1.value?v2:v1.explicit&&!v2.explicit?v1:v2.explicit&&!v1.explicit?v2:deepEqual(v1.value,v2.value)?v1:tieBreaker(v1,v2,property,propertyOf)}class AncestorParse extends Split{constructor(explicit={},implicit={},parseNothing=!1){super(explicit,implicit),this.explicit=explicit,this.implicit=implicit,this.parseNothing=parseNothing}clone(){const clone=super.clone();return clone.parseNothing=this.parseNothing,clone}}function isUrlData(data){return"url"in data}function isInlineData(data){return"values"in data}function isNamedData(data){return"name"in data&&!isUrlData(data)&&!isInlineData(data)&&!isGenerator(data)}function isGenerator(data){return data&&(isSequenceGenerator(data)||isSphereGenerator(data)||isGraticuleGenerator(data))}function isSequenceGenerator(data){return"sequence"in data}function isSphereGenerator(data){return"sphere"in data}function isGraticuleGenerator(data){return"graticule"in data}var DataSourceType;!function(DataSourceType){DataSourceType[DataSourceType.Raw=0]="Raw",DataSourceType[DataSourceType.Main=1]="Main",DataSourceType[DataSourceType.Row=2]="Row",DataSourceType[DataSourceType.Column=3]="Column",DataSourceType[DataSourceType.Lookup=4]="Lookup"}(DataSourceType||(DataSourceType={}));var assemble_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function assembleInit(init,isExpr=!0,wrap=identity){if(isArray(init)){const assembled=init.map((v=>assembleInit(v,isExpr,wrap)));return isExpr?`[${assembled.join(", ")}]`:assembled}return isDateTime(init)?wrap(isExpr?dateTimeToExpr(init):function dateTimeToTimestamp(d){const parts=dateTimeParts(d,!0);return d.utc?+new Date(Date.UTC(...parts)):+new Date(...parts)}(init)):isExpr?wrap(stringify(init)):init}function assembleUnitSelectionSignals(model,signals){var _a;for(const selCmpt of vals(null!==(_a=model.component.selection)&&void 0!==_a?_a:{})){const name=selCmpt.name;let modifyExpr=`${name}${TUPLE}, ${"global"===selCmpt.resolve?"true":`{unit: ${unitName(model)}}`}`;for(const c of selectionCompilers)c.defined(selCmpt)&&(c.signals&&(signals=c.signals(model,selCmpt,signals)),c.modifyExpr&&(modifyExpr=c.modifyExpr(model,selCmpt,modifyExpr)));signals.push({name:name+MODIFY,on:[{events:{signal:selCmpt.name+TUPLE},update:`modify(${$(selCmpt.name+STORE)}, ${modifyExpr})`}]})}return cleanupEmptyOnArray(signals)}function assembleUnitSelectionMarks(model,marks){var _a;for(const selCmpt of vals(null!==(_a=model.component.selection)&&void 0!==_a?_a:{}))for(const c of selectionCompilers)c.defined(selCmpt)&&c.marks&&(marks=c.marks(model,selCmpt,marks));return marks}function cleanupEmptyOnArray(signals){return signals.map((s=>(s.on&&!s.on.length&&delete s.on,s)))}class DataFlowNode{constructor(parent,debugName){this.debugName=debugName,this._children=[],this._parent=null,parent&&(this.parent=parent)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(parent){this._parent=parent,parent&&parent.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(child,loc){this._children.includes(child)?log_warn("Attempt to add the same child twice."):void 0!==loc?this._children.splice(loc,0,child):this._children.push(child)}removeChild(oldChild){const loc=this._children.indexOf(oldChild);return this._children.splice(loc,1),loc}remove(){let loc=this._parent.removeChild(this);for(const child of this._children)child._parent=this._parent,this._parent.addChild(child,loc++)}insertAsParentOf(other){const parent=other.parent;parent.removeChild(this),this.parent=parent,other.parent=this}swapWithParent(){const parent=this._parent,newParent=parent.parent;for(const child of this._children)child.parent=parent;this._children=[],parent.removeChild(this);const loc=parent.parent.removeChild(parent);this._parent=newParent,newParent.addChild(this,loc),parent.parent=this}}class OutputNode extends DataFlowNode{constructor(parent,source,type,refCounts){super(parent,source),this.type=type,this.refCounts=refCounts,this._source=this._name=source,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const cloneObj=new this.constructor;return cloneObj.debugName=`clone_${this.debugName}`,cloneObj._source=this._source,cloneObj._name=`clone_${this._name}`,cloneObj.type=this.type,cloneObj.refCounts=this.refCounts,cloneObj.refCounts[cloneObj._name]=0,cloneObj}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${uniqueId()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(source){this._source=source}}var data_timeunit_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class TimeUnitNode extends DataFlowNode{constructor(parent,formula){super(parent),this.formula=formula}clone(){return new TimeUnitNode(null,duplicate(this.formula))}static makeFromEncoding(parent,model){const formula=model.reduceFieldDef(((timeUnitComponent,fieldDef)=>{const{field,timeUnit}=fieldDef;if(timeUnit){const as=vgField(fieldDef,{forAs:!0});timeUnitComponent[hash({as,field,timeUnit})]={as,field,timeUnit}}return timeUnitComponent}),{});return isEmpty(formula)?null:new TimeUnitNode(parent,formula)}static makeFromTransform(parent,t){const _a=Object.assign({},t),{timeUnit}=_a,other=data_timeunit_rest(_a,["timeUnit"]),normalizedTimeUnit=normalizeTimeUnit(timeUnit),component=Object.assign(Object.assign({},other),{timeUnit:normalizedTimeUnit});return new TimeUnitNode(parent,{[hash(component)]:component})}merge(other){this.formula=Object.assign({},this.formula);for(const key in other.formula)this.formula[key]||(this.formula[key]=other.formula[key]);for(const child of other.children)other.removeChild(child),child.parent=this;other.remove()}removeFormulas(fields){const newFormula={};for(const[key,timeUnit]of entries(this.formula))fields.has(timeUnit.as)||(newFormula[key]=timeUnit);this.formula=newFormula}producedFields(){return new Set(vals(this.formula).map((f=>f.as)))}dependentFields(){return new Set(vals(this.formula).map((f=>f.field)))}hash(){return`TimeUnit ${hash(this.formula)}`}assemble(){const transforms=[];for(const f of vals(this.formula)){const{field,as,timeUnit}=f,_a=normalizeTimeUnit(timeUnit),{unit,utc}=_a,params=data_timeunit_rest(_a,["unit","utc"]);transforms.push(Object.assign(Object.assign(Object.assign(Object.assign({field:replacePathInField(field),type:"timeunit"},unit?{units:getTimeUnitParts(unit)}:{}),utc?{timezone:"utc"}:{}),params),{as:[as,`${as}_end`]}))}return transforms}}var project_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class SelectionProjectionComponent{constructor(...items){this.items=items,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const project_project={defined:()=>!0,parse:(model,selCmpt,selDef)=>{var _a;const name=selCmpt.name,proj=null!==(_a=selCmpt.project)&&void 0!==_a?_a:selCmpt.project=new SelectionProjectionComponent,parsed={},timeUnits={},signals=new Set,signalName=(p,range)=>{const suffix="visual"===range?p.channel:p.field;let sg=varName(`${name}_${suffix}`);for(let counter=1;signals.has(sg);counter++)sg=varName(`${name}_${suffix}_${counter}`);return signals.add(sg),{[range]:sg}},type=selCmpt.type,cfg=model.config.selection[type],init=void 0!==selDef.value?array(selDef.value):null;let{fields,encodings}=isObject(selDef.select)?selDef.select:{};if(!fields&&!encodings&&init)for(const initVal of init)if(isObject(initVal))for(const key of util_keys(initVal))SINGLE_DEF_UNIT_CHANNEL_INDEX[key]?(encodings||(encodings=[])).push(key):"interval"===type?(log_warn('Interval selections should be initialized using "x" and/or "y" keys.'),encodings=cfg.encodings):(fields||(fields=[])).push(key);fields||encodings||(encodings=cfg.encodings,"fields"in cfg&&(fields=cfg.fields));for(const channel of null!=encodings?encodings:[]){const fieldDef=model.fieldDef(channel);if(fieldDef){let field=fieldDef.field;if(fieldDef.aggregate){log_warn(cannotProjectAggregate(channel,fieldDef.aggregate));continue}if(!field){log_warn(cannotProjectOnChannelWithoutField(channel));continue}if(fieldDef.timeUnit){field=model.vgField(channel);const component={timeUnit:fieldDef.timeUnit,as:field,field:fieldDef.field};timeUnits[hash(component)]=component}if(!parsed[field]){let tplType="E";if("interval"===type){hasContinuousDomain(model.getScaleComponent(channel).get("type"))&&(tplType="R")}else fieldDef.bin&&(tplType="R-RE");const p={field,channel,type:tplType};p.signals=Object.assign(Object.assign({},signalName(p,"data")),signalName(p,"visual")),proj.items.push(parsed[field]=p),proj.hasField[field]=proj.hasChannel[channel]=parsed[field],proj.hasSelectionId=proj.hasSelectionId||"_vgsid_"===field}}else log_warn(cannotProjectOnChannelWithoutField(channel))}for(const field of null!=fields?fields:[]){if(proj.hasField[field])continue;const p={type:"E",field};p.signals=Object.assign({},signalName(p,"data")),proj.items.push(p),proj.hasField[field]=p,proj.hasSelectionId=proj.hasSelectionId||"_vgsid_"===field}init&&(selCmpt.init=init.map((v=>proj.items.map((p=>isObject(v)?void 0!==v[p.channel]?v[p.channel]:v[p.field]:v))))),isEmpty(timeUnits)||(proj.timeUnit=new TimeUnitNode(null,timeUnits))},signals:(model,selCmpt,allSignals)=>{const name=selCmpt.name+"_tuple_fields",hasSignal=allSignals.filter((s=>s.name===name));return hasSignal.length>0||selCmpt.project.hasSelectionId?allSignals:allSignals.concat({name,value:selCmpt.project.items.map((proj=>{const{signals,hasLegend}=proj,rest=project_rest(proj,["signals","hasLegend"]);return rest.field=replacePathInField(rest.field),rest}))})}},selection_project=project_project,scaleBindings={defined:selCmpt=>"interval"===selCmpt.type&&"global"===selCmpt.resolve&&selCmpt.bind&&"scales"===selCmpt.bind,parse:(model,selCmpt)=>{const bound=selCmpt.scales=[];for(const proj of selCmpt.project.items){const channel=proj.channel;if(!isScaleChannel(channel))continue;const scale=model.getScaleComponent(channel),scaleType=scale?scale.get("type"):void 0;scale&&hasContinuousDomain(scaleType)?(scale.set("selectionExtent",{param:selCmpt.name,field:proj.field},!0),bound.push(proj)):log_warn("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(model,selCmpt,signals)=>{const bound=selCmpt.scales.filter((proj=>0===signals.filter((s=>s.name===proj.signals.data)).length));if(!model.parent||isTopLevelLayer(model)||0===bound.length)return signals;const namedSg=signals.filter((s=>s.name===selCmpt.name))[0];let update=namedSg.update;if(update.indexOf(VL_SELECTION_RESOLVE)>=0)namedSg.update=`{${bound.map((proj=>`${$(replacePathInField(proj.field))}: ${proj.signals.data}`)).join(", ")}}`;else{for(const proj of bound){const mapping=`${$(replacePathInField(proj.field))}: ${proj.signals.data}`;update.includes(mapping)||(update=`${update.substring(0,update.length-1)}, ${mapping}}`)}namedSg.update=update}return signals.concat(bound.map((proj=>({name:proj.signals.data}))))},signals:(model,selCmpt,signals)=>{if(model.parent&&!isTopLevelLayer(model))for(const proj of selCmpt.scales){const signal=signals.filter((s=>s.name===proj.signals.data))[0];signal.push="outer",delete signal.value,delete signal.update}return signals}},selection_scales=scaleBindings;function scales_domain(model,channel){return`domain(${$(model.scaleName(channel))})`}function isTopLevelLayer(model){var _a;return model.parent&&isLayerModel(model.parent)&&(null!==(_a=!model.parent.parent)&&void 0!==_a?_a:isTopLevelLayer(model.parent.parent))}var interval_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const BRUSH="_brush",interval_interval={defined:selCmpt=>"interval"===selCmpt.type,signals:(model,selCmpt,signals)=>{const name=selCmpt.name,fieldsSg=name+"_tuple_fields",hasScales=selection_scales.defined(selCmpt),init=selCmpt.init?selCmpt.init[0]:null,dataSignals=[],scaleTriggers=[];if(selCmpt.translate&&!hasScales){const filterExpr=`!event.item || event.item.mark.name !== ${$(name+BRUSH)}`;interval_events(selCmpt,((on,evt)=>{var _a,_b;const filters=array(null!==(_a=(_b=evt.between[0]).filter)&&void 0!==_a?_a:_b.filter=[]);return filters.includes(filterExpr)||filters.push(filterExpr),on}))}selCmpt.project.items.forEach(((proj,i)=>{const channel=proj.channel;if("x"!==channel&&"y"!==channel)return void log_warn("Interval selections only support x and y encoding channels.");const val=init?init[i]:null,cs=function channelSignals(model,selCmpt,proj,init){const channel=proj.channel,vname=proj.signals.visual,dname=proj.signals.data,hasScales=selection_scales.defined(selCmpt),scaleName=$(model.scaleName(channel)),scale=model.getScaleComponent(channel),scaleType=scale?scale.get("type"):void 0,scaled=str=>`scale(${scaleName}, ${str})`,size=model.getSizeSignalRef("x"===channel?"width":"height").signal,coord=`${channel}(unit)`,on=interval_events(selCmpt,((def,evt)=>[...def,{events:evt.between[0],update:`[${coord}, ${coord}]`},{events:evt,update:`[${vname}[0], clamp(${coord}, 0, ${size})]`}]));return on.push({events:{signal:selCmpt.name+"_scale_trigger"},update:hasContinuousDomain(scaleType)?`[${scaled(`${dname}[0]`)}, ${scaled(`${dname}[1]`)}]`:"[0, 0]"}),hasScales?[{name:dname,on:[]}]:[Object.assign(Object.assign({name:vname},init?{init:assembleInit(init,!0,scaled)}:{value:[]}),{on}),Object.assign(Object.assign({name:dname},init?{init:assembleInit(init)}:{}),{on:[{events:{signal:vname},update:`${vname}[0] === ${vname}[1] ? null : invert(${scaleName}, ${vname})`}]})]}(model,selCmpt,proj,val),dname=proj.signals.data,vname=proj.signals.visual,scaleName=$(model.scaleName(channel)),toNum=hasContinuousDomain(model.getScaleComponent(channel).get("type"))?"+":"";signals.push(...cs),dataSignals.push(dname),scaleTriggers.push({scaleName:model.scaleName(channel),expr:`(!isArray(${dname}) || (${toNum}invert(${scaleName}, ${vname})[0] === ${toNum}${dname}[0] && ${toNum}invert(${scaleName}, ${vname})[1] === ${toNum}${dname}[1]))`})})),!hasScales&&scaleTriggers.length&&signals.push({name:name+"_scale_trigger",value:{},on:[{events:scaleTriggers.map((t=>({scale:t.scaleName}))),update:`${scaleTriggers.map((t=>t.expr)).join(" && ")} ? ${name+"_scale_trigger"} : {}`}]});const update=`unit: ${unitName(model)}, fields: ${fieldsSg}, values`;return signals.concat(Object.assign(Object.assign({name:name+TUPLE},init?{init:`{${update}: ${assembleInit(init)}}`}:{}),dataSignals.length?{on:[{events:[{signal:dataSignals.join(" || ")}],update:`${dataSignals.join(" && ")} ? {${update}: [${dataSignals}]} : null`}]}:{}))},marks:(model,selCmpt,marks)=>{const name=selCmpt.name,{x,y}=selCmpt.project.hasChannel,xvname=null==x?void 0:x.signals.visual,yvname=null==y?void 0:y.signals.visual,store=`data(${$(selCmpt.name+STORE)})`;if(selection_scales.defined(selCmpt)||!x&&!y)return marks;const update={x:void 0!==x?{signal:`${xvname}[0]`}:{value:0},y:void 0!==y?{signal:`${yvname}[0]`}:{value:0},x2:void 0!==x?{signal:`${xvname}[1]`}:{field:{group:"width"}},y2:void 0!==y?{signal:`${yvname}[1]`}:{field:{group:"height"}}};if("global"===selCmpt.resolve)for(const key of util_keys(update))update[key]=[Object.assign({test:`${store}.length && ${store}[0].unit === ${unitName(model)}`},update[key]),{value:0}];const _a=selCmpt.mark,{fill,fillOpacity,cursor}=_a,stroke=interval_rest(_a,["fill","fillOpacity","cursor"]),vgStroke=util_keys(stroke).reduce(((def,k)=>(def[k]=[{test:[void 0!==x&&`${xvname}[0] !== ${xvname}[1]`,void 0!==y&&`${yvname}[0] !== ${yvname}[1]`].filter((t=>t)).join(" && "),value:stroke[k]},{value:null}],def)),{});return[{name:`${name+BRUSH}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:fill},fillOpacity:{value:fillOpacity}},update}},...marks,{name:name+BRUSH,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},cursor?{cursor:{value:cursor}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},update),vgStroke)}}]}},selection_interval=interval_interval;function interval_events(selCmpt,cb){return selCmpt.events.reduce(((on,evt)=>evt.between?cb(on,evt):(log_warn(`${evt} is not an ordered event stream for interval selections.`),on)),[])}const point_point={defined:selCmpt=>"point"===selCmpt.type,signals:(model,selCmpt,signals)=>{var _a;const name=selCmpt.name,fieldsSg=name+"_tuple_fields",project=selCmpt.project,datum="(item().isVoronoi ? datum.datum : datum)",brushes=vals(null!==(_a=model.component.selection)&&void 0!==_a?_a:{}).reduce(((acc,cmpt)=>"interval"===cmpt.type?acc.concat(cmpt.name+BRUSH):acc),[]).map((b=>`indexof(item().mark.name, '${b}') < 0`)).join(" && "),test="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(brushes?` && ${brushes}`:"");let update=`unit: ${unitName(model)}, `;if(selCmpt.project.hasSelectionId)update+=`_vgsid_: ${datum}[${$("_vgsid_")}]`;else{update+=`fields: ${fieldsSg}, values: [${project.items.map((p=>{const fieldDef=model.fieldDef(p.channel);return(null==fieldDef?void 0:fieldDef.bin)?`[${datum}[${$(model.vgField(p.channel,{}))}], ${datum}[${$(model.vgField(p.channel,{binSuffix:"end"}))}]]`:`${datum}[${$(p.field)}]`})).join(", ")}]`}const events=selCmpt.events;return signals.concat([{name:name+TUPLE,on:events?[{events,update:`${test} ? {${update}} : null`,force:!0}]:[]}])}},selection_point=point_point;function wrapCondition(model,channelDef,vgChannel,refFn){const condition=isConditionalDef(channelDef)&&channelDef.condition,valueRef=refFn(channelDef);if(condition){const vgConditions=array(condition).map((c=>{const conditionValueRef=refFn(c);if(function isConditionalParameter(c){return c.param}(c)){const{param,empty}=c,test=parseSelectionPredicate(model,{param,empty});return Object.assign({test},conditionValueRef)}{const test=predicate_expression(model,c.test);return Object.assign({test},conditionValueRef)}}));return{[vgChannel]:[...vgConditions,...void 0!==valueRef?[valueRef]:[]]}}return void 0!==valueRef?{[vgChannel]:valueRef}:{}}function text_text(model,channel="text"){const channelDef=model.encoding[channel];return wrapCondition(model,channelDef,channel,(cDef=>textRef(cDef,model.config)))}function textRef(channelDef,config,expr="datum"){if(channelDef){if(isValueDef(channelDef))return signalOrValueRef(channelDef.value);if(isFieldOrDatumDef(channelDef)){const{format,formatType}=getFormatMixins(channelDef);return formatSignalRef({fieldOrDatumDef:channelDef,format,formatType,expr,config})}}}function tooltip(model,opt={}){const{encoding,markDef,config,stack}=model,channelDef=encoding.tooltip;if(isArray(channelDef))return{tooltip:tooltipRefForEncoding({tooltip:channelDef},stack,config,opt)};{const datum=opt.reactiveGeom?"datum.datum":"datum";return wrapCondition(model,channelDef,"tooltip",(cDef=>{const tooltipRefFromChannelDef=textRef(cDef,config,datum);if(tooltipRefFromChannelDef)return tooltipRefFromChannelDef;if(null===cDef)return;let markTooltip=getMarkPropOrConfig("tooltip",markDef,config);return!0===markTooltip&&(markTooltip={content:"encoding"}),isString(markTooltip)?{value:markTooltip}:isObject(markTooltip)?isSignalRef(markTooltip)?markTooltip:"encoding"===markTooltip.content?tooltipRefForEncoding(encoding,stack,config,opt):{signal:datum}:void 0}))}}function tooltipData(encoding,stack,config,{reactiveGeom}={}){const toSkip={},expr=reactiveGeom?"datum.datum":"datum",tuples=[];function add(fDef,channel){const mainChannel=getMainRangeChannel(channel),fieldDef=isTypedFieldDef(fDef)?fDef:Object.assign(Object.assign({},fDef),{type:encoding[mainChannel].type}),key=array(fieldDef.title||defaultTitle(fieldDef,config)).join(", ");let value;if(isXorY(channel)){const channel2="x"===channel?"x2":"y2",fieldDef2=getFieldDef(encoding[channel2]);if(isBinned(fieldDef.bin)&&fieldDef2){const startField=vgField(fieldDef,{expr}),endField=vgField(fieldDef2,{expr}),{format,formatType}=getFormatMixins(fieldDef);value=binFormatExpression(startField,endField,format,formatType,config),toSkip[channel2]=!0}}if((isXorY(channel)||channel===THETA||channel===RADIUS)&&stack&&stack.fieldChannel===channel&&"normalize"===stack.offset){const{format,formatType}=getFormatMixins(fieldDef);value=formatSignalRef({fieldOrDatumDef:fieldDef,format,formatType,expr,config,normalizeStack:!0}).signal}null!=value||(value=textRef(fieldDef,config,expr).signal),tuples.push({channel,key,value})}forEach(encoding,((channelDef,channel)=>{isFieldDef(channelDef)?add(channelDef,channel):hasConditionalFieldDef(channelDef)&&add(channelDef.condition,channel)}));const out={};for(const{channel,key,value}of tuples)toSkip[channel]||out[key]||(out[key]=value);return out}function tooltipRefForEncoding(encoding,stack,config,{reactiveGeom}={}){const data=tooltipData(encoding,stack,config,{reactiveGeom}),keyValues=entries(data).map((([key,value])=>`"${key}": ${value}`));return keyValues.length>0?{signal:`{${keyValues.join(", ")}}`}:void 0}function aria(model){const{markDef,config}=model,enableAria=getMarkPropOrConfig("aria",markDef,config);return!1===enableAria?{}:Object.assign(Object.assign(Object.assign({},enableAria?{aria:enableAria}:{}),function ariaRoleDescription(model){const{mark,markDef,config}=model;if(!1===config.aria)return{};const ariaRoleDesc=getMarkPropOrConfig("ariaRoleDescription",markDef,config);if(null!=ariaRoleDesc)return{ariaRoleDescription:{value:ariaRoleDesc}};return mark in VG_MARK_INDEX?{}:{ariaRoleDescription:{value:mark}}}(model)),function description(model){const{encoding,markDef,config,stack}=model,channelDef=encoding.description;if(channelDef)return wrapCondition(model,channelDef,"description",(cDef=>textRef(cDef,model.config)));const descriptionValue=getMarkPropOrConfig("description",markDef,config);if(null!=descriptionValue)return{description:signalOrValueRef(descriptionValue)};if(!1===config.aria)return{};const data=tooltipData(encoding,stack,config);if(isEmpty(data))return;return{description:{signal:entries(data).map((([key,value],index)=>`"${index>0?"; ":""}${key}: " + (${value})`)).join(" + ")}}}(model))}function nonPosition(channel,model,opt={}){const{markDef,encoding,config}=model,{vgChannel}=opt;let{defaultRef,defaultValue}=opt;void 0===defaultRef&&(null!=defaultValue||(defaultValue=getMarkPropOrConfig(channel,markDef,config,{vgChannel,ignoreVgConfig:!0})),void 0!==defaultValue&&(defaultRef=signalOrValueRef(defaultValue)));const channelDef=encoding[channel];return wrapCondition(model,channelDef,null!=vgChannel?vgChannel:channel,(cDef=>midPoint({channel,channelDef:cDef,markDef,config,scaleName:model.scaleName(channel),scale:model.getScaleComponent(channel),stack:null,defaultRef})))}function color_color(model,opt={filled:void 0}){var _a,_b,_c,_d;const{markDef,encoding,config}=model,{type:markType}=markDef,filled=null!==(_a=opt.filled)&&void 0!==_a?_a:getMarkPropOrConfig("filled",markDef,config),transparentIfNeeded=util_contains(["bar","point","circle","square","geoshape"],markType)?"transparent":void 0,defaultFill=null!==(_c=null!==(_b=getMarkPropOrConfig(!0===filled?"color":void 0,markDef,config,{vgChannel:"fill"}))&&void 0!==_b?_b:config.mark[!0===filled&&"color"])&&void 0!==_c?_c:transparentIfNeeded,defaultStroke=null!==(_d=getMarkPropOrConfig(!1===filled?"color":void 0,markDef,config,{vgChannel:"stroke"}))&&void 0!==_d?_d:config.mark[!1===filled&&"color"],colorVgChannel=filled?"fill":"stroke",fillStrokeMarkDefAndConfig=Object.assign(Object.assign({},defaultFill?{fill:signalOrValueRef(defaultFill)}:{}),defaultStroke?{stroke:signalOrValueRef(defaultStroke)}:{});return markDef.color&&(filled?markDef.fill:markDef.stroke)&&log_warn(droppingColor("property",{fill:"fill"in markDef,stroke:"stroke"in markDef})),Object.assign(Object.assign(Object.assign(Object.assign({},fillStrokeMarkDefAndConfig),nonPosition("color",model,{vgChannel:colorVgChannel,defaultValue:filled?defaultFill:defaultStroke})),nonPosition("fill",model,{defaultValue:encoding.fill?defaultFill:void 0})),nonPosition("stroke",model,{defaultValue:encoding.stroke?defaultStroke:void 0}))}function positionOffset({channel:baseChannel,markDef,encoding={},model,bandPosition}){const channel=`${baseChannel}Offset`,defaultValue=markDef[channel],channelDef=encoding[channel];if(("xOffset"===channel||"yOffset"===channel)&&channelDef){return{offsetType:"encoding",offset:midPoint({channel,channelDef,markDef,config:null==model?void 0:model.config,scaleName:model.scaleName(channel),scale:model.getScaleComponent(channel),stack:null,defaultRef:signalOrValueRef(defaultValue),bandPosition})}}const markDefOffsetValue=markDef[channel];return markDefOffsetValue?{offsetType:"visual",offset:markDefOffsetValue}:{}}function pointPosition(channel,model,{defaultPos,vgChannel}){const{encoding,markDef,config,stack}=model,channelDef=encoding[channel],channel2Def=encoding[getSecondaryRangeChannel(channel)],scaleName=model.scaleName(channel),scale=model.getScaleComponent(channel),{offset,offsetType}=positionOffset({channel,markDef,encoding,model,bandPosition:.5}),defaultRef=pointPositionDefaultRef({model,defaultPos,channel,scaleName,scale}),valueRef=!channelDef&&isXorY(channel)&&(encoding.latitude||encoding.longitude)?{field:model.getName(channel)}:function positionRef(params){const{channel,channelDef,scaleName,stack,offset,markDef}=params;if(isFieldOrDatumDef(channelDef)&&stack&&channel===stack.fieldChannel){if(isFieldDef(channelDef)){let bandPosition=channelDef.bandPosition;if(void 0!==bandPosition||"text"!==markDef.type||"radius"!==channel&&"theta"!==channel||(bandPosition=.5),void 0!==bandPosition)return interpolatedSignalRef({scaleName,fieldOrDatumDef:channelDef,startSuffix:"start",bandPosition,offset})}return valueRefForFieldOrDatumDef(channelDef,scaleName,{suffix:"end"},{offset})}return midPointRefWithPositionInvalidTest(params)}({channel,channelDef,channel2Def,markDef,config,scaleName,scale,stack,offset,defaultRef,bandPosition:"encoding"===offsetType?0:void 0});return valueRef?{[vgChannel||channel]:valueRef}:void 0}function pointPositionDefaultRef({model,defaultPos,channel,scaleName,scale}){const{markDef,config}=model;return()=>{const mainChannel=getMainRangeChannel(channel),vgChannel=getVgPositionChannel(channel),definedValueOrConfig=getMarkPropOrConfig(channel,markDef,config,{vgChannel});if(void 0!==definedValueOrConfig)return widthHeightValueOrSignalRef(channel,definedValueOrConfig);switch(defaultPos){case"zeroOrMin":case"zeroOrMax":if(scaleName){const scaleType=scale.get("type");if(util_contains([ScaleType_LOG,ScaleType_TIME,ScaleType_UTC],scaleType));else if(scale.domainDefinitelyIncludesZero())return{scale:scaleName,value:0}}if("zeroOrMin"===defaultPos)return"y"===mainChannel?{field:{group:"height"}}:{value:0};switch(mainChannel){case"radius":return{signal:`min(${model.width.signal},${model.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const sizeRef=model[getSizeChannel(channel)];return Object.assign(Object.assign({},sizeRef),{mult:.5})}}}}const ALIGNED_X_CHANNEL={left:"x",center:"xc",right:"x2"},BASELINED_Y_CHANNEL={top:"y",middle:"yc",bottom:"y2"};function vgAlignedPositionChannel(channel,markDef,config,defaultAlign="middle"){if("radius"===channel||"theta"===channel)return getVgPositionChannel(channel);const alignChannel="x"===channel?"align":"baseline",align=getMarkPropOrConfig(alignChannel,markDef,config);let alignExcludingSignal;return isSignalRef(align)?(log_warn(function rangeMarkAlignmentCannotBeExpression(align){return`The ${align} for range marks cannot be an expression`}(alignChannel)),alignExcludingSignal=void 0):alignExcludingSignal=align,"x"===channel?ALIGNED_X_CHANNEL[alignExcludingSignal||("top"===defaultAlign?"left":"center")]:BASELINED_Y_CHANNEL[alignExcludingSignal||defaultAlign]}function pointOrRangePosition(channel,model,{defaultPos,defaultPos2,range}){return range?rangePosition(channel,model,{defaultPos,defaultPos2}):pointPosition(channel,model,{defaultPos})}function rangePosition(channel,model,{defaultPos,defaultPos2}){const{markDef,config}=model,channel2=getSecondaryRangeChannel(channel),sizeChannel=getSizeChannel(channel),pos2Mixins=function pointPosition2OrSize(model,defaultPos,channel){const{encoding,mark,markDef,stack,config}=model,baseChannel=getMainRangeChannel(channel),sizeChannel=getSizeChannel(channel),vgChannel=getVgPositionChannel(channel),channelDef=encoding[baseChannel],scaleName=model.scaleName(baseChannel),scale=model.getScaleComponent(baseChannel),{offset}=positionOffset(channel in encoding||channel in markDef?{channel,markDef,encoding,model}:{channel:baseChannel,markDef,encoding,model});if(!channelDef&&("x2"===channel||"y2"===channel)&&(encoding.latitude||encoding.longitude)){const vgSizeChannel=getSizeChannel(channel),size=model.markDef[vgSizeChannel];return null!=size?{[vgSizeChannel]:{value:size}}:{[vgChannel]:{field:model.getName(channel)}}}const valueRef=function position2Ref({channel,channelDef,channel2Def,markDef,config,scaleName,scale,stack,offset,defaultRef}){if(isFieldOrDatumDef(channelDef)&&stack&&channel.charAt(0)===stack.fieldChannel.charAt(0))return valueRefForFieldOrDatumDef(channelDef,scaleName,{suffix:"start"},{offset});return midPointRefWithPositionInvalidTest({channel,channelDef:channel2Def,scaleName,scale,stack,markDef,config,offset,defaultRef})}({channel,channelDef,channel2Def:encoding[channel],markDef,config,scaleName,scale,stack,offset,defaultRef:void 0});if(void 0!==valueRef)return{[vgChannel]:valueRef};return position2orSize(channel,markDef)||position2orSize(channel,{[channel]:getMarkStyleConfig(channel,markDef,config.style),[sizeChannel]:getMarkStyleConfig(sizeChannel,markDef,config.style)})||position2orSize(channel,config[mark])||position2orSize(channel,config.mark)||{[vgChannel]:pointPositionDefaultRef({model,defaultPos,channel,scaleName,scale})()}}(model,defaultPos2,channel2),vgChannel=pos2Mixins[sizeChannel]?vgAlignedPositionChannel(channel,markDef,config):getVgPositionChannel(channel);return Object.assign(Object.assign({},pointPosition(channel,model,{defaultPos,vgChannel})),pos2Mixins)}function position2orSize(channel,markDef){const sizeChannel=getSizeChannel(channel),vgChannel=getVgPositionChannel(channel);if(void 0!==markDef[vgChannel])return{[vgChannel]:widthHeightValueOrSignalRef(channel,markDef[vgChannel])};if(void 0!==markDef[channel])return{[vgChannel]:widthHeightValueOrSignalRef(channel,markDef[channel])};if(markDef[sizeChannel]){const dimensionSize=markDef[sizeChannel];if(!isRelativeBandSize(dimensionSize))return{[sizeChannel]:widthHeightValueOrSignalRef(channel,dimensionSize)};log_warn(function relativeBandSizeNotSupported(sizeChannel){return`Position range does not support relative band size for ${sizeChannel}.`}(sizeChannel))}}function rectPosition(model,channel){var _a,_b;const{config,encoding,markDef}=model,mark=markDef.type,channel2=getSecondaryRangeChannel(channel),sizeChannel=getSizeChannel(channel),channelDef=encoding[channel],channelDef2=encoding[channel2],scale=model.getScaleComponent(channel),scaleType=scale?scale.get("type"):void 0,orient=markDef.orient,hasSizeDef=null!==(_b=null!==(_a=encoding[sizeChannel])&&void 0!==_a?_a:encoding.size)&&void 0!==_b?_b:getMarkPropOrConfig("size",markDef,config,{vgChannel:sizeChannel}),isBarBand="bar"===mark&&("x"===channel?"vertical"===orient:"horizontal"===orient);return!isFieldDef(channelDef)||!(isBinning(channelDef.bin)||isBinned(channelDef.bin)||channelDef.timeUnit&&!channelDef2)||hasSizeDef&&!isRelativeBandSize(hasSizeDef)||hasDiscreteDomain(scaleType)?(isFieldOrDatumDef(channelDef)&&hasDiscreteDomain(scaleType)||isBarBand)&&!channelDef2?function positionAndSize(fieldDef,channel,model){const{markDef,encoding,config,stack}=model,orient=markDef.orient,scaleName=model.scaleName(channel),scale=model.getScaleComponent(channel),vgSizeChannel=getSizeChannel(channel),channel2=getSecondaryRangeChannel(channel),offsetScaleChannel=function getOffsetChannel(channel){switch(channel){case"x":return"xOffset";case"y":return"yOffset";case"x2":return"x2Offset";case"y2":return"y2Offset";case THETA:return"thetaOffset";case RADIUS:return"radiusOffset";case THETA2:return"theta2Offset";case"radius2":return"radius2Offset"}}(channel),offsetScaleName=model.scaleName(offsetScaleChannel),useVlSizeChannel="horizontal"===orient&&"y"===channel||"vertical"===orient&&"x"===channel;let sizeMixins;(encoding.size||markDef.size)&&(useVlSizeChannel?sizeMixins=nonPosition("size",model,{vgChannel:vgSizeChannel,defaultRef:signalOrValueRef(markDef.size)}):log_warn(function cannotApplySizeToNonOrientedMark(mark){return`Cannot apply size to non-oriented mark "${mark}".`}(markDef.type)));const hasSizeFromMarkOrEncoding=!!sizeMixins,bandSize=getBandSize({channel,fieldDef,markDef,config,scaleType:null==scale?void 0:scale.get("type"),useVlSizeChannel});sizeMixins=sizeMixins||{[vgSizeChannel]:defaultSizeRef(vgSizeChannel,offsetScaleName||scaleName,scale,config,bandSize)};const defaultBandAlign="band"===(null==scale?void 0:scale.get("type"))&&isRelativeBandSize(bandSize)&&!hasSizeFromMarkOrEncoding?"top":"middle",vgChannel=vgAlignedPositionChannel(channel,markDef,config,defaultBandAlign),center="xc"===vgChannel||"yc"===vgChannel,{offset,offsetType}=positionOffset({channel,markDef,encoding,model,bandPosition:center?.5:0}),posRef=midPointRefWithPositionInvalidTest({channel,channelDef:fieldDef,markDef,config,scaleName,scale,stack,offset,defaultRef:pointPositionDefaultRef({model,defaultPos:"mid",channel,scaleName,scale}),bandPosition:center?"encoding"===offsetType?0:.5:isSignalRef(bandSize)?{signal:`(1-${bandSize})/2`}:isRelativeBandSize(bandSize)?(1-bandSize.band)/2:0});if(vgSizeChannel)return Object.assign({[vgChannel]:posRef},sizeMixins);{const vgChannel2=getVgPositionChannel(channel2),sizeRef=sizeMixins[vgSizeChannel],sizeOffset=offset?Object.assign(Object.assign({},sizeRef),{offset}):sizeRef;return{[vgChannel]:posRef,[vgChannel2]:isArray(posRef)?[posRef[0],Object.assign(Object.assign({},posRef[1]),{offset:sizeOffset})]:Object.assign(Object.assign({},posRef),{offset:sizeOffset})}}}(channelDef,channel,model):rangePosition(channel,model,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function rectBinPosition({fieldDef,fieldDef2,channel,model}){var _a,_b,_c;const{config,markDef,encoding}=model,scale=model.getScaleComponent(channel),scaleName=model.scaleName(channel),scaleType=scale?scale.get("type"):void 0,reverse=scale.get("reverse"),bandSize=getBandSize({channel,fieldDef,markDef,config,scaleType}),axis=null===(_a=model.component.axes[channel])||void 0===_a?void 0:_a[0],axisTranslate=null!==(_b=null==axis?void 0:axis.get("translate"))&&void 0!==_b?_b:.5,spacing=isXorY(channel)&&null!==(_c=getMarkPropOrConfig("binSpacing",markDef,config))&&void 0!==_c?_c:0,channel2=getSecondaryRangeChannel(channel),vgChannel=getVgPositionChannel(channel),vgChannel2=getVgPositionChannel(channel2),{offset}=positionOffset({channel,markDef,encoding,model,bandPosition:0}),bandPosition=isSignalRef(bandSize)?{signal:`(1-${bandSize.signal})/2`}:isRelativeBandSize(bandSize)?(1-bandSize.band)/2:.5;if(isBinning(fieldDef.bin)||fieldDef.timeUnit)return{[vgChannel2]:rectBinRef({fieldDef,scaleName,bandPosition,offset:getBinSpacing(channel2,spacing,reverse,axisTranslate,offset)}),[vgChannel]:rectBinRef({fieldDef,scaleName,bandPosition:isSignalRef(bandPosition)?{signal:`1-${bandPosition.signal}`}:1-bandPosition,offset:getBinSpacing(channel,spacing,reverse,axisTranslate,offset)})};if(isBinned(fieldDef.bin)){const startRef=valueRefForFieldOrDatumDef(fieldDef,scaleName,{},{offset:getBinSpacing(channel2,spacing,reverse,axisTranslate,offset)});if(isFieldDef(fieldDef2))return{[vgChannel2]:startRef,[vgChannel]:valueRefForFieldOrDatumDef(fieldDef2,scaleName,{},{offset:getBinSpacing(channel,spacing,reverse,axisTranslate,offset)})};if(isBinParams(fieldDef.bin)&&fieldDef.bin.step)return{[vgChannel2]:startRef,[vgChannel]:{signal:`scale("${scaleName}", ${vgField(fieldDef,{expr:"datum"})} + ${fieldDef.bin.step})`,offset:getBinSpacing(channel,spacing,reverse,axisTranslate,offset)}}}return void log_warn(channelRequiredForBinned(channel2))}({fieldDef:channelDef,fieldDef2:channelDef2,channel,model})}function defaultSizeRef(sizeChannel,scaleName,scale,config,bandSize){if(isRelativeBandSize(bandSize)){if(!scale)return{mult:bandSize.band,field:{group:sizeChannel}};{const scaleType=scale.get("type");if("band"===scaleType){let bandWidth=`bandwidth('${scaleName}')`;return 1!==bandSize.band&&(bandWidth=`${bandSize.band} * ${bandWidth}`),{signal:`max(0.25, ${bandWidth})`}}1!==bandSize.band&&(log_warn(function cannotUseRelativeBandSizeWithNonBandScale(scaleType){return`Cannot use the relative band size with ${scaleType} scale.`}(scaleType)),bandSize=void 0)}}else{if(isSignalRef(bandSize))return bandSize;if(bandSize)return{value:bandSize}}if(scale){const scaleRange=scale.get("range");if(isVgRangeStep(scaleRange)&&isNumber(scaleRange.step))return{value:scaleRange.step-2}}return{value:getViewConfigDiscreteStep(config.view,sizeChannel)-2}}function getBinSpacing(channel,spacing,reverse,translate,offset){if(isPolarPositionChannel(channel))return 0;const spacingOffset="x"===channel||"y2"===channel?-spacing/2:spacing/2;if(isSignalRef(reverse)||isSignalRef(offset)||isSignalRef(translate)){const reverseExpr=signalOrStringValue(reverse),offsetExpr=signalOrStringValue(offset),translateExpr=signalOrStringValue(translate);return{signal:(translateExpr?`${translateExpr} + `:"")+(reverseExpr?`(${reverseExpr} ? -1 : 1) * `:"")+(offsetExpr?`(${offsetExpr} + ${spacingOffset})`:spacingOffset)}}return offset=offset||0,translate+(reverse?-offset-spacingOffset:+offset+spacingOffset)}function rectBinRef({fieldDef,scaleName,bandPosition,offset}){return interpolatedSignalRef({scaleName,fieldOrDatumDef:fieldDef,bandPosition,offset})}const ALWAYS_IGNORE=new Set(["aria","width","height"]);function baseEncodeEntry(model,ignore){const{fill,stroke}="include"===ignore.color?color_color(model):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function markDefProperties(mark,ignore){return VG_MARK_CONFIGS.reduce(((m,prop)=>(ALWAYS_IGNORE.has(prop)||void 0===mark[prop]||"ignore"===ignore[prop]||(m[prop]=signalOrValueRef(mark[prop])),m)),{})}(model.markDef,ignore)),wrapAllFieldsInvalid(model,"fill",fill)),wrapAllFieldsInvalid(model,"stroke",stroke)),nonPosition("opacity",model)),nonPosition("fillOpacity",model)),nonPosition("strokeOpacity",model)),nonPosition("strokeWidth",model)),nonPosition("strokeDash",model)),function zindex(model){const{encoding,mark}=model,order=encoding.order;return!isPathMark(mark)&&isValueDef(order)?wrapCondition(model,order,"zindex",(cd=>signalOrValueRef(cd.value))):{}}(model)),tooltip(model)),text_text(model,"href")),aria(model))}function wrapAllFieldsInvalid(model,channel,valueRef){const{config,mark,markDef}=model;if("hide"===getMarkPropOrConfig("invalid",markDef,config)&&valueRef&&!isPathMark(mark)){const test=function allFieldsInvalidPredicate(model,{invalid=!1,channels}){const filterIndex=channels.reduce(((aggregator,channel)=>{const scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const scaleType=scaleComponent.get("type"),field=model.vgField(channel,{expr:"datum"});field&&hasContinuousDomain(scaleType)&&(aggregator[field]=!0)}return aggregator}),{}),fields=util_keys(filterIndex);if(fields.length>0){const op=invalid?"||":"&&";return fields.map((field=>fieldInvalidPredicate(field,invalid))).join(` ${op} `)}return}(model,{invalid:!0,channels:SCALE_CHANNELS});if(test)return{[channel]:[{test,value:null},...array(valueRef)]}}return valueRef?{[channel]:valueRef}:{}}function defined(model){const{config,markDef}=model;if(getMarkPropOrConfig("invalid",markDef,config)){const signal=function defined_allFieldsInvalidPredicate(model,{invalid=!1,channels}){const filterIndex=channels.reduce(((aggregator,channel)=>{var _a;const scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const scaleType=scaleComponent.get("type"),field=model.vgField(channel,{expr:"datum",binSuffix:(null===(_a=model.stack)||void 0===_a?void 0:_a.impute)?"mid":void 0});field&&hasContinuousDomain(scaleType)&&(aggregator[field]=!0)}return aggregator}),{}),fields=util_keys(filterIndex);if(fields.length>0){const op=invalid?"||":"&&";return fields.map((field=>fieldInvalidPredicate(field,invalid))).join(` ${op} `)}return}(model,{channels:POSITION_SCALE_CHANNELS});if(signal)return{defined:{signal}}}return{}}function valueIfDefined(prop,value){if(void 0!==value)return{[prop]:signalOrValueRef(value)}}const nearest={defined:selCmpt=>"point"===selCmpt.type&&selCmpt.nearest,parse:(model,selCmpt)=>{if(selCmpt.events)for(const s of selCmpt.events)s.markname=model.getName("voronoi")},marks:(model,selCmpt,marks)=>{const{x,y}=selCmpt.project.hasChannel,markType=model.mark;if(isPathMark(markType))return log_warn(function nearestNotSupportForContinuous(mark){return`The "nearest" transform is not supported for ${mark} marks.`}(markType)),marks;const cellDef={name:model.getName("voronoi"),type:"path",interactive:!0,from:{data:model.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},tooltip(model,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:x||!y?"datum.datum.x || 0":"0"},y:{expr:y||!x?"datum.datum.y || 0":"0"},size:[model.getSizeSignalRef("width"),model.getSizeSignalRef("height")]}]};let index=0,exists=!1;return marks.forEach(((mark,i)=>{var _a;const name=null!==(_a=mark.name)&&void 0!==_a?_a:"";name===model.component.mark[0].name?index=i:name.indexOf("voronoi")>=0&&(exists=!0)})),exists||marks.splice(index+1,0,cellDef),marks}},selection_nearest=nearest,inputBindings={defined:selCmpt=>"point"===selCmpt.type&&"global"===selCmpt.resolve&&selCmpt.bind&&"scales"!==selCmpt.bind&&!isLegendBinding(selCmpt.bind),parse:(model,selCmpt,selDef)=>disableDirectManipulation(selCmpt,selDef),topLevelSignals:(model,selCmpt,signals)=>{const name=selCmpt.name,proj=selCmpt.project,bind=selCmpt.bind,init=selCmpt.init&&selCmpt.init[0],datum=selection_nearest.defined(selCmpt)?"(item().isVoronoi ? datum.datum : datum)":"datum";return proj.items.forEach(((p,i)=>{var _a,_b;const sgname=varName(`${name}_${p.field}`),hasSignal=signals.filter((s=>s.name===sgname));hasSignal.length||signals.unshift(Object.assign(Object.assign({name:sgname},init?{init:assembleInit(init[i])}:{value:null}),{on:selCmpt.events?[{events:selCmpt.events,update:`datum && item().mark.marktype !== 'group' ? ${datum}[${$(p.field)}] : null`}]:[],bind:null!==(_b=null!==(_a=bind[p.field])&&void 0!==_a?_a:bind[p.channel])&&void 0!==_b?_b:bind}))})),signals},signals:(model,selCmpt,signals)=>{const name=selCmpt.name,proj=selCmpt.project,signal=signals.filter((s=>s.name===name+TUPLE))[0],fields=name+"_tuple_fields",values=proj.items.map((p=>varName(`${name}_${p.field}`))),valid=values.map((v=>`${v} !== null`)).join(" && ");return values.length&&(signal.update=`${valid} ? {fields: ${fields}, values: [${values.join(", ")}]} : null`),delete signal.value,delete signal.on,signals}},inputs=inputBindings,selection_toggle={defined:selCmpt=>"point"===selCmpt.type&&!!selCmpt.toggle,signals:(model,selCmpt,signals)=>signals.concat({name:selCmpt.name+"_toggle",value:!1,on:[{events:selCmpt.events,update:selCmpt.toggle}]}),modifyExpr:(model,selCmpt)=>{const tpl=selCmpt.name+TUPLE,signal=selCmpt.name+"_toggle";return`${signal} ? null : ${tpl}, `+("global"===selCmpt.resolve?`${signal} ? null : true, `:`${signal} ? null : {unit: ${unitName(model)}}, `)+`${signal} ? ${tpl} : null`}},clear={defined:selCmpt=>void 0!==selCmpt.clear&&!1!==selCmpt.clear,parse:(model,selCmpt)=>{selCmpt.clear&&(selCmpt.clear=isString(selCmpt.clear)?eventSelector(selCmpt.clear,"view"):selCmpt.clear)},topLevelSignals:(model,selCmpt,signals)=>{if(inputs.defined(selCmpt))for(const proj of selCmpt.project.items){const idx=signals.findIndex((n=>n.name===varName(`${selCmpt.name}_${proj.field}`)));-1!==idx&&signals[idx].on.push({events:selCmpt.clear,update:"null"})}return signals},signals:(model,selCmpt,signals)=>{function addClear(idx,update){-1!==idx&&signals[idx].on&&signals[idx].on.push({events:selCmpt.clear,update})}if("interval"===selCmpt.type)for(const proj of selCmpt.project.items){const vIdx=signals.findIndex((n=>n.name===proj.signals.visual));if(addClear(vIdx,"[0, 0]"),-1===vIdx){addClear(signals.findIndex((n=>n.name===proj.signals.data)),"null")}}else{let tIdx=signals.findIndex((n=>n.name===selCmpt.name+TUPLE));addClear(tIdx,"null"),selection_toggle.defined(selCmpt)&&(tIdx=signals.findIndex((n=>n.name===selCmpt.name+"_toggle")),addClear(tIdx,"false"))}return signals}},legendBindings={defined:selCmpt=>{const spec="global"===selCmpt.resolve&&selCmpt.bind&&isLegendBinding(selCmpt.bind),projLen=1===selCmpt.project.items.length&&"_vgsid_"!==selCmpt.project.items[0].field;return spec&&!projLen&&log_warn("Legend bindings are only supported for selections over an individual field or encoding channel."),spec&&projLen},parse:(model,selCmpt,selDef)=>{var _a;const selDef_=duplicate(selDef);if(selDef_.select=isString(selDef_.select)?{type:selDef_.select,toggle:selCmpt.toggle}:Object.assign(Object.assign({},selDef_.select),{toggle:selCmpt.toggle}),disableDirectManipulation(selCmpt,selDef_),isObject(selDef.select)&&(selDef.select.on||selDef.select.clear)){const legendFilter='event.item && indexof(event.item.mark.role, "legend") < 0';for(const evt of selCmpt.events)evt.filter=array(null!==(_a=evt.filter)&&void 0!==_a?_a:[]),evt.filter.includes(legendFilter)||evt.filter.push(legendFilter)}const evt=isLegendStreamBinding(selCmpt.bind)?selCmpt.bind.legend:"click",stream=isString(evt)?eventSelector(evt,"view"):array(evt);selCmpt.bind={legend:{merge:stream}}},topLevelSignals:(model,selCmpt,signals)=>{const selName=selCmpt.name,stream=isLegendStreamBinding(selCmpt.bind)&&selCmpt.bind.legend,markName=name=>s=>{const ds=duplicate(s);return ds.markname=name,ds};for(const proj of selCmpt.project.items){if(!proj.hasLegend)continue;const prefix=`${varName(proj.field)}_legend`,sgName=`${selName}_${prefix}`,hasSignal=signals.filter((s=>s.name===sgName));if(0===hasSignal.length){const events=stream.merge.map(markName(`${prefix}_symbols`)).concat(stream.merge.map(markName(`${prefix}_labels`))).concat(stream.merge.map(markName(`${prefix}_entries`)));signals.unshift(Object.assign(Object.assign({name:sgName},selCmpt.init?{}:{value:null}),{on:[{events,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:stream.merge,update:`!event.item || !datum ? null : ${sgName}`,force:!0}]}))}}return signals},signals:(model,selCmpt,signals)=>{const name=selCmpt.name,proj=selCmpt.project,tuple=signals.find((s=>s.name===name+TUPLE)),fields=name+"_tuple_fields",values=proj.items.filter((p=>p.hasLegend)).map((p=>varName(`${name}_${varName(p.field)}_legend`))),valid=values.map((v=>`${v} !== null`)).join(" && "),update=`${valid} ? {fields: ${fields}, values: [${values.join(", ")}]} : null`;selCmpt.events&&values.length>0?tuple.on.push({events:values.map((signal=>({signal}))),update}):values.length>0&&(tuple.update=update,delete tuple.value,delete tuple.on);const toggle=signals.find((s=>s.name===name+"_toggle")),events=isLegendStreamBinding(selCmpt.bind)&&selCmpt.bind.legend;return toggle&&(selCmpt.events?toggle.on.push(Object.assign(Object.assign({},toggle.on[0]),{events})):toggle.on[0].events=events),signals}};const DELTA="_translate_delta",translate_translate={defined:selCmpt=>"interval"===selCmpt.type&&selCmpt.translate,signals:(model,selCmpt,signals)=>{const name=selCmpt.name,hasScales=selection_scales.defined(selCmpt),anchor=name+"_translate_anchor",{x,y}=selCmpt.project.hasChannel;let events=eventSelector(selCmpt.translate,"scope");return hasScales||(events=events.map((e=>(e.between[0].markname=name+BRUSH,e)))),signals.push({name:anchor,value:{},on:[{events:events.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==x?`, extent_x: ${hasScales?scales_domain(model,"x"):`slice(${x.signals.visual})`}`:"")+(void 0!==y?`, extent_y: ${hasScales?scales_domain(model,"y"):`slice(${y.signals.visual})`}`:"")+"}"}]},{name:name+DELTA,value:{},on:[{events,update:`{x: ${anchor}.x - x(unit), y: ${anchor}.y - y(unit)}`}]}),void 0!==x&&onDelta(model,selCmpt,x,"width",signals),void 0!==y&&onDelta(model,selCmpt,y,"height",signals),signals}};function onDelta(model,selCmpt,proj,size,signals){var _a,_b;const name=selCmpt.name,anchor=name+"_translate_anchor",delta=name+DELTA,channel=proj.channel,hasScales=selection_scales.defined(selCmpt),signal=signals.filter((s=>s.name===proj.signals[hasScales?"data":"visual"]))[0],sizeSg=model.getSizeSignalRef(size).signal,scaleCmpt=model.getScaleComponent(channel),scaleType=scaleCmpt.get("type"),reversed=scaleCmpt.get("reverse"),extent=`${anchor}.extent_${channel}`,update=`${hasScales?"log"===scaleType?"panLog":"symlog"===scaleType?"panSymlog":"pow"===scaleType?"panPow":"panLinear":"panLinear"}(${extent}, ${`${hasScales?"x"===channel?reversed?"":"-":reversed?"-":"":""}${delta}.${channel} / ${hasScales?`${sizeSg}`:`span(${extent})`}`}${hasScales?"pow"===scaleType?`, ${null!==(_a=scaleCmpt.get("exponent"))&&void 0!==_a?_a:1}`:"symlog"===scaleType?`, ${null!==(_b=scaleCmpt.get("constant"))&&void 0!==_b?_b:1}`:"":""})`;signal.on.push({events:{signal:delta},update:hasScales?update:`clampRange(${update}, 0, ${sizeSg})`})}const zoom_zoom={defined:selCmpt=>"interval"===selCmpt.type&&selCmpt.zoom,signals:(model,selCmpt,signals)=>{const name=selCmpt.name,hasScales=selection_scales.defined(selCmpt),delta=name+"_zoom_delta",{x,y}=selCmpt.project.hasChannel,sx=$(model.scaleName("x")),sy=$(model.scaleName("y"));let events=eventSelector(selCmpt.zoom,"scope");return hasScales||(events=events.map((e=>(e.markname=name+BRUSH,e)))),signals.push({name:name+"_zoom_anchor",on:[{events,update:hasScales?"{"+[sx?`x: invert(${sx}, x(unit))`:"",sy?`y: invert(${sy}, y(unit))`:""].filter((expr=>!!expr)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:delta,on:[{events,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==x&&zoom_onDelta(model,selCmpt,x,"width",signals),void 0!==y&&zoom_onDelta(model,selCmpt,y,"height",signals),signals}};function zoom_onDelta(model,selCmpt,proj,size,signals){var _a,_b;const name=selCmpt.name,channel=proj.channel,hasScales=selection_scales.defined(selCmpt),signal=signals.filter((s=>s.name===proj.signals[hasScales?"data":"visual"]))[0],sizeSg=model.getSizeSignalRef(size).signal,scaleCmpt=model.getScaleComponent(channel),scaleType=scaleCmpt.get("type"),base=hasScales?scales_domain(model,channel):signal.name,delta=name+"_zoom_delta",update=`${hasScales?"log"===scaleType?"zoomLog":"symlog"===scaleType?"zoomSymlog":"pow"===scaleType?"zoomPow":"zoomLinear":"zoomLinear"}(${base}, ${`${name}_zoom_anchor.${channel}`}, ${delta}${hasScales?"pow"===scaleType?`, ${null!==(_a=scaleCmpt.get("exponent"))&&void 0!==_a?_a:1}`:"symlog"===scaleType?`, ${null!==(_b=scaleCmpt.get("constant"))&&void 0!==_b?_b:1}`:"":""})`;signal.on.push({events:{signal:delta},update:hasScales?update:`clampRange(${update}, 0, ${sizeSg})`})}const STORE="_store",TUPLE="_tuple",MODIFY="_modify",VL_SELECTION_RESOLVE="vlSelectionResolve",selectionCompilers=[selection_point,selection_interval,selection_project,selection_toggle,inputs,selection_scales,legendBindings,clear,translate_translate,zoom_zoom,selection_nearest];function unitName(model,{escape}={escape:!0}){let name=escape?$(model.name):model.name;const facetModel=function getFacetModel(model){let parent=model.parent;for(;parent&&!isFacetModel(parent);)parent=parent.parent;return parent}(model);if(facetModel){const{facet}=facetModel;for(const channel of FACET_CHANNELS)facet[channel]&&(name+=` + '__facet_${channel}_' + (facet[${$(facetModel.vgField(channel))}])`)}return name}function requiresSelectionId(model){var _a;return vals(null!==(_a=model.component.selection)&&void 0!==_a?_a:{}).reduce(((identifier,selCmpt)=>identifier||selCmpt.project.hasSelectionId),!1)}function disableDirectManipulation(selCmpt,selDef){!isString(selDef.select)&&selDef.select.on||delete selCmpt.events,!isString(selDef.select)&&selDef.select.clear||delete selCmpt.clear,!isString(selDef.select)&&selDef.select.toggle||delete selCmpt.toggle}function getName(node){const name=[];return"Identifier"===node.type?[node.name]:"Literal"===node.type?[node.value]:("MemberExpression"===node.type&&(name.push(...getName(node.object)),name.push(...getName(node.property))),name)}function startsWithDatum(node){return"MemberExpression"===node.object.type?startsWithDatum(node.object):"datum"===node.object.name}function getDependentFields(expression){const ast=parser(expression),dependents=new Set;return ast.visit((node=>{"MemberExpression"===node.type&&startsWithDatum(node)&&dependents.add(getName(node).slice(1).join("."))})),dependents}class FilterNode extends DataFlowNode{constructor(parent,model,filter){super(parent),this.model=model,this.filter=filter,this.expr=predicate_expression(this.model,this.filter,this),this._dependentFields=getDependentFields(this.expr)}clone(){return new FilterNode(null,this.model,duplicate(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function parseSelectionPredicate(model,pred,dfnode,datum="datum"){const name=isString(pred)?pred:pred.param,vname=varName(name),store=$(vname+STORE);let selCmpt;try{selCmpt=model.getSelectionComponent(vname,name)}catch(e){return`!!${vname}`}if(selCmpt.project.timeUnit){const child=null!=dfnode?dfnode:model.component.data.raw,tunode=selCmpt.project.timeUnit.clone();child.parent?tunode.insertAsParentOf(child):child.parent=tunode}const test=`${selCmpt.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${store}, ${datum}${"global"===selCmpt.resolve?")":`, ${$(selCmpt.resolve)})`}`,length=`length(data(${store}))`;return!1===pred.empty?`${length} && ${test}`:`!${length} || ${test}`}function parseSelectionExtent(model,name,extent){const vname=varName(name),encoding=extent.encoding;let selCmpt,field=extent.field;try{selCmpt=model.getSelectionComponent(vname,name)}catch(e){return vname}if(encoding||field){if(encoding&&!field){const encodings=selCmpt.project.items.filter((p=>p.channel===encoding));!encodings.length||encodings.length>1?(field=selCmpt.project.items[0].field,log_warn((encodings.length?"Multiple ":"No ")+`matching ${$(encoding)} encoding found for selection ${$(extent.param)}. `+`Using "field": ${$(field)}.`)):field=encodings[0].field}}else field=selCmpt.project.items[0].field,selCmpt.project.items.length>1&&log_warn(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${$(field)}.`);return`${selCmpt.name}[${$(replacePathInField(field))}]`}function predicate_expression(model,filterOp,node){return logicalExpr(filterOp,(predicate=>isString(predicate)?predicate:function isSelectionPredicate(predicate){return null==predicate?void 0:predicate.param}(predicate)?parseSelectionPredicate(model,predicate,node):fieldFilterExpression(predicate)))}var axis_assemble_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function setAxisEncode(axis,part,vgProp,vgRef){var _a,_b,_c,_d,_e;null!==(_a=axis.encode)&&void 0!==_a||(axis.encode={}),null!==(_b=(_d=axis.encode)[part])&&void 0!==_b||(_d[part]={}),null!==(_c=(_e=axis.encode[part]).update)&&void 0!==_c||(_e.update={}),axis.encode[part].update[vgProp]=vgRef}function assembleAxis(axisCmpt,kind,config,opt={header:!1}){var _a,_b;const _c=axisCmpt.combine(),{disable,orient,scale,labelExpr,title,zindex}=_c,axis=axis_assemble_rest(_c,["disable","orient","scale","labelExpr","title","zindex"]);if(!disable){for(const prop in axis){const propType=AXIS_PROPERTY_TYPE[prop],propValue=axis[prop];if(propType&&propType!==kind&&"both"!==propType)delete axis[prop];else if(isConditionalAxisValue(propValue)){const{condition}=propValue,valueOrSignalRef=axis_assemble_rest(propValue,["condition"]),conditions=array(condition),propIndex=CONDITIONAL_AXIS_PROP_INDEX[prop];if(propIndex){const{vgProp,part}=propIndex,vgRef=[...conditions.map((c=>{const{test}=c,valueOrSignalCRef=axis_assemble_rest(c,["test"]);return Object.assign({test:predicate_expression(null,test)},valueOrSignalCRef)})),valueOrSignalRef];setAxisEncode(axis,part,vgProp,vgRef),delete axis[prop]}else if(null===propIndex){const signalRef={signal:conditions.map((c=>{const{test}=c,valueOrSignalCRef=axis_assemble_rest(c,["test"]);return`${predicate_expression(null,test)} ? ${exprFromValueRefOrSignalRef(valueOrSignalCRef)} : `})).join("")+exprFromValueRefOrSignalRef(valueOrSignalRef)};axis[prop]=signalRef}}else if(isSignalRef(propValue)){const propIndex=CONDITIONAL_AXIS_PROP_INDEX[prop];if(propIndex){const{vgProp,part}=propIndex;setAxisEncode(axis,part,vgProp,propValue),delete axis[prop]}}util_contains(["labelAlign","labelBaseline"],prop)&&null===axis[prop]&&delete axis[prop]}if("grid"===kind){if(!axis.grid)return;if(axis.encode){const{grid}=axis.encode;axis.encode=Object.assign({},grid?{grid}:{}),isEmpty(axis.encode)&&delete axis.encode}return Object.assign(Object.assign({scale,orient},axis),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined(zindex,0)})}{if(!opt.header&&axisCmpt.mainExtracted)return;if(void 0!==labelExpr){let expr=labelExpr;(null===(_b=null===(_a=axis.encode)||void 0===_a?void 0:_a.labels)||void 0===_b?void 0:_b.update)&&isSignalRef(axis.encode.labels.update.text)&&(expr=replaceAll(labelExpr,"datum.label",axis.encode.labels.update.text.signal)),setAxisEncode(axis,"labels","text",{signal:expr})}if(null===axis.labelAlign&&delete axis.labelAlign,axis.encode){for(const part of AXIS_PARTS)axisCmpt.hasAxisPart(part)||delete axis.encode[part];isEmpty(axis.encode)&&delete axis.encode}const titleString=function assembleTitle(title,config){if(title)return isArray(title)&&!isText(title)?title.map((fieldDef=>defaultTitle(fieldDef,config))).join(", "):title}(title,config);return Object.assign(Object.assign(Object.assign(Object.assign({scale,orient,grid:!1},titleString?{title:titleString}:{}),axis),!1===config.aria?{aria:!1}:{}),{zindex:getFirstDefined(zindex,0)})}}}function assembleAxisSignals(model){const{axes}=model.component,signals=[];for(const channel of POSITION_SCALE_CHANNELS)if(axes[channel])for(const axis of axes[channel])if(!axis.get("disable")&&!axis.get("gridScale")){const sizeType="x"===channel?"height":"width",update=model.getSizeSignalRef(sizeType).signal;sizeType!==update&&signals.push({name:sizeType,update})}return signals}function getAxisConfigFromConfigTypes(configTypes,config,channel,orient){return Object.assign.apply(null,[{},...configTypes.map((configType=>{if("axisOrient"===configType){const orient1="x"===channel?"bottom":"left",orientConfig1=config["x"===channel?"axisBottom":"axisLeft"]||{},orientConfig2=config["x"===channel?"axisTop":"axisRight"]||{},props=new Set([...util_keys(orientConfig1),...util_keys(orientConfig2)]),conditionalOrientAxisConfig={};for(const prop of props.values())conditionalOrientAxisConfig[prop]={signal:`${orient.signal} === "${orient1}" ? ${signalOrStringValue(orientConfig1[prop])} : ${signalOrStringValue(orientConfig2[prop])}`};return conditionalOrientAxisConfig}return config[configType]}))])}function getAxisConfigStyle(axisConfigTypes,config){var _a;const toMerge=[{}];for(const configType of axisConfigTypes){let style=null===(_a=config[configType])||void 0===_a?void 0:_a.style;if(style){style=array(style);for(const s of style)toMerge.push(config.style[s])}}return Object.assign.apply(null,toMerge)}function getAxisConfig(property,styleConfigIndex,style,axisConfigs={}){var _a;const styleConfig=getStyleConfig(property,style,styleConfigIndex);if(void 0!==styleConfig)return{configFrom:"style",configValue:styleConfig};for(const configFrom of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(_a=axisConfigs[configFrom])||void 0===_a?void 0:_a[property]))return{configFrom,configValue:axisConfigs[configFrom][property]};return{}}const axisRules={scale:({model,channel})=>model.scaleName(channel),format:({fieldOrDatumDef,config,axis})=>{const{format,formatType}=axis;return guideFormat(fieldOrDatumDef,fieldOrDatumDef.type,format,formatType,config,!0)},formatType:({axis,fieldOrDatumDef,scaleType})=>{const{formatType}=axis;return guideFormatType(formatType,fieldOrDatumDef,scaleType)},grid:({fieldOrDatumDef,axis,scaleType})=>{var _a;return null!==(_a=axis.grid)&&void 0!==_a?_a:function defaultGrid(scaleType,fieldDef){return!hasDiscreteDomain(scaleType)&&isFieldDef(fieldDef)&&!isBinning(null==fieldDef?void 0:fieldDef.bin)&&!isBinned(null==fieldDef?void 0:fieldDef.bin)}(scaleType,fieldOrDatumDef)},gridScale:({model,channel})=>function gridScale(model,channel){const gridChannel="x"===channel?"y":"x";if(model.getScaleComponent(gridChannel))return model.scaleName(gridChannel);return}(model,channel),labelAlign:({axis,labelAngle,orient,channel})=>axis.labelAlign||defaultLabelAlign(labelAngle,orient,channel),labelAngle:({labelAngle})=>labelAngle,labelBaseline:({axis,labelAngle,orient,channel})=>axis.labelBaseline||defaultLabelBaseline(labelAngle,orient,channel),labelFlush:({axis,fieldOrDatumDef,channel})=>{var _a;return null!==(_a=axis.labelFlush)&&void 0!==_a?_a:function defaultLabelFlush(type,channel){if("x"===channel&&util_contains(["quantitative","temporal"],type))return!0;return}(fieldOrDatumDef.type,channel)},labelOverlap:({axis,fieldOrDatumDef,scaleType})=>{var _a;return null!==(_a=axis.labelOverlap)&&void 0!==_a?_a:function defaultLabelOverlap(type,scaleType,hasTimeUnit,sort){if(hasTimeUnit&&!isObject(sort)||"nominal"!==type&&"ordinal"!==type)return"log"!==scaleType&&"symlog"!==scaleType||"greedy";return}(fieldOrDatumDef.type,scaleType,isFieldDef(fieldOrDatumDef)&&!!fieldOrDatumDef.timeUnit,isFieldDef(fieldOrDatumDef)?fieldOrDatumDef.sort:void 0)},orient:({orient})=>orient,tickCount:({channel,model,axis,fieldOrDatumDef,scaleType})=>{var _a;const sizeType="x"===channel?"width":"y"===channel?"height":void 0,size=sizeType?model.getSizeSignalRef(sizeType):void 0;return null!==(_a=axis.tickCount)&&void 0!==_a?_a:function defaultTickCount({fieldOrDatumDef,scaleType,size,values:vals}){var _a;if(!vals&&!hasDiscreteDomain(scaleType)&&"log"!==scaleType){if(isFieldDef(fieldOrDatumDef)){if(isBinning(fieldOrDatumDef.bin))return{signal:`ceil(${size.signal}/10)`};if(fieldOrDatumDef.timeUnit&&util_contains(["month","hours","day","quarter"],null===(_a=normalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0===_a?void 0:_a.unit))return}return{signal:`ceil(${size.signal}/40)`}}return}({fieldOrDatumDef,scaleType,size,values:axis.values})},title:({axis,model,channel})=>{if(void 0!==axis.title)return axis.title;const fieldDefTitle=getFieldDefTitle(model,channel);if(void 0!==fieldDefTitle)return fieldDefTitle;const fieldDef=model.typedFieldDef(channel),channel2="x"===channel?"x2":"y2",fieldDef2=model.fieldDef(channel2);return mergeTitleFieldDefs(fieldDef?[toFieldDefBase(fieldDef)]:[],isFieldDef(fieldDef2)?[toFieldDefBase(fieldDef2)]:[])},values:({axis,fieldOrDatumDef})=>function properties_values(axis,fieldOrDatumDef){const vals=axis.values;if(isArray(vals))return valueArray(fieldOrDatumDef,vals);if(isSignalRef(vals))return vals;return}(axis,fieldOrDatumDef),zindex:({axis,fieldOrDatumDef,mark})=>{var _a;return null!==(_a=axis.zindex)&&void 0!==_a?_a:function defaultZindex(mark,fieldDef){if("rect"===mark&&channeldef_isDiscrete(fieldDef))return 1;return 0}(mark,fieldOrDatumDef)}};function normalizeAngleExpr(angle){return`(((${angle.signal} % 360) + 360) % 360)`}function defaultLabelBaseline(angle,orient,channel,alwaysIncludeMiddle){if(void 0!==angle){if("x"===channel){if(isSignalRef(angle)){const a=normalizeAngleExpr(angle);return{signal:`(45 < ${a} && ${a} < 135) || (225 < ${a} && ${a} < 315) ? "middle" :(${a} <= 45 || 315 <= ${a}) === ${isSignalRef(orient)?`(${orient.signal} === "top")`:"top"===orient} ? "bottom" : "top"`}}if(45<angle&&angle<135||225<angle&&angle<315)return"middle";if(isSignalRef(orient)){const op=angle<=45||315<=angle?"===":"!==";return{signal:`${orient.signal} ${op} "top" ? "bottom" : "top"`}}return(angle<=45||315<=angle)==("top"===orient)?"bottom":"top"}if(isSignalRef(angle)){const a=normalizeAngleExpr(angle);return{signal:`${a} <= 45 || 315 <= ${a} || (135 <= ${a} && ${a} <= 225) ? ${alwaysIncludeMiddle?'"middle"':"null"} : (45 <= ${a} && ${a} <= 135) === ${isSignalRef(orient)?`(${orient.signal} === "left")`:"left"===orient} ? "top" : "bottom"`}}if(angle<=45||315<=angle||135<=angle&&angle<=225)return alwaysIncludeMiddle?"middle":null;if(isSignalRef(orient)){const op=45<=angle&&angle<=135?"===":"!==";return{signal:`${orient.signal} ${op} "left" ? "top" : "bottom"`}}return(45<=angle&&angle<=135)==("left"===orient)?"top":"bottom"}}function defaultLabelAlign(angle,orient,channel){if(void 0===angle)return;const isX="x"===channel,startAngle=isX?0:90,mainOrient=isX?"bottom":"left";if(isSignalRef(angle)){const a=normalizeAngleExpr(angle);return{signal:`(${startAngle?`(${a} + 90)`:a} % 180 === 0) ? ${isX?null:'"center"'} :(${startAngle} < ${a} && ${a} < ${180+startAngle}) === ${isSignalRef(orient)?`(${orient.signal} === "${mainOrient}")`:orient===mainOrient} ? "left" : "right"`}}if((angle+startAngle)%180==0)return isX?null:"center";if(isSignalRef(orient)){const op=startAngle<angle&&angle<180+startAngle?"===":"!==";return{signal:`${`${orient.signal} ${op} "${mainOrient}"`} ? "left" : "right"`}}return(startAngle<angle&&angle<180+startAngle)==(orient===mainOrient)?"left":"right"}function getFieldDefTitle(model,channel){const channel2="x"===channel?"x2":"y2",fieldDef=model.fieldDef(channel),fieldDef2=model.fieldDef(channel2),title1=fieldDef?fieldDef.title:void 0,title2=fieldDef2?fieldDef2.title:void 0;return title1&&title2?mergeTitle(title1,title2):title1||(title2||(void 0!==title1?title1:void 0!==title2?title2:void 0))}class CalculateNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform,this._dependentFields=getDependentFields(this.transform.calculate)}clone(){return new CalculateNode(null,duplicate(this.transform))}static parseAllForSortIndex(parent,model){return model.forEachFieldDef(((fieldDef,channel)=>{if(isScaleFieldDef(fieldDef)&&isSortArray(fieldDef.sort)){const{field,timeUnit}=fieldDef,sort=fieldDef.sort,calculate=sort.map(((sortValue,i)=>`${fieldFilterExpression({field,timeUnit,equal:sortValue})} ? ${i} : `)).join("")+sort.length;parent=new CalculateNode(parent,{calculate,as:sortArrayIndexField(fieldDef,channel,{forAs:!0})})}})),parent}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${hash(this.transform)}`}}function sortArrayIndexField(fieldDef,channel,opt){return vgField(fieldDef,Object.assign({prefix:channel,suffix:"sort_index"},null!=opt?opt:{}))}function getHeaderChannel(channel,orient){return util_contains(["top","bottom"],orient)?"column":util_contains(["left","right"],orient)||"row"===channel?"row":"column"}function getHeaderProperty(prop,header,config,channel){const headerSpecificConfig="row"===channel?config.headerRow:"column"===channel?config.headerColumn:config.headerFacet;return getFirstDefined((header||{})[prop],headerSpecificConfig[prop],config.header[prop])}function getHeaderProperties(properties,header,config,channel){const props={};for(const prop of properties){const value=getHeaderProperty(prop,header||{},config,channel);void 0!==value&&(props[prop]=value)}return props}const HEADER_CHANNELS=["row","column"],HEADER_TYPES=["header","footer"];function assembleTitleGroup(model,channel){const title=model.component.layoutHeaders[channel].title,config=model.config?model.config:void 0,facetFieldDef=model.component.layoutHeaders[channel].facetFieldDef?model.component.layoutHeaders[channel].facetFieldDef:void 0,{titleAnchor,titleAngle:ta,titleOrient}=getHeaderProperties(["titleAnchor","titleAngle","titleOrient"],facetFieldDef.header,config,channel),headerChannel=getHeaderChannel(channel,titleOrient),titleAngle=normalizeAngle(ta);return{name:`${channel}-title`,type:"group",role:`${headerChannel}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:title},"row"===channel?{orient:"left"}:{}),{style:"guide-title"}),defaultHeaderGuideBaseline(titleAngle,headerChannel)),defaultHeaderGuideAlign(headerChannel,titleAngle,titleAnchor)),assembleHeaderProperties(config,facetFieldDef,channel,HEADER_TITLE_PROPERTIES,HEADER_TITLE_PROPERTIES_MAP))}}function defaultHeaderGuideAlign(headerChannel,angle,anchor="middle"){switch(anchor){case"start":return{align:"left"};case"end":return{align:"right"}}const align=defaultLabelAlign(angle,"row"===headerChannel?"left":"top","row"===headerChannel?"y":"x");return align?{align}:{}}function defaultHeaderGuideBaseline(angle,channel){const baseline=defaultLabelBaseline(angle,"row"===channel?"left":"top","row"===channel?"y":"x",!0);return baseline?{baseline}:{}}function assembleHeaderGroups(model,channel){const layoutHeader=model.component.layoutHeaders[channel],groups=[];for(const headerType of HEADER_TYPES)if(layoutHeader[headerType])for(const headerComponent of layoutHeader[headerType]){const group=assembleHeaderGroup(model,channel,headerType,layoutHeader,headerComponent);null!=group&&groups.push(group)}return groups}function getSort(facetFieldDef,channel){var _a;const{sort}=facetFieldDef;return isSortField(sort)?{field:vgField(sort,{expr:"datum"}),order:null!==(_a=sort.order)&&void 0!==_a?_a:"ascending"}:isArray(sort)?{field:sortArrayIndexField(facetFieldDef,channel,{expr:"datum"}),order:"ascending"}:{field:vgField(facetFieldDef,{expr:"datum"}),order:null!=sort?sort:"ascending"}}function assembleLabelTitle(facetFieldDef,channel,config){const{format,formatType,labelAngle,labelAnchor,labelOrient,labelExpr}=getHeaderProperties(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],facetFieldDef.header,config,channel),titleTextExpr=formatSignalRef({fieldOrDatumDef:facetFieldDef,format,formatType,expr:"parent",config}).signal,headerChannel=getHeaderChannel(channel,labelOrient);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:labelExpr?replaceAll(replaceAll(labelExpr,"datum.label",titleTextExpr),"datum.value",vgField(facetFieldDef,{expr:"parent"})):titleTextExpr}},"row"===channel?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),defaultHeaderGuideBaseline(labelAngle,headerChannel)),defaultHeaderGuideAlign(headerChannel,labelAngle,labelAnchor)),assembleHeaderProperties(config,facetFieldDef,channel,HEADER_LABEL_PROPERTIES,HEADER_LABEL_PROPERTIES_MAP))}function assembleHeaderGroup(model,channel,headerType,layoutHeader,headerComponent){if(headerComponent){let title=null;const{facetFieldDef}=layoutHeader,config=model.config?model.config:void 0;if(facetFieldDef&&headerComponent.labels){const{labelOrient}=getHeaderProperties(["labelOrient"],facetFieldDef.header,config,channel);("row"===channel&&!util_contains(["top","bottom"],labelOrient)||"column"===channel&&!util_contains(["left","right"],labelOrient))&&(title=assembleLabelTitle(facetFieldDef,channel,config))}const isFacetWithoutRowCol=isFacetModel(model)&&!isFacetMapping(model.facet),axes=headerComponent.axes,hasAxes=(null==axes?void 0:axes.length)>0;if(title||hasAxes){const sizeChannel="row"===channel?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:model.getName(`${channel}_${headerType}`),type:"group",role:`${channel}-${headerType}`},layoutHeader.facetFieldDef?{from:{data:model.getName(`${channel}_domain`)},sort:getSort(facetFieldDef,channel)}:{}),hasAxes&&isFacetWithoutRowCol?{from:{data:model.getName(`facet_domain_${channel}`)}}:{}),title?{title}:{}),headerComponent.sizeSignal?{encode:{update:{[sizeChannel]:headerComponent.sizeSignal}}}:{}),hasAxes?{axes}:{})}}return null}const LAYOUT_TITLE_BAND={column:{start:0,end:1},row:{start:1,end:0}};function getLayoutTitleBand(titleAnchor,headerChannel){return LAYOUT_TITLE_BAND[headerChannel][titleAnchor]}function assembleHeaderProperties(config,facetFieldDef,channel,properties,propertiesMap){const props={};for(const prop of properties){if(!propertiesMap[prop])continue;const value=getHeaderProperty(prop,null==facetFieldDef?void 0:facetFieldDef.header,config,channel);void 0!==value&&(props[propertiesMap[prop]]=value)}return props}function assembleLayoutSignals(model){return[...sizeSignals(model,"width"),...sizeSignals(model,"height"),...sizeSignals(model,"childWidth"),...sizeSignals(model,"childHeight")]}function sizeSignals(model,sizeType){const channel="width"===sizeType?"x":"y",size=model.component.layoutSize.get(sizeType);if(!size||"merged"===size)return[];const name=model.getSizeSignalRef(sizeType).signal;if("step"===size){const scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const type=scaleComponent.get("type"),range=scaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const scaleName=model.scaleName(channel);if(isFacetModel(model.parent)){if("independent"===model.parent.component.resolve.scale[channel])return[stepSignal(scaleName,range)]}return[stepSignal(scaleName,range),{name,update:sizeExpr(scaleName,scaleComponent,`domain('${scaleName}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==size){const isWidth=name.endsWith("width"),expr=isWidth?"containerSize()[0]":"containerSize()[1]",safeExpr=`isFinite(${expr}) ? ${expr} : ${getViewConfigContinuousSize(model.config.view,isWidth?"width":"height")}`;return[{name,init:safeExpr,on:[{update:safeExpr,events:"window:resize"}]}]}return[{name,value:size}]}function stepSignal(scaleName,range){const name=`${scaleName}_step`;return isSignalRef(range.step)?{name,update:range.step.signal}:{name,value:range.step}}function sizeExpr(scaleName,scaleComponent,cardinality){const type=scaleComponent.get("type"),padding=scaleComponent.get("padding"),paddingOuter=getFirstDefined(scaleComponent.get("paddingOuter"),padding);let paddingInner=scaleComponent.get("paddingInner");return paddingInner="band"===type?void 0!==paddingInner?paddingInner:padding:1,`bandspace(${cardinality}, ${signalOrStringValue(paddingInner)}, ${signalOrStringValue(paddingOuter)}) * ${scaleName}_step`}function getSizeTypeFromLayoutSizeType(layoutSizeType){return"childWidth"===layoutSizeType?"width":"childHeight"===layoutSizeType?"height":layoutSizeType}function guideEncodeEntry(encoding,model){return util_keys(encoding).reduce(((encode,channel)=>{const valueDef=encoding[channel];return Object.assign(Object.assign({},encode),wrapCondition(model,valueDef,channel,(def=>signalOrValueRef(def.value))))}),{})}function defaultScaleResolve(channel,model){if(isFacetModel(model))return"theta"===channel?"independent":"shared";if(isLayerModel(model))return"shared";if(isConcatModel(model))return isXorY(channel)||"theta"===channel||"radius"===channel?"independent":"shared";throw new Error("invalid model type for resolve")}function parseGuideResolve(resolve,channel){const channelScaleResolve=resolve.scale[channel],guide=isXorY(channel)?"axis":"legend";return"independent"===channelScaleResolve?("shared"===resolve[guide][channel]&&log_warn(function independentScaleMeansIndependentGuide(channel){return`Setting the scale to be independent for "${channel}" means we also have to set the guide (axis or legend) to be independent.`}(channel)),"independent"):resolve[guide][channel]||"shared"}const LEGEND_COMPONENT_PROPERTY_INDEX=Object.assign(Object.assign({},COMMON_LEGEND_PROPERTY_INDEX),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),LEGEND_COMPONENT_PROPERTIES=util_keys(LEGEND_COMPONENT_PROPERTY_INDEX);class LegendComponent extends Split{}const legendEncodeRules={symbols:function encode_symbols(symbolsSpec,{fieldOrDatumDef,model,channel,legendCmpt,legendType}){var _a,_b,_c,_d,_e,_f,_g,_h;if("symbol"!==legendType)return;const{markDef,encoding,config,mark}=model,filled=markDef.filled&&"trail"!==mark;let out=Object.assign(Object.assign({},function applyMarkConfig(e,model,propsList){for(const property of propsList){const value=getMarkConfig(property,model.markDef,model.config);void 0!==value&&(e[property]=signalOrValueRef(value))}return e}({},model,FILL_STROKE_CONFIG)),color_color(model,{filled}));const symbolOpacity=null!==(_a=legendCmpt.get("symbolOpacity"))&&void 0!==_a?_a:config.legend.symbolOpacity,symbolFillColor=null!==(_b=legendCmpt.get("symbolFillColor"))&&void 0!==_b?_b:config.legend.symbolFillColor,symbolStrokeColor=null!==(_c=legendCmpt.get("symbolStrokeColor"))&&void 0!==_c?_c:config.legend.symbolStrokeColor,opacity=void 0===symbolOpacity?null!==(_d=getMaxValue(encoding.opacity))&&void 0!==_d?_d:markDef.opacity:void 0;if(out.fill)if("fill"===channel||filled&&channel===COLOR)delete out.fill;else if(out.fill.field)symbolFillColor?delete out.fill:(out.fill=signalOrValueRef(null!==(_e=config.legend.symbolBaseFillColor)&&void 0!==_e?_e:"black"),out.fillOpacity=signalOrValueRef(null!=opacity?opacity:1));else if(isArray(out.fill)){const fill=null!==(_h=null!==(_g=getFirstConditionValue(null!==(_f=encoding.fill)&&void 0!==_f?_f:encoding.color))&&void 0!==_g?_g:markDef.fill)&&void 0!==_h?_h:filled&&markDef.color;fill&&(out.fill=signalOrValueRef(fill))}if(out.stroke)if("stroke"===channel||!filled&&channel===COLOR)delete out.stroke;else if(out.stroke.field||symbolStrokeColor)delete out.stroke;else if(isArray(out.stroke)){const stroke=getFirstDefined(getFirstConditionValue(encoding.stroke||encoding.color),markDef.stroke,filled?markDef.color:void 0);stroke&&(out.stroke={value:stroke})}if(channel!==OPACITY){const condition=isFieldDef(fieldOrDatumDef)&&selectedCondition(model,legendCmpt,fieldOrDatumDef);condition?out.opacity=[Object.assign({test:condition},signalOrValueRef(null!=opacity?opacity:1)),signalOrValueRef(config.legend.unselectedOpacity)]:opacity&&(out.opacity=signalOrValueRef(opacity))}return out=Object.assign(Object.assign({},out),symbolsSpec),isEmpty(out)?void 0:out},gradient:function encode_gradient(gradientSpec,{model,legendType,legendCmpt}){var _a;if("gradient"!==legendType)return;const{config,markDef,encoding}=model;let out={};const opacity=void 0===(null!==(_a=legendCmpt.get("gradientOpacity"))&&void 0!==_a?_a:config.legend.gradientOpacity)?getMaxValue(encoding.opacity)||markDef.opacity:void 0;opacity&&(out.opacity=signalOrValueRef(opacity));return out=Object.assign(Object.assign({},out),gradientSpec),isEmpty(out)?void 0:out},labels:function labels(specifiedlabelsSpec,{fieldOrDatumDef,model,channel,legendCmpt}){const legend=model.legend(channel)||{},config=model.config,condition=isFieldDef(fieldOrDatumDef)?selectedCondition(model,legendCmpt,fieldOrDatumDef):void 0,opacity=condition?[{test:condition,value:1},{value:config.legend.unselectedOpacity}]:void 0,{format,formatType}=legend;let text;isCustomFormatType(formatType)?text=formatCustomType({fieldOrDatumDef,field:"datum.value",format,formatType,config}):void 0===format&&void 0===formatType&&config.customFormatTypes&&("quantitative"===fieldOrDatumDef.type&&config.numberFormatType?text=formatCustomType({fieldOrDatumDef,field:"datum.value",format:config.numberFormat,formatType:config.numberFormatType,config}):"temporal"===fieldOrDatumDef.type&&config.timeFormatType&&isFieldDef(fieldOrDatumDef)&&void 0===fieldOrDatumDef.timeUnit&&(text=formatCustomType({fieldOrDatumDef,field:"datum.value",format:config.timeFormat,formatType:config.timeFormatType,config})));const labelsSpec=Object.assign(Object.assign(Object.assign({},opacity?{opacity}:{}),text?{text}:{}),specifiedlabelsSpec);return isEmpty(labelsSpec)?void 0:labelsSpec},entries:function encode_entries(entriesSpec,{legendCmpt}){const selections=legendCmpt.get("selections");return(null==selections?void 0:selections.length)?Object.assign(Object.assign({},entriesSpec),{fill:{value:"transparent"}}):entriesSpec}};function getMaxValue(channelDef){return getConditionValue(channelDef,((v,conditionalDef)=>Math.max(v,conditionalDef.value)))}function getFirstConditionValue(channelDef){return getConditionValue(channelDef,((v,conditionalDef)=>getFirstDefined(v,conditionalDef.value)))}function getConditionValue(channelDef,reducer){return function hasConditionalValueDef(channelDef){const condition=null==channelDef?void 0:channelDef.condition;return!!condition&&(isArray(condition)||isValueDef(condition))}(channelDef)?array(channelDef.condition).reduce(reducer,channelDef.value):isValueDef(channelDef)?channelDef.value:void 0}function selectedCondition(model,legendCmpt,fieldDef){const selections=legendCmpt.get("selections");if(!(null==selections?void 0:selections.length))return;const field=$(fieldDef.field);return selections.map((name=>`(!length(data(${$(varName(name)+STORE)})) || (${name}[${field}] && indexof(${name}[${field}], datum.value) >= 0))`)).join(" || ")}const legendRules={direction:({direction})=>direction,format:({fieldOrDatumDef,legend,config})=>{const{format,formatType}=legend;return guideFormat(fieldOrDatumDef,fieldOrDatumDef.type,format,formatType,config,!1)},formatType:({legend,fieldOrDatumDef,scaleType})=>{const{formatType}=legend;return guideFormatType(formatType,fieldOrDatumDef,scaleType)},gradientLength:params=>{var _a,_b;const{legend,legendConfig}=params;return null!==(_b=null!==(_a=legend.gradientLength)&&void 0!==_a?_a:legendConfig.gradientLength)&&void 0!==_b?_b:function defaultGradientLength({legendConfig,model,direction,orient,scaleType}){const{gradientHorizontalMaxLength,gradientHorizontalMinLength,gradientVerticalMaxLength,gradientVerticalMinLength}=legendConfig;if(isContinuousToContinuous(scaleType))return"horizontal"===direction?"top"===orient||"bottom"===orient?gradientLengthSignal(model,"width",gradientHorizontalMinLength,gradientHorizontalMaxLength):gradientHorizontalMinLength:gradientLengthSignal(model,"height",gradientVerticalMinLength,gradientVerticalMaxLength);return}(params)},labelOverlap:({legend,legendConfig,scaleType})=>{var _a,_b;return null!==(_b=null!==(_a=legend.labelOverlap)&&void 0!==_a?_a:legendConfig.labelOverlap)&&void 0!==_b?_b:function properties_defaultLabelOverlap(scaleType){if(util_contains(["quantile","threshold","log","symlog"],scaleType))return"greedy";return}(scaleType)},symbolType:({legend,markDef,channel,encoding})=>{var _a;return null!==(_a=legend.symbolType)&&void 0!==_a?_a:function defaultSymbolType(mark,channel,shapeChannelDef,markShape){var _a;if("shape"!==channel){const shape=null!==(_a=getFirstConditionValue(shapeChannelDef))&&void 0!==_a?_a:markShape;if(shape)return shape}switch(mark){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(markDef.type,channel,encoding.shape,markDef.shape)},title:({fieldOrDatumDef,config})=>channeldef_title(fieldOrDatumDef,config,{allowDisabling:!0}),type:({legendType,scaleType,channel})=>{if(isColorChannel(channel)&&isContinuousToContinuous(scaleType)){if("gradient"===legendType)return}else if("symbol"===legendType)return;return legendType},values:({fieldOrDatumDef,legend})=>function legend_properties_values(legend,fieldOrDatumDef){const vals=legend.values;if(isArray(vals))return valueArray(fieldOrDatumDef,vals);if(isSignalRef(vals))return vals;return}(legend,fieldOrDatumDef)};function getLegendType(params){const{legend}=params;return getFirstDefined(legend.type,function properties_defaultType({channel,timeUnit,scaleType}){if(isColorChannel(channel)){if(util_contains(["quarter","month","day"],timeUnit))return"symbol";if(isContinuousToContinuous(scaleType))return"gradient"}return"symbol"}(params))}function getDirection({legendConfig,legendType,orient,legend}){var _a,_b;return null!==(_b=null!==(_a=legend.direction)&&void 0!==_a?_a:legendConfig[legendType?"gradientDirection":"symbolDirection"])&&void 0!==_b?_b:function defaultDirection(orient,legendType){switch(orient){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===legendType?"horizontal":void 0}}(orient,legendType)}function gradientLengthSignal(model,sizeType,min,max){return{signal:`clamp(${model.getSizeSignalRef(sizeType).signal}, ${min}, ${max})`}}function parse_parseLegend(model){const legendComponent=isUnitModel(model)?function parseUnitLegend(model){const{encoding}=model,legendComponent={};for(const channel of[COLOR,...LEGEND_SCALE_CHANNELS]){const def=getFieldOrDatumDef(encoding[channel]);def&&model.getScaleComponent(channel)&&(channel===SHAPE&&isFieldDef(def)&&def.type===GEOJSON||(legendComponent[channel]=parseLegendForChannel(model,channel)))}return legendComponent}(model):function parseNonUnitLegend(model){const{legends,resolve}=model.component;for(const child of model.children){parse_parseLegend(child);for(const channel of util_keys(child.component.legends))resolve.legend[channel]=parseGuideResolve(model.component.resolve,channel),"shared"===resolve.legend[channel]&&(legends[channel]=mergeLegendComponent(legends[channel],child.component.legends[channel]),legends[channel]||(resolve.legend[channel]="independent",delete legends[channel]))}for(const channel of util_keys(legends))for(const child of model.children)child.component.legends[channel]&&"shared"===resolve.legend[channel]&&delete child.component.legends[channel];return legends}(model);return model.component.legends=legendComponent,legendComponent}function isExplicit(value,property,legend,fieldDef){switch(property){case"disable":return void 0!==legend;case"values":return!!(null==legend?void 0:legend.values);case"title":if("title"===property&&value===(null==fieldDef?void 0:fieldDef.title))return!0}return value===(legend||{})[property]}function parseLegendForChannel(model,channel){var _a,_b,_c;let legend=model.legend(channel);const{markDef,encoding,config}=model,legendConfig=config.legend,legendCmpt=new LegendComponent({},function getLegendDefWithScale(model,channel){const scale=model.scaleName(channel);if("trail"===model.mark){if("color"===channel)return{stroke:scale};if("size"===channel)return{strokeWidth:scale}}return"color"===channel?model.markDef.filled?{fill:scale}:{stroke:scale}:{[channel]:scale}}(model,channel));!function parseInteractiveLegend(model,channel,legendCmpt){var _a,_b,_c,_d;const field=null===(_a=model.fieldDef(channel))||void 0===_a?void 0:_a.field;for(const selCmpt of vals(null!==(_b=model.component.selection)&&void 0!==_b?_b:{})){const proj=null!==(_c=selCmpt.project.hasField[field])&&void 0!==_c?_c:selCmpt.project.hasChannel[channel];if(proj&&legendBindings.defined(selCmpt)){const legendSelections=null!==(_d=legendCmpt.get("selections"))&&void 0!==_d?_d:[];legendSelections.push(selCmpt.name),legendCmpt.set("selections",legendSelections,!1),proj.hasLegend=!0}}}(model,channel,legendCmpt);const disable=void 0!==legend?!legend:legendConfig.disable;if(legendCmpt.set("disable",disable,void 0!==legend),disable)return legendCmpt;legend=legend||{};const scaleType=model.getScaleComponent(channel).get("type"),fieldOrDatumDef=getFieldOrDatumDef(encoding[channel]),timeUnit=isFieldDef(fieldOrDatumDef)?null===(_a=normalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0===_a?void 0:_a.unit:void 0,orient=legend.orient||config.legend.orient||"right",legendType=getLegendType({legend,channel,timeUnit,scaleType}),ruleParams={legend,channel,model,markDef,encoding,fieldOrDatumDef,legendConfig,config,scaleType,orient,legendType,direction:getDirection({legend,legendType,orient,legendConfig})};for(const property of LEGEND_COMPONENT_PROPERTIES){if("gradient"===legendType&&property.startsWith("symbol")||"symbol"===legendType&&property.startsWith("gradient"))continue;const value=property in legendRules?legendRules[property](ruleParams):legend[property];if(void 0!==value){const explicit=isExplicit(value,property,legend,model.fieldDef(channel));(explicit||void 0===config.legend[property])&&legendCmpt.set(property,value,explicit)}}const legendEncoding=null!==(_b=null==legend?void 0:legend.encoding)&&void 0!==_b?_b:{},selections=legendCmpt.get("selections"),legendEncode={},legendEncodeParams={fieldOrDatumDef,model,channel,legendCmpt,legendType};for(const part of["labels","legend","title","symbols","gradient","entries"]){const legendEncodingPart=guideEncodeEntry(null!==(_c=legendEncoding[part])&&void 0!==_c?_c:{},model),value=part in legendEncodeRules?legendEncodeRules[part](legendEncodingPart,legendEncodeParams):legendEncodingPart;void 0===value||isEmpty(value)||(legendEncode[part]=Object.assign(Object.assign(Object.assign({},(null==selections?void 0:selections.length)&&isFieldDef(fieldOrDatumDef)?{name:`${varName(fieldOrDatumDef.field)}_legend_${part}`}:{}),(null==selections?void 0:selections.length)?{interactive:!!selections}:{}),{update:value}))}return isEmpty(legendEncode)||legendCmpt.set("encode",legendEncode,!!(null==legend?void 0:legend.encoding)),legendCmpt}function mergeLegendComponent(mergedLegend,childLegend){var _a,_b,_c,_d;if(!mergedLegend)return childLegend.clone();const mergedOrient=mergedLegend.getWithExplicit("orient"),childOrient=childLegend.getWithExplicit("orient");if(mergedOrient.explicit&&childOrient.explicit&&mergedOrient.value!==childOrient.value)return;let typeMerged=!1;for(const prop of LEGEND_COMPONENT_PROPERTIES){const mergedValueWithExplicit=mergeValuesWithExplicit(mergedLegend.getWithExplicit(prop),childLegend.getWithExplicit(prop),prop,"legend",((v1,v2)=>{switch(prop){case"symbolType":return mergeSymbolType(v1,v2);case"title":return mergeTitleComponent(v1,v2);case"type":return typeMerged=!0,makeImplicit("symbol")}return defaultTieBreaker(v1,v2,prop,"legend")}));mergedLegend.setWithExplicit(prop,mergedValueWithExplicit)}return typeMerged&&((null===(_b=null===(_a=mergedLegend.implicit)||void 0===_a?void 0:_a.encode)||void 0===_b?void 0:_b.gradient)&&deleteNestedProperty(mergedLegend.implicit,["encode","gradient"]),(null===(_d=null===(_c=mergedLegend.explicit)||void 0===_c?void 0:_c.encode)||void 0===_d?void 0:_d.gradient)&&deleteNestedProperty(mergedLegend.explicit,["encode","gradient"])),mergedLegend}function mergeSymbolType(st1,st2){return"circle"===st2.value?st2:st1}var legend_assemble_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function assembleLegends(model){const legendComponentIndex=model.component.legends,legendByDomain={};for(const channel of util_keys(legendComponentIndex)){const scaleComponent=model.getScaleComponent(channel),domainHash=stringify(scaleComponent.get("domains"));if(legendByDomain[domainHash])for(const mergedLegendComponent of legendByDomain[domainHash]){mergeLegendComponent(mergedLegendComponent,legendComponentIndex[channel])||legendByDomain[domainHash].push(legendComponentIndex[channel])}else legendByDomain[domainHash]=[legendComponentIndex[channel].clone()]}const legends=vals(legendByDomain).flat().map((l=>function assembleLegend(legendCmpt,config){var _a,_b,_c;const _d=legendCmpt.combine(),{disable,labelExpr,selections}=_d,legend=legend_assemble_rest(_d,["disable","labelExpr","selections"]);if(disable)return;!1===config.aria&&null==legend.aria&&(legend.aria=!1);if(null===(_a=legend.encode)||void 0===_a?void 0:_a.symbols){const out=legend.encode.symbols.update;!out.fill||"transparent"===out.fill.value||out.stroke||legend.stroke||(out.stroke={value:"transparent"});for(const property of LEGEND_SCALE_CHANNELS)legend[property]&&delete out[property]}legend.title||delete legend.title;if(void 0!==labelExpr){let expr=labelExpr;(null===(_c=null===(_b=legend.encode)||void 0===_b?void 0:_b.labels)||void 0===_c?void 0:_c.update)&&isSignalRef(legend.encode.labels.update.text)&&(expr=replaceAll(labelExpr,"datum.label",legend.encode.labels.update.text.signal)),function setLegendEncode(legend,part,vgProp,vgRef){var _a,_b,_c,_d,_e;null!==(_a=legend.encode)&&void 0!==_a||(legend.encode={}),null!==(_b=(_d=legend.encode)[part])&&void 0!==_b||(_d[part]={}),null!==(_c=(_e=legend.encode[part]).update)&&void 0!==_c||(_e.update={}),legend.encode[part].update[vgProp]=vgRef}(legend,"labels","text",{signal:expr})}return legend}(l,model.config))).filter((l=>void 0!==l));return legends}function assembleProjections(model){return isLayerModel(model)||isConcatModel(model)?function assembleProjectionsForModelAndChildren(model){return model.children.reduce(((projections,child)=>projections.concat(child.assembleProjections())),assembleProjectionForModel(model))}(model):assembleProjectionForModel(model)}function assembleProjectionForModel(model){const component=model.component.projection;if(!component||component.merged)return[];const projection=component.combine(),{name}=projection;if(component.data){const size={signal:`[${component.size.map((ref=>ref.signal)).join(", ")}]`},fits=component.data.reduce(((sources,data)=>{const source=isSignalRef(data)?data.signal:`data('${model.lookupDataSource(data)}')`;return util_contains(sources,source)||sources.push(source),sources}),[]);if(fits.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name,size,fit:{signal:fits.length>1?`[${fits.join(", ")}]`:fits[0]}},projection)]}return[Object.assign(Object.assign({name},{translate:{signal:"[width / 2, height / 2]"}}),projection)]}const PROJECTION_PROPERTIES=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ProjectionComponent extends Split{constructor(name,specifiedProjection,size,data){super(Object.assign({},specifiedProjection),{name}),this.specifiedProjection=specifiedProjection,this.size=size,this.data=data,this.merged=!1}get isFit(){return!!this.data}}function parse_parseProjection(model){model.component.projection=isUnitModel(model)?function parseUnitProjection(model){var _a;if(model.hasProjection){const proj=replaceExprRef(model.specifiedProjection),fit=!(proj&&(null!=proj.scale||null!=proj.translate)),size=fit?[model.getSizeSignalRef("width"),model.getSizeSignalRef("height")]:void 0,data=fit?function gatherFitData(model){const data=[],{encoding}=model;for(const posssiblePair of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]])(getFieldOrDatumDef(encoding[posssiblePair[0]])||getFieldOrDatumDef(encoding[posssiblePair[1]]))&&data.push({signal:model.getName(`geojson_${data.length}`)});model.channelHasField(SHAPE)&&model.typedFieldDef(SHAPE).type===GEOJSON&&data.push({signal:model.getName(`geojson_${data.length}`)});0===data.length&&data.push(model.requestDataName(DataSourceType.Main));return data}(model):void 0,projComp=new ProjectionComponent(model.projectionName(!0),Object.assign(Object.assign({},null!==(_a=replaceExprRef(model.config.projection))&&void 0!==_a?_a:{}),null!=proj?proj:{}),size,data);return projComp.get("type")||projComp.set("type","equalEarth",!1),projComp}return}(model):function parseNonUnitProjections(model){if(0===model.children.length)return;let nonUnitProjection;for(const child of model.children)parse_parseProjection(child);const mergable=every(model.children,(child=>{const projection=child.component.projection;if(projection){if(nonUnitProjection){const merge=function mergeIfNoConflict(first,second){const allPropertiesShared=every(PROJECTION_PROPERTIES,(prop=>!has(first.explicit,prop)&&!has(second.explicit,prop)||!!(has(first.explicit,prop)&&has(second.explicit,prop)&&deepEqual(first.get(prop),second.get(prop)))));if(deepEqual(first.size,second.size)){if(allPropertiesShared)return first;if(deepEqual(first.explicit,{}))return second;if(deepEqual(second.explicit,{}))return first}return null}(nonUnitProjection,projection);return merge&&(nonUnitProjection=merge),!!merge}return nonUnitProjection=projection,!0}return!0}));if(nonUnitProjection&&mergable){const name=model.projectionName(!0),modelProjection=new ProjectionComponent(name,nonUnitProjection.specifiedProjection,nonUnitProjection.size,duplicate(nonUnitProjection.data));for(const child of model.children){const projection=child.component.projection;projection&&(projection.isFit&&modelProjection.data.push(...child.component.projection.data),child.renameProjection(projection.get("name"),name),projection.merged=!0)}return modelProjection}return}(model)}var bin_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function binKey(bin,field){return`${binToString(bin)}_${field}`}function getBinSignalName(model,field,bin){var _a;const key=binKey(null!==(_a=normalizeBin(bin,void 0))&&void 0!==_a?_a:{},field);return model.getName(`${key}_bins`)}function createBinComponent(t,bin,model){let as,span;as=function isBinTransform(t){return"as"in t}(t)?isString(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:[vgField(t,{forAs:!0}),vgField(t,{binSuffix:"end",forAs:!0})];const normalizedBin=Object.assign({},normalizeBin(bin,void 0)),key=binKey(normalizedBin,t.field),{signal,extentSignal}=function getSignalsFromModel(model,key){return{signal:model.getName(`${key}_bins`),extentSignal:model.getName(`${key}_extent`)}}(model,key);if(isParameterExtent(normalizedBin.extent)){const ext=normalizedBin.extent;span=parseSelectionExtent(model,ext.param,ext),delete normalizedBin.extent}return{key,binComponent:Object.assign(Object.assign(Object.assign({bin:normalizedBin,field:t.field,as:[as]},signal?{signal}:{}),extentSignal?{extentSignal}:{}),span?{span}:{})}}class BinNode extends DataFlowNode{constructor(parent,bins){super(parent),this.bins=bins}clone(){return new BinNode(null,duplicate(this.bins))}static makeFromEncoding(parent,model){const bins=model.reduceFieldDef(((binComponentIndex,fieldDef,channel)=>{if(isTypedFieldDef(fieldDef)&&isBinning(fieldDef.bin)){const{key,binComponent}=createBinComponent(fieldDef,fieldDef.bin,model);binComponentIndex[key]=Object.assign(Object.assign(Object.assign({},binComponent),binComponentIndex[key]),function rangeFormula(model,fieldDef,channel,config){var _a,_b;if(binRequiresRange(fieldDef,channel)){const guide=isUnitModel(model)&&null!==(_b=null!==(_a=model.axis(channel))&&void 0!==_a?_a:model.legend(channel))&&void 0!==_b?_b:{},startField=vgField(fieldDef,{expr:"datum"}),endField=vgField(fieldDef,{expr:"datum",binSuffix:"end"});return{formulaAs:vgField(fieldDef,{binSuffix:"range",forAs:!0}),formula:binFormatExpression(startField,endField,guide.format,guide.formatType,config)}}return{}}(model,fieldDef,channel,model.config))}return binComponentIndex}),{});return isEmpty(bins)?null:new BinNode(parent,bins)}static makeFromTransform(parent,t,model){const{key,binComponent}=createBinComponent(t,t.bin,model);return new BinNode(parent,{[key]:binComponent})}merge(other,renameSignal){for(const key of util_keys(other.bins))key in this.bins?(renameSignal(other.bins[key].signal,this.bins[key].signal),this.bins[key].as=unique([...this.bins[key].as,...other.bins[key].as],hash)):this.bins[key]=other.bins[key];for(const child of other.children)other.removeChild(child),child.parent=this;other.remove()}producedFields(){return new Set(vals(this.bins).map((c=>c.as)).flat(2))}dependentFields(){return new Set(vals(this.bins).map((c=>c.field)))}hash(){return`Bin ${hash(this.bins)}`}assemble(){return vals(this.bins).flatMap((bin=>{const transform=[],[binAs,...remainingAs]=bin.as,_a=bin.bin,{extent}=_a,params=bin_rest(_a,["extent"]),binTrans=Object.assign(Object.assign(Object.assign({type:"bin",field:replacePathInField(bin.field),as:binAs,signal:bin.signal},isParameterExtent(extent)?{extent:null}:{extent}),bin.span?{span:{signal:`span(${bin.span})`}}:{}),params);!extent&&bin.extentSignal&&(transform.push({type:"extent",field:replacePathInField(bin.field),signal:bin.extentSignal}),binTrans.extent={signal:bin.extentSignal}),transform.push(binTrans);for(const as of remainingAs)for(let i=0;i<2;i++)transform.push({type:"formula",expr:vgField({field:binAs[i]},{expr:"datum"}),as:as[i]});return bin.formula&&transform.push({type:"formula",expr:bin.formula,as:bin.formulaAs}),transform}))}}function addDimension(dims,channel,fieldDef,model){var _a;const channelDef2=isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0;if(isTypedFieldDef(fieldDef)&&isUnitModel(model)&&hasBandEnd(fieldDef,channelDef2,model.markDef,model.config))dims.add(vgField(fieldDef,{})),dims.add(vgField(fieldDef,{suffix:"end"})),fieldDef.bin&&binRequiresRange(fieldDef,channel)&&dims.add(vgField(fieldDef,{binSuffix:"range"}));else if(function isGeoPositionChannel(c){return c in GEO_POSIITON_CHANNEL_INDEX}(channel)){const posChannel=function getPositionChannelFromLatLong(channel){switch(channel){case"latitude":return"y";case"latitude2":return"y2";case"longitude":return"x";case"longitude2":return"x2"}}(channel);dims.add(model.getName(posChannel))}else dims.add(vgField(fieldDef));return isScaleFieldDef(fieldDef)&&function isFieldRange(range){return isObject(range)&&"field"in range}(null===(_a=fieldDef.scale)||void 0===_a?void 0:_a.range)&&dims.add(fieldDef.scale.range.field),dims}class AggregateNode extends DataFlowNode{constructor(parent,dimensions,measures){super(parent),this.dimensions=dimensions,this.measures=measures}clone(){return new AggregateNode(null,new Set(this.dimensions),duplicate(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(parent,model){let isAggregate=!1;model.forEachFieldDef((fd=>{fd.aggregate&&(isAggregate=!0)}));const meas={},dims=new Set;return isAggregate?(model.forEachFieldDef(((fieldDef,channel)=>{var _a,_b,_c,_d;const{aggregate,field}=fieldDef;if(aggregate)if("count"===aggregate)null!==(_a=meas["*"])&&void 0!==_a||(meas["*"]={}),meas["*"].count=new Set([vgField(fieldDef,{forAs:!0})]);else{if(isArgminDef(aggregate)||isArgmaxDef(aggregate)){const op=isArgminDef(aggregate)?"argmin":"argmax",argField=aggregate[op];null!==(_b=meas[argField])&&void 0!==_b||(meas[argField]={}),meas[argField][op]=new Set([vgField({op,field:argField},{forAs:!0})])}else null!==(_c=meas[field])&&void 0!==_c||(meas[field]={}),meas[field][aggregate]=new Set([vgField(fieldDef,{forAs:!0})]);isScaleChannel(channel)&&"unaggregated"===model.scaleDomain(channel)&&(null!==(_d=meas[field])&&void 0!==_d||(meas[field]={}),meas[field].min=new Set([vgField({field,aggregate:"min"},{forAs:!0})]),meas[field].max=new Set([vgField({field,aggregate:"max"},{forAs:!0})]))}else addDimension(dims,channel,fieldDef,model)})),dims.size+util_keys(meas).length===0?null:new AggregateNode(parent,dims,meas)):null}static makeFromTransform(parent,t){var _a,_b,_c;const dims=new Set,meas={};for(const s of t.aggregate){const{op,field,as}=s;op&&("count"===op?(null!==(_a=meas["*"])&&void 0!==_a||(meas["*"]={}),meas["*"].count=new Set([as||vgField(s,{forAs:!0})])):(null!==(_b=meas[field])&&void 0!==_b||(meas[field]={}),meas[field][op]=new Set([as||vgField(s,{forAs:!0})])))}for(const s of null!==(_c=t.groupby)&&void 0!==_c?_c:[])dims.add(s);return dims.size+util_keys(meas).length===0?null:new AggregateNode(parent,dims,meas)}merge(other){return setEqual(this.dimensions,other.dimensions)?(function mergeMeasures(parentMeasures,childMeasures){var _a;for(const field of util_keys(childMeasures)){const ops=childMeasures[field];for(const op of util_keys(ops))field in parentMeasures?parentMeasures[field][op]=new Set([...null!==(_a=parentMeasures[field][op])&&void 0!==_a?_a:[],...ops[op]]):parentMeasures[field]={[op]:ops[op]}}}(this.measures,other.measures),!0):(function log_debug(...args){current.debug(...args)}("different dimensions, cannot merge"),!1)}addDimensions(fields){fields.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...util_keys(this.measures)])}producedFields(){const out=new Set;for(const field of util_keys(this.measures))for(const op of util_keys(this.measures[field])){const m=this.measures[field][op];0===m.size?out.add(`${op}_${field}`):m.forEach(out.add,out)}return out}hash(){return`Aggregate ${hash({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const ops=[],fields=[],as=[];for(const field of util_keys(this.measures))for(const op of util_keys(this.measures[field]))for(const alias of this.measures[field][op])as.push(alias),ops.push(op),fields.push("*"===field?null:replacePathInField(field));return{type:"aggregate",groupby:[...this.dimensions].map(replacePathInField),ops,fields,as}}}class FacetNode extends DataFlowNode{constructor(parent,model,name,data){super(parent),this.model=model,this.name=name,this.data=data;for(const channel of FACET_CHANNELS){const fieldDef=model.facet[channel];if(fieldDef){const{bin,sort}=fieldDef;this[channel]=Object.assign({name:model.getName(`${channel}_domain`),fields:[vgField(fieldDef),...isBinning(bin)?[vgField(fieldDef,{binSuffix:"end"})]:[]]},isSortField(sort)?{sortField:sort}:isArray(sort)?{sortIndexField:sortArrayIndexField(fieldDef,channel)}:{})}}this.childModel=model.child}hash(){let out="Facet";for(const channel of FACET_CHANNELS)this[channel]&&(out+=` ${channel.charAt(0)}:${hash(this[channel])}`);return out}get fields(){var _a;const f=[];for(const channel of FACET_CHANNELS)(null===(_a=this[channel])||void 0===_a?void 0:_a.fields)&&f.push(...this[channel].fields);return f}dependentFields(){const depFields=new Set(this.fields);for(const channel of FACET_CHANNELS)this[channel]&&(this[channel].sortField&&depFields.add(this[channel].sortField.field),this[channel].sortIndexField&&depFields.add(this[channel].sortIndexField));return depFields}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const childIndependentFieldsWithStep={};for(const channel of POSITION_SCALE_CHANNELS){const childScaleComponent=this.childModel.component.scales[channel];if(childScaleComponent&&!childScaleComponent.merged){const type=childScaleComponent.get("type"),range=childScaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const field=getFieldFromDomain(assembleDomain(this.childModel,channel));field?childIndependentFieldsWithStep[channel]=field:log_warn(unknownField(channel))}}}return childIndependentFieldsWithStep}assembleRowColumnHeaderData(channel,crossedDataName,childIndependentFieldsWithStep){const childChannel={row:"y",column:"x",facet:void 0}[channel],fields=[],ops=[],as=[];childChannel&&childIndependentFieldsWithStep&&childIndependentFieldsWithStep[childChannel]&&(crossedDataName?(fields.push(`distinct_${childIndependentFieldsWithStep[childChannel]}`),ops.push("max")):(fields.push(childIndependentFieldsWithStep[childChannel]),ops.push("distinct")),as.push(`distinct_${childIndependentFieldsWithStep[childChannel]}`));const{sortField,sortIndexField}=this[channel];if(sortField){const{op=DEFAULT_SORT_OP,field}=sortField;fields.push(field),ops.push(op),as.push(vgField(sortField,{forAs:!0}))}else sortIndexField&&(fields.push(sortIndexField),ops.push("max"),as.push(sortIndexField));return{name:this[channel].name,source:null!=crossedDataName?crossedDataName:this.data,transform:[Object.assign({type:"aggregate",groupby:this[channel].fields},fields.length?{fields,ops,as}:{})]}}assembleFacetHeaderData(childIndependentFieldsWithStep){var _a,_b;const{columns}=this.model.layout,{layoutHeaders}=this.model.component,data=[],hasSharedAxis={};for(const headerChannel of HEADER_CHANNELS){for(const headerType of HEADER_TYPES){const headers=null!==(_a=layoutHeaders[headerChannel]&&layoutHeaders[headerChannel][headerType])&&void 0!==_a?_a:[];for(const header of headers)if((null===(_b=header.axes)||void 0===_b?void 0:_b.length)>0){hasSharedAxis[headerChannel]=!0;break}}if(hasSharedAxis[headerChannel]){const cardinality=`length(data("${this.facet.name}"))`,stop="row"===headerChannel?columns?{signal:`ceil(${cardinality} / ${columns})`}:1:columns?{signal:`min(${cardinality}, ${columns})`}:{signal:cardinality};data.push({name:`${this.facet.name}_${headerChannel}`,transform:[{type:"sequence",start:0,stop}]})}}const{row,column}=hasSharedAxis;return(row||column)&&data.unshift(this.assembleRowColumnHeaderData("facet",null,childIndependentFieldsWithStep)),data}assemble(){var _a,_b;const data=[];let crossedDataName=null;const childIndependentFieldsWithStep=this.getChildIndependentFieldsWithStep(),{column,row,facet}=this;if(column&&row&&(childIndependentFieldsWithStep.x||childIndependentFieldsWithStep.y)){crossedDataName=`cross_${this.column.name}_${this.row.name}`;const fields=[].concat(null!==(_a=childIndependentFieldsWithStep.x)&&void 0!==_a?_a:[],null!==(_b=childIndependentFieldsWithStep.y)&&void 0!==_b?_b:[]),ops=fields.map((()=>"distinct"));data.push({name:crossedDataName,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields,ops}]})}for(const channel of[COLUMN,ROW])this[channel]&&data.push(this.assembleRowColumnHeaderData(channel,crossedDataName,childIndependentFieldsWithStep));if(facet){const facetData=this.assembleFacetHeaderData(childIndependentFieldsWithStep);facetData&&data.push(...facetData)}return data}}function unquote(pattern){return pattern.startsWith("'")&&pattern.endsWith("'")||pattern.startsWith('"')&&pattern.endsWith('"')?pattern.slice(1,-1):pattern}function getImplicitFromFilterTransform(transform){const implicit={};return forEachLeaf(transform.filter,(filter=>{var _a;if(isFieldPredicate(filter)){let val=null;isFieldEqualPredicate(filter)?val=signalRefOrValue(filter.equal):isFieldLTEPredicate(filter)?val=signalRefOrValue(filter.lte):isFieldLTPredicate(filter)?val=signalRefOrValue(filter.lt):isFieldGTPredicate(filter)?val=signalRefOrValue(filter.gt):isFieldGTEPredicate(filter)?val=signalRefOrValue(filter.gte):isFieldRangePredicate(filter)?val=filter.range[0]:isFieldOneOfPredicate(filter)&&(val=(null!==(_a=filter.oneOf)&&void 0!==_a?_a:filter.in)[0]),val&&(isDateTime(val)?implicit[filter.field]="date":isNumber(val)?implicit[filter.field]="number":isString(val)&&(implicit[filter.field]="string")),filter.timeUnit&&(implicit[filter.field]="date")}})),implicit}function getImplicitFromEncoding(model){const implicit={};function add(fieldDef){isFieldOrDatumDefForTimeFormat(fieldDef)?implicit[fieldDef.field]="date":"quantitative"===fieldDef.type&&function isMinMaxOp(aggregate){return isString(aggregate)&&util_contains(["min","max"],aggregate)}(fieldDef.aggregate)?implicit[fieldDef.field]="number":accessPathDepth(fieldDef.field)>1?fieldDef.field in implicit||(implicit[fieldDef.field]="flatten"):isScaleFieldDef(fieldDef)&&isSortField(fieldDef.sort)&&accessPathDepth(fieldDef.sort.field)>1&&(fieldDef.sort.field in implicit||(implicit[fieldDef.sort.field]="flatten"))}if((isUnitModel(model)||isFacetModel(model))&&model.forEachFieldDef(((fieldDef,channel)=>{if(isTypedFieldDef(fieldDef))add(fieldDef);else{const mainChannel=getMainRangeChannel(channel),mainFieldDef=model.fieldDef(mainChannel);add(Object.assign(Object.assign({},fieldDef),{type:mainFieldDef.type}))}})),isUnitModel(model)){const{mark,markDef,encoding}=model;if(isPathMark(mark)&&!model.encoding.order){const dimensionChannelDef=encoding["horizontal"===markDef.orient?"y":"x"];isFieldDef(dimensionChannelDef)&&"quantitative"===dimensionChannelDef.type&&!(dimensionChannelDef.field in implicit)&&(implicit[dimensionChannelDef.field]="number")}}return implicit}class ParseNode extends DataFlowNode{constructor(parent,parse){super(parent),this._parse=parse}clone(){return new ParseNode(null,duplicate(this._parse))}hash(){return`Parse ${hash(this._parse)}`}static makeExplicit(parent,model,ancestorParse){var _a;let explicit={};const data=model.data;return!isGenerator(data)&&(null===(_a=null==data?void 0:data.format)||void 0===_a?void 0:_a.parse)&&(explicit=data.format.parse),this.makeWithAncestors(parent,explicit,{},ancestorParse)}static makeWithAncestors(parent,explicit,implicit,ancestorParse){for(const field of util_keys(implicit)){const parsedAs=ancestorParse.getWithExplicit(field);void 0!==parsedAs.value&&(parsedAs.explicit||parsedAs.value===implicit[field]||"derived"===parsedAs.value||"flatten"===implicit[field]?delete implicit[field]:log_warn(differentParse(field,implicit[field],parsedAs.value)))}for(const field of util_keys(explicit)){const parsedAs=ancestorParse.get(field);void 0!==parsedAs&&(parsedAs===explicit[field]?delete explicit[field]:log_warn(differentParse(field,explicit[field],parsedAs)))}const parse=new Split(explicit,implicit);ancestorParse.copyAll(parse);const p={};for(const key of util_keys(parse.combine())){const val=parse.get(key);null!==val&&(p[key]=val)}return 0===util_keys(p).length||ancestorParse.parseNothing?null:new ParseNode(parent,p)}get parse(){return this._parse}merge(other){this._parse=Object.assign(Object.assign({},this._parse),other.parse),other.remove()}assembleFormatParse(){const formatParse={};for(const field of util_keys(this._parse)){const p=this._parse[field];1===accessPathDepth(field)&&(formatParse[field]=p)}return formatParse}producedFields(){return new Set(util_keys(this._parse))}dependentFields(){return new Set(util_keys(this._parse))}assembleTransforms(onlyNested=!1){return util_keys(this._parse).filter((field=>!onlyNested||accessPathDepth(field)>1)).map((field=>{const expr=function formatparse_parseExpression(field,parse){const f=accessPathWithDatum(field);if("number"===parse)return`toNumber(${f})`;if("boolean"===parse)return`toBoolean(${f})`;if("string"===parse)return`toString(${f})`;if("date"===parse)return`toDate(${f})`;if("flatten"===parse)return f;if(parse.startsWith("date:"))return`timeParse(${f},'${unquote(parse.slice(5,parse.length))}')`;if(parse.startsWith("utc:"))return`utcParse(${f},'${unquote(parse.slice(4,parse.length))}')`;return log_warn(function unrecognizedParse(p){return`Unrecognized parse "${p}".`}(parse)),null}(field,this._parse[field]);if(!expr)return null;return{type:"formula",expr,as:removePathFromField(field)}})).filter((t=>null!==t))}}class IdentifierNode extends DataFlowNode{clone(){return new IdentifierNode(null)}constructor(parent){super(parent)}dependentFields(){return new Set}producedFields(){return new Set(["_vgsid_"])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:"_vgsid_"}}}class GraticuleNode extends DataFlowNode{constructor(parent,params){super(parent),this.params=params}clone(){return new GraticuleNode(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${hash(this.params)}`}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class SequenceNode extends DataFlowNode{constructor(parent,params){super(parent),this.params=params}clone(){return new SequenceNode(null,this.params)}dependentFields(){return new Set}producedFields(){var _a;return new Set([null!==(_a=this.params.as)&&void 0!==_a?_a:"data"])}hash(){return`Hash ${hash(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class SourceNode extends DataFlowNode{constructor(data){let format;if(super(null),null!=data||(data={name:"source"}),isGenerator(data)||(format=data.format?Object.assign({},omit(data.format,["parse"])):{}),isInlineData(data))this._data={values:data.values};else if(isUrlData(data)){if(this._data={url:data.url},!format.type){let defaultExtension=/(?:\.([^.]+))?$/.exec(data.url)[1];util_contains(["json","csv","tsv","dsv","topojson"],defaultExtension)||(defaultExtension="json"),format.type=defaultExtension}}else isSphereGenerator(data)?this._data={values:[{type:"Sphere"}]}:(isNamedData(data)||isGenerator(data))&&(this._data={});this._generator=isGenerator(data),data.name&&(this._name=data.name),format&&!isEmpty(format)&&(this._data.format=format)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(name){this._name=name}set parent(parent){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var _Optimizer_modified,optimizer_classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},optimizer_classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};function isDataSourceNode(node){return node instanceof SourceNode||node instanceof GraticuleNode||node instanceof SequenceNode}class Optimizer{constructor(){_Optimizer_modified.set(this,void 0),optimizer_classPrivateFieldSet(this,_Optimizer_modified,!1,"f")}setModified(){optimizer_classPrivateFieldSet(this,_Optimizer_modified,!0,"f")}get modifiedFlag(){return optimizer_classPrivateFieldGet(this,_Optimizer_modified,"f")}}_Optimizer_modified=new WeakMap;class BottomUpOptimizer extends Optimizer{getNodeDepths(node,depth,depths){depths.set(node,depth);for(const child of node.children)this.getNodeDepths(child,depth+1,depths);return depths}optimize(node){const topologicalSort=[...this.getNodeDepths(node,0,new Map).entries()].sort(((a,b)=>b[1]-a[1]));for(const tuple of topologicalSort)this.run(tuple[0]);return this.modifiedFlag}}class TopDownOptimizer extends Optimizer{optimize(node){this.run(node);for(const child of node.children)this.optimize(child);return this.modifiedFlag}}class MergeIdenticalNodes extends TopDownOptimizer{mergeNodes(parent,nodes){const mergedNode=nodes.shift();for(const node of nodes)parent.removeChild(node),node.parent=mergedNode,node.remove()}run(node){const hashes=node.children.map((x=>x.hash())),buckets={};for(let i=0;i<hashes.length;i++)void 0===buckets[hashes[i]]?buckets[hashes[i]]=[node.children[i]]:buckets[hashes[i]].push(node.children[i]);for(const k of util_keys(buckets))buckets[k].length>1&&(this.setModified(),this.mergeNodes(node,buckets[k]))}}class RemoveUnnecessaryIdentifierNodes extends TopDownOptimizer{constructor(model){super(),this.requiresSelectionId=model&&requiresSelectionId(model)}run(node){node instanceof IdentifierNode&&(this.requiresSelectionId&&(isDataSourceNode(node.parent)||node.parent instanceof AggregateNode||node.parent instanceof ParseNode)||(this.setModified(),node.remove()))}}class RemoveDuplicateTimeUnits extends Optimizer{optimize(node){return this.run(node,new Set),this.modifiedFlag}run(node,timeUnitFields){let producedFields=new Set;node instanceof TimeUnitNode&&(producedFields=node.producedFields(),hasIntersection(producedFields,timeUnitFields)&&(this.setModified(),node.removeFormulas(timeUnitFields),0===node.producedFields.length&&node.remove()));for(const child of node.children)this.run(child,new Set([...timeUnitFields,...producedFields]))}}class RemoveUnnecessaryOutputNodes extends TopDownOptimizer{constructor(){super()}run(node){node instanceof OutputNode&&!node.isRequired()&&(this.setModified(),node.remove())}}class MoveParseUp extends BottomUpOptimizer{run(node){if(!(isDataSourceNode(node)||node.numChildren()>1))for(const child of node.children)if(child instanceof ParseNode)if(node instanceof ParseNode)this.setModified(),node.merge(child);else{if(fieldIntersection(node.producedFields(),child.dependentFields()))continue;this.setModified(),child.swapWithParent()}}}class MergeParse extends BottomUpOptimizer{run(node){const originalChildren=[...node.children],parseChildren=node.children.filter((child=>child instanceof ParseNode));if(node.numChildren()>1&&parseChildren.length>=1){const commonParse={},conflictingParse=new Set;for(const parseNode of parseChildren){const parse=parseNode.parse;for(const k of util_keys(parse))k in commonParse?commonParse[k]!==parse[k]&&conflictingParse.add(k):commonParse[k]=parse[k]}for(const field of conflictingParse)delete commonParse[field];if(!isEmpty(commonParse)){this.setModified();const mergedParseNode=new ParseNode(node,commonParse);for(const childNode of originalChildren){if(childNode instanceof ParseNode)for(const key of util_keys(commonParse))delete childNode.parse[key];node.removeChild(childNode),childNode.parent=mergedParseNode,childNode instanceof ParseNode&&0===util_keys(childNode.parse).length&&childNode.remove()}}}}}class RemoveUnusedSubtrees extends BottomUpOptimizer{run(node){node instanceof OutputNode||node.numChildren()>0||node instanceof FacetNode||node instanceof SourceNode||(this.setModified(),node.remove())}}class MergeTimeUnits extends BottomUpOptimizer{run(node){const timeUnitChildren=node.children.filter((x=>x instanceof TimeUnitNode)),combination=timeUnitChildren.pop();for(const timeUnit of timeUnitChildren)this.setModified(),combination.merge(timeUnit)}}class MergeAggregates extends BottomUpOptimizer{run(node){const aggChildren=node.children.filter((child=>child instanceof AggregateNode)),groupedAggregates={};for(const agg of aggChildren){const groupBys=hash(agg.groupBy);groupBys in groupedAggregates||(groupedAggregates[groupBys]=[]),groupedAggregates[groupBys].push(agg)}for(const group of util_keys(groupedAggregates)){const mergeableAggs=groupedAggregates[group];if(mergeableAggs.length>1){const mergedAggs=mergeableAggs.pop();for(const agg of mergeableAggs)mergedAggs.merge(agg)&&(node.removeChild(agg),agg.parent=mergedAggs,agg.remove(),this.setModified())}}}}class MergeBins extends BottomUpOptimizer{constructor(model){super(),this.model=model}run(node){const moveBinsUp=!(isDataSourceNode(node)||node instanceof FilterNode||node instanceof ParseNode||node instanceof IdentifierNode),promotableBins=[],remainingBins=[];for(const child of node.children)child instanceof BinNode&&(moveBinsUp&&!fieldIntersection(node.producedFields(),child.dependentFields())?promotableBins.push(child):remainingBins.push(child));if(promotableBins.length>0){const promotedBin=promotableBins.pop();for(const bin of promotableBins)promotedBin.merge(bin,this.model.renameSignal.bind(this.model));this.setModified(),node instanceof BinNode?node.merge(promotedBin,this.model.renameSignal.bind(this.model)):promotedBin.swapWithParent()}if(remainingBins.length>1){const remainingBin=remainingBins.pop();for(const bin of remainingBins)remainingBin.merge(bin,this.model.renameSignal.bind(this.model));this.setModified()}}}class MergeOutputs extends BottomUpOptimizer{run(node){const children=[...node.children];if(!some(children,(child=>child instanceof OutputNode))||node.numChildren()<=1)return;const otherChildren=[];let mainOutput;for(const child of children)if(child instanceof OutputNode){let lastOutput=child;for(;1===lastOutput.numChildren();){const[theChild]=lastOutput.children;if(!(theChild instanceof OutputNode))break;lastOutput=theChild}otherChildren.push(...lastOutput.children),mainOutput?(node.removeChild(child),child.parent=mainOutput.parent,mainOutput.parent.removeChild(mainOutput),mainOutput.parent=lastOutput,this.setModified()):mainOutput=lastOutput}else otherChildren.push(child);if(otherChildren.length){this.setModified();for(const child of otherChildren)child.parent.removeChild(child),child.parent=mainOutput}}}class JoinAggregateTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new JoinAggregateTransformNode(null,duplicate(this.transform))}addDimensions(fields){this.transform.groupby=unique(this.transform.groupby.concat(fields),(d=>d))}dependentFields(){const out=new Set;return this.transform.groupby&&this.transform.groupby.forEach(out.add,out),this.transform.joinaggregate.map((w=>w.field)).filter((f=>void 0!==f)).forEach(out.add,out),out}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(joinAggregateFieldDef){var _a;return null!==(_a=joinAggregateFieldDef.as)&&void 0!==_a?_a:vgField(joinAggregateFieldDef)}hash(){return`JoinAggregateTransform ${hash(this.transform)}`}assemble(){const fields=[],ops=[],as=[];for(const joinaggregate of this.transform.joinaggregate)ops.push(joinaggregate.op),as.push(this.getDefaultName(joinaggregate)),fields.push(void 0===joinaggregate.field?null:joinaggregate.field);const groupby=this.transform.groupby;return Object.assign({type:"joinaggregate",as,ops,fields},void 0!==groupby?{groupby}:{})}}class StackNode extends DataFlowNode{constructor(parent,stack){super(parent),this._stack=stack}clone(){return new StackNode(null,duplicate(this._stack))}static makeFromTransform(parent,stackTransform){const{stack,groupby,as,offset="zero"}=stackTransform,sortFields=[],sortOrder=[];if(void 0!==stackTransform.sort)for(const sortField of stackTransform.sort)sortFields.push(sortField.field),sortOrder.push(getFirstDefined(sortField.order,"ascending"));const sort={field:sortFields,order:sortOrder};let normalizedAs;return normalizedAs=function isValidAsArray(as){return isArray(as)&&as.every((s=>isString(s)))&&as.length>1}(as)?as:isString(as)?[as,`${as}_end`]:[`${stackTransform.stack}_start`,`${stackTransform.stack}_end`],new StackNode(parent,{dimensionFieldDefs:[],stackField:stack,groupby,offset,sort,facetby:[],as:normalizedAs})}static makeFromEncoding(parent,model){const stackProperties=model.stack,{encoding}=model;if(!stackProperties)return null;const{groupbyChannels,fieldChannel,offset,impute}=stackProperties,dimensionFieldDefs=groupbyChannels.map((groupbyChannel=>getFieldDef(encoding[groupbyChannel]))).filter((def=>!!def)),stackby=function getStackByFields(model){return model.stack.stackBy.reduce(((fields,by)=>{const _field=vgField(by.fieldDef);return _field&&fields.push(_field),fields}),[])}(model),orderDef=model.encoding.order;let sort;return sort=isArray(orderDef)||isFieldDef(orderDef)?sortParams(orderDef):stackby.reduce(((s,field)=>(s.field.push(field),s.order.push("y"===fieldChannel?"descending":"ascending"),s)),{field:[],order:[]}),new StackNode(parent,{dimensionFieldDefs,stackField:model.vgField(fieldChannel),facetby:[],stackby,sort,offset,impute,as:[model.vgField(fieldChannel,{suffix:"start",forAs:!0}),model.vgField(fieldChannel,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(fields){this._stack.facetby.push(...fields)}dependentFields(){const out=new Set;return out.add(this._stack.stackField),this.getGroupbyFields().forEach(out.add,out),this._stack.facetby.forEach(out.add,out),this._stack.sort.field.forEach(out.add,out),out}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${hash(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs,impute,groupby}=this._stack;return dimensionFieldDefs.length>0?dimensionFieldDefs.map((dimensionFieldDef=>dimensionFieldDef.bin?impute?[vgField(dimensionFieldDef,{binSuffix:"mid"})]:[vgField(dimensionFieldDef,{}),vgField(dimensionFieldDef,{binSuffix:"end"})]:[vgField(dimensionFieldDef)])).flat():null!=groupby?groupby:[]}assemble(){const transform=[],{facetby,dimensionFieldDefs,stackField:field,stackby,sort,offset,impute,as}=this._stack;if(impute)for(const dimensionFieldDef of dimensionFieldDefs){const{bandPosition=.5,bin}=dimensionFieldDef;if(bin){const binStart=vgField(dimensionFieldDef,{expr:"datum"}),binEnd=vgField(dimensionFieldDef,{expr:"datum",binSuffix:"end"});transform.push({type:"formula",expr:`${bandPosition}*${binStart}+${1-bandPosition}*${binEnd}`,as:vgField(dimensionFieldDef,{binSuffix:"mid",forAs:!0})})}transform.push({type:"impute",field,groupby:[...stackby,...facetby],key:vgField(dimensionFieldDef,{binSuffix:"mid"}),method:"value",value:0})}return transform.push({type:"stack",groupby:[...this.getGroupbyFields(),...facetby],field,sort,as,offset}),transform}}class WindowTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new WindowTransformNode(null,duplicate(this.transform))}addDimensions(fields){this.transform.groupby=unique(this.transform.groupby.concat(fields),(d=>d))}dependentFields(){var _a,_b;const out=new Set;return(null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]).forEach(out.add,out),(null!==(_b=this.transform.sort)&&void 0!==_b?_b:[]).forEach((m=>out.add(m.field))),this.transform.window.map((w=>w.field)).filter((f=>void 0!==f)).forEach(out.add,out),out}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(windowFieldDef){var _a;return null!==(_a=windowFieldDef.as)&&void 0!==_a?_a:vgField(windowFieldDef)}hash(){return`WindowTransform ${hash(this.transform)}`}assemble(){var _a;const fields=[],ops=[],as=[],params=[];for(const window of this.transform.window)ops.push(window.op),as.push(this.getDefaultName(window)),params.push(void 0===window.param?null:window.param),fields.push(void 0===window.field?null:window.field);const frame=this.transform.frame,groupby=this.transform.groupby;if(frame&&null===frame[0]&&null===frame[1]&&ops.every((o=>isAggregateOp(o))))return Object.assign({type:"joinaggregate",as,ops,fields},void 0!==groupby?{groupby}:{});const sortFields=[],sortOrder=[];if(void 0!==this.transform.sort)for(const sortField of this.transform.sort)sortFields.push(sortField.field),sortOrder.push(null!==(_a=sortField.order)&&void 0!==_a?_a:"ascending");const sort={field:sortFields,order:sortOrder},ignorePeers=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params,as,ops,fields,sort},void 0!==ignorePeers?{ignorePeers}:{}),void 0!==groupby?{groupby}:{}),void 0!==frame?{frame}:{})}}function moveFacetDown(node){if(node instanceof FacetNode)if(1!==node.numChildren()||node.children[0]instanceof OutputNode){const facetMain=node.model.component.data.main;moveMainDownToFacet(facetMain);const cloner=function cloneSubtree(facet){return function clone(node){if(!(node instanceof FacetNode)){const copy=node.clone();if(copy instanceof OutputNode){const newName=FACET_SCALE_PREFIX+copy.getSource();copy.setSource(newName),facet.model.component.data.outputNodes[newName]=copy}else(copy instanceof AggregateNode||copy instanceof StackNode||copy instanceof WindowTransformNode||copy instanceof JoinAggregateTransformNode)&&copy.addDimensions(facet.fields);for(const n of node.children.flatMap(clone))n.parent=copy;return[copy]}return node.children.flatMap(clone)}}(node),copy=node.children.map(cloner).flat();for(const c of copy)c.parent=facetMain}else{const child=node.children[0];(child instanceof AggregateNode||child instanceof StackNode||child instanceof WindowTransformNode||child instanceof JoinAggregateTransformNode)&&child.addDimensions(node.fields),child.swapWithParent(),moveFacetDown(node)}else node.children.map(moveFacetDown)}function moveMainDownToFacet(node){if(node instanceof OutputNode&&node.type===DataSourceType.Main&&1===node.numChildren()){const child=node.children[0];child instanceof FacetNode||(child.swapWithParent(),moveMainDownToFacet(node))}}const FACET_SCALE_PREFIX="scale_";function checkLinks(nodes){for(const node of nodes){for(const child of node.children)if(child.parent!==node)return!1;if(!checkLinks(node.children))return!1}return!0}function runOptimizer(optimizer,nodes){let modified=!1;for(const node of nodes)modified=optimizer.optimize(node)||modified;return modified}function optimizationDataflowHelper(dataComponent,model,firstPass){let roots=dataComponent.sources,modified=!1;return modified=runOptimizer(new RemoveUnnecessaryOutputNodes,roots)||modified,modified=runOptimizer(new RemoveUnnecessaryIdentifierNodes(model),roots)||modified,roots=roots.filter((r=>r.numChildren()>0)),modified=runOptimizer(new RemoveUnusedSubtrees,roots)||modified,roots=roots.filter((r=>r.numChildren()>0)),firstPass||(modified=runOptimizer(new MoveParseUp,roots)||modified,modified=runOptimizer(new MergeBins(model),roots)||modified,modified=runOptimizer(new RemoveDuplicateTimeUnits,roots)||modified,modified=runOptimizer(new MergeParse,roots)||modified,modified=runOptimizer(new MergeAggregates,roots)||modified,modified=runOptimizer(new MergeTimeUnits,roots)||modified,modified=runOptimizer(new MergeIdenticalNodes,roots)||modified,modified=runOptimizer(new MergeOutputs,roots)||modified),dataComponent.sources=roots,modified}class SignalRefWrapper{constructor(exprGenerator){Object.defineProperty(this,"signal",{enumerable:!0,get:exprGenerator})}static fromName(rename,signalName){return new SignalRefWrapper((()=>rename(signalName)))}}var domain_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function domain_parseScaleDomain(model){isUnitModel(model)?function parseUnitScaleDomain(model){const localScaleComponents=model.component.scales;for(const channel of util_keys(localScaleComponents)){const domains=parseDomainForChannel(model,channel);if(localScaleComponents[channel].setWithExplicit("domains",domains),parseSelectionDomain(model,channel),model.component.data.isFaceted){let facetParent=model;for(;!isFacetModel(facetParent)&&facetParent.parent;)facetParent=facetParent.parent;if("shared"===facetParent.component.resolve.scale[channel])for(const domain of domains.value)isDataRefDomain(domain)&&(domain.data=FACET_SCALE_PREFIX+domain.data.replace(FACET_SCALE_PREFIX,""))}}}(model):function parseNonUnitScaleDomain(model){for(const child of model.children)domain_parseScaleDomain(child);const localScaleComponents=model.component.scales;for(const channel of util_keys(localScaleComponents)){let domains,selectionExtent=null;for(const child of model.children){const childComponent=child.component.scales[channel];if(childComponent){domains=void 0===domains?childComponent.getWithExplicit("domains"):mergeValuesWithExplicit(domains,childComponent.getWithExplicit("domains"),"domains","scale",domainsTieBreaker);const se=childComponent.get("selectionExtent");selectionExtent&&se&&selectionExtent.param!==se.param&&log_warn(NEEDS_SAME_SELECTION),selectionExtent=se}}localScaleComponents[channel].setWithExplicit("domains",domains),selectionExtent&&localScaleComponents[channel].set("selectionExtent",selectionExtent,!0)}}(model)}function parseDomainForChannel(model,channel){const scaleType=model.getScaleComponent(channel).get("type"),{encoding}=model,domain=function normalizeUnaggregatedDomain(domain,fieldDef,scaleType,scaleConfig){if("unaggregated"===domain){const{valid,reason}=canUseUnaggregatedDomain(fieldDef,scaleType);if(!valid)return void log_warn(reason)}else if(void 0===domain&&scaleConfig.useUnaggregatedDomain){const{valid}=canUseUnaggregatedDomain(fieldDef,scaleType);if(valid)return"unaggregated"}return domain}(model.scaleDomain(channel),model.typedFieldDef(channel),scaleType,model.config.scale);return domain!==model.scaleDomain(channel)&&(model.specifiedScales[channel]=Object.assign(Object.assign({},model.specifiedScales[channel]),{domain})),"x"===channel&&getFieldOrDatumDef(encoding.x2)?getFieldOrDatumDef(encoding.x)?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,domain,model,"x"),parseSingleChannelDomain(scaleType,domain,model,"x2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(scaleType,domain,model,"x2"):"y"===channel&&getFieldOrDatumDef(encoding.y2)?getFieldOrDatumDef(encoding.y)?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,domain,model,"y"),parseSingleChannelDomain(scaleType,domain,model,"y2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(scaleType,domain,model,"y2"):parseSingleChannelDomain(scaleType,domain,model,channel)}function convertDomainIfItIsDateTime(domain,type,timeUnit){var _a;const normalizedTimeUnit=null===(_a=normalizeTimeUnit(timeUnit))||void 0===_a?void 0:_a.unit;return"temporal"===type||normalizedTimeUnit?function mapDomainToDataSignal(domain,type,timeUnit){return domain.map((v=>({signal:`{data: ${valueExpr(v,{timeUnit,type})}}`})))}(domain,type,normalizedTimeUnit):[domain]}function parseSingleChannelDomain(scaleType,domain,model,channel){const{encoding}=model,fieldOrDatumDef=getFieldOrDatumDef(encoding[channel]),{type}=fieldOrDatumDef,timeUnit=fieldOrDatumDef.timeUnit;if(function isDomainUnionWith(domain){return null==domain?void 0:domain.unionWith}(domain)){const defaultDomain=parseSingleChannelDomain(scaleType,void 0,model,channel);return makeExplicit([...convertDomainIfItIsDateTime(domain.unionWith,type,timeUnit),...defaultDomain.value])}if(isSignalRef(domain))return makeExplicit([domain]);if(domain&&"unaggregated"!==domain&&!isParameterDomain(domain))return makeExplicit(convertDomainIfItIsDateTime(domain,type,timeUnit));const stack=model.stack;if(stack&&channel===stack.fieldChannel){if("normalize"===stack.offset)return makeImplicit([[0,1]]);const data=model.requestDataName(DataSourceType.Main);return makeImplicit([{data,field:model.vgField(channel,{suffix:"start"})},{data,field:model.vgField(channel,{suffix:"end"})}])}const sort=isScaleChannel(channel)&&isFieldDef(fieldOrDatumDef)?function domainSort(model,channel,scaleType){if(!hasDiscreteDomain(scaleType))return;const fieldDef=model.fieldDef(channel),sort=fieldDef.sort;if(isSortArray(sort))return{op:"min",field:sortArrayIndexField(fieldDef,channel),order:"ascending"};const{stack}=model,stackDimensions=stack?new Set([...stack.groupbyFields,...stack.stackBy.map((s=>s.fieldDef.field))]):void 0;if(isSortField(sort)){return normalizeSortField(sort,stack&&!stackDimensions.has(sort.field))}if(isSortByEncoding(sort)){const{encoding,order}=sort,fieldDefToSortBy=model.fieldDef(encoding),{aggregate,field}=fieldDefToSortBy,isStackedMeasure=stack&&!stackDimensions.has(field);if(isArgminDef(aggregate)||isArgmaxDef(aggregate))return normalizeSortField({field:vgField(fieldDefToSortBy),order},isStackedMeasure);if(isAggregateOp(aggregate)||!aggregate)return normalizeSortField({op:aggregate,field,order},isStackedMeasure)}else{if("descending"===sort)return{op:"min",field:model.vgField(channel),order:"descending"};if(util_contains(["ascending",void 0],sort))return!0}return}(model,channel,scaleType):void 0;if(isDatumDef(fieldOrDatumDef)){return makeImplicit(convertDomainIfItIsDateTime([fieldOrDatumDef.datum],type,timeUnit))}const fieldDef=fieldOrDatumDef;if("unaggregated"===domain){const data=model.requestDataName(DataSourceType.Main),{field}=fieldOrDatumDef;return makeImplicit([{data,field:vgField({field,aggregate:"min"})},{data,field:vgField({field,aggregate:"max"})}])}if(isBinning(fieldDef.bin)){if(hasDiscreteDomain(scaleType))return makeImplicit("bin-ordinal"===scaleType?[]:[{data:util_isBoolean(sort)?model.requestDataName(DataSourceType.Main):model.requestDataName(DataSourceType.Raw),field:model.vgField(channel,binRequiresRange(fieldDef,channel)?{binSuffix:"range"}:{}),sort:!0!==sort&&isObject(sort)?sort:{field:model.vgField(channel,{}),op:"min"}}]);{const{bin}=fieldDef;if(isBinning(bin)){const binSignal=getBinSignalName(model,fieldDef.field,bin);return makeImplicit([new SignalRefWrapper((()=>{const signal=model.getSignalName(binSignal);return`[${signal}.start, ${signal}.stop]`}))])}return makeImplicit([{data:model.requestDataName(DataSourceType.Main),field:model.vgField(channel,{})}])}}if(fieldDef.timeUnit&&util_contains(["time","utc"],scaleType)&&hasBandEnd(fieldDef,isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,model.markDef,model.config)){const data=model.requestDataName(DataSourceType.Main);return makeImplicit([{data,field:model.vgField(channel)},{data,field:model.vgField(channel,{suffix:"end"})}])}return makeImplicit(sort?[{data:util_isBoolean(sort)?model.requestDataName(DataSourceType.Main):model.requestDataName(DataSourceType.Raw),field:model.vgField(channel),sort}]:[{data:model.requestDataName(DataSourceType.Main),field:model.vgField(channel)}])}function normalizeSortField(sort,isStackedMeasure){const{op,field,order}=sort;return Object.assign(Object.assign({op:null!=op?op:isStackedMeasure?"sum":DEFAULT_SORT_OP},field?{field:replacePathInField(field)}:{}),order?{order}:{})}function parseSelectionDomain(model,channel){var _a;const scale=model.component.scales[channel],spec=model.specifiedScales[channel].domain,bin=null===(_a=model.fieldDef(channel))||void 0===_a?void 0:_a.bin,domain=isParameterDomain(spec)&&spec,extent=isBinParams(bin)&&isParameterExtent(bin.extent)&&bin.extent;(domain||extent)&&scale.set("selectionExtent",null!=domain?domain:extent,!0)}function canUseUnaggregatedDomain(fieldDef,scaleType){const{aggregate,type}=fieldDef;return aggregate?isString(aggregate)&&!SHARED_DOMAIN_OPS.has(aggregate)?{valid:!1,reason:unaggregateDomainWithNonSharedDomainOp(aggregate)}:"quantitative"===type&&"log"===scaleType?{valid:!1,reason:unaggregatedDomainWithLogScale(fieldDef)}:{valid:!0}:{valid:!1,reason:unaggregateDomainHasNoEffectForRawField(fieldDef)}}function domainsTieBreaker(v1,v2,property,propertyOf){return v1.explicit&&v2.explicit&&log_warn(function mergeConflictingDomainProperty(property,propertyOf,v1,v2){return`Conflicting ${propertyOf.toString()} property "${property.toString()}" (${stringify(v1)} and ${stringify(v2)}). Using the union of the two domains.`}(property,propertyOf,v1.value,v2.value)),{explicit:v1.explicit,value:[...v1.value,...v2.value]}}function mergeDomains(domains){const uniqueDomains=unique(domains.map((domain=>{if(isDataRefDomain(domain)){const{sort:_s}=domain;return domain_rest(domain,["sort"])}return domain})),hash),sorts=unique(domains.map((d=>{if(isDataRefDomain(d)){const s=d.sort;return void 0===s||util_isBoolean(s)||("op"in s&&"count"===s.op&&delete s.field,"ascending"===s.order&&delete s.order),s}})).filter((s=>void 0!==s)),hash);if(0===uniqueDomains.length)return;if(1===uniqueDomains.length){const domain=domains[0];if(isDataRefDomain(domain)&&sorts.length>0){let sort=sorts[0];if(sorts.length>1)log_warn(MORE_THAN_ONE_SORT),sort=!0;else if(isObject(sort)&&"field"in sort){const sortField=sort.field;domain.field===sortField&&(sort=!sort.order||{order:sort.order})}return Object.assign(Object.assign({},domain),{sort})}return domain}const unionDomainSorts=unique(sorts.map((s=>util_isBoolean(s)||!("op"in s)||isString(s.op)&&s.op in MULTIDOMAIN_SORT_OP_INDEX?s:(log_warn(function domainSortDropped(sort){return`Dropping sort property ${stringify(sort)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0))),hash);let sort;1===unionDomainSorts.length?sort=unionDomainSorts[0]:unionDomainSorts.length>1&&(log_warn(MORE_THAN_ONE_SORT),sort=!0);const allData=unique(domains.map((d=>isDataRefDomain(d)?d.data:null)),(x=>x));if(1===allData.length&&null!==allData[0]){return Object.assign({data:allData[0],fields:uniqueDomains.map((d=>d.field))},sort?{sort}:{})}return Object.assign({fields:uniqueDomains},sort?{sort}:{})}function getFieldFromDomain(domain){if(isDataRefDomain(domain)&&isString(domain.field))return domain.field;if(function isDataRefUnionedDomain(domain){return!isArray(domain)&&"fields"in domain&&!("data"in domain)}(domain)){let field;for(const nonUnionDomain of domain.fields)if(isDataRefDomain(nonUnionDomain)&&isString(nonUnionDomain.field))if(field){if(field!==nonUnionDomain.field)return log_warn("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),field}else field=nonUnionDomain.field;return log_warn("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),field}if(function isFieldRefUnionDomain(domain){return!isArray(domain)&&"fields"in domain&&"data"in domain}(domain)){log_warn("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const field=domain.fields[0];return isString(field)?field:void 0}}function assembleDomain(model,channel){const domains=model.component.scales[channel].get("domains").map((domain=>(isDataRefDomain(domain)&&(domain.data=model.lookupDataSource(domain.data)),domain)));return mergeDomains(domains)}var scale_assemble_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function assembleScales(model){return isLayerModel(model)||isConcatModel(model)?model.children.reduce(((scales,child)=>scales.concat(assembleScales(child))),assembleScalesForModel(model)):assembleScalesForModel(model)}function assembleScalesForModel(model){return util_keys(model.component.scales).reduce(((scales,channel)=>{const scaleComponent=model.component.scales[channel];if(scaleComponent.merged)return scales;const scale=scaleComponent.combine(),{name,type,selectionExtent,domains:_d,range:_r,reverse}=scale,otherScaleProps=scale_assemble_rest(scale,["name","type","selectionExtent","domains","range","reverse"]),range=function assembleScaleRange(scaleRange,scaleName,channel,model){if(isXorY(channel)){if(isVgRangeStep(scaleRange))return{step:{signal:`${scaleName}_step`}}}else if(isObject(scaleRange)&&isDataRefDomain(scaleRange))return Object.assign(Object.assign({},scaleRange),{data:model.lookupDataSource(scaleRange.data)});return scaleRange}(scale.range,name,channel,model),domain=assembleDomain(model,channel),domainRaw=selectionExtent?function assembleSelectionScaleDomain(model,extent,scaleCmpt,domain){const parsedExtent=parseSelectionExtent(model,extent.param,extent);return{signal:hasContinuousDomain(scaleCmpt.get("type"))&&isArray(domain)&&domain[0]>domain[1]?`isValid(${parsedExtent}) && reverse(${parsedExtent})`:parsedExtent}}(model,selectionExtent,scaleComponent,domain):null;return scales.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name,type},domain?{domain}:{}),domainRaw?{domainRaw}:{}),{range}),void 0!==reverse?{reverse}:{}),otherScaleProps)),scales}),[])}class ScaleComponent extends Split{constructor(name,typeWithExplicit){super({},{name}),this.merged=!1,this.setWithExplicit("type",typeWithExplicit)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||some(this.get("domains"),(d=>isArray(d)&&2===d.length&&d[0]<=0&&d[1]>=0))}}const RANGE_PROPERTIES=["range","scheme"];function getBinStepSignal(model,channel){const fieldDef=model.fieldDef(channel);if(null==fieldDef?void 0:fieldDef.bin){const{bin,field}=fieldDef,sizeType=getSizeChannel(channel),sizeSignal=model.getName(sizeType);if(isObject(bin)&&bin.binned&&void 0!==bin.step)return new SignalRefWrapper((()=>{const scaleName=model.scaleName(channel),binCount=`(domain("${scaleName}")[1] - domain("${scaleName}")[0]) / ${bin.step}`;return`${model.getSignalName(sizeSignal)} / (${binCount})`}));if(isBinning(bin)){const binSignal=getBinSignalName(model,field,bin);return new SignalRefWrapper((()=>{const updatedName=model.getSignalName(binSignal),binCount=`(${updatedName}.stop - ${updatedName}.start) / ${updatedName}.step`;return`${model.getSignalName(sizeSignal)} / (${binCount})`}))}}}function parseRangeForChannel(channel,model){const specifiedScale=model.specifiedScales[channel],{size}=model,scaleType=model.getScaleComponent(channel).get("type");for(const property of RANGE_PROPERTIES)if(void 0!==specifiedScale[property]){const supportedByScaleType=scaleTypeSupportProperty(scaleType,property),channelIncompatability=channelScalePropertyIncompatability(channel,property);if(supportedByScaleType)if(channelIncompatability)log_warn(channelIncompatability);else switch(property){case"range":{const range=specifiedScale.range;if(isArray(range)){if(isXorY(channel))return makeExplicit(range.map((v=>{if("width"===v||"height"===v){const sizeSignal=model.getName(v),getSignalName=model.getSignalName.bind(model);return SignalRefWrapper.fromName(getSignalName,sizeSignal)}return v})))}else if(isObject(range))return makeExplicit({data:model.requestDataName(DataSourceType.Main),field:range.field,sort:{op:"min",field:model.vgField(channel)}});return makeExplicit(range)}case"scheme":return makeExplicit(parseScheme(specifiedScale[property]))}else log_warn(scalePropertyNotWorkWithScaleType(scaleType,property,channel))}const sizeChannel="x"===channel||"xOffset"===channel?"width":"height",sizeValue=size[sizeChannel];if(isStep(sizeValue))if(isXorY(channel))if(hasDiscreteDomain(scaleType)){const step=getPositionStep(sizeValue,model,channel);if(step)return makeExplicit({step})}else log_warn(stepDropped(sizeChannel));else if(isXorYOffset(channel)){const positionChannel=channel===XOFFSET?"x":"y";if("band"===model.getScaleComponent(positionChannel).get("type")){const step=getOffsetStep(sizeValue,scaleType);if(step)return makeExplicit(step)}}const{rangeMin,rangeMax}=specifiedScale,d=function defaultRange(channel,model){const{size,config,mark,encoding}=model,getSignalName=model.getSignalName.bind(model),{type}=getFieldOrDatumDef(encoding[channel]),scaleType=model.getScaleComponent(channel).get("type"),{domain,domainMid}=model.specifiedScales[channel];switch(channel){case"x":case"y":{if(util_contains(["point","band"],scaleType)){const positionSize=getDiscretePositionSize(channel,size,config.view);if(isStep(positionSize)){return{step:getPositionStep(positionSize,model,channel)}}}const sizeType=getSizeChannel(channel),sizeSignal=model.getName(sizeType);return"y"===channel&&hasContinuousDomain(scaleType)?[SignalRefWrapper.fromName(getSignalName,sizeSignal),0]:[0,SignalRefWrapper.fromName(getSignalName,sizeSignal)]}case XOFFSET:case"yOffset":return function getOffsetRange(channel,model,offsetScaleType){const positionChannel=channel===XOFFSET?"x":"y",positionScaleType=model.getScaleComponent(positionChannel).get("type"),positionScaleName=model.scaleName(positionChannel);if("band"===positionScaleType){const size=getDiscretePositionSize(positionChannel,model.size,model.config.view);if(isStep(size)){const step=getOffsetStep(size,offsetScaleType);if(step)return step}return[0,{signal:`bandwidth('${positionScaleName}')`}]}return never(`Cannot use ${channel} scale if ${positionChannel} scale is not discrete.`)}(channel,model,scaleType);case"size":{const rangeMin=sizeRangeMin(mark,model.component.scales[channel].get("zero"),config),rangeMax=function sizeRangeMax(mark,size,model,config){const xyStepSignals={x:getBinStepSignal(model,"x"),y:getBinStepSignal(model,"y")};switch(mark){case"bar":case"tick":{if(void 0!==config.scale.maxBandSize)return config.scale.maxBandSize;const min=minXYStep(size,xyStepSignals,config.view);return isNumber(min)?min-1:new SignalRefWrapper((()=>`${min.signal} - 1`))}case"line":case"trail":case"rule":return config.scale.maxStrokeWidth;case"text":return config.scale.maxFontSize;case"point":case"square":case"circle":{if(config.scale.maxSize)return config.scale.maxSize;const pointStep=minXYStep(size,xyStepSignals,config.view);return isNumber(pointStep)?Math.pow(.95*pointStep,2):new SignalRefWrapper((()=>`pow(0.95 * ${pointStep.signal}, 2)`))}}throw new Error(incompatibleChannel("size",mark))}(mark,size,model,config);return isContinuousToDiscrete(scaleType)?function range_interpolateRange(rangeMin,rangeMax,cardinality){const f=()=>{const rMax=signalOrStringValue(rangeMax),rMin=signalOrStringValue(rangeMin),step=`(${rMax} - ${rMin}) / (${cardinality} - 1)`;return`sequence(${rMin}, ${rMax} + ${step}, ${step})`};return isSignalRef(rangeMax)?new SignalRefWrapper(f):{signal:f()}}(rangeMin,rangeMax,function defaultContinuousToDiscreteCount(scaleType,config,domain,channel){switch(scaleType){case"quantile":return config.scale.quantileCount;case"quantize":return config.scale.quantizeCount;case"threshold":return void 0!==domain&&isArray(domain)?domain.length+1:(log_warn(function domainRequiredForThresholdScale(channel){return`Domain for ${channel} is required for threshold scale.`}(channel)),3)}}(scaleType,config,domain,channel)):[rangeMin,rangeMax]}case THETA:return[0,2*Math.PI];case ANGLE:return[0,360];case RADIUS:return[0,new SignalRefWrapper((()=>`min(${model.getSignalName("width")},${model.getSignalName("height")})/2`))];case"strokeWidth":return[config.scale.minStrokeWidth,config.scale.maxStrokeWidth];case"strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case SHAPE:return"symbol";case COLOR:case FILL:case STROKE:return"ordinal"===scaleType?"nominal"===type?"category":"ordinal":void 0!==domainMid?"diverging":"rect"===mark||"geoshape"===mark?"heatmap":"ramp";case OPACITY:case"fillOpacity":case"strokeOpacity":return[config.scale.minOpacity,config.scale.maxOpacity]}}(channel,model);return(void 0!==rangeMin||void 0!==rangeMax)&&scaleTypeSupportProperty(scaleType,"rangeMin")&&isArray(d)&&2===d.length?makeExplicit([null!=rangeMin?rangeMin:d[0],null!=rangeMax?rangeMax:d[1]]):makeImplicit(d)}function parseScheme(scheme){return function isExtendedScheme(scheme){return!isString(scheme)&&!!scheme.name}(scheme)?Object.assign({scheme:scheme.name},omit(scheme,["name"])):{scheme}}function getPositionStep(step,model,channel){var _a,_b,_c,_d,_e;const{encoding}=model,mergedScaleCmpt=model.getScaleComponent(channel),offsetChannel=getOffsetScaleChannel(channel),offsetDef=encoding[offsetChannel];if("offset"===getStepFor({step,offsetIsDiscrete:isFieldOrDatumDef(offsetDef)&&type_isDiscrete(offsetDef.type)})&&channelHasFieldOrDatum(encoding,offsetChannel)){const offsetScaleCmpt=model.getScaleComponent(offsetChannel);let stepCount=`domain('${model.scaleName(offsetChannel)}').length`;if("band"===offsetScaleCmpt.get("type")){stepCount=`bandspace(${stepCount}, ${null!==(_b=null!==(_a=offsetScaleCmpt.get("paddingInner"))&&void 0!==_a?_a:offsetScaleCmpt.get("padding"))&&void 0!==_b?_b:0}, ${null!==(_d=null!==(_c=offsetScaleCmpt.get("paddingOuter"))&&void 0!==_c?_c:offsetScaleCmpt.get("padding"))&&void 0!==_d?_d:0})`}const paddingInner=null!==(_e=mergedScaleCmpt.get("paddingInner"))&&void 0!==_e?_e:mergedScaleCmpt.get("padding");return{signal:`${step.step} * ${stepCount} / (1-${exprFromSignalRefOrValue(paddingInner)})`}}return step.step}function getOffsetStep(step,offsetScaleType){if("offset"===getStepFor({step,offsetIsDiscrete:hasDiscreteDomain(offsetScaleType)}))return{step:step.step}}function getDiscretePositionSize(channel,size,viewConfig){const sizeChannel="x"===channel?"width":"height",sizeValue=size[sizeChannel];return sizeValue||getViewConfigDiscreteSize(viewConfig,sizeChannel)}function sizeRangeMin(mark,zero,config){if(zero)return isSignalRef(zero)?{signal:`${zero.signal} ? 0 : ${sizeRangeMin(mark,!1,config)}`}:0;switch(mark){case"bar":case"tick":return config.scale.minBandSize;case"line":case"trail":case"rule":return config.scale.minStrokeWidth;case"text":return config.scale.minFontSize;case"point":case"square":case"circle":return config.scale.minSize}throw new Error(incompatibleChannel("size",mark))}function minXYStep(size,xyStepSignals,viewConfig){const widthStep=isStep(size.width)?size.width.step:getViewConfigDiscreteStep(viewConfig,"width"),heightStep=isStep(size.height)?size.height.step:getViewConfigDiscreteStep(viewConfig,"height");return xyStepSignals.x||xyStepSignals.y?new SignalRefWrapper((()=>`min(${[xyStepSignals.x?xyStepSignals.x.signal:widthStep,xyStepSignals.y?xyStepSignals.y.signal:heightStep].join(", ")})`)):Math.min(widthStep,heightStep)}function parseScaleProperty(model,property){isUnitModel(model)?function parseUnitScaleProperty(model,property){const localScaleComponents=model.component.scales,{config,encoding,markDef,specifiedScales}=model;for(const channel of util_keys(localScaleComponents)){const specifiedScale=specifiedScales[channel],localScaleCmpt=localScaleComponents[channel],mergedScaleCmpt=model.getScaleComponent(channel),fieldOrDatumDef=getFieldOrDatumDef(encoding[channel]),specifiedValue=specifiedScale[property],scaleType=mergedScaleCmpt.get("type"),scalePadding=mergedScaleCmpt.get("padding"),scalePaddingInner=mergedScaleCmpt.get("paddingInner"),supportedByScaleType=scaleTypeSupportProperty(scaleType,property),channelIncompatability=channelScalePropertyIncompatability(channel,property);if(void 0!==specifiedValue&&(supportedByScaleType?channelIncompatability&&log_warn(channelIncompatability):log_warn(scalePropertyNotWorkWithScaleType(scaleType,property,channel))),supportedByScaleType&&void 0===channelIncompatability)if(void 0!==specifiedValue){const timeUnit=fieldOrDatumDef.timeUnit,type=fieldOrDatumDef.type;switch(property){case"domainMax":case"domainMin":isDateTime(specifiedScale[property])||"temporal"===type||timeUnit?localScaleCmpt.set(property,{signal:valueExpr(specifiedScale[property],{type,timeUnit})},!0):localScaleCmpt.set(property,specifiedScale[property],!0);break;default:localScaleCmpt.copyKeyFromObject(property,specifiedScale)}}else{const value=property in scaleRules?scaleRules[property]({model,channel,fieldOrDatumDef,scaleType,scalePadding,scalePaddingInner,domain:specifiedScale.domain,domainMin:specifiedScale.domainMin,domainMax:specifiedScale.domainMax,markDef,config,hasNestedOffsetScale:channelHasNestedOffsetScale(encoding,channel),hasSecondaryRangeChannel:!!encoding[getSecondaryRangeChannel(channel)]}):config.scale[property];void 0!==value&&localScaleCmpt.set(property,value,!1)}}}(model,property):parseNonUnitScaleProperty(model,property)}const scaleRules={bins:({model,fieldOrDatumDef})=>isFieldDef(fieldOrDatumDef)?function bins(model,fieldDef){const bin=fieldDef.bin;if(isBinning(bin)){const binSignal=getBinSignalName(model,fieldDef.field,bin);return new SignalRefWrapper((()=>model.getSignalName(binSignal)))}if(isBinned(bin)&&isBinParams(bin)&&void 0!==bin.step)return{step:bin.step};return}(model,fieldOrDatumDef):void 0,interpolate:({channel,fieldOrDatumDef})=>function properties_interpolate(channel,type){if(util_contains([COLOR,FILL,STROKE],channel)&&"nominal"!==type)return"hcl";return}(channel,fieldOrDatumDef.type),nice:({scaleType,channel,domain,domainMin,domainMax,fieldOrDatumDef})=>function properties_nice(scaleType,channel,specifiedDomain,domainMin,domainMax,fieldOrDatumDef){var _a;if((null===(_a=getFieldDef(fieldOrDatumDef))||void 0===_a?void 0:_a.bin)||isArray(specifiedDomain)||null!=domainMax||null!=domainMin||util_contains([ScaleType_TIME,ScaleType_UTC],scaleType))return;return!!isXorY(channel)||void 0}(scaleType,channel,domain,domainMin,domainMax,fieldOrDatumDef),padding:({channel,scaleType,fieldOrDatumDef,markDef,config})=>function properties_padding(channel,scaleType,scaleConfig,fieldOrDatumDef,markDef,barConfig){if(isXorY(channel)){if(isContinuousToContinuous(scaleType)){if(void 0!==scaleConfig.continuousPadding)return scaleConfig.continuousPadding;const{type,orient}=markDef;if("bar"===type&&(!isFieldDef(fieldOrDatumDef)||!fieldOrDatumDef.bin&&!fieldOrDatumDef.timeUnit)&&("vertical"===orient&&"x"===channel||"horizontal"===orient&&"y"===channel))return barConfig.continuousBandSize}if(scaleType===ScaleType_POINT)return scaleConfig.pointPadding}return}(channel,scaleType,config.scale,fieldOrDatumDef,markDef,config.bar),paddingInner:({scalePadding,channel,markDef,scaleType,config,hasNestedOffsetScale})=>function paddingInner(paddingValue,channel,mark,scaleType,scaleConfig,hasNestedOffsetScale=!1){if(void 0!==paddingValue)return;if(isXorY(channel)){const{bandPaddingInner,barBandPaddingInner,rectBandPaddingInner,bandWithNestedOffsetPaddingInner}=scaleConfig;return hasNestedOffsetScale?bandWithNestedOffsetPaddingInner:getFirstDefined(bandPaddingInner,"bar"===mark?barBandPaddingInner:rectBandPaddingInner)}if(isXorYOffset(channel)&&scaleType===ScaleType_BAND)return scaleConfig.offsetBandPaddingInner;return}(scalePadding,channel,markDef.type,scaleType,config.scale,hasNestedOffsetScale),paddingOuter:({scalePadding,channel,scaleType,scalePaddingInner,config,hasNestedOffsetScale})=>function paddingOuter(paddingValue,channel,scaleType,paddingInnerValue,scaleConfig,hasNestedOffsetScale=!1){if(void 0!==paddingValue)return;if(isXorY(channel)){const{bandPaddingOuter,bandWithNestedOffsetPaddingOuter}=scaleConfig;if(hasNestedOffsetScale)return bandWithNestedOffsetPaddingOuter;if(scaleType===ScaleType_BAND)return getFirstDefined(bandPaddingOuter,isSignalRef(paddingInnerValue)?{signal:`${paddingInnerValue.signal}/2`}:paddingInnerValue/2)}else if(isXorYOffset(channel)){if(scaleType===ScaleType_POINT)return.5;if(scaleType===ScaleType_BAND)return scaleConfig.offsetBandPaddingOuter}return}(scalePadding,channel,scaleType,scalePaddingInner,config.scale,hasNestedOffsetScale),reverse:({fieldOrDatumDef,scaleType,channel,config})=>function properties_reverse(scaleType,sort,channel,scaleConfig){if("x"===channel&&void 0!==scaleConfig.xReverse)return hasContinuousDomain(scaleType)&&"descending"===sort?isSignalRef(scaleConfig.xReverse)?{signal:`!${scaleConfig.xReverse.signal}`}:!scaleConfig.xReverse:scaleConfig.xReverse;if(hasContinuousDomain(scaleType)&&"descending"===sort)return!0;return}(scaleType,isFieldDef(fieldOrDatumDef)?fieldOrDatumDef.sort:void 0,channel,config.scale),zero:({channel,fieldOrDatumDef,domain,markDef,scaleType,config,hasSecondaryRangeChannel})=>function properties_zero(channel,fieldDef,specifiedDomain,markDef,scaleType,scaleConfig,hasSecondaryRangeChannel){if(specifiedDomain&&"unaggregated"!==specifiedDomain&&hasContinuousDomain(scaleType)){if(isArray(specifiedDomain)){const first=specifiedDomain[0],last=specifiedDomain[specifiedDomain.length-1];if(first<=0&&last>=0)return!0}return!1}if("size"===channel&&"quantitative"===fieldDef.type&&!isContinuousToDiscrete(scaleType))return!0;if((!isFieldDef(fieldDef)||!fieldDef.bin)&&util_contains([...POSITION_SCALE_CHANNELS,...POLAR_POSITION_SCALE_CHANNELS],channel)){const{orient,type}=markDef;return(!util_contains(["bar","area","line","trail"],type)||!("horizontal"===orient&&"y"===channel||"vertical"===orient&&"x"===channel))&&(!(!util_contains(["bar","area"],type)||hasSecondaryRangeChannel)||(null==scaleConfig?void 0:scaleConfig.zero))}return!1}(channel,fieldOrDatumDef,domain,markDef,scaleType,config.scale,hasSecondaryRangeChannel)};function properties_parseScaleRange(model){isUnitModel(model)?function parseUnitScaleRange(model){const localScaleComponents=model.component.scales;for(const channel of SCALE_CHANNELS){const localScaleCmpt=localScaleComponents[channel];if(!localScaleCmpt)continue;const rangeWithExplicit=parseRangeForChannel(channel,model);localScaleCmpt.setWithExplicit("range",rangeWithExplicit)}}(model):parseNonUnitScaleProperty(model,"range")}function parseNonUnitScaleProperty(model,property){const localScaleComponents=model.component.scales;for(const child of model.children)"range"===property?properties_parseScaleRange(child):parseScaleProperty(child,property);for(const channel of util_keys(localScaleComponents)){let valueWithExplicit;for(const child of model.children){const childComponent=child.component.scales[channel];if(childComponent){valueWithExplicit=mergeValuesWithExplicit(valueWithExplicit,childComponent.getWithExplicit(property),property,"scale",tieBreakByComparing(((v1,v2)=>"range"===property&&v1.step&&v2.step?v1.step-v2.step:0)))}}localScaleComponents[channel].setWithExplicit(property,valueWithExplicit)}}function scaleType(specifiedScale,channel,fieldDef,mark,hasNestedOffsetScale=!1){const defaultScaleType=function type_defaultType(channel,fieldDef,mark,hasNestedOffsetScale){var _a;switch(fieldDef.type){case"nominal":case"ordinal":if(isColorChannel(channel)||"discrete"===rangeType(channel))return"shape"===channel&&"ordinal"===fieldDef.type&&log_warn(discreteChannelCannotEncode(channel,"ordinal")),"ordinal";if(isXorY(channel)||isXorYOffset(channel)){if(util_contains(["rect","bar","image","rule"],mark.type))return"band";if(hasNestedOffsetScale)return"band"}else if("arc"===mark.type&&channel in POLAR_POSITION_SCALE_CHANNEL_INDEX)return"band";return isRelativeBandSize(mark[getSizeChannel(channel)])||isPositionFieldOrDatumDef(fieldDef)&&(null===(_a=fieldDef.axis)||void 0===_a?void 0:_a.tickBand)?"band":"point";case"temporal":return isColorChannel(channel)?"time":"discrete"===rangeType(channel)?(log_warn(discreteChannelCannotEncode(channel,"temporal")),"ordinal"):isFieldDef(fieldDef)&&fieldDef.timeUnit&&normalizeTimeUnit(fieldDef.timeUnit).utc?"utc":"time";case"quantitative":return isColorChannel(channel)?isFieldDef(fieldDef)&&isBinning(fieldDef.bin)?"bin-ordinal":"linear":"discrete"===rangeType(channel)?(log_warn(discreteChannelCannotEncode(channel,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(invalidFieldType(fieldDef.type))}(channel,fieldDef,mark,hasNestedOffsetScale),{type}=specifiedScale;return isScaleChannel(channel)?void 0!==type?function channelSupportScaleType(channel,scaleType,hasNestedOffsetScale=!1){if(!isScaleChannel(channel))return!1;switch(channel){case"x":case"y":case"xOffset":case"yOffset":case THETA:case RADIUS:return!!isContinuousToContinuous(scaleType)||"band"===scaleType||"point"===scaleType&&!hasNestedOffsetScale;case"size":case"strokeWidth":case OPACITY:case"fillOpacity":case"strokeOpacity":case ANGLE:return isContinuousToContinuous(scaleType)||isContinuousToDiscrete(scaleType)||util_contains(["band","point","ordinal"],scaleType);case COLOR:case FILL:case STROKE:return"band"!==scaleType;case"strokeDash":case SHAPE:return"ordinal"===scaleType||isContinuousToDiscrete(scaleType)}}(channel,type)?isFieldDef(fieldDef)&&!function scaleTypeSupportDataType(specifiedType,fieldDefType){return util_contains([ORDINAL,NOMINAL],fieldDefType)?void 0===specifiedType||hasDiscreteDomain(specifiedType):fieldDefType===TEMPORAL?util_contains([ScaleType_TIME,ScaleType_UTC,void 0],specifiedType):fieldDefType!==QUANTITATIVE||isQuantitative(specifiedType)||isContinuousToDiscrete(specifiedType)||void 0===specifiedType}(type,fieldDef.type)?(log_warn(function scaleTypeNotWorkWithFieldDef(scaleType,defaultScaleType){return`FieldDef does not work with "${scaleType}" scale. We are using "${defaultScaleType}" scale instead.`}(type,defaultScaleType)),defaultScaleType):type:(log_warn(function scaleTypeNotWorkWithChannel(channel,scaleType,defaultScaleType){return`Channel "${channel}" does not work with "${scaleType}" scale. We are using "${defaultScaleType}" scale instead.`}(channel,type,defaultScaleType)),defaultScaleType):defaultScaleType:null}function parseScaleCore(model){isUnitModel(model)?model.component.scales=function parseUnitScaleCore(model){const{encoding,mark,markDef}=model,scaleComponents={};for(const channel of SCALE_CHANNELS){const fieldOrDatumDef=getFieldOrDatumDef(encoding[channel]);if(fieldOrDatumDef&&mark===GEOSHAPE&&channel===SHAPE&&fieldOrDatumDef.type===GEOJSON)continue;let specifiedScale=fieldOrDatumDef&&fieldOrDatumDef.scale;if(isXorYOffset(channel)){if(!channelHasNestedOffsetScale(encoding,getMainChannelFromOffsetChannel(channel))){specifiedScale&&log_warn(offsetEncodingScaleIgnored(channel));continue}}if(fieldOrDatumDef&&null!==specifiedScale&&!1!==specifiedScale){null!=specifiedScale||(specifiedScale={});const sType=scaleType(specifiedScale,channel,fieldOrDatumDef,markDef,channelHasNestedOffsetScale(encoding,channel));scaleComponents[channel]=new ScaleComponent(model.scaleName(`${channel}`,!0),{value:sType,explicit:specifiedScale.type===sType})}}return scaleComponents}(model):model.component.scales=function parseNonUnitScaleCore(model){var _a,_b;const scaleComponents=model.component.scales={},scaleTypeWithExplicitIndex={},resolve=model.component.resolve;for(const child of model.children){parseScaleCore(child);for(const channel of util_keys(child.component.scales))if(null!==(_a=(_b=resolve.scale)[channel])&&void 0!==_a||(_b[channel]=defaultScaleResolve(channel,model)),"shared"===resolve.scale[channel]){const explicitScaleType=scaleTypeWithExplicitIndex[channel],childScaleType=child.component.scales[channel].getWithExplicit("type");explicitScaleType?scaleCompatible(explicitScaleType.value,childScaleType.value)?scaleTypeWithExplicitIndex[channel]=mergeValuesWithExplicit(explicitScaleType,childScaleType,"type","scale",scaleTypeTieBreaker):(resolve.scale[channel]="independent",delete scaleTypeWithExplicitIndex[channel]):scaleTypeWithExplicitIndex[channel]=childScaleType}}for(const channel of util_keys(scaleTypeWithExplicitIndex)){const name=model.scaleName(channel,!0),typeWithExplicit=scaleTypeWithExplicitIndex[channel];scaleComponents[channel]=new ScaleComponent(name,typeWithExplicit);for(const child of model.children){const childScale=child.component.scales[channel];childScale&&(child.renameScale(childScale.get("name"),name),childScale.merged=!0)}}return scaleComponents}(model)}const scaleTypeTieBreaker=tieBreakByComparing(((st1,st2)=>scaleTypePrecedence(st1)-scaleTypePrecedence(st2)));var model_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class NameMap{constructor(){this.nameMap={}}rename(oldName,newName){this.nameMap[oldName]=newName}has(name){return void 0!==this.nameMap[name]}get(name){for(;this.nameMap[name]&&name!==this.nameMap[name];)name=this.nameMap[name];return name}}function isUnitModel(model){return"unit"===(null==model?void 0:model.type)}function isFacetModel(model){return"facet"===(null==model?void 0:model.type)}function isConcatModel(model){return"concat"===(null==model?void 0:model.type)}function isLayerModel(model){return"layer"===(null==model?void 0:model.type)}class Model{constructor(spec,type,parent,parentGivenName,config,resolve,view){var _a,_b;this.type=type,this.parent=parent,this.config=config,this.correctDataNames=mark=>{var _a,_b,_c;return(null===(_a=mark.from)||void 0===_a?void 0:_a.data)&&(mark.from.data=this.lookupDataSource(mark.from.data)),(null===(_c=null===(_b=mark.from)||void 0===_b?void 0:_b.facet)||void 0===_c?void 0:_c.data)&&(mark.from.facet.data=this.lookupDataSource(mark.from.facet.data)),mark},this.parent=parent,this.config=config,this.view=replaceExprRef(view),this.name=null!==(_a=spec.name)&&void 0!==_a?_a:parentGivenName,this.title=isText(spec.title)?{text:spec.title}:spec.title?replaceExprRef(spec.title):void 0,this.scaleNameMap=parent?parent.scaleNameMap:new NameMap,this.projectionNameMap=parent?parent.projectionNameMap:new NameMap,this.signalNameMap=parent?parent.signalNameMap:new NameMap,this.data=spec.data,this.description=spec.description,this.transforms=function normalizeTransform(transform){return transform.map((t=>isFilter(t)?{filter:normalizeLogicalComposition(t.filter,normalizePredicate)}:t))}(null!==(_b=spec.transform)&&void 0!==_b?_b:[]),this.layout="layer"===type||"unit"===type?{}:function extractCompositionLayout(spec,specType,config){var _a,_b;const compositionConfig=config[specType],layout={},{spacing:spacingConfig,columns}=compositionConfig;void 0!==spacingConfig&&(layout.spacing=spacingConfig),void 0!==columns&&(isFacetSpec(spec)&&!isFacetMapping(spec.facet)||isConcatSpec(spec))&&(layout.columns=columns),isVConcatSpec(spec)&&(layout.columns=1);for(const prop of COMPOSITION_LAYOUT_PROPERTIES)if(void 0!==spec[prop])if("spacing"===prop){const spacing=spec[prop];layout[prop]=isNumber(spacing)?spacing:{row:null!==(_a=spacing.row)&&void 0!==_a?_a:spacingConfig,column:null!==(_b=spacing.column)&&void 0!==_b?_b:spacingConfig}}else layout[prop]=spec[prop];return layout}(spec,type,config),this.component={data:{sources:parent?parent.component.data.sources:[],outputNodes:parent?parent.component.data.outputNodes:{},outputNodeRefCounts:parent?parent.component.data.outputNodeRefCounts:{},isFaceted:isFacetSpec(spec)||(null==parent?void 0:parent.component.data.isFaceted)&&void 0===spec.data},layoutSize:new Split,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},resolve?duplicate(resolve):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function parseScales(model,{ignoreRange}={}){parseScaleCore(model),domain_parseScaleDomain(model);for(const prop of NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES)parseScaleProperty(model,prop);ignoreRange||properties_parseScaleRange(model)}(this)}parseProjection(){parse_parseProjection(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){parse_parseLegend(this)}assembleEncodeFromView(view){const{style:_}=view,baseView=model_rest(view,["style"]),e={};for(const property of util_keys(baseView)){const value=baseView[property];void 0!==value&&(e[property]=signalOrValueRef(value))}return e}assembleGroupEncodeEntry(isTopLevel){let encodeEntry={};return this.view&&(encodeEntry=this.assembleEncodeFromView(this.view)),isTopLevel||(this.description&&(encodeEntry.description=signalOrValueRef(this.description)),"unit"!==this.type&&"layer"!==this.type)?isEmpty(encodeEntry)?void 0:encodeEntry:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=encodeEntry?encodeEntry:{})}assembleLayout(){if(!this.layout)return;const _a=this.layout,{spacing}=_a,layout=model_rest(_a,["spacing"]),{component,config}=this,titleBand=function assembleLayoutTitleBand(headerComponentIndex,config){const titleBand={};for(const channel of FACET_CHANNELS){const headerComponent=headerComponentIndex[channel];if(null==headerComponent?void 0:headerComponent.facetFieldDef){const{titleAnchor,titleOrient}=getHeaderProperties(["titleAnchor","titleOrient"],headerComponent.facetFieldDef.header,config,channel),headerChannel=getHeaderChannel(channel,titleOrient),band=getLayoutTitleBand(titleAnchor,headerChannel);void 0!==band&&(titleBand[headerChannel]=band)}}return isEmpty(titleBand)?void 0:titleBand}(component.layoutHeaders,config);return Object.assign(Object.assign(Object.assign({padding:spacing},this.assembleDefaultLayout()),layout),titleBand?{titleBand}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders}=this.component;let headerMarks=[];for(const channel of FACET_CHANNELS)layoutHeaders[channel].title&&headerMarks.push(assembleTitleGroup(this,channel));for(const channel of HEADER_CHANNELS)headerMarks=headerMarks.concat(assembleHeaderGroups(this,channel));return headerMarks}assembleAxes(){return function assembleAxes(axisComponents,config){const{x=[],y=[]}=axisComponents;return[...x.map((a=>assembleAxis(a,"grid",config))),...y.map((a=>assembleAxis(a,"grid",config))),...x.map((a=>assembleAxis(a,"main",config))),...y.map((a=>assembleAxis(a,"main",config)))].filter((a=>a))}(this.component.axes,this.config)}assembleLegends(){return assembleLegends(this)}assembleProjections(){return assembleProjections(this)}assembleTitle(){var _a,_b,_c;const _d=null!==(_a=this.title)&&void 0!==_a?_a:{},{encoding}=_d,titleNoEncoding=model_rest(_d,["encoding"]),title=Object.assign(Object.assign(Object.assign({},extractTitleConfig(this.config.title).nonMarkTitleProperties),titleNoEncoding),encoding?{encode:{update:encoding}}:{});if(title.text)return util_contains(["unit","layer"],this.type)?util_contains(["middle",void 0],title.anchor)&&(null!==(_b=title.frame)&&void 0!==_b||(title.frame="group")):null!==(_c=title.anchor)&&void 0!==_c||(title.anchor="start"),isEmpty(title)?void 0:title}assembleGroup(signals=[]){const group={};(signals=signals.concat(this.assembleSignals())).length>0&&(group.signals=signals);const layout=this.assembleLayout();layout&&(group.layout=layout),group.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const scales=!this.parent||isFacetModel(this.parent)?assembleScales(this):[];scales.length>0&&(group.scales=scales);const axes=this.assembleAxes();axes.length>0&&(group.axes=axes);const legends=this.assembleLegends();return legends.length>0&&(group.legends=legends),group}getName(text){return varName((this.name?`${this.name}_`:"")+text)}getDataName(type){return this.getName(DataSourceType[type].toLowerCase())}requestDataName(name){const fullName=this.getDataName(name),refCounts=this.component.data.outputNodeRefCounts;return refCounts[fullName]=(refCounts[fullName]||0)+1,fullName}getSizeSignalRef(layoutSizeType){if(isFacetModel(this.parent)){const channel=getPositionScaleChannel(getSizeTypeFromLayoutSizeType(layoutSizeType)),scaleComponent=this.component.scales[channel];if(scaleComponent&&!scaleComponent.merged){const type=scaleComponent.get("type"),range=scaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const scaleName=scaleComponent.get("name"),field=getFieldFromDomain(assembleDomain(this,channel));if(field){return{signal:sizeExpr(scaleName,scaleComponent,vgField({aggregate:"distinct",field},{expr:"datum"}))}}return log_warn(unknownField(channel)),null}}}return{signal:this.signalNameMap.get(this.getName(layoutSizeType))}}lookupDataSource(name){const node=this.component.data.outputNodes[name];return node?node.getSource():name}getSignalName(oldSignalName){return this.signalNameMap.get(oldSignalName)}renameSignal(oldName,newName){this.signalNameMap.rename(oldName,newName)}renameScale(oldName,newName){this.scaleNameMap.rename(oldName,newName)}renameProjection(oldName,newName){this.projectionNameMap.rename(oldName,newName)}scaleName(originalScaleName,parse){return parse?this.getName(originalScaleName):isChannel(originalScaleName)&&isScaleChannel(originalScaleName)&&this.component.scales[originalScaleName]||this.scaleNameMap.has(this.getName(originalScaleName))?this.scaleNameMap.get(this.getName(originalScaleName)):void 0}projectionName(parse){return parse?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(channel){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const localScaleComponent=this.component.scales[channel];return localScaleComponent&&!localScaleComponent.merged?localScaleComponent:this.parent?this.parent.getScaleComponent(channel):void 0}getSelectionComponent(variableName,origName){let sel=this.component.selection[variableName];if(!sel&&this.parent&&(sel=this.parent.getSelectionComponent(variableName,origName)),!sel)throw new Error(function selectionNotFound(name){return`Cannot find a selection named "${name}".`}(origName));return sel}hasAxisOrientSignalRef(){var _a,_b;return(null===(_a=this.component.axes.x)||void 0===_a?void 0:_a.some((a=>a.hasOrientSignalRef())))||(null===(_b=this.component.axes.y)||void 0===_b?void 0:_b.some((a=>a.hasOrientSignalRef())))}}class ModelWithField extends Model{vgField(channel,opt={}){const fieldDef=this.fieldDef(channel);if(fieldDef)return vgField(fieldDef,opt)}reduceFieldDef(f,init){return function reduce(mapping,f,init,thisArg){return mapping?util_keys(mapping).reduce(((r,channel)=>{const map=mapping[channel];return isArray(map)?map.reduce(((r1,channelDef)=>f.call(thisArg,r1,channelDef,channel)),r):f.call(thisArg,r,map,channel)}),init):init}(this.getMapping(),((acc,cd,c)=>{const fieldDef=getFieldDef(cd);return fieldDef?f(acc,fieldDef,c):acc}),init)}forEachFieldDef(f,t){forEach(this.getMapping(),((cd,c)=>{const fieldDef=getFieldDef(cd);fieldDef&&f(fieldDef,c)}),t)}}var density_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class DensityTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!==(_a=this.transform.as)&&void 0!==_a?_a:[void 0,void 0];this.transform.as=[null!==(_b=specifiedAs[0])&&void 0!==_b?_b:"value",null!==(_c=specifiedAs[1])&&void 0!==_c?_c:"density"],transform.groupby&&null==transform.minsteps&&null==transform.maxsteps&&null==transform.steps&&(this.transform.steps=200)}clone(){return new DensityTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.density,...null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${hash(this.transform)}`}assemble(){const _a=this.transform,{density}=_a,rest=density_rest(_a,["density"]);return Object.assign({type:"kde",field:density},rest)}}class FilterInvalidNode extends DataFlowNode{constructor(parent,filter){super(parent),this.filter=filter}clone(){return new FilterInvalidNode(null,Object.assign({},this.filter))}static make(parent,model){const{config,mark,markDef}=model;if("filter"!==getMarkPropOrConfig("invalid",markDef,config))return null;const filter=model.reduceFieldDef(((aggregator,fieldDef,channel)=>{const scaleComponent=isScaleChannel(channel)&&model.getScaleComponent(channel);if(scaleComponent){hasContinuousDomain(scaleComponent.get("type"))&&"count"!==fieldDef.aggregate&&!isPathMark(mark)&&(aggregator[fieldDef.field]=fieldDef)}return aggregator}),{});return util_keys(filter).length?new FilterInvalidNode(parent,filter):null}dependentFields(){return new Set(util_keys(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${hash(this.filter)}`}assemble(){const filters=util_keys(this.filter).reduce(((vegaFilters,field)=>{const fieldDef=this.filter[field],ref=vgField(fieldDef,{expr:"datum"});return null!==fieldDef&&("temporal"===fieldDef.type?vegaFilters.push(`(isDate(${ref}) || (isValid(${ref}) && isFinite(+${ref})))`):"quantitative"===fieldDef.type&&(vegaFilters.push(`isValid(${ref})`),vegaFilters.push(`isFinite(+${ref})`))),vegaFilters}),[]);return filters.length>0?{type:"filter",expr:filters.join(" && ")}:null}}class FlattenTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform,this.transform=duplicate(transform);const{flatten,as=[]}=this.transform;this.transform.as=flatten.map(((f,i)=>{var _a;return null!==(_a=as[i])&&void 0!==_a?_a:f}))}clone(){return new FlattenTransformNode(this.parent,duplicate(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${hash(this.transform)}`}assemble(){const{flatten:fields,as}=this.transform;return{type:"flatten",fields,as}}}class FoldTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!==(_a=this.transform.as)&&void 0!==_a?_a:[void 0,void 0];this.transform.as=[null!==(_b=specifiedAs[0])&&void 0!==_b?_b:"key",null!==(_c=specifiedAs[1])&&void 0!==_c?_c:"value"]}clone(){return new FoldTransformNode(null,duplicate(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${hash(this.transform)}`}assemble(){const{fold,as}=this.transform;return{type:"fold",fields:fold,as}}}class GeoJSONNode extends DataFlowNode{constructor(parent,fields,geojson,signal){super(parent),this.fields=fields,this.geojson=geojson,this.signal=signal}clone(){return new GeoJSONNode(null,duplicate(this.fields),this.geojson,this.signal)}static parseAll(parent,model){if(model.component.projection&&!model.component.projection.isFit)return parent;let geoJsonCounter=0;for(const coordinates of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]]){const pair=coordinates.map((channel=>{const def=getFieldOrDatumDef(model.encoding[channel]);return isFieldDef(def)?def.field:isDatumDef(def)?{expr:`${def.datum}`}:isValueDef(def)?{expr:`${def.value}`}:void 0}));(pair[0]||pair[1])&&(parent=new GeoJSONNode(parent,pair,null,model.getName("geojson_"+geoJsonCounter++)))}if(model.channelHasField(SHAPE)){const fieldDef=model.typedFieldDef(SHAPE);fieldDef.type===GEOJSON&&(parent=new GeoJSONNode(parent,null,fieldDef.field,model.getName("geojson_"+geoJsonCounter++)))}return parent}dependentFields(){var _a;const fields=(null!==(_a=this.fields)&&void 0!==_a?_a:[]).filter(isString);return new Set([...this.geojson?[this.geojson]:[],...fields])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${hash(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class GeoPointNode extends DataFlowNode{constructor(parent,projection,fields,as){super(parent),this.projection=projection,this.fields=fields,this.as=as}clone(){return new GeoPointNode(null,this.projection,duplicate(this.fields),duplicate(this.as))}static parseAll(parent,model){if(!model.projectionName())return parent;for(const coordinates of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]]){const pair=coordinates.map((channel=>{const def=getFieldOrDatumDef(model.encoding[channel]);return isFieldDef(def)?def.field:isDatumDef(def)?{expr:`${def.datum}`}:isValueDef(def)?{expr:`${def.value}`}:void 0})),suffix=coordinates[0]===LONGITUDE2?"2":"";(pair[0]||pair[1])&&(parent=new GeoPointNode(parent,model.projectionName(),pair,[model.getName(`x${suffix}`),model.getName(`y${suffix}`)]))}return parent}dependentFields(){return new Set(this.fields.filter(isString))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${hash(this.fields)} ${hash(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ImputeNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new ImputeNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.impute,this.transform.key,...null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(keyvals){const{start=0,stop,step}=keyvals;return{signal:`sequence(${[start,stop,...step?[step]:[]].join(",")})`}}static makeFromTransform(parent,imputeTransform){return new ImputeNode(parent,imputeTransform)}static makeFromEncoding(parent,model){const encoding=model.encoding,xDef=encoding.x,yDef=encoding.y;if(isFieldDef(xDef)&&isFieldDef(yDef)){const imputedChannel=xDef.impute?xDef:yDef.impute?yDef:void 0;if(void 0===imputedChannel)return;const keyChannel=xDef.impute?yDef:yDef.impute?xDef:void 0,{method,value,frame,keyvals}=imputedChannel.impute,groupbyFields=pathGroupingFields(model.mark,encoding);return new ImputeNode(parent,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:imputedChannel.field,key:keyChannel.field},method?{method}:{}),void 0!==value?{value}:{}),frame?{frame}:{}),void 0!==keyvals?{keyvals}:{}),groupbyFields.length?{groupby:groupbyFields}:{}))}return null}hash(){return`Impute ${hash(this.transform)}`}assemble(){const{impute,key,keyvals,method,groupby,value,frame=[null,null]}=this.transform,imputeTransform=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:impute,key},keyvals?{keyvals:isImputeSequence(keyvals)?this.processSequence(keyvals):keyvals}:{}),{method:"value"}),groupby?{groupby}:{}),{value:method&&"value"!==method?null:value});if(method&&"value"!==method){return[imputeTransform,Object.assign({type:"window",as:[`imputed_${impute}_value`],ops:[method],fields:[impute],frame,ignorePeers:!1},groupby?{groupby}:{}),{type:"formula",expr:`datum.${impute} === null ? datum.imputed_${impute}_value : datum.${impute}`,as:impute}]}return[imputeTransform]}}var loess_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class LoessTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!==(_a=this.transform.as)&&void 0!==_a?_a:[void 0,void 0];this.transform.as=[null!==(_b=specifiedAs[0])&&void 0!==_b?_b:transform.on,null!==(_c=specifiedAs[1])&&void 0!==_c?_c:transform.loess]}clone(){return new LoessTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.loess,this.transform.on,...null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${hash(this.transform)}`}assemble(){const _a=this.transform,{loess,on}=_a,rest=loess_rest(_a,["loess","on"]);return Object.assign({type:"loess",x:on,y:loess},rest)}}class LookupNode extends DataFlowNode{constructor(parent,transform,secondary){super(parent),this.transform=transform,this.secondary=secondary}clone(){return new LookupNode(null,duplicate(this.transform),this.secondary)}static make(parent,model,transform,counter){const sources=model.component.data.sources,{from}=transform;let fromOutputNode=null;if(function isLookupData(from){return"data"in from}(from)){let fromSource=findSource(from.data,sources);fromSource||(fromSource=new SourceNode(from.data),sources.push(fromSource));const fromOutputName=model.getName(`lookup_${counter}`);fromOutputNode=new OutputNode(fromSource,fromOutputName,DataSourceType.Lookup,model.component.data.outputNodeRefCounts),model.component.data.outputNodes[fromOutputName]=fromOutputNode}else if(function isLookupSelection(from){return"param"in from}(from)){const selName=from.param;let selCmpt;transform=Object.assign({as:selName},transform);try{selCmpt=model.getSelectionComponent(varName(selName),selName)}catch(e){throw new Error(function cannotLookupVariableParameter(name){return`Lookups can only be performed on selection parameters. "${name}" is a variable parameter.`}(selName))}if(fromOutputNode=selCmpt.materialized,!fromOutputNode)throw new Error(function noSameUnitLookup(name){return`Cannot define and lookup the "${name}" selection in the same view. Try moving the lookup into a second, layered view?`}(selName))}return new LookupNode(parent,transform,fromOutputNode.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?array(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${hash({transform:this.transform,secondary:this.secondary})}`}assemble(){let foreign;if(this.transform.from.fields)foreign=Object.assign({values:this.transform.from.fields},this.transform.as?{as:array(this.transform.as)}:{});else{let asName=this.transform.as;isString(asName)||(log_warn('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),asName="_lookup"),foreign={as:[asName]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},foreign),this.transform.default?{default:this.transform.default}:{})}}var quantile_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class QuantileTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!==(_a=this.transform.as)&&void 0!==_a?_a:[void 0,void 0];this.transform.as=[null!==(_b=specifiedAs[0])&&void 0!==_b?_b:"prob",null!==(_c=specifiedAs[1])&&void 0!==_c?_c:"value"]}clone(){return new QuantileTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.quantile,...null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${hash(this.transform)}`}assemble(){const _a=this.transform,{quantile}=_a,rest=quantile_rest(_a,["quantile"]);return Object.assign({type:"quantile",field:quantile},rest)}}var regression_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class RegressionTransformNode extends DataFlowNode{constructor(parent,transform){var _a,_b,_c;super(parent),this.transform=transform,this.transform=duplicate(transform);const specifiedAs=null!==(_a=this.transform.as)&&void 0!==_a?_a:[void 0,void 0];this.transform.as=[null!==(_b=specifiedAs[0])&&void 0!==_b?_b:transform.on,null!==(_c=specifiedAs[1])&&void 0!==_c?_c:transform.regression]}clone(){return new RegressionTransformNode(null,duplicate(this.transform))}dependentFields(){var _a;return new Set([this.transform.regression,this.transform.on,...null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${hash(this.transform)}`}assemble(){const _a=this.transform,{regression,on}=_a,rest=regression_rest(_a,["regression","on"]);return Object.assign({type:"regression",x:on,y:regression},rest)}}class PivotTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new PivotTransformNode(null,duplicate(this.transform))}addDimensions(fields){var _a;this.transform.groupby=unique((null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]).concat(fields),(d=>d))}producedFields(){}dependentFields(){var _a;return new Set([this.transform.pivot,this.transform.value,...null!==(_a=this.transform.groupby)&&void 0!==_a?_a:[]])}hash(){return`PivotTransform ${hash(this.transform)}`}assemble(){const{pivot,value,groupby,limit,op}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:pivot,value},void 0!==limit?{limit}:{}),void 0!==op?{op}:{}),void 0!==groupby?{groupby}:{})}}class SampleTransformNode extends DataFlowNode{constructor(parent,transform){super(parent),this.transform=transform}clone(){return new SampleTransformNode(null,duplicate(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${hash(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function makeWalkTree(data){let datasetIndex=0;return function walkTree(node,dataSource){var _a;if(node instanceof SourceNode&&!node.isGenerator&&!isUrlData(node.data)){data.push(dataSource);dataSource={name:null,source:dataSource.name,transform:[]}}if(node instanceof ParseNode&&(node.parent instanceof SourceNode&&!dataSource.source?(dataSource.format=Object.assign(Object.assign({},null!==(_a=dataSource.format)&&void 0!==_a?_a:{}),{parse:node.assembleFormatParse()}),dataSource.transform.push(...node.assembleTransforms(!0))):dataSource.transform.push(...node.assembleTransforms())),node instanceof FacetNode)return dataSource.name||(dataSource.name="data_"+datasetIndex++),!dataSource.source||dataSource.transform.length>0?(data.push(dataSource),node.data=dataSource.name):node.data=dataSource.source,void data.push(...node.assemble());if((node instanceof GraticuleNode||node instanceof SequenceNode||node instanceof FilterInvalidNode||node instanceof FilterNode||node instanceof CalculateNode||node instanceof GeoPointNode||node instanceof AggregateNode||node instanceof LookupNode||node instanceof WindowTransformNode||node instanceof JoinAggregateTransformNode||node instanceof FoldTransformNode||node instanceof FlattenTransformNode||node instanceof DensityTransformNode||node instanceof LoessTransformNode||node instanceof QuantileTransformNode||node instanceof RegressionTransformNode||node instanceof IdentifierNode||node instanceof SampleTransformNode||node instanceof PivotTransformNode)&&dataSource.transform.push(node.assemble()),(node instanceof BinNode||node instanceof TimeUnitNode||node instanceof ImputeNode||node instanceof StackNode||node instanceof GeoJSONNode)&&dataSource.transform.push(...node.assemble()),node instanceof OutputNode)if(dataSource.source&&0===dataSource.transform.length)node.setSource(dataSource.source);else if(node.parent instanceof OutputNode)node.setSource(dataSource.name);else if(dataSource.name||(dataSource.name="data_"+datasetIndex++),node.setSource(dataSource.name),1===node.numChildren()){data.push(dataSource);dataSource={name:null,source:dataSource.name,transform:[]}}switch(node.numChildren()){case 0:node instanceof OutputNode&&(!dataSource.source||dataSource.transform.length>0)&&data.push(dataSource);break;case 1:walkTree(node.children[0],dataSource);break;default:{dataSource.name||(dataSource.name="data_"+datasetIndex++);let source=dataSource.name;!dataSource.source||dataSource.transform.length>0?data.push(dataSource):source=dataSource.source;for(const child of node.children){walkTree(child,{name:null,source,transform:[]})}break}}}}function getHeaderType(orient){return"top"===orient||"left"===orient||isSignalRef(orient)?"header":"footer"}function parseFacetHeader(model,channel){var _a;const{facet,config,child,component}=model;if(model.channelHasField(channel)){const fieldDef=facet[channel],titleConfig=getHeaderProperty("title",null,config,channel);let title=channeldef_title(fieldDef,config,{allowDisabling:!0,includeDefault:void 0===titleConfig||!!titleConfig});child.component.layoutHeaders[channel].title&&(title=isArray(title)?title.join(", "):title,title+=` / ${child.component.layoutHeaders[channel].title}`,child.component.layoutHeaders[channel].title=null);const labelOrient=getHeaderProperty("labelOrient",fieldDef.header,config,channel),labels=null!==fieldDef.header&&getFirstDefined(null===(_a=fieldDef.header)||void 0===_a?void 0:_a.labels,config.header.labels,!0),headerType=util_contains(["bottom","right"],labelOrient)?"footer":"header";component.layoutHeaders[channel]={title:null!==fieldDef.header?title:null,facetFieldDef:fieldDef,[headerType]:"facet"===channel?[]:[makeHeaderComponent(model,channel,labels)]}}}function makeHeaderComponent(model,channel,labels){const sizeType="row"===channel?"height":"width";return{labels,sizeSignal:model.child.component.layoutSize.get(sizeType)?model.child.getSizeSignalRef(sizeType):void 0,axes:[]}}function mergeChildAxis(model,channel){var _a;const{child}=model;if(child.component.axes[channel]){const{layoutHeaders,resolve}=model.component;if(resolve.axis[channel]=parseGuideResolve(resolve,channel),"shared"===resolve.axis[channel]){const headerChannel="x"===channel?"column":"row",layoutHeader=layoutHeaders[headerChannel];for(const axisComponent of child.component.axes[channel]){const headerType=getHeaderType(axisComponent.get("orient"));null!==(_a=layoutHeader[headerType])&&void 0!==_a||(layoutHeader[headerType]=[makeHeaderComponent(model,headerChannel,!1)]);const mainAxis=assembleAxis(axisComponent,"main",model.config,{header:!0});mainAxis&&layoutHeader[headerType][0].axes.push(mainAxis),axisComponent.mainExtracted=!0}}}}function parseChildrenLayoutSize(model){for(const child of model.children)child.parseLayoutSize()}function parseNonUnitLayoutSizeForChannel(model,layoutSizeType){var _a;const sizeType=getSizeTypeFromLayoutSizeType(layoutSizeType),channel=getPositionScaleChannel(sizeType),resolve=model.component.resolve,layoutSizeCmpt=model.component.layoutSize;let mergedSize;for(const child of model.children){const childSize=child.component.layoutSize.getWithExplicit(sizeType),scaleResolve=null!==(_a=resolve.scale[channel])&&void 0!==_a?_a:defaultScaleResolve(channel,model);if("independent"===scaleResolve&&"step"===childSize.value){mergedSize=void 0;break}if(mergedSize){if("independent"===scaleResolve&&mergedSize.value!==childSize.value){mergedSize=void 0;break}mergedSize=mergeValuesWithExplicit(mergedSize,childSize,sizeType,"")}else mergedSize=childSize}if(mergedSize){for(const child of model.children)model.renameSignal(child.getName(sizeType),model.getName(layoutSizeType)),child.component.layoutSize.set(sizeType,"merged",!1);layoutSizeCmpt.setWithExplicit(layoutSizeType,mergedSize)}else layoutSizeCmpt.setWithExplicit(layoutSizeType,{explicit:!1,value:void 0})}function defaultUnitSize(model,sizeType){const channel="width"===sizeType?"x":"y",config=model.config,scaleComponent=model.getScaleComponent(channel);if(scaleComponent){const scaleType=scaleComponent.get("type"),range=scaleComponent.get("range");if(hasDiscreteDomain(scaleType)){const size=getViewConfigDiscreteSize(config.view,sizeType);return isVgRangeStep(range)||isStep(size)?"step":size}return getViewConfigContinuousSize(config.view,sizeType)}if(model.hasProjection||"arc"===model.mark)return getViewConfigContinuousSize(config.view,sizeType);{const size=getViewConfigDiscreteSize(config.view,sizeType);return isStep(size)?size.step:size}}function facetSortFieldName(fieldDef,sort,opt){return vgField(sort,Object.assign({suffix:`by_${vgField(fieldDef)}`},null!=opt?opt:{}))}class FacetModel extends ModelWithField{constructor(spec,parent,parentGivenName,config){super(spec,"facet",parent,parentGivenName,config,spec.resolve),this.child=buildModel(spec.spec,this,this.getName("child"),void 0,config),this.children=[this.child],this.facet=this.initFacet(spec.facet)}initFacet(facet){if(!isFacetMapping(facet))return{facet:this.initFacetFieldDef(facet,"facet")};const channels=util_keys(facet),normalizedFacet={};for(const channel of channels){if(![ROW,COLUMN].includes(channel)){log_warn(incompatibleChannel(channel,"facet"));break}const fieldDef=facet[channel];if(void 0===fieldDef.field){log_warn(emptyFieldDef(fieldDef,channel));break}normalizedFacet[channel]=this.initFacetFieldDef(fieldDef,channel)}return normalizedFacet}initFacetFieldDef(fieldDef,channel){const facetFieldDef=initFieldDef(fieldDef,channel);return facetFieldDef.header?facetFieldDef.header=replaceExprRef(facetFieldDef.header):null===facetFieldDef.header&&(facetFieldDef.header=null),facetFieldDef}channelHasField(channel){return!!this.facet[channel]}fieldDef(channel){return this.facet[channel]}parseData(){this.component.data=parse_parseData(this),this.child.parseData()}parseLayoutSize(){parseChildrenLayoutSize(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function parseFacetHeaders(model){for(const channel of FACET_CHANNELS)parseFacetHeader(model,channel);mergeChildAxis(model,"x"),mergeChildAxis(model,"y")}(this)}assembleSelectionTopLevelSignals(signals){return this.child.assembleSelectionTopLevelSignals(signals)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(data){return this.child.assembleSelectionData(data)}getHeaderLayoutMixins(){var _a,_b,_c;const layoutMixins={};for(const channel of FACET_CHANNELS)for(const headerType of HEADER_TYPES){const layoutHeaderComponent=this.component.layoutHeaders[channel],headerComponent=layoutHeaderComponent[headerType],{facetFieldDef}=layoutHeaderComponent;if(facetFieldDef){const titleOrient=getHeaderProperty("titleOrient",facetFieldDef.header,this.config,channel);if(["right","bottom"].includes(titleOrient)){const headerChannel=getHeaderChannel(channel,titleOrient);null!==(_a=layoutMixins.titleAnchor)&&void 0!==_a||(layoutMixins.titleAnchor={}),layoutMixins.titleAnchor[headerChannel]="end"}}if(null==headerComponent?void 0:headerComponent[0]){const sizeType="row"===channel?"height":"width",bandType="header"===headerType?"headerBand":"footerBand";"facet"===channel||this.child.component.layoutSize.get(sizeType)||(null!==(_b=layoutMixins[bandType])&&void 0!==_b||(layoutMixins[bandType]={}),layoutMixins[bandType][channel]=.5),layoutHeaderComponent.title&&(null!==(_c=layoutMixins.offset)&&void 0!==_c||(layoutMixins.offset={}),layoutMixins.offset["row"===channel?"rowTitle":"columnTitle"]=10)}}return layoutMixins}assembleDefaultLayout(){const{column,row}=this.facet,columns=column?this.columnDistinctSignal():row?1:void 0;let align="all";return(row||"independent"!==this.component.resolve.scale.x)&&(column||"independent"!==this.component.resolve.scale.y)||(align="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),columns?{columns}:{}),{bounds:"full",align})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof FacetModel)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroupStyle(){}assembleGroup(signals){return this.parent&&this.parent instanceof FacetModel?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vgField(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(signals)):super.assembleGroup(signals)}getCardinalityAggregateForChild(){const fields=[],ops=[],as=[];if(this.child instanceof FacetModel){if(this.child.channelHasField("column")){const field=vgField(this.child.facet.column);fields.push(field),ops.push("distinct"),as.push(`distinct_${field}`)}}else for(const channel of POSITION_SCALE_CHANNELS){const childScaleComponent=this.child.component.scales[channel];if(childScaleComponent&&!childScaleComponent.merged){const type=childScaleComponent.get("type"),range=childScaleComponent.get("range");if(hasDiscreteDomain(type)&&isVgRangeStep(range)){const field=getFieldFromDomain(assembleDomain(this.child,channel));field?(fields.push(field),ops.push("distinct"),as.push(`distinct_${field}`)):log_warn(unknownField(channel))}}}return{fields,ops,as}}assembleFacet(){const{name,data}=this.component.data.facetRoot,{row,column}=this.facet,{fields,ops,as}=this.getCardinalityAggregateForChild(),groupby=[];for(const channel of FACET_CHANNELS){const fieldDef=this.facet[channel];if(fieldDef){groupby.push(vgField(fieldDef));const{bin,sort}=fieldDef;if(isBinning(bin)&&groupby.push(vgField(fieldDef,{binSuffix:"end"})),isSortField(sort)){const{field,op=DEFAULT_SORT_OP}=sort,outputName=facetSortFieldName(fieldDef,sort);row&&column?(fields.push(outputName),ops.push("max"),as.push(outputName)):(fields.push(field),ops.push(op),as.push(outputName))}else if(isArray(sort)){const outputName=sortArrayIndexField(fieldDef,channel);fields.push(outputName),ops.push("max"),as.push(outputName)}}}const cross=!!row&&!!column;return Object.assign({name,data,groupby},cross||fields.length>0?{aggregate:Object.assign(Object.assign({},cross?{cross}:{}),fields.length?{fields,ops,as}:{})}:{})}facetSortFields(channel){const{facet}=this,fieldDef=facet[channel];return fieldDef?isSortField(fieldDef.sort)?[facetSortFieldName(fieldDef,fieldDef.sort,{expr:"datum"})]:isArray(fieldDef.sort)?[sortArrayIndexField(fieldDef,channel,{expr:"datum"})]:[vgField(fieldDef,{expr:"datum"})]:[]}facetSortOrder(channel){const{facet}=this,fieldDef=facet[channel];if(fieldDef){const{sort}=fieldDef;return[(isSortField(sort)?sort.order:!isArray(sort)&&sort)||"ascending"]}return[]}assembleLabelTitle(){var _a;const{facet,config}=this;if(facet.facet)return assembleLabelTitle(facet.facet,"facet",config);const ORTHOGONAL_ORIENT={row:["top","bottom"],column:["left","right"]};for(const channel of HEADER_CHANNELS)if(facet[channel]){const labelOrient=getHeaderProperty("labelOrient",null===(_a=facet[channel])||void 0===_a?void 0:_a.header,config,channel);if(ORTHOGONAL_ORIENT[channel].includes(labelOrient))return assembleLabelTitle(facet[channel],channel,config)}}assembleMarks(){const{child}=this,data=function assembleFacetData(root){const data=[],walkTree=makeWalkTree(data);for(const child of root.children)walkTree(child,{source:root.name,name:null,transform:[]});return data}(this.component.data.facetRoot),encodeEntry=child.assembleGroupEncodeEntry(!1),title=this.assembleLabelTitle()||child.assembleTitle(),style=child.assembleGroupStyle(),markGroup=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},title?{title}:{}),style?{style}:{}),{from:{facet:this.assembleFacet()},sort:{field:FACET_CHANNELS.map((c=>this.facetSortFields(c))).flat(),order:FACET_CHANNELS.map((c=>this.facetSortOrder(c))).flat()}}),data.length>0?{data}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),child.assembleGroup(function assembleFacetSignals(model,signals){if(model.component.selection&&util_keys(model.component.selection).length){const name=$(model.getName("cell"));signals.unshift({name:"facet",value:{},on:[{events:eventSelector("mousemove","scope"),update:`isTuple(facet) ? facet : group(${name}).datum`}]})}return cleanupEmptyOnArray(signals)}(this,[])));return[markGroup]}getMapping(){return this.facet}}function findSource(data,sources){var _a,_b,_c,_d;for(const other of sources){const otherData=other.data;if(data.name&&other.hasName()&&data.name!==other.dataName)continue;const formatMesh=null===(_a=data.format)||void 0===_a?void 0:_a.mesh,otherFeature=null===(_b=otherData.format)||void 0===_b?void 0:_b.feature;if(formatMesh&&otherFeature)continue;const formatFeature=null===(_c=data.format)||void 0===_c?void 0:_c.feature;if((formatFeature||otherFeature)&&formatFeature!==otherFeature)continue;const otherMesh=null===(_d=otherData.format)||void 0===_d?void 0:_d.mesh;if(!formatMesh&&!otherMesh||formatMesh===otherMesh)if(isInlineData(data)&&isInlineData(otherData)){if(deepEqual(data.values,otherData.values))return other}else if(isUrlData(data)&&isUrlData(otherData)){if(data.url===otherData.url)return other}else if(isNamedData(data)&&data.name===other.dataName)return other}return null}function parse_parseData(model){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;let head=function parseRoot(model,sources){if(model.data||!model.parent){if(null===model.data){const source=new SourceNode({values:[]});return sources.push(source),source}const existingSource=findSource(model.data,sources);if(existingSource)return isGenerator(model.data)||(existingSource.data.format=mergeDeep({},model.data.format,existingSource.data.format)),!existingSource.hasName()&&model.data.name&&(existingSource.dataName=model.data.name),existingSource;{const source=new SourceNode(model.data);return sources.push(source),source}}return model.parent.component.data.facetRoot?model.parent.component.data.facetRoot:model.parent.component.data.main}(model,model.component.data.sources);const{outputNodes,outputNodeRefCounts}=model.component.data,data=model.data,ancestorParse=!(data&&(isGenerator(data)||isUrlData(data)||isInlineData(data)))&&model.parent?model.parent.component.data.ancestorParse.clone():new AncestorParse;isGenerator(data)?(isSequenceGenerator(data)?head=new SequenceNode(head,data.sequence):isGraticuleGenerator(data)&&(head=new GraticuleNode(head,data.graticule)),ancestorParse.parseNothing=!0):null===(null===(_a=null==data?void 0:data.format)||void 0===_a?void 0:_a.parse)&&(ancestorParse.parseNothing=!0),head=null!==(_b=ParseNode.makeExplicit(head,model,ancestorParse))&&void 0!==_b?_b:head,head=new IdentifierNode(head);const parentIsLayer=model.parent&&isLayerModel(model.parent);(isUnitModel(model)||isFacetModel(model))&&parentIsLayer&&(head=null!==(_c=BinNode.makeFromEncoding(head,model))&&void 0!==_c?_c:head),model.transforms.length>0&&(head=function parseTransformArray(head,model,ancestorParse){var _a,_b;let lookupCounter=0;for(const t of model.transforms){let derivedType,transformNode;if(isCalculate(t))transformNode=head=new CalculateNode(head,t),derivedType="derived";else if(isFilter(t)){const implicit=getImplicitFromFilterTransform(t);transformNode=head=null!==(_a=ParseNode.makeWithAncestors(head,{},implicit,ancestorParse))&&void 0!==_a?_a:head,head=new FilterNode(head,model,t.filter)}else if(isBin(t))transformNode=head=BinNode.makeFromTransform(head,t,model),derivedType="number";else if(isTimeUnit(t))derivedType="date",void 0===ancestorParse.getWithExplicit(t.field).value&&(head=new ParseNode(head,{[t.field]:derivedType}),ancestorParse.set(t.field,derivedType,!1)),transformNode=head=TimeUnitNode.makeFromTransform(head,t);else if(transform_isAggregate(t))transformNode=head=AggregateNode.makeFromTransform(head,t),derivedType="number",requiresSelectionId(model)&&(head=new IdentifierNode(head));else if(isLookup(t))transformNode=head=LookupNode.make(head,model,t,lookupCounter++),derivedType="derived";else if(isWindow(t))transformNode=head=new WindowTransformNode(head,t),derivedType="number";else if(isJoinAggregate(t))transformNode=head=new JoinAggregateTransformNode(head,t),derivedType="number";else if(isStack(t))transformNode=head=StackNode.makeFromTransform(head,t),derivedType="derived";else if(isFold(t))transformNode=head=new FoldTransformNode(head,t),derivedType="derived";else if(isFlatten(t))transformNode=head=new FlattenTransformNode(head,t),derivedType="derived";else if(isPivot(t))transformNode=head=new PivotTransformNode(head,t),derivedType="derived";else if(isSample(t))head=new SampleTransformNode(head,t);else if(isImpute(t))transformNode=head=ImputeNode.makeFromTransform(head,t),derivedType="derived";else if(isDensity(t))transformNode=head=new DensityTransformNode(head,t),derivedType="derived";else if(transform_isQuantile(t))transformNode=head=new QuantileTransformNode(head,t),derivedType="derived";else if(isRegression(t))transformNode=head=new RegressionTransformNode(head,t),derivedType="derived";else{if(!isLoess(t)){log_warn(invalidTransformIgnored(t));continue}transformNode=head=new LoessTransformNode(head,t),derivedType="derived"}if(transformNode&&void 0!==derivedType)for(const field of null!==(_b=transformNode.producedFields())&&void 0!==_b?_b:[])ancestorParse.set(field,derivedType,!1)}return head}(head,model,ancestorParse));const implicitSelection=function getImplicitFromSelection(model){const implicit={};if(isUnitModel(model)&&model.component.selection)for(const name of util_keys(model.component.selection)){const selCmpt=model.component.selection[name];for(const proj of selCmpt.project.items)!proj.channel&&accessPathDepth(proj.field)>1&&(implicit[proj.field]="flatten")}return implicit}(model),implicitEncoding=getImplicitFromEncoding(model);head=null!==(_d=ParseNode.makeWithAncestors(head,{},Object.assign(Object.assign({},implicitSelection),implicitEncoding),ancestorParse))&&void 0!==_d?_d:head,isUnitModel(model)&&(head=GeoJSONNode.parseAll(head,model),head=GeoPointNode.parseAll(head,model)),(isUnitModel(model)||isFacetModel(model))&&(parentIsLayer||(head=null!==(_e=BinNode.makeFromEncoding(head,model))&&void 0!==_e?_e:head),head=null!==(_f=TimeUnitNode.makeFromEncoding(head,model))&&void 0!==_f?_f:head,head=CalculateNode.parseAllForSortIndex(head,model));const rawName=model.getDataName(DataSourceType.Raw),raw=new OutputNode(head,rawName,DataSourceType.Raw,outputNodeRefCounts);if(outputNodes[rawName]=raw,head=raw,isUnitModel(model)){const agg=AggregateNode.makeFromEncoding(head,model);agg&&(head=agg,requiresSelectionId(model)&&(head=new IdentifierNode(head))),head=null!==(_g=ImputeNode.makeFromEncoding(head,model))&&void 0!==_g?_g:head,head=null!==(_h=StackNode.makeFromEncoding(head,model))&&void 0!==_h?_h:head}isUnitModel(model)&&(head=null!==(_j=FilterInvalidNode.make(head,model))&&void 0!==_j?_j:head);const mainName=model.getDataName(DataSourceType.Main),main=new OutputNode(head,mainName,DataSourceType.Main,outputNodeRefCounts);outputNodes[mainName]=main,head=main,isUnitModel(model)&&function materializeSelections(model,main){var _a;for(const[selection,selCmpt]of entries(null!==(_a=model.component.selection)&&void 0!==_a?_a:{})){const lookupName=model.getName(`lookup_${selection}`);model.component.data.outputNodes[lookupName]=selCmpt.materialized=new OutputNode(new FilterNode(main,model,{param:selection}),lookupName,DataSourceType.Lookup,model.component.data.outputNodeRefCounts)}}(model,main);let facetRoot=null;if(isFacetModel(model)){const facetName=model.getName("facet");head=null!==(_k=function makeJoinAggregateFromFacet(parent,facet){const{row,column}=facet;if(row&&column){let newParent=null;for(const fieldDef of[row,column])if(isSortField(fieldDef.sort)){const{field,op=DEFAULT_SORT_OP}=fieldDef.sort;parent=newParent=new JoinAggregateTransformNode(parent,{joinaggregate:[{op,field,as:facetSortFieldName(fieldDef,fieldDef.sort,{forAs:!0})}],groupby:[vgField(fieldDef)]})}return newParent}return null}(head,model.facet))&&void 0!==_k?_k:head,facetRoot=new FacetNode(head,model,facetName,main.getSource()),outputNodes[facetName]=facetRoot}return Object.assign(Object.assign({},model.component.data),{outputNodes,outputNodeRefCounts,raw,main,facetRoot,ancestorParse})}class ConcatModel extends Model{constructor(spec,parent,parentGivenName,config){var _a,_b,_c,_d;super(spec,"concat",parent,parentGivenName,config,spec.resolve),"shared"!==(null===(_b=null===(_a=spec.resolve)||void 0===_a?void 0:_a.axis)||void 0===_b?void 0:_b.x)&&"shared"!==(null===(_d=null===(_c=spec.resolve)||void 0===_c?void 0:_c.axis)||void 0===_d?void 0:_d.y)||log_warn("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(spec).map(((child,i)=>buildModel(child,this,this.getName(`concat_${i}`),void 0,config)))}parseData(){this.component.data=parse_parseData(this);for(const child of this.children)child.parseData()}parseSelections(){this.component.selection={};for(const child of this.children){child.parseSelections();for(const key of util_keys(child.component.selection))this.component.selection[key]=child.component.selection[key]}}parseMarkGroup(){for(const child of this.children)child.parseMarkGroup()}parseAxesAndHeaders(){for(const child of this.children)child.parseAxesAndHeaders()}getChildren(spec){return isVConcatSpec(spec)?spec.vconcat:isHConcatSpec(spec)?spec.hconcat:spec.concat}parseLayoutSize(){!function parseConcatLayoutSize(model){parseChildrenLayoutSize(model);const widthType=1===model.layout.columns?"width":"childWidth",heightType=void 0===model.layout.columns?"height":"childHeight";parseNonUnitLayoutSizeForChannel(model,widthType),parseNonUnitLayoutSizeForChannel(model,heightType)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(signals){return this.children.reduce(((sg,child)=>child.assembleSelectionTopLevelSignals(sg)),signals)}assembleSignals(){return this.children.forEach((child=>child.assembleSignals())),[]}assembleLayoutSignals(){const layoutSignals=assembleLayoutSignals(this);for(const child of this.children)layoutSignals.push(...child.assembleLayoutSignals());return layoutSignals}assembleSelectionData(data){return this.children.reduce(((db,child)=>child.assembleSelectionData(db)),data)}assembleMarks(){return this.children.map((child=>{const title=child.assembleTitle(),style=child.assembleGroupStyle(),encodeEntry=child.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:child.getName("group")},title?{title}:{}),style?{style}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),child.assembleGroup())}))}assembleGroupStyle(){}assembleDefaultLayout(){const columns=this.layout.columns;return Object.assign(Object.assign({},null!=columns?{columns}:{}),{bounds:"full",align:"each"})}}const AXIS_COMPONENT_PROPERTIES_INDEX=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},COMMON_AXIS_PROPERTIES_INDEX),{labelExpr:1,encode:1}),AXIS_COMPONENT_PROPERTIES=util_keys(AXIS_COMPONENT_PROPERTIES_INDEX);class AxisComponent extends Split{constructor(explicit={},implicit={},mainExtracted=!1){super(),this.explicit=explicit,this.implicit=implicit,this.mainExtracted=mainExtracted}clone(){return new AxisComponent(duplicate(this.explicit),duplicate(this.implicit),this.mainExtracted)}hasAxisPart(part){return"axis"===part||("grid"===part||"title"===part?!!this.get(part):!function isFalseOrNull(v){return!1===v||null===v}(this.get(part)))}hasOrientSignalRef(){return isSignalRef(this.explicit.orient)}}const OPPOSITE_ORIENT={bottom:"top",top:"bottom",left:"right",right:"left"};function mergeAxisComponents(mergedAxisCmpts,childAxisCmpts){if(!mergedAxisCmpts)return childAxisCmpts.map((axisComponent=>axisComponent.clone()));{if(mergedAxisCmpts.length!==childAxisCmpts.length)return;const length=mergedAxisCmpts.length;for(let i=0;i<length;i++){const merged=mergedAxisCmpts[i],child=childAxisCmpts[i];if(!!merged!=!!child)return;if(merged&&child){const mergedOrient=merged.getWithExplicit("orient"),childOrient=child.getWithExplicit("orient");if(mergedOrient.explicit&&childOrient.explicit&&mergedOrient.value!==childOrient.value)return;mergedAxisCmpts[i]=mergeAxisComponent(merged,child)}}}return mergedAxisCmpts}function mergeAxisComponent(merged,child){for(const prop of AXIS_COMPONENT_PROPERTIES){const mergedValueWithExplicit=mergeValuesWithExplicit(merged.getWithExplicit(prop),child.getWithExplicit(prop),prop,"axis",((v1,v2)=>{switch(prop){case"title":return mergeTitleComponent(v1,v2);case"gridScale":return{explicit:v1.explicit,value:getFirstDefined(v1.value,v2.value)}}return defaultTieBreaker(v1,v2,prop,"axis")}));merged.setWithExplicit(prop,mergedValueWithExplicit)}return merged}function parse_isExplicit(value,property,axis,model,channel){if("disable"===property)return void 0!==axis;switch(axis=axis||{},property){case"titleAngle":case"labelAngle":return value===(isSignalRef(axis.labelAngle)?axis.labelAngle:normalizeAngle(axis.labelAngle));case"values":return!!axis.values;case"encode":return!!axis.encoding||!!axis.labelAngle;case"title":if(value===getFieldDefTitle(model,channel))return!0}return value===axis[property]}const propsToAlwaysIncludeConfig=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function parse_parseAxis(channel,model){var _a,_b,_c;let axis=model.axis(channel);const axisComponent=new AxisComponent,fieldOrDatumDef=getFieldOrDatumDef(model.encoding[channel]),{mark,config}=model,orient=(null==axis?void 0:axis.orient)||(null===(_a=config["x"===channel?"axisX":"axisY"])||void 0===_a?void 0:_a.orient)||(null===(_b=config.axis)||void 0===_b?void 0:_b.orient)||function defaultOrient(channel){return"x"===channel?"bottom":"left"}(channel),scaleType=model.getScaleComponent(channel).get("type"),axisConfigs=function getAxisConfigs(channel,scaleType,orient,config){const typeBasedConfigTypes="band"===scaleType?["axisDiscrete","axisBand"]:"point"===scaleType?["axisDiscrete","axisPoint"]:isQuantitative(scaleType)?["axisQuantitative"]:"time"===scaleType||"utc"===scaleType?["axisTemporal"]:[],axisChannel="x"===channel?"axisX":"axisY",axisOrient=isSignalRef(orient)?"axisOrient":`axis${titleCase(orient)}`,vlOnlyConfigTypes=[...typeBasedConfigTypes,...typeBasedConfigTypes.map((c=>axisChannel+c.substr(4)))],vgConfigTypes=["axis",axisOrient,axisChannel];return{vlOnlyAxisConfig:getAxisConfigFromConfigTypes(vlOnlyConfigTypes,config,channel,orient),vgAxisConfig:getAxisConfigFromConfigTypes(vgConfigTypes,config,channel,orient),axisConfigStyle:getAxisConfigStyle([...vgConfigTypes,...vlOnlyConfigTypes],config)}}(channel,scaleType,orient,model.config),disable=void 0!==axis?!axis:getAxisConfig("disable",config.style,null==axis?void 0:axis.style,axisConfigs).configValue;if(axisComponent.set("disable",disable,void 0!==axis),disable)return axisComponent;axis=axis||{};const labelAngle=function getLabelAngle(fieldOrDatumDef,axis,channel,styleConfig,axisConfigs){const labelAngle=null==axis?void 0:axis.labelAngle;if(void 0!==labelAngle)return isSignalRef(labelAngle)?labelAngle:normalizeAngle(labelAngle);{const{configValue:angle}=getAxisConfig("labelAngle",styleConfig,null==axis?void 0:axis.style,axisConfigs);return void 0!==angle?normalizeAngle(angle):"x"!==channel||!util_contains([NOMINAL,ORDINAL],fieldOrDatumDef.type)||isFieldDef(fieldOrDatumDef)&&fieldOrDatumDef.timeUnit?void 0:270}}(fieldOrDatumDef,axis,channel,config.style,axisConfigs),ruleParams={fieldOrDatumDef,axis,channel,model,scaleType,orient,labelAngle,mark,config};for(const property of AXIS_COMPONENT_PROPERTIES){const value=property in axisRules?axisRules[property](ruleParams):isAxisProperty(property)?axis[property]:void 0,hasValue=void 0!==value,explicit=parse_isExplicit(value,property,axis,model,channel);if(hasValue&&explicit)axisComponent.set(property,value,explicit);else{const{configValue,configFrom}=isAxisProperty(property)&&"values"!==property?getAxisConfig(property,config.style,axis.style,axisConfigs):{},hasConfigValue=void 0!==configValue;hasValue&&!hasConfigValue?axisComponent.set(property,value,explicit):("vgAxisConfig"!==configFrom||propsToAlwaysIncludeConfig.has(property)&&hasConfigValue||isConditionalAxisValue(configValue)||isSignalRef(configValue))&&axisComponent.set(property,configValue,!1)}}const axisEncoding=null!==(_c=axis.encoding)&&void 0!==_c?_c:{},axisEncode=AXIS_PARTS.reduce(((e,part)=>{var _a;if(!axisComponent.hasAxisPart(part))return e;const axisEncodingPart=guideEncodeEntry(null!==(_a=axisEncoding[part])&&void 0!==_a?_a:{},model),value="labels"===part?function encode_labels(model,channel,specifiedLabelsSpec){var _a;const{encoding,config}=model,fieldOrDatumDef=null!==(_a=getFieldOrDatumDef(encoding[channel]))&&void 0!==_a?_a:getFieldOrDatumDef(encoding[getSecondaryRangeChannel(channel)]),axis=model.axis(channel)||{},{format,formatType}=axis;if(isCustomFormatType(formatType))return Object.assign({text:formatCustomType({fieldOrDatumDef,field:"datum.value",format,formatType,config})},specifiedLabelsSpec);if(void 0===format&&void 0===formatType&&config.customFormatTypes){if("quantitative"===channelDefType(fieldOrDatumDef)){if(isPositionFieldOrDatumDef(fieldOrDatumDef)&&"normalize"===fieldOrDatumDef.stack&&config.normalizedNumberFormatType)return Object.assign({text:formatCustomType({fieldOrDatumDef,field:"datum.value",format:config.normalizedNumberFormat,formatType:config.normalizedNumberFormatType,config})},specifiedLabelsSpec);if(config.numberFormatType)return Object.assign({text:formatCustomType({fieldOrDatumDef,field:"datum.value",format:config.numberFormat,formatType:config.numberFormatType,config})},specifiedLabelsSpec)}if("temporal"===channelDefType(fieldOrDatumDef)&&config.timeFormatType&&isFieldDef(fieldOrDatumDef)&&!fieldOrDatumDef.timeUnit)return Object.assign({text:formatCustomType({fieldOrDatumDef,field:"datum.value",format:config.timeFormat,formatType:config.timeFormatType,config})},specifiedLabelsSpec)}return specifiedLabelsSpec}(model,channel,axisEncodingPart):axisEncodingPart;return void 0===value||isEmpty(value)||(e[part]={update:value}),e}),{});return isEmpty(axisEncode)||axisComponent.set("encode",axisEncode,!!axis.encoding||void 0!==axis.labelAngle),axisComponent}function initMarkdef(originalMarkDef,encoding,config){const markDef=replaceExprRef(originalMarkDef),specifiedOrient=getMarkPropOrConfig("orient",markDef,config);if(markDef.orient=function orient(mark,encoding,specifiedOrient){switch(mark){case POINT:case CIRCLE:case SQUARE:case mark_TEXT:case RECT:case IMAGE:return}const{x,y,x2,y2}=encoding;switch(mark){case BAR:if(isFieldDef(x)&&(isBinned(x.bin)||isFieldDef(y)&&y.aggregate&&!x.aggregate))return"vertical";if(isFieldDef(y)&&(isBinned(y.bin)||isFieldDef(x)&&x.aggregate&&!y.aggregate))return"horizontal";if(y2||x2){if(specifiedOrient)return specifiedOrient;if(!x2)return(isFieldDef(x)&&x.type===QUANTITATIVE&&!isBinning(x.bin)||isNumericDataDef(x))&&isFieldDef(y)&&isBinned(y.bin)?"horizontal":"vertical";if(!y2)return(isFieldDef(y)&&y.type===QUANTITATIVE&&!isBinning(y.bin)||isNumericDataDef(y))&&isFieldDef(x)&&isBinned(x.bin)?"vertical":"horizontal"}case RULE:if(x2&&(!isFieldDef(x)||!isBinned(x.bin))&&y2&&(!isFieldDef(y)||!isBinned(y.bin)))return;case AREA:if(y2)return isFieldDef(y)&&isBinned(y.bin)?"horizontal":"vertical";if(x2)return isFieldDef(x)&&isBinned(x.bin)?"vertical":"horizontal";if(mark===RULE){if(x&&!y)return"vertical";if(y&&!x)return"horizontal"}case LINE:case TICK:{const xIsContinuous=isContinuousFieldOrDatumDef(x),yIsContinuous=isContinuousFieldOrDatumDef(y);if(specifiedOrient)return specifiedOrient;if(xIsContinuous&&!yIsContinuous)return"tick"!==mark?"horizontal":"vertical";if(!xIsContinuous&&yIsContinuous)return"tick"!==mark?"vertical":"horizontal";if(xIsContinuous&&yIsContinuous){const xDef=x,yDef=y,xIsTemporal=xDef.type===TEMPORAL,yIsTemporal=yDef.type===TEMPORAL;return xIsTemporal&&!yIsTemporal?"tick"!==mark?"vertical":"horizontal":!xIsTemporal&&yIsTemporal?"tick"!==mark?"horizontal":"vertical":!xDef.aggregate&&yDef.aggregate?"tick"!==mark?"vertical":"horizontal":xDef.aggregate&&!yDef.aggregate&&"tick"!==mark?"horizontal":"vertical"}return}}return"vertical"}(markDef.type,encoding,specifiedOrient),void 0!==specifiedOrient&&specifiedOrient!==markDef.orient&&log_warn(function orientOverridden(original,actual){return`Specified orient "${original}" overridden with "${actual}".`}(markDef.orient,specifiedOrient)),"bar"===markDef.type&&markDef.orient){const cornerRadiusEnd=getMarkPropOrConfig("cornerRadiusEnd",markDef,config);if(void 0!==cornerRadiusEnd){const newProps="horizontal"===markDef.orient&&encoding.x2||"vertical"===markDef.orient&&encoding.y2?["cornerRadius"]:BAR_CORNER_RADIUS_INDEX[markDef.orient];for(const newProp of newProps)markDef[newProp]=cornerRadiusEnd;void 0!==markDef.cornerRadiusEnd&&delete markDef.cornerRadiusEnd}}void 0===getMarkPropOrConfig("opacity",markDef,config)&&(markDef.opacity=function opacity(mark,encoding){if(util_contains([POINT,TICK,CIRCLE,SQUARE],mark)&&!isAggregate(encoding))return.7;return}(markDef.type,encoding));return void 0===getMarkPropOrConfig("cursor",markDef,config)&&(markDef.cursor=function init_cursor(markDef,encoding,config){if(encoding.href||markDef.href||getMarkPropOrConfig("href",markDef,config))return"pointer";return markDef.cursor}(markDef,encoding,config)),markDef}function encodeEntry(model,fixedShape){const{config}=model;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),pointPosition("x",model,{defaultPos:"mid"})),pointPosition("y",model,{defaultPos:"mid"})),nonPosition("size",model)),nonPosition("angle",model)),function shapeMixins(model,config,fixedShape){if(fixedShape)return{shape:{value:fixedShape}};return nonPosition("shape",model)}(model,0,fixedShape))}const rule_rule={vgMark:"rule",encodeEntry:model=>{const{markDef}=model,orient=markDef.orient;return model.encoding.x||model.encoding.y||model.encoding.latitude||model.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),pointOrRangePosition("x",model,{defaultPos:"horizontal"===orient?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==orient})),pointOrRangePosition("y",model,{defaultPos:"vertical"===orient?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==orient})),nonPosition("size",model,{vgChannel:"strokeWidth"})):{}}};const tick={vgMark:"rect",encodeEntry:model=>{const{config,markDef}=model,orient=markDef.orient,vgSizeChannel="horizontal"===orient?"width":"height",vgThicknessChannel="horizontal"===orient?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),pointPosition("x",model,{defaultPos:"mid",vgChannel:"xc"})),pointPosition("y",model,{defaultPos:"mid",vgChannel:"yc"})),nonPosition("size",model,{defaultValue:defaultSize(model),vgChannel:vgSizeChannel})),{[vgThicknessChannel]:signalOrValueRef(getMarkPropOrConfig("thickness",markDef,config))})}};function defaultSize(model){var _a;const{config,markDef}=model,{orient}=markDef,vgSizeChannel="horizontal"===orient?"width":"height",scale=model.getScaleComponent("horizontal"===orient?"x":"y"),markPropOrConfig=null!==(_a=getMarkPropOrConfig("size",markDef,config,{vgChannel:vgSizeChannel}))&&void 0!==_a?_a:config.tick.bandSize;if(void 0!==markPropOrConfig)return markPropOrConfig;{const scaleRange=scale?scale.get("range"):void 0;if(scaleRange&&isVgRangeStep(scaleRange)&&isNumber(scaleRange.step))return 3*scaleRange.step/4;return 3*getViewConfigDiscreteStep(config.view,vgSizeChannel)/4}}const markCompiler={arc:{vgMark:"arc",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),pointPosition("x",model,{defaultPos:"mid"})),pointPosition("y",model,{defaultPos:"mid"})),rectPosition(model,"radius")),rectPosition(model,"theta"))},area:{vgMark:"area",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),pointOrRangePosition("x",model,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===model.markDef.orient})),pointOrRangePosition("y",model,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===model.markDef.orient})),defined(model))},bar:{vgMark:"rect",encodeEntry:model=>Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rectPosition(model,"x")),rectPosition(model,"y"))},circle:{vgMark:"symbol",encodeEntry:model=>encodeEntry(model,"circle")},geoshape:{vgMark:"shape",encodeEntry:model=>Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:model=>{const{encoding}=model,shapeDef=encoding.shape;return[Object.assign({type:"geoshape",projection:model.projectionName()},shapeDef&&isFieldDef(shapeDef)&&shapeDef.type===GEOJSON?{field:vgField(shapeDef,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),rectPosition(model,"x")),rectPosition(model,"y")),text_text(model,"url"))},line:{vgMark:"line",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),pointPosition("x",model,{defaultPos:"mid"})),pointPosition("y",model,{defaultPos:"mid"})),nonPosition("size",model,{vgChannel:"strokeWidth"})),defined(model))},point:{vgMark:"symbol",encodeEntry:model=>encodeEntry(model)},rect:{vgMark:"rect",encodeEntry:model=>Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rectPosition(model,"x")),rectPosition(model,"y"))},rule:rule_rule,square:{vgMark:"symbol",encodeEntry:model=>encodeEntry(model,"square")},text:{vgMark:"text",encodeEntry:model=>{const{config,encoding}=model;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),pointPosition("x",model,{defaultPos:"mid"})),pointPosition("y",model,{defaultPos:"mid"})),text_text(model)),nonPosition("size",model,{vgChannel:"fontSize"})),nonPosition("angle",model)),valueIfDefined("align",function align(markDef,encoding,config){if(void 0===getMarkPropOrConfig("align",markDef,config))return"center";return}(model.markDef,0,config))),valueIfDefined("baseline",function text_baseline(markDef,encoding,config){if(void 0===getMarkPropOrConfig("baseline",markDef,config))return"middle";return}(model.markDef,0,config))),pointPosition("radius",model,{defaultPos:null})),pointPosition("theta",model,{defaultPos:null}))}},tick,trail:{vgMark:"trail",encodeEntry:model=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},baseEncodeEntry(model,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),pointPosition("x",model,{defaultPos:"mid"})),pointPosition("y",model,{defaultPos:"mid"})),nonPosition("size",model)),defined(model))}};function parseMarkGroups(model){if(util_contains([LINE,AREA,TRAIL],model.mark)){const details=pathGroupingFields(model.mark,model.encoding);if(details.length>0)return function getPathGroups(model,details){return[{name:model.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+model.requestDataName(DataSourceType.Main),data:model.requestDataName(DataSourceType.Main),groupby:details}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:getMarkGroup(model,{fromPrefix:"faceted_path_"})}]}(model,details)}else if(model.mark===BAR){const hasCornerRadius=VG_CORNERRADIUS_CHANNELS.some((prop=>getMarkPropOrConfig(prop,model.markDef,model.config)));if(model.stack&&!model.fieldDef("size")&&hasCornerRadius)return function getGroupsForStackedBarWithCornerRadius(model){var _a;const[mark]=getMarkGroup(model,{fromPrefix:"stack_group_"}),fieldScale=model.scaleName(model.stack.fieldChannel),stackField=(opt={})=>model.vgField(model.stack.fieldChannel,opt),stackFieldGroup=(func,expr)=>`${func}(${[stackField({prefix:"min",suffix:"start",expr}),stackField({prefix:"max",suffix:"start",expr}),stackField({prefix:"min",suffix:"end",expr}),stackField({prefix:"max",suffix:"end",expr})].map((field=>`scale('${fieldScale}',${field})`)).join(",")})`;let groupUpdate,innerGroupUpdate;"x"===model.stack.fieldChannel?(groupUpdate=Object.assign(Object.assign({},util_pick(mark.encode.update,["y","yc","y2","height",...VG_CORNERRADIUS_CHANNELS])),{x:{signal:stackFieldGroup("min","datum")},x2:{signal:stackFieldGroup("max","datum")},clip:{value:!0}}),innerGroupUpdate={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},mark.encode.update=Object.assign(Object.assign({},omit(mark.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(groupUpdate=Object.assign(Object.assign({},util_pick(mark.encode.update,["x","xc","x2","width"])),{y:{signal:stackFieldGroup("min","datum")},y2:{signal:stackFieldGroup("max","datum")},clip:{value:!0}}),innerGroupUpdate={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},mark.encode.update=Object.assign(Object.assign({},omit(mark.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const key of VG_CORNERRADIUS_CHANNELS){const configValue=getMarkConfig(key,model.markDef,model.config);mark.encode.update[key]?(groupUpdate[key]=mark.encode.update[key],delete mark.encode.update[key]):configValue&&(groupUpdate[key]=signalOrValueRef(configValue)),configValue&&(mark.encode.update[key]={value:0})}const groupby=[];if((null===(_a=model.stack.groupbyChannels)||void 0===_a?void 0:_a.length)>0)for(const groupbyChannel of model.stack.groupbyChannels){const groupByField=model.fieldDef(groupbyChannel),field=vgField(groupByField);field&&groupby.push(field),((null==groupByField?void 0:groupByField.bin)||(null==groupByField?void 0:groupByField.timeUnit))&&groupby.push(vgField(groupByField,{binSuffix:"end"}))}groupUpdate=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((encode,prop)=>{if(mark.encode.update[prop])return Object.assign(Object.assign({},encode),{[prop]:mark.encode.update[prop]});{const configValue=getMarkConfig(prop,model.markDef,model.config);return void 0!==configValue?Object.assign(Object.assign({},encode),{[prop]:signalOrValueRef(configValue)}):encode}}),groupUpdate),groupUpdate.stroke&&(groupUpdate.strokeForeground={value:!0},groupUpdate.strokeOffset={value:0});return[{type:"group",from:{facet:{data:model.requestDataName(DataSourceType.Main),name:"stack_group_"+model.requestDataName(DataSourceType.Main),groupby,aggregate:{fields:[stackField({suffix:"start"}),stackField({suffix:"start"}),stackField({suffix:"end"}),stackField({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:groupUpdate},marks:[{type:"group",encode:{update:innerGroupUpdate},marks:[mark]}]}]}(model)}return getMarkGroup(model)}function getMarkGroup(model,opt={fromPrefix:""}){const{mark,markDef,encoding,config}=model,clip=getFirstDefined(markDef.clip,function scaleClip(model){const xScale=model.getScaleComponent("x"),yScale=model.getScaleComponent("y");return!(!(null==xScale?void 0:xScale.get("selectionExtent"))&&!(null==yScale?void 0:yScale.get("selectionExtent")))||void 0}(model),function projectionClip(model){const projection=model.component.projection;return!(!projection||projection.isFit)||void 0}(model)),style=getStyles(markDef),key=encoding.key,sort=function mark_getSort(model){var _a;const{encoding,stack,mark,markDef,config}=model,order=encoding.order;if(!(!isArray(order)&&isValueDef(order)&&isNullOrFalse(order.value)||!order&&isNullOrFalse(getMarkPropOrConfig("order",markDef,config)))){if((isArray(order)||isFieldDef(order))&&!stack)return sortParams(order,{expr:"datum"});if(isPathMark(mark)){const dimensionChannel="horizontal"===markDef.orient?"y":"x",dimensionChannelDef=encoding[dimensionChannel];if(isFieldDef(dimensionChannelDef)){const s=dimensionChannelDef.sort;return isArray(s)?{field:vgField(dimensionChannelDef,{prefix:dimensionChannel,suffix:"sort_index",expr:"datum"})}:isSortField(s)?{field:vgField({aggregate:isAggregate(model.encoding)?s.op:void 0,field:s.field},{expr:"datum"})}:isSortByEncoding(s)?{field:vgField(model.fieldDef(s.encoding),{expr:"datum"}),order:s.order}:null===s?void 0:{field:vgField(dimensionChannelDef,{binSuffix:(null===(_a=model.stack)||void 0===_a?void 0:_a.impute)?"mid":void 0,expr:"datum"})}}}}}(model),interactive=function interactiveFlag(model){if(!model.component.selection)return null;const unitCount=util_keys(model.component.selection).length;let parentCount=unitCount,parent=model.parent;for(;parent&&0===parentCount;)parentCount=util_keys(parent.component.selection).length,parent=parent.parent;return parentCount?{interactive:unitCount>0||!!model.encoding.tooltip}:null}(model),aria=getMarkPropOrConfig("aria",markDef,config),postEncodingTransform=markCompiler[mark].postEncodingTransform?markCompiler[mark].postEncodingTransform(model):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:model.getName("marks"),type:markCompiler[mark].vgMark},clip?{clip:!0}:{}),style?{style}:{}),key?{key:key.field}:{}),sort?{sort}:{}),interactive||{}),!1===aria?{aria}:{}),{from:{data:opt.fromPrefix+model.requestDataName(DataSourceType.Main)},encode:{update:markCompiler[mark].encodeEntry(model)}}),postEncodingTransform?{transform:postEncodingTransform}:{})]}class UnitModel extends ModelWithField{constructor(spec,parent,parentGivenName,parentGivenSize={},config){var _a;super(spec,"unit",parent,parentGivenName,config,void 0,isFrameMixins(spec)?spec.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const markDef=isMarkDef(spec.mark)?Object.assign({},spec.mark):{type:spec.mark},mark=markDef.type;void 0===markDef.filled&&(markDef.filled=function defaultFilled(markDef,config,{graticule}){if(graticule)return!1;const filledConfig=getMarkConfig("filled",markDef,config),mark=markDef.type;return getFirstDefined(filledConfig,mark!==POINT&&mark!==LINE&&mark!==RULE)}(markDef,config,{graticule:spec.data&&isGraticuleGenerator(spec.data)}));const encoding=this.encoding=function initEncoding(encoding,mark,filled,config){const normalizedEncoding={};for(const key of util_keys(encoding))isChannel(key)||log_warn(`${channel=key}-encoding is dropped as ${channel} is not a valid encoding channel.`);var channel;for(let channel of UNIT_CHANNELS){if(!encoding[channel])continue;const channelDef=encoding[channel];if(isXorYOffset(channel)){const mainChannel=getMainChannelFromOffsetChannel(channel),positionDef=normalizedEncoding[mainChannel];if(isFieldDef(positionDef)){if(type_isContinuous(positionDef.type)&&isFieldDef(channelDef)){log_warn(offsetNestedInsideContinuousPositionScaleDropped(mainChannel));continue}}else channel=mainChannel,log_warn(replaceOffsetWithMainChannel(mainChannel))}if("angle"!==channel||"arc"!==mark||encoding.theta||(log_warn("Arc marks uses theta channel rather than angle, replacing angle with theta."),channel=THETA),markChannelCompatible(encoding,channel,mark)){if("size"===channel&&"line"===mark){const fieldDef=getFieldDef(encoding[channel]);if(null==fieldDef?void 0:fieldDef.aggregate){log_warn("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");continue}}if(channel===COLOR&&(filled?"fill"in encoding:"stroke"in encoding))log_warn(droppingColor("encoding",{fill:"fill"in encoding,stroke:"stroke"in encoding}));else if("detail"===channel||"order"===channel&&!isArray(channelDef)&&!isValueDef(channelDef)||"tooltip"===channel&&isArray(channelDef))channelDef&&(normalizedEncoding[channel]=array(channelDef).reduce(((defs,fieldDef)=>(isFieldDef(fieldDef)?defs.push(initFieldDef(fieldDef,channel)):log_warn(emptyFieldDef(fieldDef,channel)),defs)),[]));else{if("tooltip"===channel&&null===channelDef)normalizedEncoding[channel]=null;else if(!(isFieldDef(channelDef)||isDatumDef(channelDef)||isValueDef(channelDef)||isConditionalDef(channelDef)||isSignalRef(channelDef))){log_warn(emptyFieldDef(channelDef,channel));continue}normalizedEncoding[channel]=initChannelDef(channelDef,channel,config)}}else log_warn(incompatibleChannel(channel,mark))}return normalizedEncoding}(spec.encoding||{},mark,markDef.filled,config);this.markDef=initMarkdef(markDef,encoding,config),this.size=function initLayoutSize({encoding,size}){for(const channel of POSITION_SCALE_CHANNELS){const sizeType=getSizeChannel(channel);isStep(size[sizeType])&&isContinuousFieldOrDatumDef(encoding[channel])&&(delete size[sizeType],log_warn(stepDropped(sizeType)))}return size}({encoding,size:isFrameMixins(spec)?Object.assign(Object.assign(Object.assign({},parentGivenSize),spec.width?{width:spec.width}:{}),spec.height?{height:spec.height}:{}):parentGivenSize}),this.stack=stack(mark,encoding),this.specifiedScales=this.initScales(mark,encoding),this.specifiedAxes=this.initAxes(encoding),this.specifiedLegends=this.initLegends(encoding),this.specifiedProjection=spec.projection,this.selection=(null!==(_a=spec.params)&&void 0!==_a?_a:[]).filter((p=>isSelectionParameter(p)))}get hasProjection(){const{encoding}=this,isGeoShapeMark=this.mark===GEOSHAPE,hasGeoPosition=encoding&&GEOPOSITION_CHANNELS.some((channel=>isFieldOrDatumDef(encoding[channel])));return isGeoShapeMark||hasGeoPosition}scaleDomain(channel){const scale=this.specifiedScales[channel];return scale?scale.domain:void 0}axis(channel){return this.specifiedAxes[channel]}legend(channel){return this.specifiedLegends[channel]}initScales(mark,encoding){return SCALE_CHANNELS.reduce(((scales,channel)=>{var _a;const fieldOrDatumDef=getFieldOrDatumDef(encoding[channel]);return fieldOrDatumDef&&(scales[channel]=this.initScale(null!==(_a=fieldOrDatumDef.scale)&&void 0!==_a?_a:{})),scales}),{})}initScale(scale){const{domain,range}=scale,scaleInternal=replaceExprRef(scale);return isArray(domain)&&(scaleInternal.domain=domain.map(signalRefOrValue)),isArray(range)&&(scaleInternal.range=range.map(signalRefOrValue)),scaleInternal}initAxes(encoding){return POSITION_SCALE_CHANNELS.reduce(((_axis,channel)=>{const channelDef=encoding[channel];if(isFieldOrDatumDef(channelDef)||"x"===channel&&isFieldOrDatumDef(encoding.x2)||"y"===channel&&isFieldOrDatumDef(encoding.y2)){const axisSpec=isFieldOrDatumDef(channelDef)?channelDef.axis:void 0;_axis[channel]=axisSpec?this.initAxis(Object.assign({},axisSpec)):axisSpec}return _axis}),{})}initAxis(axis){const props=util_keys(axis),axisInternal={};for(const prop of props){const val=axis[prop];axisInternal[prop]=isConditionalAxisValue(val)?signalOrValueRefWithCondition(val):signalRefOrValue(val)}return axisInternal}initLegends(encoding){return NONPOSITION_SCALE_CHANNELS.reduce(((_legend,channel)=>{const fieldOrDatumDef=getFieldOrDatumDef(encoding[channel]);if(fieldOrDatumDef&&function supportLegend(channel){switch(channel){case COLOR:case FILL:case STROKE:case"size":case SHAPE:case"opacity":case"strokeWidth":case"strokeDash":return!0;case"fillOpacity":case"strokeOpacity":case"angle":return!1}}(channel)){const legend=fieldOrDatumDef.legend;_legend[channel]=legend?replaceExprRef(legend):legend}return _legend}),{})}parseData(){this.component.data=parse_parseData(this)}parseLayoutSize(){!function parseUnitLayoutSize(model){const{size,component}=model;for(const channel of POSITION_SCALE_CHANNELS){const sizeType=getSizeChannel(channel);if(size[sizeType]){const specifiedSize=size[sizeType];component.layoutSize.set(sizeType,isStep(specifiedSize)?"step":specifiedSize,!0)}else{const defaultSize=defaultUnitSize(model,sizeType);component.layoutSize.set(sizeType,defaultSize,!1)}}}(this)}parseSelections(){this.component.selection=function parseUnitSelection(model,selDefs){var _a;const selCmpts={},selectionConfig=model.config.selection;if(!selDefs||!selDefs.length)return selCmpts;for(const def of selDefs){const name=varName(def.name),selDef=def.select,type=isString(selDef)?selDef:selDef.type,defaults=isObject(selDef)?duplicate(selDef):{type},cfg=selectionConfig[type];for(const key in cfg)"fields"!==key&&"encodings"!==key&&("mark"===key&&(defaults[key]=Object.assign(Object.assign({},cfg[key]),defaults[key])),void 0!==defaults[key]&&!0!==defaults[key]||(defaults[key]=null!==(_a=cfg[key])&&void 0!==_a?_a:defaults[key]));const selCmpt=selCmpts[name]=Object.assign(Object.assign({},defaults),{name,type,init:def.value,bind:def.bind,events:isString(defaults.on)?eventSelector(defaults.on,"scope"):array(duplicate(defaults.on))});for(const c of selectionCompilers)c.defined(selCmpt)&&c.parse&&c.parse(model,selCmpt,def)}return selCmpts}(this,this.selection)}parseMarkGroup(){this.component.mark=parseMarkGroups(this)}parseAxesAndHeaders(){this.component.axes=function parseUnitAxes(model){return POSITION_SCALE_CHANNELS.reduce(((axis,channel)=>(model.component.scales[channel]&&(axis[channel]=[parse_parseAxis(channel,model)]),axis)),{})}(this)}assembleSelectionTopLevelSignals(signals){return function assembleTopLevelSignals(model,signals){var _a;let hasSelections=!1;for(const selCmpt of vals(null!==(_a=model.component.selection)&&void 0!==_a?_a:{})){const name=selCmpt.name,store=$(name+STORE),hasSg=signals.filter((s=>s.name===name));if(0===hasSg.length){const resolve="global"===selCmpt.resolve?"union":selCmpt.resolve,isPoint="point"===selCmpt.type?", true, true)":")";signals.push({name:selCmpt.name,update:`${VL_SELECTION_RESOLVE}(${store}, ${$(resolve)}${isPoint}`})}hasSelections=!0;for(const c of selectionCompilers)c.defined(selCmpt)&&c.topLevelSignals&&(signals=c.topLevelSignals(model,selCmpt,signals))}if(hasSelections){const hasUnit=signals.filter((s=>"unit"===s.name));0===hasUnit.length&&signals.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return cleanupEmptyOnArray(signals)}(this,signals)}assembleSignals(){return[...assembleAxisSignals(this),...assembleUnitSelectionSignals(this,[])]}assembleSelectionData(data){return function assembleUnitSelectionData(model,data){var _a;const dataCopy=[...data],unit=unitName(model,{escape:!1});for(const selCmpt of vals(null!==(_a=model.component.selection)&&void 0!==_a?_a:{})){const store={name:selCmpt.name+STORE};if(selCmpt.project.hasSelectionId&&(store.transform=[{type:"collect",sort:{field:"_vgsid_"}}]),selCmpt.init){const fields=selCmpt.project.items.map((proj=>{const{signals}=proj;return assemble_rest(proj,["signals"])}));store.values=selCmpt.project.hasSelectionId?selCmpt.init.map((i=>({unit,_vgsid_:assembleInit(i,!1)[0]}))):selCmpt.init.map((i=>({unit,fields,values:assembleInit(i,!1)})))}dataCopy.filter((d=>d.name===selCmpt.name+STORE)).length||dataCopy.push(store)}return dataCopy}(this,data)}assembleLayout(){return null}assembleLayoutSignals(){return assembleLayoutSignals(this)}assembleMarks(){var _a;let marks=null!==(_a=this.component.mark)&&void 0!==_a?_a:[];return this.parent&&isLayerModel(this.parent)||(marks=assembleUnitSelectionMarks(this,marks)),marks.map(this.correctDataNames)}assembleGroupStyle(){const{style}=this.view||{};return void 0!==style?style:this.encoding.x||this.encoding.y?"cell":void 0}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(channel){return channelHasField(this.encoding,channel)}fieldDef(channel){return getFieldDef(this.encoding[channel])}typedFieldDef(channel){const fieldDef=this.fieldDef(channel);return isTypedFieldDef(fieldDef)?fieldDef:null}}class LayerModel extends Model{constructor(spec,parent,parentGivenName,parentGivenSize,config){super(spec,"layer",parent,parentGivenName,config,spec.resolve,spec.view);const layoutSize=Object.assign(Object.assign(Object.assign({},parentGivenSize),spec.width?{width:spec.width}:{}),spec.height?{height:spec.height}:{});this.children=spec.layer.map(((layer,i)=>{if(isLayerSpec(layer))return new LayerModel(layer,this,this.getName(`layer_${i}`),layoutSize,config);if(isUnitSpec(layer))return new UnitModel(layer,this,this.getName(`layer_${i}`),layoutSize,config);throw new Error(invalidSpec(layer))}))}parseData(){this.component.data=parse_parseData(this);for(const child of this.children)child.parseData()}parseLayoutSize(){!function parseLayerLayoutSize(model){parseChildrenLayoutSize(model),parseNonUnitLayoutSizeForChannel(model,"width"),parseNonUnitLayoutSizeForChannel(model,"height")}(this)}parseSelections(){this.component.selection={};for(const child of this.children){child.parseSelections();for(const key of util_keys(child.component.selection))this.component.selection[key]=child.component.selection[key]}}parseMarkGroup(){for(const child of this.children)child.parseMarkGroup()}parseAxesAndHeaders(){!function parseLayerAxes(model){var _a;const{axes,resolve}=model.component,axisCount={top:0,bottom:0,right:0,left:0};for(const child of model.children){child.parseAxesAndHeaders();for(const channel of util_keys(child.component.axes))resolve.axis[channel]=parseGuideResolve(model.component.resolve,channel),"shared"===resolve.axis[channel]&&(axes[channel]=mergeAxisComponents(axes[channel],child.component.axes[channel]),axes[channel]||(resolve.axis[channel]="independent",delete axes[channel]))}for(const channel of POSITION_SCALE_CHANNELS){for(const child of model.children)if(child.component.axes[channel]){if("independent"===resolve.axis[channel]){axes[channel]=(null!==(_a=axes[channel])&&void 0!==_a?_a:[]).concat(child.component.axes[channel]);for(const axisComponent of child.component.axes[channel]){const{value:orient,explicit}=axisComponent.getWithExplicit("orient");if(!isSignalRef(orient)){if(axisCount[orient]>0&&!explicit){const oppositeOrient=OPPOSITE_ORIENT[orient];axisCount[orient]>axisCount[oppositeOrient]&&axisComponent.set("orient",oppositeOrient,!1)}axisCount[orient]++}}}delete child.component.axes[channel]}if("independent"===resolve.axis[channel]&&axes[channel]&&axes[channel].length>1)for(const axisCmpt of axes[channel])axisCmpt.get("grid")&&!axisCmpt.explicit.grid&&(axisCmpt.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(signals){return this.children.reduce(((sg,child)=>child.assembleSelectionTopLevelSignals(sg)),signals)}assembleSignals(){return this.children.reduce(((signals,child)=>signals.concat(child.assembleSignals())),assembleAxisSignals(this))}assembleLayoutSignals(){return this.children.reduce(((signals,child)=>signals.concat(child.assembleLayoutSignals())),assembleLayoutSignals(this))}assembleSelectionData(data){return this.children.reduce(((db,child)=>child.assembleSelectionData(db)),data)}assembleGroupStyle(){const uniqueStyles=new Set;for(const child of this.children)for(const style of array(child.assembleGroupStyle()))uniqueStyles.add(style);const styles=Array.from(uniqueStyles);return styles.length>1?styles:1===styles.length?styles[0]:void 0}assembleTitle(){let title=super.assembleTitle();if(title)return title;for(const child of this.children)if(title=child.assembleTitle(),title)return title}assembleLayout(){return null}assembleMarks(){return function assembleLayerSelectionMarks(model,marks){for(const child of model.children)isUnitModel(child)&&(marks=assembleUnitSelectionMarks(child,marks));return marks}(this,this.children.flatMap((child=>child.assembleMarks())))}assembleLegends(){return this.children.reduce(((legends,child)=>legends.concat(child.assembleLegends())),assembleLegends(this))}}function buildModel(spec,parent,parentGivenName,unitSize,config){if(isFacetSpec(spec))return new FacetModel(spec,parent,parentGivenName,config);if(isLayerSpec(spec))return new LayerModel(spec,parent,parentGivenName,unitSize,config);if(isUnitSpec(spec))return new UnitModel(spec,parent,parentGivenName,unitSize,config);if(function isAnyConcatSpec(spec){return isVConcatSpec(spec)||isHConcatSpec(spec)||isConcatSpec(spec)}(spec))return new ConcatModel(spec,parent,parentGivenName,config);throw new Error(invalidSpec(spec))}var compile_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function compile(inputSpec,opt={}){opt.logger&&function log_set(newLogger){return current=newLogger,current}(opt.logger),opt.fieldTitle&&setTitleFormatter(opt.fieldTitle);try{const config=initConfig(mergeConfig(opt.config,inputSpec.config)),spec=normalize_normalize(inputSpec,config),model=buildModel(spec,null,"",void 0,config);model.parse(),function optimizeDataflow(data,model){checkLinks(data.sources);let firstPassCounter=0,secondPassCounter=0;for(let i=0;i<5&&optimizationDataflowHelper(data,model,!0);i++)firstPassCounter++;data.sources.map(moveFacetDown);for(let i=0;i<5&&optimizationDataflowHelper(data,model,!1);i++)secondPassCounter++;checkLinks(data.sources),5===Math.max(firstPassCounter,secondPassCounter)&&log_warn("Maximum optimization runs(5) reached.")}(model.component.data,model);const vgSpec=function assembleTopLevelModel(model,topLevelProperties,datasets={},usermeta){const vgConfig=model.config?stripAndRedirectConfig(model.config):void 0,data=[].concat(model.assembleSelectionData([]),function assembleRootData(dataComponent,datasets){var _a,_b;const data=[],walkTree=makeWalkTree(data);let sourceIndex=0;for(const root of dataComponent.sources){root.hasName()||(root.dataName="source_"+sourceIndex++);const newData=root.assemble();walkTree(root,newData)}for(const d of data)0===d.transform.length&&delete d.transform;let whereTo=0;for(const[i,d]of data.entries())0!==(null!==(_a=d.transform)&&void 0!==_a?_a:[]).length||d.source||data.splice(whereTo++,0,data.splice(i,1)[0]);for(const d of data)for(const t of null!==(_b=d.transform)&&void 0!==_b?_b:[])"lookup"===t.type&&(t.from=dataComponent.outputNodes[t.from].getSource());for(const d of data)d.name in datasets&&(d.values=datasets[d.name]);return data}(model.component.data,datasets)),projections=model.assembleProjections(),title=model.assembleTitle(),style=model.assembleGroupStyle(),encodeEntry=model.assembleGroupEncodeEntry(!0);let layoutSignals=model.assembleLayoutSignals();layoutSignals=layoutSignals.filter((signal=>"width"!==signal.name&&"height"!==signal.name||void 0===signal.value||(topLevelProperties[signal.name]=+signal.value,!1)));const{params}=topLevelProperties,otherTopLevelProps=compile_rest(topLevelProperties,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},model.description?{description:model.description}:{}),otherTopLevelProps),title?{title}:{}),style?{style}:{}),encodeEntry?{encode:{update:encodeEntry}}:{}),{data}),projections.length>0?{projections}:{}),model.assembleGroup([...layoutSignals,...model.assembleSelectionTopLevelSignals([]),...assembleParameterSignals(params)])),vgConfig?{config:vgConfig}:{}),usermeta?{usermeta}:{})}(model,function getTopLevelProperties(inputSpec,autosize,config,model){const width=model.component.layoutSize.get("width"),height=model.component.layoutSize.get("height");void 0===autosize?(autosize={type:"pad"},model.hasAxisOrientSignalRef()&&(autosize.resize=!0)):isString(autosize)&&(autosize={type:autosize});if(width&&height&&function isFitType(autoSizeType){return"fit"===autoSizeType||"fit-x"===autoSizeType||"fit-y"===autoSizeType}(autosize.type))if("step"===width&&"step"===height)log_warn(droppingFit()),autosize.type="pad";else if("step"===width||"step"===height){const sizeType="step"===width?"width":"height";log_warn(droppingFit(getPositionScaleChannel(sizeType)));const inverseSizeType="width"===sizeType?"height":"width";autosize.type=function getFitType(sizeType){return sizeType?`fit-${getPositionScaleChannel(sizeType)}`:"fit"}(inverseSizeType)}return Object.assign(Object.assign(Object.assign({},1===util_keys(autosize).length&&autosize.type?"pad"===autosize.type?{}:{autosize:autosize.type}:{autosize}),extractTopLevelProperties(config,!1)),extractTopLevelProperties(inputSpec,!0))}(inputSpec,spec.autosize,config,model),inputSpec.datasets,inputSpec.usermeta);return{spec:vgSpec,normalized:spec}}finally{opt.logger&&log_reset(),opt.fieldTitle&&function resetTitleFormatter(){setTitleFormatter(defaultTitleFormatter)}()}}const src_version="5.5.0";const parser_module=function e(e){const[n,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:n,version:r}};var pkg_version="2.10.0";const darkTheme={background:"#333",title:{color:"#fff",subtitleColor:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},excelTheme={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},fiveThirtyEightTheme={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ggplot2Theme={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},titleFont="Benton Gothic Bold, sans-serif",colorSchemes$1={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},latimesTheme={background:"#ffffff",title:{anchor:"start",color:"#000000",font:titleFont,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont,titleFontSize:13,titleFontWeight:"normal"},range:{category:colorSchemes$1["category-6"],diverging:colorSchemes$1["fireandice-6"],heatmap:colorSchemes$1["fire-7"],ordinal:colorSchemes$1["fire-7"],ramp:colorSchemes$1["fire-7"]}},quartzTheme={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},voxTheme={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},colorSchemes={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},urbanInstituteTheme={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:colorSchemes["six-groups-cat-1"],diverging:colorSchemes["diverging-colors"],heatmap:colorSchemes["diverging-colors"],ordinal:colorSchemes["six-groups-seq"],ramp:colorSchemes["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},googlechartsTheme={arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ptToPx=value=>value*(1/3+1),fontSmallPx=ptToPx(9),legendFontPx=ptToPx(10),fontLargePx=ptToPx(12),fontTitle="wf_standard-font, helvetica, arial, sans-serif",divergentPalette=["#DEEFFF","#118DFF"],powerbiTheme={view:{stroke:"transparent"},background:"transparent",font:"Segoe UI",header:{titleFont:fontTitle,titleFontSize:fontLargePx,titleColor:"#252423",labelFont:"Segoe UI",labelFontSize:legendFontPx,labelColor:"#605E5C"},axis:{ticks:!1,grid:!1,domain:!1,labelColor:"#605E5C",labelFontSize:fontSmallPx,titleFont:fontTitle,titleColor:"#252423",titleFontSize:fontLargePx,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:"#118DFF"},line:{stroke:"#118DFF",strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:"Segoe UI",fontSize:fontSmallPx,fill:"#605E5C"},arc:{fill:"#118DFF"},area:{fill:"#118DFF",line:!0,opacity:.6},path:{stroke:"#118DFF"},rect:{fill:"#118DFF"},point:{fill:"#118DFF",filled:!0,size:75},shape:{stroke:"#118DFF"},symbol:{fill:"#118DFF",strokeWidth:1.5,size:50},legend:{titleFont:"Segoe UI",titleFontWeight:"bold",titleColor:"#605E5C",labelFont:"Segoe UI",labelFontSize:legendFontPx,labelColor:"#605E5C",symbolType:"circle",symbolSize:75},range:{category:["#118DFF","#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:divergentPalette,heatmap:divergentPalette,ordinal:["#DEEFFF","#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff","#118DFF"]}},vega_themes_module_version=pkg_version;function vega_tooltip_module_stringify(obj,maxDepth){return JSON.stringify(obj,function replacer(maxDepth){const stack=[];return function(key,value){if("object"!=typeof value||null===value)return value;const pos=stack.indexOf(this)+1;return stack.length=pos,stack.length>maxDepth?"[Object]":stack.indexOf(value)>=0?"[Circular]":(stack.push(value),value)}}(maxDepth))}var defaultStyle="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n";const EL_ID="vg-tooltip-element",DEFAULT_OPTIONS={offsetX:10,offsetY:10,id:EL_ID,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function escapeHTML(value){return String(value).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function vega_tooltip_module_formatValue(value,valueToHtml,maxDepth){if(isArray(value))return`[${value.map((v=>valueToHtml(isString(v)?v:vega_tooltip_module_stringify(v,maxDepth)))).join(", ")}]`;if(isObject(value)){let content="";const _a=value,{title,image}=_a,rest=function vega_tooltip_module_rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a,["title","image"]);title&&(content+=`<h2>${valueToHtml(title)}</h2>`),image&&(content+=`<img src="${valueToHtml(image)}">`);const keys=Object.keys(rest);if(keys.length>0){content+="<table>";for(const key of keys){let val=rest[key];void 0!==val&&(isObject(val)&&(val=vega_tooltip_module_stringify(val,maxDepth)),content+=`<tr><td class="key">${valueToHtml(key)}:</td><td class="value">${valueToHtml(val)}</td></tr>`)}content+="</table>"}return content||"{}"}return valueToHtml(value)}};class vega_tooltip_module_Handler{constructor(options){this.options=Object.assign(Object.assign({},DEFAULT_OPTIONS),options);const elementId=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const style=document.createElement("style");style.setAttribute("id",this.options.styleId),style.innerHTML=function createDefaultStyle(id){if(!/^[A-Za-z]+[-:.\w]*$/.test(id))throw new Error("Invalid HTML ID");return defaultStyle.toString().replace(EL_ID,id)}(elementId);const head=document.head;head.childNodes.length>0?head.insertBefore(style,head.childNodes[0]):head.appendChild(style)}}tooltipHandler(handler,event,item,value){var _a;if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");(null!==(_a=document.fullscreenElement)&&void 0!==_a?_a:document.body).appendChild(this.el)}if(null==value||""===value)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(value,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x,y}=function calculatePosition(event,tooltipBox,offsetX,offsetY){let x=event.clientX+offsetX;x+tooltipBox.width>window.innerWidth&&(x=+event.clientX-offsetX-tooltipBox.width);let y=event.clientY+offsetY;return y+tooltipBox.height>window.innerHeight&&(y=+event.clientY-offsetY-tooltipBox.height),{x,y}}(event,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${y}px; left: ${x}px`)}}var process=__webpack_require__("../../node_modules/process/browser.js");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function vega_embed_module_wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new vega_embed_module_Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function invoke(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(vega_embed_module_values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){prototype[method]=function(arg){return this._invoke(method,arg)}}))}function isGeneratorFunction(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(undefined===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function vega_embed_module_Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function vega_embed_module_values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},vega_embed_module_Context.prototype={constructor:vega_embed_module_Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:vega_embed_module_values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}};var _regeneratorRuntime={wrap:vega_embed_module_wrap,isGeneratorFunction,AsyncIterator,mark:function mark(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},awrap:function awrap(arg){return{__await:arg}},async:function vega_embed_module_async(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(vega_embed_module_wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},keys:function vega_embed_module_keys(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},values:vega_embed_module_values},yallist=Yallist$1;function Yallist$1(list){var self=this;if(self instanceof Yallist$1||(self=new Yallist$1),self.tail=null,self.head=null,self.length=0,list&&"function"==typeof list.forEach)list.forEach((function(item){self.push(item)}));else if(arguments.length>0)for(var i=0,l=arguments.length;i<l;i++)self.push(arguments[i]);return self}function vega_embed_module_insert(self,node,value){var inserted=node===self.head?new vega_embed_module_Node(value,null,node,self):new vega_embed_module_Node(value,node,node.next,self);return null===inserted.next&&(self.tail=inserted),null===inserted.prev&&(self.head=inserted),self.length++,inserted}function push(self,item){self.tail=new vega_embed_module_Node(item,self.tail,null,self),self.head||(self.head=self.tail),self.length++}function unshift(self,item){self.head=new vega_embed_module_Node(item,null,self.head,self),self.tail||(self.tail=self.head),self.length++}function vega_embed_module_Node(value,prev,next,list){if(!(this instanceof vega_embed_module_Node))return new vega_embed_module_Node(value,prev,next,list);this.list=list,this.value=value,prev?(prev.next=this,this.prev=prev):this.prev=null,next?(next.prev=this,this.next=next):this.next=null}Yallist$1.Node=vega_embed_module_Node,Yallist$1.create=Yallist$1,Yallist$1.prototype.removeNode=function(node){if(node.list!==this)throw new Error("removing node which does not belong to this list");var next=node.next,prev=node.prev;return next&&(next.prev=prev),prev&&(prev.next=next),node===this.head&&(this.head=next),node===this.tail&&(this.tail=prev),node.list.length--,node.next=null,node.prev=null,node.list=null,next},Yallist$1.prototype.unshiftNode=function(node){if(node!==this.head){node.list&&node.list.removeNode(node);var head=this.head;node.list=this,node.next=head,head&&(head.prev=node),this.head=node,this.tail||(this.tail=node),this.length++}},Yallist$1.prototype.pushNode=function(node){if(node!==this.tail){node.list&&node.list.removeNode(node);var tail=this.tail;node.list=this,node.prev=tail,tail&&(tail.next=node),this.tail=node,this.head||(this.head=node),this.length++}},Yallist$1.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++)push(this,arguments[i]);return this.length},Yallist$1.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++)unshift(this,arguments[i]);return this.length},Yallist$1.prototype.pop=function(){if(this.tail){var res=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,res}},Yallist$1.prototype.shift=function(){if(this.head){var res=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,res}},Yallist$1.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;null!==walker;i++)fn.call(thisp,walker.value,i,this),walker=walker.next},Yallist$1.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;null!==walker;i--)fn.call(thisp,walker.value,i,this),walker=walker.prev},Yallist$1.prototype.get=function(n){for(var i=0,walker=this.head;null!==walker&&i<n;i++)walker=walker.next;if(i===n&&null!==walker)return walker.value},Yallist$1.prototype.getReverse=function(n){for(var i=0,walker=this.tail;null!==walker&&i<n;i++)walker=walker.prev;if(i===n&&null!==walker)return walker.value},Yallist$1.prototype.map=function(fn,thisp){thisp=thisp||this;for(var res=new Yallist$1,walker=this.head;null!==walker;)res.push(fn.call(thisp,walker.value,this)),walker=walker.next;return res},Yallist$1.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;for(var res=new Yallist$1,walker=this.tail;null!==walker;)res.push(fn.call(thisp,walker.value,this)),walker=walker.prev;return res},Yallist$1.prototype.reduce=function(fn,initial){var acc,walker=this.head;if(arguments.length>1)acc=initial;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");walker=this.head.next,acc=this.head.value}for(var i=0;null!==walker;i++)acc=fn(acc,walker.value,i),walker=walker.next;return acc},Yallist$1.prototype.reduceReverse=function(fn,initial){var acc,walker=this.tail;if(arguments.length>1)acc=initial;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");walker=this.tail.prev,acc=this.tail.value}for(var i=this.length-1;null!==walker;i--)acc=fn(acc,walker.value,i),walker=walker.prev;return acc},Yallist$1.prototype.toArray=function(){for(var arr=new Array(this.length),i=0,walker=this.head;null!==walker;i++)arr[i]=walker.value,walker=walker.next;return arr},Yallist$1.prototype.toArrayReverse=function(){for(var arr=new Array(this.length),i=0,walker=this.tail;null!==walker;i++)arr[i]=walker.value,walker=walker.prev;return arr},Yallist$1.prototype.slice=function(from,to){(to=to||this.length)<0&&(to+=this.length),(from=from||0)<0&&(from+=this.length);var ret=new Yallist$1;if(to<from||to<0)return ret;from<0&&(from=0),to>this.length&&(to=this.length);for(var i=0,walker=this.head;null!==walker&&i<from;i++)walker=walker.next;for(;null!==walker&&i<to;i++,walker=walker.next)ret.push(walker.value);return ret},Yallist$1.prototype.sliceReverse=function(from,to){(to=to||this.length)<0&&(to+=this.length),(from=from||0)<0&&(from+=this.length);var ret=new Yallist$1;if(to<from||to<0)return ret;from<0&&(from=0),to>this.length&&(to=this.length);for(var i=this.length,walker=this.tail;null!==walker&&i>to;i--)walker=walker.prev;for(;null!==walker&&i>from;i--,walker=walker.prev)ret.push(walker.value);return ret},Yallist$1.prototype.splice=function(start,deleteCount){start>this.length&&(start=this.length-1),start<0&&(start=this.length+start);for(var i=0,walker=this.head;null!==walker&&i<start;i++)walker=walker.next;var ret=[];for(i=0;walker&&i<deleteCount;i++)ret.push(walker.value),walker=this.removeNode(walker);null===walker&&(walker=this.tail),walker!==this.head&&walker!==this.tail&&(walker=walker.prev);for(i=0;i<(arguments.length<=2?0:arguments.length-2);i++)walker=vega_embed_module_insert(this,walker,i+2<2||arguments.length<=i+2?void 0:arguments[i+2]);return ret},Yallist$1.prototype.reverse=function(){for(var head=this.head,tail=this.tail,walker=head;null!==walker;walker=walker.prev){var p=walker.prev;walker.prev=walker.next,walker.next=p}return this.head=tail,this.tail=head,this};try{Yallist$1.prototype[Symbol.iterator]=_regeneratorRuntime.mark((function _callee(){var walker;return _regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:walker=this.head;case 1:if(!walker){_context.next=7;break}return _context.next=4,walker.value;case 4:walker=walker.next,_context.next=1;break;case 7:case"end":return _context.stop()}}),_callee,this)}))}catch(er){}var Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),vega_embed_module_CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;var vega_embed_module_get=(self,key,doUse)=>{var node=self[vega_embed_module_CACHE].get(key);if(node){var hit=node.value;if(isStale(self,hit)){if(del(self,node),!self[ALLOW_STALE])return}else doUse&&(self[UPDATE_AGE_ON_GET]&&(node.value.now=Date.now()),self[LRU_LIST].unshiftNode(node));return hit.value}},isStale=(self,hit)=>{if(!hit||!hit.maxAge&&!self[MAX_AGE])return!1;var diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self[MAX_AGE]&&diff>self[MAX_AGE]},trim=self=>{if(self[LENGTH]>self[MAX])for(var walker=self[LRU_LIST].tail;self[LENGTH]>self[MAX]&&null!==walker;){var prev=walker.prev;del(self,walker),walker=prev}},del=(self,node)=>{if(node){var hit=node.value;self[DISPOSE]&&self[DISPOSE](hit.key,hit.value),self[LENGTH]-=hit.length,self[vega_embed_module_CACHE].delete(hit.key),self[LRU_LIST].removeNode(node)}};class vega_embed_module_Entry{constructor(key,value,length,now,maxAge){this.key=key,this.value=value,this.length=length,this.now=now,this.maxAge=maxAge||0}}var forEachStep=(self,fn,node,thisp)=>{var hit=node.value;isStale(self,hit)&&(del(self,node),self[ALLOW_STALE]||(hit=void 0)),hit&&fn.call(thisp,hit.value,hit.key,self)},vega_embed_module_lruCache=class LRUCache{constructor(options){if("number"==typeof options&&(options={max:options}),options||(options={}),options.max&&("number"!=typeof options.max||options.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=options.max||1/0;var lc=options.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof lc?naiveLength:lc,this[ALLOW_STALE]=options.stale||!1,options.maxAge&&"number"!=typeof options.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0,this[DISPOSE]=options.dispose,this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||!1,this.reset()}set max(mL){if("number"!=typeof mL||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||1/0,trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]=!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if("number"!=typeof mA)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){"function"!=typeof lC&&(lC=naiveLength),lC!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=lC,this[LENGTH]=0,this[LRU_LIST].forEach((hit=>{hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key),this[LENGTH]+=hit.length}))),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp=thisp||this;for(var walker=this[LRU_LIST].tail;null!==walker;){var prev=walker.prev;forEachStep(this,fn,walker,thisp),walker=prev}}forEach(fn,thisp){thisp=thisp||this;for(var walker=this[LRU_LIST].head;null!==walker;){var next=walker.next;forEachStep(this,fn,walker,thisp),walker=next}}keys(){return this[LRU_LIST].toArray().map((k=>k.key))}values(){return this[LRU_LIST].toArray().map((k=>k.value))}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach((hit=>this[DISPOSE](hit.key,hit.value))),this[vega_embed_module_CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map((hit=>!isStale(this,hit)&&{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)})).toArray().filter((h=>h))}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){if((maxAge=maxAge||this[MAX_AGE])&&"number"!=typeof maxAge)throw new TypeError("maxAge must be a number");var now=maxAge?Date.now():0,len=this[LENGTH_CALCULATOR](value,key);if(this[vega_embed_module_CACHE].has(key)){if(len>this[MAX])return del(this,this[vega_embed_module_CACHE].get(key)),!1;var item=this[vega_embed_module_CACHE].get(key).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](key,item.value)),item.now=now,item.maxAge=maxAge,item.value=value,this[LENGTH]+=len-item.length,item.length=len,this.get(key),trim(this),!0}var hit=new vega_embed_module_Entry(key,value,len,now,maxAge);return hit.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](key,value),!1):(this[LENGTH]+=hit.length,this[LRU_LIST].unshift(hit),this[vega_embed_module_CACHE].set(key,this[LRU_LIST].head),trim(this),!0)}has(key){if(!this[vega_embed_module_CACHE].has(key))return!1;var hit=this[vega_embed_module_CACHE].get(key).value;return!isStale(this,hit)}get(key){return vega_embed_module_get(this,key,!0)}peek(key){return vega_embed_module_get(this,key,!1)}pop(){var node=this[LRU_LIST].tail;return node?(del(this,node),node.value):null}del(key){del(this,this[vega_embed_module_CACHE].get(key))}load(arr){this.reset();for(var now=Date.now(),l=arr.length-1;l>=0;l--){var hit=arr[l],expiresAt=hit.e||0;if(0===expiresAt)this.set(hit.k,hit.v);else{var maxAge=expiresAt-now;maxAge>0&&this.set(hit.k,hit.v,maxAge)}}}prune(){this[vega_embed_module_CACHE].forEach(((value,key)=>vega_embed_module_get(this,key,!1)))}},opts=["includePrerelease","loose","rtl"],parseOptions_1=options=>options?"object"!=typeof options?{loose:!0}:opts.filter((k=>options[k])).reduce(((o,k)=>(o[k]=!0,o)),{}):{},re$1={exports:{}},vega_embed_module_constants={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},debug_1="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return console.error("SEMVER",...args)}:()=>{};!function(module,exports){var MAX_SAFE_COMPONENT_LENGTH=vega_embed_module_constants.MAX_SAFE_COMPONENT_LENGTH,debug=debug_1,re=(exports=module.exports={}).re=[],src=exports.src=[],t=exports.t={},R=0,createToken=(name,value,isGlobal)=>{var index=R++;debug(name,index,value),t[name]=index,src[index]=value,re[index]=new RegExp(value,isGlobal?"g":void 0)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*"),createToken("NUMERICIDENTIFIERLOOSE","[0-9]+"),createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),createToken("MAINVERSION","(".concat(src[t.NUMERICIDENTIFIER],")\\.")+"(".concat(src[t.NUMERICIDENTIFIER],")\\.")+"(".concat(src[t.NUMERICIDENTIFIER],")")),createToken("MAINVERSIONLOOSE","(".concat(src[t.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(src[t.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(src[t.NUMERICIDENTIFIERLOOSE],")")),createToken("PRERELEASEIDENTIFIER","(?:".concat(src[t.NUMERICIDENTIFIER],"|").concat(src[t.NONNUMERICIDENTIFIER],")")),createToken("PRERELEASEIDENTIFIERLOOSE","(?:".concat(src[t.NUMERICIDENTIFIERLOOSE],"|").concat(src[t.NONNUMERICIDENTIFIER],")")),createToken("PRERELEASE","(?:-(".concat(src[t.PRERELEASEIDENTIFIER],"(?:\\.").concat(src[t.PRERELEASEIDENTIFIER],")*))")),createToken("PRERELEASELOOSE","(?:-?(".concat(src[t.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(src[t.PRERELEASEIDENTIFIERLOOSE],")*))")),createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+"),createToken("BUILD","(?:\\+(".concat(src[t.BUILDIDENTIFIER],"(?:\\.").concat(src[t.BUILDIDENTIFIER],")*))")),createToken("FULLPLAIN","v?".concat(src[t.MAINVERSION]).concat(src[t.PRERELEASE],"?").concat(src[t.BUILD],"?")),createToken("FULL","^".concat(src[t.FULLPLAIN],"$")),createToken("LOOSEPLAIN","[v=\\s]*".concat(src[t.MAINVERSIONLOOSE]).concat(src[t.PRERELEASELOOSE],"?").concat(src[t.BUILD],"?")),createToken("LOOSE","^".concat(src[t.LOOSEPLAIN],"$")),createToken("GTLT","((?:<|>)?=?)"),createToken("XRANGEIDENTIFIERLOOSE","".concat(src[t.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),createToken("XRANGEIDENTIFIER","".concat(src[t.NUMERICIDENTIFIER],"|x|X|\\*")),createToken("XRANGEPLAIN","[v=\\s]*(".concat(src[t.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(src[t.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(src[t.XRANGEIDENTIFIER],")")+"(?:".concat(src[t.PRERELEASE],")?").concat(src[t.BUILD],"?")+")?)?"),createToken("XRANGEPLAINLOOSE","[v=\\s]*(".concat(src[t.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(src[t.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(src[t.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(src[t.PRERELEASELOOSE],")?").concat(src[t.BUILD],"?")+")?)?"),createToken("XRANGE","^".concat(src[t.GTLT],"\\s*").concat(src[t.XRANGEPLAIN],"$")),createToken("XRANGELOOSE","^".concat(src[t.GTLT],"\\s*").concat(src[t.XRANGEPLAINLOOSE],"$")),createToken("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(MAX_SAFE_COMPONENT_LENGTH,"})")+"(?:\\.(\\d{1,".concat(MAX_SAFE_COMPONENT_LENGTH,"}))?")+"(?:\\.(\\d{1,".concat(MAX_SAFE_COMPONENT_LENGTH,"}))?")+"(?:$|[^\\d])"),createToken("COERCERTL",src[t.COERCE],!0),createToken("LONETILDE","(?:~>?)"),createToken("TILDETRIM","(\\s*)".concat(src[t.LONETILDE],"\\s+"),!0),exports.tildeTrimReplace="$1~",createToken("TILDE","^".concat(src[t.LONETILDE]).concat(src[t.XRANGEPLAIN],"$")),createToken("TILDELOOSE","^".concat(src[t.LONETILDE]).concat(src[t.XRANGEPLAINLOOSE],"$")),createToken("LONECARET","(?:\\^)"),createToken("CARETTRIM","(\\s*)".concat(src[t.LONECARET],"\\s+"),!0),exports.caretTrimReplace="$1^",createToken("CARET","^".concat(src[t.LONECARET]).concat(src[t.XRANGEPLAIN],"$")),createToken("CARETLOOSE","^".concat(src[t.LONECARET]).concat(src[t.XRANGEPLAINLOOSE],"$")),createToken("COMPARATORLOOSE","^".concat(src[t.GTLT],"\\s*(").concat(src[t.LOOSEPLAIN],")$|^$")),createToken("COMPARATOR","^".concat(src[t.GTLT],"\\s*(").concat(src[t.FULLPLAIN],")$|^$")),createToken("COMPARATORTRIM","(\\s*)".concat(src[t.GTLT],"\\s*(").concat(src[t.LOOSEPLAIN],"|").concat(src[t.XRANGEPLAIN],")"),!0),exports.comparatorTrimReplace="$1$2$3",createToken("HYPHENRANGE","^\\s*(".concat(src[t.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(src[t.XRANGEPLAIN],")")+"\\s*$"),createToken("HYPHENRANGELOOSE","^\\s*(".concat(src[t.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(src[t.XRANGEPLAINLOOSE],")")+"\\s*$"),createToken("STAR","(<|>)?=?\\s*\\*"),createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re$1,re$1.exports);var numeric=/^[0-9]+$/,compareIdentifiers$1=(a,b)=>{var anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1},identifiers_compareIdentifiers=compareIdentifiers$1,vega_embed_module_debug=debug_1,MAX_LENGTH=vega_embed_module_constants.MAX_LENGTH,MAX_SAFE_INTEGER=vega_embed_module_constants.MAX_SAFE_INTEGER,vega_embed_module_re=re$1.exports.re,t=re$1.exports.t,parseOptions=parseOptions_1,compareIdentifiers=identifiers_compareIdentifiers;class SemVer$1{constructor(version,options){if(options=parseOptions(options),version instanceof SemVer$1){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: ".concat(version));if(version.length>MAX_LENGTH)throw new TypeError("version is longer than ".concat(MAX_LENGTH," characters"));vega_embed_module_debug("SemVer",version,options),this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease;var m=version.trim().match(options.loose?vega_embed_module_re[t.LOOSE]:vega_embed_module_re[t.FULL]);if(!m)throw new TypeError("Invalid Version: ".concat(version));if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map((id=>{if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id})):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(other){if(vega_embed_module_debug("SemVer.compare",this.version,this.options,other),!(other instanceof SemVer$1)){if("string"==typeof other&&other===this.version)return 0;other=new SemVer$1(other,this.options)}return other.version===this.version?0:this.compareMain(other)||this.comparePre(other)}compareMain(other){return other instanceof SemVer$1||(other=new SemVer$1(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(other instanceof SemVer$1||(other=new SemVer$1(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;var i=0;do{var a=this.prerelease[i],b=other.prerelease[i];if(vega_embed_module_debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}compareBuild(other){other instanceof SemVer$1||(other=new SemVer$1(other,this.options));var i=0;do{var a=this.build[i],b=other.build[i];if(vega_embed_module_debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}inc(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(0===compareIdentifiers(this.prerelease[0],identifier)?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: ".concat(release))}return this.format(),this.raw=this.version,this}}var vega_embed_module_comparator,hasRequiredComparator,vega_embed_module_range,hasRequiredRange,semver=SemVer$1,SemVer=semver,compare_1=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose)),compare$5=compare_1,eq_1=(a,b,loose)=>0===compare$5(a,b,loose),compare$4=compare_1,neq_1=(a,b,loose)=>0!==compare$4(a,b,loose),compare$3=compare_1,gt_1=(a,b,loose)=>compare$3(a,b,loose)>0,compare$2=compare_1,gte_1=(a,b,loose)=>compare$2(a,b,loose)>=0,compare$1=compare_1,lt_1=(a,b,loose)=>compare$1(a,b,loose)<0,vega_embed_module_compare=compare_1,lte_1=(a,b,loose)=>vega_embed_module_compare(a,b,loose)<=0,eq=eq_1,neq=neq_1,gt=gt_1,gte=gte_1,lt=lt_1,lte=lte_1,cmp_1=(a,op,b,loose)=>{switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: ".concat(op))}};function _createForOfIteratorHelper$1(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray$1(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray$1(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray$1(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function requireRange(){if(hasRequiredRange)return vega_embed_module_range;hasRequiredRange=1;class Range{constructor(range,options){if(options=parseOptions(options),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return this.raw=range.value,this.set=[[range]],this.format(),this;if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range,this.set=range.split("||").map((r=>this.parseRange(r.trim()))).filter((c=>c.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(range));if(this.set.length>1){var first=this.set[0];if(this.set=this.set.filter((c=>!isNullSet(c[0]))),0===this.set.length)this.set=[first];else if(this.set.length>1){var _step,_iterator=_createForOfIteratorHelper$1(this.set);try{for(_iterator.s();!(_step=_iterator.n()).done;){var c=_step.value;if(1===c.length&&isAny(c[0])){this.set=[c];break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}this.format()}format(){return this.range=this.set.map((comps=>comps.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(range){range=range.trim();var memoOpts=Object.keys(this.options).join(","),memoKey="parseRange:".concat(memoOpts,":").concat(range),cached=cache.get(memoKey);if(cached)return cached;var loose=this.options.loose,hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease)),debug("hyphen replace",range),range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace),debug("comparator trim",range);var rangeList=(range=(range=(range=range.replace(re[t.TILDETRIM],tildeTrimReplace)).replace(re[t.CARETTRIM],caretTrimReplace)).split(/\s+/).join(" ")).split(" ").map((comp=>parseComparator(comp,this.options))).join(" ").split(/\s+/).map((comp=>replaceGTE0(comp,this.options)));loose&&(rangeList=rangeList.filter((comp=>(debug("loose invalid filter",comp,this.options),!!comp.match(re[t.COMPARATORLOOSE]))))),debug("range list",rangeList);var _step2,rangeMap=new Map,comparators=rangeList.map((comp=>new Comparator(comp,this.options))),_iterator2=_createForOfIteratorHelper$1(comparators);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var comp=_step2.value;if(isNullSet(comp))return[comp];rangeMap.set(comp.value,comp)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}rangeMap.size>1&&rangeMap.has("")&&rangeMap.delete("");var result=[...rangeMap.values()];return cache.set(memoKey,result),result}intersects(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some((thisComparators=>isSatisfiable(thisComparators,options)&&range.set.some((rangeComparators=>isSatisfiable(rangeComparators,options)&&thisComparators.every((thisComparator=>rangeComparators.every((rangeComparator=>thisComparator.intersects(rangeComparator,options)))))))))}test(version){if(!version)return!1;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}for(var i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1}}vega_embed_module_range=Range;var cache=new vega_embed_module_lruCache({max:1e3}),parseOptions=parseOptions_1,Comparator=function requireComparator(){if(hasRequiredComparator)return vega_embed_module_comparator;hasRequiredComparator=1;var ANY=Symbol("SemVer ANY");class Comparator{static get ANY(){return ANY}constructor(comp,options){if(options=parseOptions(options),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}parse(comp){var r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],m=comp.match(r);if(!m)throw new TypeError("Invalid comparator: ".concat(comp));this.operator=void 0!==m[1]?m[1]:"","="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(version){if(debug("Comparator.test",version,this.options.loose),this.semver===ANY||version===ANY)return!0;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}return cmp(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),""===this.operator)return""===this.value||new Range(comp.value,options).test(this.value);if(""===comp.operator)return""===comp.value||new Range(this.value,options).test(comp.semver);var sameDirectionIncreasing=!(">="!==this.operator&&">"!==this.operator||">="!==comp.operator&&">"!==comp.operator),sameDirectionDecreasing=!("<="!==this.operator&&"<"!==this.operator||"<="!==comp.operator&&"<"!==comp.operator),sameSemVer=this.semver.version===comp.semver.version,differentDirectionsInclusive=!(">="!==this.operator&&"<="!==this.operator||">="!==comp.operator&&"<="!==comp.operator),oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(">="===this.operator||">"===this.operator)&&("<="===comp.operator||"<"===comp.operator),oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&("<="===this.operator||"<"===this.operator)&&(">="===comp.operator||">"===comp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan}}vega_embed_module_comparator=Comparator;var parseOptions=parseOptions_1,re=re$1.exports.re,t=re$1.exports.t,cmp=cmp_1,debug=debug_1,SemVer=semver,Range=requireRange();return vega_embed_module_comparator}(),debug=debug_1,SemVer=semver,re=re$1.exports.re,t=re$1.exports.t,comparatorTrimReplace=re$1.exports.comparatorTrimReplace,tildeTrimReplace=re$1.exports.tildeTrimReplace,caretTrimReplace=re$1.exports.caretTrimReplace,isNullSet=c=>"<0.0.0-0"===c.value,isAny=c=>""===c.value,isSatisfiable=(comparators,options)=>{for(var result=!0,remainingComparators=comparators.slice(),testComparator=remainingComparators.pop();result&&remainingComparators.length;)result=remainingComparators.every((otherComparator=>testComparator.intersects(otherComparator,options))),testComparator=remainingComparators.pop();return result},parseComparator=(comp,options)=>(debug("comp",comp,options),comp=replaceCarets(comp,options),debug("caret",comp),comp=replaceTildes(comp,options),debug("tildes",comp),comp=replaceXRanges(comp,options),debug("xrange",comp),comp=replaceStars(comp,options),debug("stars",comp),comp),isX=id=>!id||"x"===id.toLowerCase()||"*"===id,replaceTildes=(comp,options)=>comp.trim().split(/\s+/).map((c=>replaceTilde(c,options))).join(" "),replaceTilde=(comp,options)=>{var r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,((_,M,m,p,pr)=>{var ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">=".concat(M,".0.0 <").concat(+M+1,".0.0-0"):isX(p)?ret=">=".concat(M,".").concat(m,".0 <").concat(M,".").concat(+m+1,".0-0"):pr?(debug("replaceTilde pr",pr),ret=">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(M,".").concat(+m+1,".0-0")):ret=">=".concat(M,".").concat(m,".").concat(p," <").concat(M,".").concat(+m+1,".0-0"),debug("tilde return",ret),ret}))},replaceCarets=(comp,options)=>comp.trim().split(/\s+/).map((c=>replaceCaret(c,options))).join(" "),replaceCaret=(comp,options)=>{debug("caret",comp,options);var r=options.loose?re[t.CARETLOOSE]:re[t.CARET],z=options.includePrerelease?"-0":"";return comp.replace(r,((_,M,m,p,pr)=>{var ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">=".concat(M,".0.0").concat(z," <").concat(+M+1,".0.0-0"):isX(p)?ret="0"===M?">=".concat(M,".").concat(m,".0").concat(z," <").concat(M,".").concat(+m+1,".0-0"):">=".concat(M,".").concat(m,".0").concat(z," <").concat(+M+1,".0.0-0"):pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(M,".").concat(m,".").concat(+p+1,"-0"):">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(M,".").concat(+m+1,".0-0"):">=".concat(M,".").concat(m,".").concat(p,"-").concat(pr," <").concat(+M+1,".0.0-0")):(debug("no pr"),ret="0"===M?"0"===m?">=".concat(M,".").concat(m,".").concat(p).concat(z," <").concat(M,".").concat(m,".").concat(+p+1,"-0"):">=".concat(M,".").concat(m,".").concat(p).concat(z," <").concat(M,".").concat(+m+1,".0-0"):">=".concat(M,".").concat(m,".").concat(p," <").concat(+M+1,".0.0-0")),debug("caret return",ret),ret}))},replaceXRanges=(comp,options)=>(debug("replaceXRanges",comp,options),comp.split(/\s+/).map((c=>replaceXRange(c,options))).join(" ")),replaceXRange=(comp,options)=>{comp=comp.trim();var r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,((ret,gtlt,M,m,p,pr)=>{debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M),xm=xM||isX(m),xp=xm||isX(p),anyX=xp;return"="===gtlt&&anyX&&(gtlt=""),pr=options.includePrerelease?"-0":"",xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0-0":"*":gtlt&&anyX?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),"<"===gtlt&&(pr="-0"),ret="".concat(gtlt+M,".").concat(m,".").concat(p).concat(pr)):xm?ret=">=".concat(M,".0.0").concat(pr," <").concat(+M+1,".0.0-0"):xp&&(ret=">=".concat(M,".").concat(m,".0").concat(pr," <").concat(M,".").concat(+m+1,".0-0")),debug("xRange return",ret),ret}))},replaceStars=(comp,options)=>(debug("replaceStars",comp,options),comp.trim().replace(re[t.STAR],"")),replaceGTE0=(comp,options)=>(debug("replaceGTE0",comp,options),comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"")),hyphenReplace=incPr=>($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb)=>(from=isX(fM)?"":isX(fm)?">=".concat(fM,".0.0").concat(incPr?"-0":""):isX(fp)?">=".concat(fM,".").concat(fm,".0").concat(incPr?"-0":""):fpr?">=".concat(from):">=".concat(from).concat(incPr?"-0":""),to=isX(tM)?"":isX(tm)?"<".concat(+tM+1,".0.0-0"):isX(tp)?"<".concat(tM,".").concat(+tm+1,".0-0"):tpr?"<=".concat(tM,".").concat(tm,".").concat(tp,"-").concat(tpr):incPr?"<".concat(tM,".").concat(tm,".").concat(+tp+1,"-0"):"<=".concat(to),"".concat(from," ").concat(to).trim()),testSet=(set,version,options)=>{for(var i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(var _i=0;_i<set.length;_i++)if(debug(set[_i].semver),set[_i].semver!==Comparator.ANY&&set[_i].semver.prerelease.length>0){var allowed=set[_i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0};return vega_embed_module_range}var Range=requireRange(),satisfies_1=(version,range,options)=>{try{range=new Range(range,options)}catch(er){return!1}return range.test(version)};function post(window,url,data){var editor=window.open(url),origin=new URL(url).origin,count=40;window.addEventListener("message",(function listen(evt){evt.source===editor&&(count=0,window.removeEventListener("message",listen,!1))}),!1),setTimeout((function send(){count<=0||(editor.postMessage(data,origin),setTimeout(send,250),count-=1)}),250)}var embedStyle='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function vega_embed_module_mergeDeep(dest){for(var _len=arguments.length,src=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)src[_key-1]=arguments[_key];for(var _i=0,_src=src;_i<_src.length;_i++){var s=_src[_i];vega_embed_module_deepMerge_(dest,s)}return dest}function vega_embed_module_deepMerge_(dest,src){for(var _i2=0,_Object$keys=Object.keys(src);_i2<_Object$keys.length;_i2++){var property=_Object$keys[_i2];writeConfig(dest,property,src[property],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(search,pos){return this.substr(!pos||pos<0?0:+pos,search.length)===search});var _w$vl;function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var vega=vega_module_namespaceObject,_vegaLite=build_src_namespaceObject,vega_embed_module_w="undefined"!=typeof window?window:void 0;void 0===_vegaLite&&null!=vega_embed_module_w&&null!==(_w$vl=vega_embed_module_w.vl)&&void 0!==_w$vl&&_w$vl.compile&&(_vegaLite=vega_embed_module_w.vl);var DEFAULT_ACTIONS={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},I18N={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},NAMES={vega:"Vega","vega-lite":"Vega-Lite"},VERSION={vega:vega.version,"vega-lite":_vegaLite?_vegaLite.version:"not available"},PREPROCESSOR={vega:vgSpec=>vgSpec,"vega-lite":(vlSpec,config)=>_vegaLite.compile(vlSpec,{config}).spec},SVG_CIRCLES='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function isTooltipHandler(h){return"function"==typeof h}function viewSource(source,sourceHeader,sourceFooter,mode){var header="<html><head>".concat(sourceHeader,'</head><body><pre><code class="json">'),footer="</code></pre>".concat(sourceFooter,"</body></html>"),win=window.open("");win.document.write(header+source+footer),win.document.title="".concat(NAMES[mode]," JSON Source")}function guessMode(spec,providedMode){if(spec.$schema){var _NAMES$providedMode,parsed=parser_module(spec.$schema);if(providedMode&&providedMode!==parsed.library)console.warn("The given visualization spec is written in ".concat(NAMES[parsed.library],", but mode argument sets ").concat(null!==(_NAMES$providedMode=NAMES[providedMode])&&void 0!==_NAMES$providedMode?_NAMES$providedMode:providedMode,"."));var mode=parsed.library;return satisfies_1(VERSION[mode],"^".concat(parsed.version.slice(1)))||console.warn("The input spec uses ".concat(NAMES[mode]," ").concat(parsed.version,", but the current version of ").concat(NAMES[mode]," is v").concat(VERSION[mode],".")),mode}return"mark"in spec||"encoding"in spec||"layer"in spec||"hconcat"in spec||"vconcat"in spec||"facet"in spec||"repeat"in spec?"vega-lite":"marks"in spec||"signals"in spec||"scales"in spec||"axes"in spec?"vega":null!=providedMode?providedMode:"vega"}function createLoader(opts){return function isLoader(o){return!(!o||!("load"in o))}(opts)?opts:vega.loader(opts)}function embedOptionsFromUsermeta(parsedSpec){var _embedOptions,_parsedSpec$usermeta,opts=null!==(_embedOptions=null===(_parsedSpec$usermeta=parsedSpec.usermeta)||void 0===_parsedSpec$usermeta?void 0:_parsedSpec$usermeta.embedOptions)&&void 0!==_embedOptions?_embedOptions:{};return isString(opts.defaultStyle)&&(opts.defaultStyle=!1),opts}function vega_embed_module_embed(_x,_x2){return _embed2.apply(this,arguments)}function _embed2(){return _embed2=_asyncToGenerator(_regeneratorRuntime.mark((function _callee(el,spec){var _parsedOpts$config,_usermetaOpts$config,opts,parsedSpec,loader,loadedEmbedOptions,usermetaLoader,_opts$loader,usermetaOpts,parsedOpts,mergedOpts,_args=arguments;return _regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(opts=_args.length>2&&void 0!==_args[2]?_args[2]:{},!isString(spec)){_context.next=10;break}return loader=createLoader(opts.loader),_context.t0=JSON,_context.next=6,loader.load(spec);case 6:_context.t1=_context.sent,parsedSpec=_context.t0.parse.call(_context.t0,_context.t1),_context.next=11;break;case 10:parsedSpec=spec;case 11:return loadedEmbedOptions=embedOptionsFromUsermeta(parsedSpec),usermetaLoader=loadedEmbedOptions.loader,loader&&!usermetaLoader||(loader=createLoader(null!==(_opts$loader=opts.loader)&&void 0!==_opts$loader?_opts$loader:usermetaLoader)),_context.next=16,loadOpts(loadedEmbedOptions,loader);case 16:return usermetaOpts=_context.sent,_context.next=19,loadOpts(opts,loader);case 19:return parsedOpts=_context.sent,mergedOpts=_objectSpread(_objectSpread({},vega_embed_module_mergeDeep(parsedOpts,usermetaOpts)),{},{config:mergeConfig(null!==(_parsedOpts$config=parsedOpts.config)&&void 0!==_parsedOpts$config?_parsedOpts$config:{},null!==(_usermetaOpts$config=usermetaOpts.config)&&void 0!==_usermetaOpts$config?_usermetaOpts$config:{})}),_context.next=23,_embed(el,parsedSpec,mergedOpts,loader);case 23:return _context.abrupt("return",_context.sent);case 24:case"end":return _context.stop()}}),_callee)}))),_embed2.apply(this,arguments)}function loadOpts(_x3,_x4){return _loadOpts.apply(this,arguments)}function _loadOpts(){return _loadOpts=_asyncToGenerator(_regeneratorRuntime.mark((function _callee2(opt,loader){var _opt$config,config,patch;return _regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!isString(opt.config)){_context2.next=8;break}return _context2.t1=JSON,_context2.next=4,loader.load(opt.config);case 4:_context2.t2=_context2.sent,_context2.t0=_context2.t1.parse.call(_context2.t1,_context2.t2),_context2.next=9;break;case 8:_context2.t0=null!==(_opt$config=opt.config)&&void 0!==_opt$config?_opt$config:{};case 9:if(config=_context2.t0,!isString(opt.patch)){_context2.next=18;break}return _context2.t4=JSON,_context2.next=14,loader.load(opt.patch);case 14:_context2.t5=_context2.sent,_context2.t3=_context2.t4.parse.call(_context2.t4,_context2.t5),_context2.next=19;break;case 18:_context2.t3=opt.patch;case 19:return patch=_context2.t3,_context2.abrupt("return",_objectSpread(_objectSpread(_objectSpread({},opt),patch?{patch}:{}),config?{config}:{}));case 21:case"end":return _context2.stop()}}),_callee2)}))),_loadOpts.apply(this,arguments)}function getRoot(el){var _document$head,possibleRoot=el.getRootNode?el.getRootNode():document;return possibleRoot instanceof ShadowRoot?{root:possibleRoot,rootContainer:possibleRoot}:{root:document,rootContainer:null!==(_document$head=document.head)&&void 0!==_document$head?_document$head:document.body}}function _embed(_x5,_x6){return _embed3.apply(this,arguments)}function _embed3(){return _embed3=_asyncToGenerator(_regeneratorRuntime.mark((function _callee4(el,spec){var _opts$config,_opts$actions,_opts$renderer,_opts$logLevel,_opts$downloadFileNam,_ref,_expressionInterprete,opts,loader,config,actions,i18n,renderer,logLevel,downloadFileName,element,ID,_getRoot,root,rootContainer,style,mode,vgSpec,parsed,container,chartWrapper,patch,name,expressionFunction,ast,runtime,view,handler,hover,_ref2,hoverSet,updateSet,documentClickHandler,wrapper,details,summary,ctrl,_iterator,_step,_loop,viewSourceLink,compileLink,_opts$editorUrl,editorUrl,editorLink,finalize,_args4=arguments;return _regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(finalize=function _finalize(){documentClickHandler&&document.removeEventListener("click",documentClickHandler),view.finalize()},opts=_args4.length>2&&void 0!==_args4[2]?_args4[2]:{},loader=_args4.length>3?_args4[3]:void 0,config=opts.theme?mergeConfig(vega_themes_module_namespaceObject[opts.theme],null!==(_opts$config=opts.config)&&void 0!==_opts$config?_opts$config:{}):opts.config,actions=isBoolean(opts.actions)?opts.actions:vega_embed_module_mergeDeep({},DEFAULT_ACTIONS,null!==(_opts$actions=opts.actions)&&void 0!==_opts$actions?_opts$actions:{}),i18n=_objectSpread(_objectSpread({},I18N),opts.i18n),renderer=null!==(_opts$renderer=opts.renderer)&&void 0!==_opts$renderer?_opts$renderer:"canvas",logLevel=null!==(_opts$logLevel=opts.logLevel)&&void 0!==_opts$logLevel?_opts$logLevel:vega.Warn,downloadFileName=null!==(_opts$downloadFileNam=opts.downloadFileName)&&void 0!==_opts$downloadFileNam?_opts$downloadFileNam:"visualization",element="string"==typeof el?document.querySelector(el):el){_context4.next=12;break}throw new Error("".concat(el," does not exist"));case 12:if(!1!==opts.defaultStyle&&(ID="vega-embed-style",_getRoot=getRoot(element),root=_getRoot.root,rootContainer=_getRoot.rootContainer,root.getElementById(ID)||((style=document.createElement("style")).id=ID,style.innerHTML=void 0===opts.defaultStyle||!0===opts.defaultStyle?embedStyle.toString():opts.defaultStyle,rootContainer.appendChild(style))),mode=guessMode(spec,opts.mode),vgSpec=PREPROCESSOR[mode](spec,config),"vega-lite"===mode&&vgSpec.$schema&&(parsed=parser_module(vgSpec.$schema),satisfies_1(VERSION.vega,"^".concat(parsed.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(parsed.version,", but current version is v").concat(VERSION.vega,"."))),element.classList.add("vega-embed"),actions&&element.classList.add("has-actions"),element.innerHTML="",container=element,actions&&((chartWrapper=document.createElement("div")).classList.add("chart-wrapper"),element.appendChild(chartWrapper),container=chartWrapper),(patch=opts.patch)&&(vgSpec=patch instanceof Function?patch(vgSpec):applyPatch(vgSpec,patch,!0,!1).newDocument),opts.formatLocale&&vega.formatLocale(opts.formatLocale),opts.timeFormatLocale&&vega.timeFormatLocale(opts.timeFormatLocale),opts.expressionFunctions)for(name in opts.expressionFunctions)"fn"in(expressionFunction=opts.expressionFunctions[name])?vega.expressionFunction(name,expressionFunction.fn,expressionFunction.visitor):expressionFunction instanceof Function&&vega.expressionFunction(name,expressionFunction);return ast=opts.ast,runtime=vega.parse(vgSpec,"vega-lite"===mode?{}:config,{ast}),(view=new(opts.viewClass||vega.View)(runtime,_objectSpread({loader,logLevel,renderer},ast?{expr:null!==(_ref=null!==(_expressionInterprete=vega.expressionInterpreter)&&void 0!==_expressionInterprete?_expressionInterprete:opts.expr)&&void 0!==_ref?_ref:vega_interpreter_module_expression}:{}))).addSignalListener("autosize",((_,autosize)=>{var type=autosize.type;"fit-x"==type?(container.classList.add("fit-x"),container.classList.remove("fit-y")):"fit-y"==type?(container.classList.remove("fit-x"),container.classList.add("fit-y")):"fit"==type?container.classList.add("fit-x","fit-y"):container.classList.remove("fit-x","fit-y")})),!1!==opts.tooltip&&(handler=isTooltipHandler(opts.tooltip)?opts.tooltip:new vega_tooltip_module_Handler(!0===opts.tooltip?{}:opts.tooltip).call,view.tooltip(handler)),void 0===(hover=opts.hover)&&(hover="vega"===mode),hover&&(hoverSet=(_ref2="boolean"==typeof hover?{}:hover).hoverSet,updateSet=_ref2.updateSet,view.hover(hoverSet,updateSet)),opts&&(null!=opts.width&&view.width(opts.width),null!=opts.height&&view.height(opts.height),null!=opts.padding&&view.padding(opts.padding)),_context4.next=37,view.initialize(container,opts.bind).runAsync();case 37:if(!1!==actions){if(wrapper=element,!1!==opts.defaultStyle&&((details=document.createElement("details")).title=i18n.CLICK_TO_VIEW_ACTIONS,element.append(details),wrapper=details,(summary=document.createElement("summary")).innerHTML=SVG_CIRCLES,details.append(summary),documentClickHandler=ev=>{details.contains(ev.target)||details.removeAttribute("open")},document.addEventListener("click",documentClickHandler)),ctrl=document.createElement("div"),wrapper.append(ctrl),ctrl.classList.add("vega-actions"),!0===actions||!1!==actions.export){_iterator=_createForOfIteratorHelper(["svg","png"]);try{for(_loop=function _loop(){var ext=_step.value;if(!0===actions||!0===actions.export||actions.export[ext]){var i18nExportAction=i18n["".concat(ext.toUpperCase(),"_ACTION")],exportLink=document.createElement("a");exportLink.text=i18nExportAction,exportLink.href="#",exportLink.target="_blank",exportLink.download="".concat(downloadFileName,".").concat(ext),exportLink.addEventListener("mousedown",function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark((function _callee3(e){var url;return _regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return e.preventDefault(),_context3.next=3,view.toImageURL(ext,opts.scaleFactor);case 3:url=_context3.sent,this.href=url;case 5:case"end":return _context3.stop()}}),_callee3,this)})));return function(_x7){return _ref3.apply(this,arguments)}}()),ctrl.append(exportLink)}},_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}!0!==actions&&!1===actions.source||((viewSourceLink=document.createElement("a")).text=i18n.SOURCE_ACTION,viewSourceLink.href="#",viewSourceLink.addEventListener("click",(function(e){var _opts$sourceHeader,_opts$sourceFooter;viewSource(json_stringify_pretty_compact_default()(spec),null!==(_opts$sourceHeader=opts.sourceHeader)&&void 0!==_opts$sourceHeader?_opts$sourceHeader:"",null!==(_opts$sourceFooter=opts.sourceFooter)&&void 0!==_opts$sourceFooter?_opts$sourceFooter:"",mode),e.preventDefault()})),ctrl.append(viewSourceLink)),"vega-lite"!==mode||!0!==actions&&!1===actions.compiled||((compileLink=document.createElement("a")).text=i18n.COMPILED_ACTION,compileLink.href="#",compileLink.addEventListener("click",(function(e){var _opts$sourceHeader2,_opts$sourceFooter2;viewSource(json_stringify_pretty_compact_default()(vgSpec),null!==(_opts$sourceHeader2=opts.sourceHeader)&&void 0!==_opts$sourceHeader2?_opts$sourceHeader2:"",null!==(_opts$sourceFooter2=opts.sourceFooter)&&void 0!==_opts$sourceFooter2?_opts$sourceFooter2:"","vega"),e.preventDefault()})),ctrl.append(compileLink)),!0!==actions&&!1===actions.editor||(editorUrl=null!==(_opts$editorUrl=opts.editorUrl)&&void 0!==_opts$editorUrl?_opts$editorUrl:"https://vega.github.io/editor/",(editorLink=document.createElement("a")).text=i18n.EDITOR_ACTION,editorLink.href="#",editorLink.addEventListener("click",(function(e){post(window,editorUrl,{config,mode,renderer,spec:json_stringify_pretty_compact_default()(spec)}),e.preventDefault()})),ctrl.append(editorLink))}return _context4.abrupt("return",{view,spec,vgSpec,finalize,embedOptions:opts});case 39:case"end":return _context4.stop()}}),_callee4)}))),_embed3.apply(this,arguments)}},"../../node_modules/es-abstract/2021/AddEntriesFromIterable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var inspect=__webpack_require__("../../node_modules/object-inspect/index.js"),$TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),GetIterator=__webpack_require__("../../node_modules/es-abstract/2021/GetIterator.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),IteratorClose=__webpack_require__("../../node_modules/es-abstract/2021/IteratorClose.js"),IteratorStep=__webpack_require__("../../node_modules/es-abstract/2021/IteratorStep.js"),IteratorValue=__webpack_require__("../../node_modules/es-abstract/2021/IteratorValue.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function AddEntriesFromIterable(target,iterable,adder){if(!IsCallable(adder))throw new $TypeError("Assertion failed: `adder` is not callable");if(null==iterable)throw new $TypeError("Assertion failed: `iterable` is present, and not nullish");for(var iteratorRecord=GetIterator(iterable);;){var next=IteratorStep(iteratorRecord);if(!next)return target;var nextItem=IteratorValue(next);if("Object"!==Type(nextItem)){var error=new $TypeError("iterator next must return an Object, got "+inspect(nextItem));return IteratorClose(iteratorRecord,(function(){throw error}))}try{var k=Get(nextItem,"0"),v=Get(nextItem,"1");Call(adder,target,[k,v])}catch(e){return IteratorClose(iteratorRecord,(function(){throw e}))}}}},"../../node_modules/es-abstract/2021/AdvanceStringIndex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),CodePointAt=__webpack_require__("../../node_modules/es-abstract/2021/CodePointAt.js"),IsIntegralNumber=__webpack_require__("../../node_modules/es-abstract/2021/IsIntegralNumber.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),MAX_SAFE_INTEGER=__webpack_require__("../../node_modules/es-abstract/helpers/maxSafeInteger.js"),$TypeError=GetIntrinsic("%TypeError%");module.exports=function AdvanceStringIndex(S,index,unicode){if("String"!==Type(S))throw new $TypeError("Assertion failed: `S` must be a String");if(!IsIntegralNumber(index)||index<0||index>MAX_SAFE_INTEGER)throw new $TypeError("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if("Boolean"!==Type(unicode))throw new $TypeError("Assertion failed: `unicode` must be a Boolean");return unicode?index+1>=S.length?index+1:index+CodePointAt(S,index)["[[CodeUnitCount]]"]:index+1}},"../../node_modules/es-abstract/2021/ArrayCreate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$ArrayPrototype=GetIntrinsic("%Array.prototype%"),$RangeError=GetIntrinsic("%RangeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),$TypeError=GetIntrinsic("%TypeError%"),IsIntegralNumber=__webpack_require__("../../node_modules/es-abstract/2021/IsIntegralNumber.js"),MAX_ARRAY_LENGTH=Math.pow(2,32)-1,$setProto=GetIntrinsic("%Object.setPrototypeOf%",!0)||([].__proto__!==$ArrayPrototype?null:function(O,proto){return O.__proto__=proto,O});module.exports=function ArrayCreate(length){if(!IsIntegralNumber(length)||length<0)throw new $TypeError("Assertion failed: `length` must be an integer Number >= 0");if(length>MAX_ARRAY_LENGTH)throw new $RangeError("length is greater than (2**32 - 1)");var proto=arguments.length>1?arguments[1]:$ArrayPrototype,A=[];if(proto!==$ArrayPrototype){if(!$setProto)throw new $SyntaxError("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");$setProto(A,proto)}return 0!==length&&(A.length=length),A}},"../../node_modules/es-abstract/2021/ArraySpeciesCreate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$species=GetIntrinsic("%Symbol.species%",!0),$TypeError=GetIntrinsic("%TypeError%"),ArrayCreate=__webpack_require__("../../node_modules/es-abstract/2021/ArrayCreate.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),IsConstructor=__webpack_require__("../../node_modules/es-abstract/2021/IsConstructor.js"),IsIntegralNumber=__webpack_require__("../../node_modules/es-abstract/2021/IsIntegralNumber.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function ArraySpeciesCreate(originalArray,length){if(!IsIntegralNumber(length)||length<0)throw new $TypeError("Assertion failed: length must be an integer >= 0");if(!IsArray(originalArray))return ArrayCreate(length);var C=Get(originalArray,"constructor");if($species&&"Object"===Type(C)&&null===(C=Get(C,$species))&&(C=void 0),void 0===C)return ArrayCreate(length);if(!IsConstructor(C))throw new $TypeError("C must be a constructor");return new C(length)}},"../../node_modules/es-abstract/2021/Call.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),$TypeError=GetIntrinsic("%TypeError%"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),$apply=GetIntrinsic("%Reflect.apply%",!0)||callBound("%Function.prototype.apply%");module.exports=function Call(F,V){var argumentsList=arguments.length>2?arguments[2]:[];if(!IsArray(argumentsList))throw new $TypeError("Assertion failed: optional `argumentsList`, if provided, must be a List");return $apply(F,V,argumentsList)}},"../../node_modules/es-abstract/2021/CodePointAt.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),isLeadingSurrogate=__webpack_require__("../../node_modules/es-abstract/helpers/isLeadingSurrogate.js"),isTrailingSurrogate=__webpack_require__("../../node_modules/es-abstract/helpers/isTrailingSurrogate.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),UTF16SurrogatePairToCodePoint=__webpack_require__("../../node_modules/es-abstract/2021/UTF16SurrogatePairToCodePoint.js"),$charAt=callBound("String.prototype.charAt"),$charCodeAt=callBound("String.prototype.charCodeAt");module.exports=function CodePointAt(string,position){if("String"!==Type(string))throw new $TypeError("Assertion failed: `string` must be a String");var size=string.length;if(position<0||position>=size)throw new $TypeError("Assertion failed: `position` must be >= 0, and < the length of `string`");var first=$charCodeAt(string,position),cp=$charAt(string,position),firstIsLeading=isLeadingSurrogate(first),firstIsTrailing=isTrailingSurrogate(first);if(!firstIsLeading&&!firstIsTrailing)return{"[[CodePoint]]":cp,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(firstIsTrailing||position+1===size)return{"[[CodePoint]]":cp,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var second=$charCodeAt(string,position+1);return isTrailingSurrogate(second)?{"[[CodePoint]]":UTF16SurrogatePairToCodePoint(first,second),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":cp,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}},"../../node_modules/es-abstract/2021/CreateDataProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),DefineOwnProperty=__webpack_require__("../../node_modules/es-abstract/helpers/DefineOwnProperty.js"),FromPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/FromPropertyDescriptor.js"),OrdinaryGetOwnProperty=__webpack_require__("../../node_modules/es-abstract/2021/OrdinaryGetOwnProperty.js"),IsDataDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/IsDataDescriptor.js"),IsExtensible=__webpack_require__("../../node_modules/es-abstract/2021/IsExtensible.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),SameValue=__webpack_require__("../../node_modules/es-abstract/2021/SameValue.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function CreateDataProperty(O,P,V){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=OrdinaryGetOwnProperty(O,P),extensible=!oldDesc||IsExtensible(O);return!(oldDesc&&!oldDesc["[[Configurable]]"]||!extensible)&&DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":V,"[[Writable]]":!0})}},"../../node_modules/es-abstract/2021/CreateDataPropertyOrThrow.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),CreateDataProperty=__webpack_require__("../../node_modules/es-abstract/2021/CreateDataProperty.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function CreateDataPropertyOrThrow(O,P,V){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=CreateDataProperty(O,P,V);if(!success)throw new $TypeError("unable to create data property");return success}},"../../node_modules/es-abstract/2021/CreateIterResultObject.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function CreateIterResultObject(value,done){if("Boolean"!==Type(done))throw new $TypeError("Assertion failed: Type(done) is not Boolean");return{value,done}}},"../../node_modules/es-abstract/2021/CreateMethodProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),DefineOwnProperty=__webpack_require__("../../node_modules/es-abstract/helpers/DefineOwnProperty.js"),FromPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/FromPropertyDescriptor.js"),IsDataDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/IsDataDescriptor.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),SameValue=__webpack_require__("../../node_modules/es-abstract/2021/SameValue.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function CreateMethodProperty(O,P,V){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,{"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":V,"[[Writable]]":!0})}},"../../node_modules/es-abstract/2021/CreateRegExpStringIterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),$TypeError=GetIntrinsic("%TypeError%"),IteratorPrototype=GetIntrinsic("%IteratorPrototype%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),AdvanceStringIndex=__webpack_require__("../../node_modules/es-abstract/2021/AdvanceStringIndex.js"),CreateIterResultObject=__webpack_require__("../../node_modules/es-abstract/2021/CreateIterResultObject.js"),CreateMethodProperty=__webpack_require__("../../node_modules/es-abstract/2021/CreateMethodProperty.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),OrdinaryObjectCreate=__webpack_require__("../../node_modules/es-abstract/2021/OrdinaryObjectCreate.js"),RegExpExec=__webpack_require__("../../node_modules/es-abstract/2021/RegExpExec.js"),Set=__webpack_require__("../../node_modules/es-abstract/2021/Set.js"),ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),SLOT=__webpack_require__("../../node_modules/internal-slot/index.js"),RegExpStringIterator=function RegExpStringIterator(R,S,global,fullUnicode){if("String"!==Type(S))throw new $TypeError("`S` must be a string");if("Boolean"!==Type(global))throw new $TypeError("`global` must be a boolean");if("Boolean"!==Type(fullUnicode))throw new $TypeError("`fullUnicode` must be a boolean");SLOT.set(this,"[[IteratingRegExp]]",R),SLOT.set(this,"[[IteratedString]]",S),SLOT.set(this,"[[Global]]",global),SLOT.set(this,"[[Unicode]]",fullUnicode),SLOT.set(this,"[[Done]]",!1)};IteratorPrototype&&(RegExpStringIterator.prototype=OrdinaryObjectCreate(IteratorPrototype));if(CreateMethodProperty(RegExpStringIterator.prototype,"next",(function next(){var O=this;if("Object"!==Type(O))throw new $TypeError("receiver must be an object");if(!(O instanceof RegExpStringIterator&&SLOT.has(O,"[[IteratingRegExp]]")&&SLOT.has(O,"[[IteratedString]]")&&SLOT.has(O,"[[Global]]")&&SLOT.has(O,"[[Unicode]]")&&SLOT.has(O,"[[Done]]")))throw new $TypeError('"this" value must be a RegExpStringIterator instance');if(SLOT.get(O,"[[Done]]"))return CreateIterResultObject(void 0,!0);var R=SLOT.get(O,"[[IteratingRegExp]]"),S=SLOT.get(O,"[[IteratedString]]"),global=SLOT.get(O,"[[Global]]"),fullUnicode=SLOT.get(O,"[[Unicode]]"),match=RegExpExec(R,S);if(null===match)return SLOT.set(O,"[[Done]]",!0),CreateIterResultObject(void 0,!0);if(global){if(""===ToString(Get(match,"0"))){var thisIndex=ToLength(Get(R,"lastIndex")),nextIndex=AdvanceStringIndex(S,thisIndex,fullUnicode);Set(R,"lastIndex",nextIndex,!0)}return CreateIterResultObject(match,!1)}return SLOT.set(O,"[[Done]]",!0),CreateIterResultObject(match,!1)})),hasSymbols&&(Symbol.toStringTag&&($defineProperty?$defineProperty(RegExpStringIterator.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,value:"RegExp String Iterator",writable:!1}):RegExpStringIterator.prototype[Symbol.toStringTag]="RegExp String Iterator"),Symbol.iterator&&"function"!=typeof RegExpStringIterator.prototype[Symbol.iterator])){CreateMethodProperty(RegExpStringIterator.prototype,Symbol.iterator,(function SymbolIterator(){return this}))}module.exports=function CreateRegExpStringIterator(R,S,global,fullUnicode){return new RegExpStringIterator(R,S,global,fullUnicode)}},"../../node_modules/es-abstract/2021/DefinePropertyOrThrow.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),isPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/helpers/isPropertyDescriptor.js"),DefineOwnProperty=__webpack_require__("../../node_modules/es-abstract/helpers/DefineOwnProperty.js"),FromPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/FromPropertyDescriptor.js"),IsAccessorDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/IsAccessorDescriptor.js"),IsDataDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/IsDataDescriptor.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),SameValue=__webpack_require__("../../node_modules/es-abstract/2021/SameValue.js"),ToPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/ToPropertyDescriptor.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function DefinePropertyOrThrow(O,P,desc){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var Desc=isPropertyDescriptor({Type,IsDataDescriptor,IsAccessorDescriptor},desc)?desc:ToPropertyDescriptor(desc);if(!isPropertyDescriptor({Type,IsDataDescriptor,IsAccessorDescriptor},Desc))throw new $TypeError("Assertion failed: Desc is not a valid Property Descriptor");return DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,Desc)}},"../../node_modules/es-abstract/2021/FlattenIntoArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),MAX_SAFE_INTEGER=__webpack_require__("../../node_modules/es-abstract/helpers/maxSafeInteger.js"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),CreateDataPropertyOrThrow=__webpack_require__("../../node_modules/es-abstract/2021/CreateDataPropertyOrThrow.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),HasProperty=__webpack_require__("../../node_modules/es-abstract/2021/HasProperty.js"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),LengthOfArrayLike=__webpack_require__("../../node_modules/es-abstract/2021/LengthOfArrayLike.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js");module.exports=function FlattenIntoArray(target,source,sourceLen,start,depth){var mapperFunction;arguments.length>5&&(mapperFunction=arguments[5]);for(var targetIndex=start,sourceIndex=0;sourceIndex<sourceLen;){var P=ToString(sourceIndex),exists=HasProperty(source,P);if(!0===exists){var element=Get(source,P);if(void 0!==mapperFunction){if(arguments.length<=6)throw new $TypeError("Assertion failed: thisArg is required when mapperFunction is provided");element=Call(mapperFunction,arguments[6],[element,sourceIndex,source])}var shouldFlatten=!1;if(depth>0&&(shouldFlatten=IsArray(element)),shouldFlatten){var elementLen=LengthOfArrayLike(element);targetIndex=FlattenIntoArray(target,element,elementLen,targetIndex,depth-1)}else{if(targetIndex>=MAX_SAFE_INTEGER)throw new $TypeError("index too large");CreateDataPropertyOrThrow(target,ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex}},"../../node_modules/es-abstract/2021/FromPropertyDescriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var assertRecord=__webpack_require__("../../node_modules/es-abstract/helpers/assertRecord.js"),fromPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/helpers/fromPropertyDescriptor.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function FromPropertyDescriptor(Desc){return void 0!==Desc&&assertRecord(Type,"Property Descriptor","Desc",Desc),fromPropertyDescriptor(Desc)}},"../../node_modules/es-abstract/2021/Get.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),inspect=__webpack_require__("../../node_modules/object-inspect/index.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function Get(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true, got "+inspect(P));return O[P]}},"../../node_modules/es-abstract/2021/GetIterator.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$TypeError=GetIntrinsic("%TypeError%"),$asyncIterator=GetIntrinsic("%Symbol.asyncIterator%",!0),inspect=__webpack_require__("../../node_modules/object-inspect/index.js"),hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),getIteratorMethod=__webpack_require__("../../node_modules/es-abstract/helpers/getIteratorMethod.js"),AdvanceStringIndex=__webpack_require__("../../node_modules/es-abstract/2021/AdvanceStringIndex.js"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),GetMethod=__webpack_require__("../../node_modules/es-abstract/2021/GetMethod.js"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function GetIterator(obj,hint,method){var actualHint=hint;if(arguments.length<2&&(actualHint="sync"),"sync"!==actualHint&&"async"!==actualHint)throw new $TypeError("Assertion failed: `hint` must be one of 'sync' or 'async', got "+inspect(hint));var actualMethod=method;if(arguments.length<3)if("async"===actualHint){if(hasSymbols&&$asyncIterator&&(actualMethod=GetMethod(obj,$asyncIterator)),void 0===actualMethod)throw new $TypeError("async from sync iterators aren't currently supported")}else actualMethod=getIteratorMethod({AdvanceStringIndex,GetMethod,IsArray},obj);var iterator=Call(actualMethod,obj);if("Object"!==Type(iterator))throw new $TypeError("iterator must return an object");return iterator}},"../../node_modules/es-abstract/2021/GetMethod.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),GetV=__webpack_require__("../../node_modules/es-abstract/2021/GetV.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js");module.exports=function GetMethod(O,P){if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var func=GetV(O,P);if(null!=func){if(!IsCallable(func))throw new $TypeError(P+"is not a function");return func}}},"../../node_modules/es-abstract/2021/GetV.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),ToObject=__webpack_require__("../../node_modules/es-abstract/2021/ToObject.js");module.exports=function GetV(V,P){if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return ToObject(V)[P]}},"../../node_modules/es-abstract/2021/HasProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function HasProperty(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: `O` must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: `P` must be a Property Key");return P in O}},"../../node_modules/es-abstract/2021/Invoke.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),GetV=__webpack_require__("../../node_modules/es-abstract/2021/GetV.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js");module.exports=function Invoke(O,P){if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");var argumentsList=arguments.length>2?arguments[2]:[];if(!IsArray(argumentsList))throw new $TypeError("Assertion failed: optional `argumentsList`, if provided, must be a List");var func=GetV(O,P);return Call(func,O,argumentsList)}},"../../node_modules/es-abstract/2021/IsAccessorDescriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has=__webpack_require__("../../node_modules/has/src/index.js"),assertRecord=__webpack_require__("../../node_modules/es-abstract/helpers/assertRecord.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function IsAccessorDescriptor(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))}},"../../node_modules/es-abstract/2021/IsArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("../../node_modules/es-abstract/helpers/IsArray.js")},"../../node_modules/es-abstract/2021/IsCallable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("../../node_modules/is-callable/index.js")},"../../node_modules/es-abstract/2021/IsConstructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $construct=__webpack_require__("../../node_modules/es-abstract/GetIntrinsic.js")("%Reflect.construct%",!0),DefinePropertyOrThrow=__webpack_require__("../../node_modules/es-abstract/2021/DefinePropertyOrThrow.js");try{DefinePropertyOrThrow({},"",{"[[Get]]":function(){}})}catch(e){DefinePropertyOrThrow=null}if(DefinePropertyOrThrow&&$construct){var isConstructorMarker={},badArrayLike={};DefinePropertyOrThrow(badArrayLike,"length",{"[[Get]]":function(){throw isConstructorMarker},"[[Enumerable]]":!0}),module.exports=function IsConstructor(argument){try{$construct(argument,badArrayLike)}catch(err){return err===isConstructorMarker}}}else module.exports=function IsConstructor(argument){return"function"==typeof argument&&!!argument.prototype}},"../../node_modules/es-abstract/2021/IsDataDescriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has=__webpack_require__("../../node_modules/has/src/index.js"),assertRecord=__webpack_require__("../../node_modules/es-abstract/helpers/assertRecord.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function IsDataDescriptor(Desc){return void 0!==Desc&&(assertRecord(Type,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))}},"../../node_modules/es-abstract/2021/IsExtensible.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$preventExtensions=GetIntrinsic("%Object.preventExtensions%",!0),$isExtensible=GetIntrinsic("%Object.isExtensible%",!0),isPrimitive=__webpack_require__("../../node_modules/es-abstract/helpers/isPrimitive.js");module.exports=$preventExtensions?function IsExtensible(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function IsExtensible(obj){return!isPrimitive(obj)}},"../../node_modules/es-abstract/2021/IsIntegralNumber.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var abs=__webpack_require__("../../node_modules/es-abstract/2021/abs.js"),floor=__webpack_require__("../../node_modules/es-abstract/2021/floor.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),$isNaN=__webpack_require__("../../node_modules/es-abstract/helpers/isNaN.js"),$isFinite=__webpack_require__("../../node_modules/es-abstract/helpers/isFinite.js");module.exports=function IsIntegralNumber(argument){if("Number"!==Type(argument)||$isNaN(argument)||!$isFinite(argument))return!1;var absValue=abs(argument);return floor(absValue)===absValue}},"../../node_modules/es-abstract/2021/IsPropertyKey.js":module=>{"use strict";module.exports=function IsPropertyKey(argument){return"string"==typeof argument||"symbol"==typeof argument}},"../../node_modules/es-abstract/2021/IsRegExp.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $match=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%Symbol.match%",!0),hasRegExpMatcher=__webpack_require__("../../node_modules/is-regex/index.js"),ToBoolean=__webpack_require__("../../node_modules/es-abstract/2021/ToBoolean.js");module.exports=function IsRegExp(argument){if(!argument||"object"!=typeof argument)return!1;if($match){var isRegExp=argument[$match];if(void 0!==isRegExp)return ToBoolean(isRegExp)}return hasRegExpMatcher(argument)}},"../../node_modules/es-abstract/2021/IteratorClose.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),GetMethod=__webpack_require__("../../node_modules/es-abstract/2021/GetMethod.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function IteratorClose(iterator,completion){if("Object"!==Type(iterator))throw new $TypeError("Assertion failed: Type(iterator) is not Object");if(!IsCallable(completion))throw new $TypeError("Assertion failed: completion is not a thunk for a Completion Record");var completionRecord,completionThunk=completion,iteratorReturn=GetMethod(iterator,"return");if(void 0===iteratorReturn)return completionThunk();try{var innerResult=Call(iteratorReturn,iterator,[])}catch(e){throw completionThunk(),completionThunk=null,e}if(completionRecord=completionThunk(),completionThunk=null,"Object"!==Type(innerResult))throw new $TypeError("iterator .return must return an object");return completionRecord}},"../../node_modules/es-abstract/2021/IteratorComplete.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),ToBoolean=__webpack_require__("../../node_modules/es-abstract/2021/ToBoolean.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function IteratorComplete(iterResult){if("Object"!==Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return ToBoolean(Get(iterResult,"done"))}},"../../node_modules/es-abstract/2021/IteratorNext.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Invoke=__webpack_require__("../../node_modules/es-abstract/2021/Invoke.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function IteratorNext(iterator,value){var result=Invoke(iterator,"next",arguments.length<2?[]:[value]);if("Object"!==Type(result))throw new $TypeError("iterator next must return an object");return result}},"../../node_modules/es-abstract/2021/IteratorStep.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var IteratorComplete=__webpack_require__("../../node_modules/es-abstract/2021/IteratorComplete.js"),IteratorNext=__webpack_require__("../../node_modules/es-abstract/2021/IteratorNext.js");module.exports=function IteratorStep(iterator){var result=IteratorNext(iterator);return!0!==IteratorComplete(result)&&result}},"../../node_modules/es-abstract/2021/IteratorValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function IteratorValue(iterResult){if("Object"!==Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return Get(iterResult,"value")}},"../../node_modules/es-abstract/2021/LengthOfArrayLike.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),ToLength=__webpack_require__("../../node_modules/es-abstract/2021/ToLength.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function LengthOfArrayLike(obj){if("Object"!==Type(obj))throw new $TypeError("Assertion failed: `obj` must be an Object");return ToLength(Get(obj,"length"))}},"../../node_modules/es-abstract/2021/OrdinaryGetOwnProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$gOPD=__webpack_require__("../../node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js"),$TypeError=GetIntrinsic("%TypeError%"),$isEnumerable=__webpack_require__("../../node_modules/call-bind/callBound.js")("Object.prototype.propertyIsEnumerable"),has=__webpack_require__("../../node_modules/has/src/index.js"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),IsRegExp=__webpack_require__("../../node_modules/es-abstract/2021/IsRegExp.js"),ToPropertyDescriptor=__webpack_require__("../../node_modules/es-abstract/2021/ToPropertyDescriptor.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function OrdinaryGetOwnProperty(O,P){if("Object"!==Type(O))throw new $TypeError("Assertion failed: O must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: P must be a Property Key");if(has(O,P)){if(!$gOPD){var arrayLength=IsArray(O)&&"length"===P,regexLastIndex=IsRegExp(O)&&"lastIndex"===P;return{"[[Configurable]]":!(arrayLength||regexLastIndex),"[[Enumerable]]":$isEnumerable(O,P),"[[Value]]":O[P],"[[Writable]]":!0}}return ToPropertyDescriptor($gOPD(O,P))}}},"../../node_modules/es-abstract/2021/OrdinaryObjectCreate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$ObjectCreate=GetIntrinsic("%Object.create%",!0),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),IsArray=__webpack_require__("../../node_modules/es-abstract/2021/IsArray.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),hasProto=!({__proto__:null}instanceof Object);module.exports=function OrdinaryObjectCreate(proto){if(null!==proto&&"Object"!==Type(proto))throw new $TypeError("Assertion failed: `proto` must be null or an object");var additionalInternalSlotsList=arguments.length<2?[]:arguments[1];if(!IsArray(additionalInternalSlotsList))throw new $TypeError("Assertion failed: `additionalInternalSlotsList` must be an Array");if(additionalInternalSlotsList.length>0)throw new $SyntaxError("es-abstract does not yet support internal slots");if($ObjectCreate)return $ObjectCreate(proto);if(hasProto)return{__proto__:proto};if(null===proto)throw new $SyntaxError("native Object.create support is required to create null objects");var T=function T(){};return T.prototype=proto,new T}},"../../node_modules/es-abstract/2021/PromiseResolve.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBind=__webpack_require__("../../node_modules/call-bind/index.js"),$resolve=GetIntrinsic("%Promise.resolve%",!0),$PromiseResolve=$resolve&&callBind($resolve);module.exports=function PromiseResolve(C,x){if(!$PromiseResolve)throw new SyntaxError("This environment does not support Promises.");return $PromiseResolve(C,x)}},"../../node_modules/es-abstract/2021/RegExpExec.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),regexExec=__webpack_require__("../../node_modules/call-bind/callBound.js")("RegExp.prototype.exec"),Call=__webpack_require__("../../node_modules/es-abstract/2021/Call.js"),Get=__webpack_require__("../../node_modules/es-abstract/2021/Get.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function RegExpExec(R,S){if("Object"!==Type(R))throw new $TypeError("Assertion failed: `R` must be an Object");if("String"!==Type(S))throw new $TypeError("Assertion failed: `S` must be a String");var exec=Get(R,"exec");if(IsCallable(exec)){var result=Call(exec,R,[S]);if(null===result||"Object"===Type(result))return result;throw new $TypeError('"exec" method must return `null` or an Object')}return regexExec(R,S)}},"../../node_modules/es-abstract/2021/RequireObjectCoercible.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("../../node_modules/es-abstract/5/CheckObjectCoercible.js")},"../../node_modules/es-abstract/2021/SameValue.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $isNaN=__webpack_require__("../../node_modules/es-abstract/helpers/isNaN.js");module.exports=function SameValue(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)}},"../../node_modules/es-abstract/2021/SameValueZero.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $isNaN=__webpack_require__("../../node_modules/es-abstract/helpers/isNaN.js");module.exports=function SameValueZero(x,y){return x===y||$isNaN(x)&&$isNaN(y)}},"../../node_modules/es-abstract/2021/Set.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),IsPropertyKey=__webpack_require__("../../node_modules/es-abstract/2021/IsPropertyKey.js"),SameValue=__webpack_require__("../../node_modules/es-abstract/2021/SameValue.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),noThrowOnStrictViolation=function(){try{return delete[].length,!0}catch(e){return!1}}();module.exports=function Set(O,P,V,Throw){if("Object"!==Type(O))throw new $TypeError("Assertion failed: `O` must be an Object");if(!IsPropertyKey(P))throw new $TypeError("Assertion failed: `P` must be a Property Key");if("Boolean"!==Type(Throw))throw new $TypeError("Assertion failed: `Throw` must be a Boolean");if(Throw){if(O[P]=V,noThrowOnStrictViolation&&!SameValue(O[P],V))throw new $TypeError("Attempted to assign to readonly property.");return!0}try{return O[P]=V,!noThrowOnStrictViolation||SameValue(O[P],V)}catch(e){return!1}}},"../../node_modules/es-abstract/2021/SpeciesConstructor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$species=GetIntrinsic("%Symbol.species%",!0),$TypeError=GetIntrinsic("%TypeError%"),IsConstructor=__webpack_require__("../../node_modules/es-abstract/2021/IsConstructor.js"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js");module.exports=function SpeciesConstructor(O,defaultConstructor){if("Object"!==Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==Type(C))throw new $TypeError("O.constructor is not an Object");var S=$species?C[$species]:void 0;if(null==S)return defaultConstructor;if(IsConstructor(S))return S;throw new $TypeError("no constructor found")}},"../../node_modules/es-abstract/2021/ToBoolean.js":module=>{"use strict";module.exports=function ToBoolean(value){return!!value}},"../../node_modules/es-abstract/2021/ToIntegerOrInfinity.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var abs=__webpack_require__("../../node_modules/es-abstract/2021/abs.js"),floor=__webpack_require__("../../node_modules/es-abstract/2021/floor.js"),ToNumber=__webpack_require__("../../node_modules/es-abstract/2021/ToNumber.js"),$isNaN=__webpack_require__("../../node_modules/es-abstract/helpers/isNaN.js"),$isFinite=__webpack_require__("../../node_modules/es-abstract/helpers/isFinite.js"),$sign=__webpack_require__("../../node_modules/es-abstract/helpers/sign.js");module.exports=function ToIntegerOrInfinity(value){var number=ToNumber(value);return $isNaN(number)||0===number?0:$isFinite(number)?$sign(number)*floor(abs(number)):number}},"../../node_modules/es-abstract/2021/ToLength.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var MAX_SAFE_INTEGER=__webpack_require__("../../node_modules/es-abstract/helpers/maxSafeInteger.js"),ToIntegerOrInfinity=__webpack_require__("../../node_modules/es-abstract/2021/ToIntegerOrInfinity.js");module.exports=function ToLength(argument){var len=ToIntegerOrInfinity(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len}},"../../node_modules/es-abstract/2021/ToNumber.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$TypeError=GetIntrinsic("%TypeError%"),$Number=GetIntrinsic("%Number%"),$RegExp=GetIntrinsic("%RegExp%"),$parseInteger=GetIntrinsic("%parseInt%"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),regexTester=__webpack_require__("../../node_modules/es-abstract/helpers/regexTester.js"),isPrimitive=__webpack_require__("../../node_modules/es-abstract/helpers/isPrimitive.js"),$strSlice=callBound("String.prototype.slice"),isBinary=regexTester(/^0b[01]+$/i),isOctal=regexTester(/^0o[0-7]+$/i),isInvalidHexLiteral=regexTester(/^[-+]0x[0-9a-f]+$/i),hasNonWS=regexTester(new $RegExp("["+["","",""].join("")+"]","g")),ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),$replace=callBound("String.prototype.replace"),ToPrimitive=__webpack_require__("../../node_modules/es-abstract/2021/ToPrimitive.js");module.exports=function ToNumber(argument){var value=isPrimitive(argument)?argument:ToPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("bigint"==typeof value)throw new $TypeError("Conversion from 'BigInt' to 'number' is not allowed.");if("string"==typeof value){if(isBinary(value))return ToNumber($parseInteger($strSlice(value,2),2));if(isOctal(value))return ToNumber($parseInteger($strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return $replace(value,trimRegex,"")}(value);if(trimmed!==value)return ToNumber(trimmed)}return $Number(value)}},"../../node_modules/es-abstract/2021/ToObject.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $Object=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%Object%"),RequireObjectCoercible=__webpack_require__("../../node_modules/es-abstract/2021/RequireObjectCoercible.js");module.exports=function ToObject(value){return RequireObjectCoercible(value),$Object(value)}},"../../node_modules/es-abstract/2021/ToPrimitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toPrimitive=__webpack_require__("../../node_modules/es-to-primitive/es2015.js");module.exports=function ToPrimitive(input){return arguments.length>1?toPrimitive(input,arguments[1]):toPrimitive(input)}},"../../node_modules/es-abstract/2021/ToPropertyDescriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has=__webpack_require__("../../node_modules/has/src/index.js"),$TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%"),Type=__webpack_require__("../../node_modules/es-abstract/2021/Type.js"),ToBoolean=__webpack_require__("../../node_modules/es-abstract/2021/ToBoolean.js"),IsCallable=__webpack_require__("../../node_modules/es-abstract/2021/IsCallable.js");module.exports=function ToPropertyDescriptor(Obj){if("Object"!==Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!IsCallable(getter))throw new $TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}},"../../node_modules/es-abstract/2021/ToPropertyKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $String=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%String%"),ToPrimitive=__webpack_require__("../../node_modules/es-abstract/2021/ToPrimitive.js"),ToString=__webpack_require__("../../node_modules/es-abstract/2021/ToString.js");module.exports=function ToPropertyKey(argument){var key=ToPrimitive(argument,$String);return"symbol"==typeof key?key:ToString(key)}},"../../node_modules/es-abstract/2021/ToString.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$String=GetIntrinsic("%String%"),$TypeError=GetIntrinsic("%TypeError%");module.exports=function ToString(argument){if("symbol"==typeof argument)throw new $TypeError("Cannot convert a Symbol value to a string");return $String(argument)}},"../../node_modules/es-abstract/2021/ToUint32.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ToNumber=__webpack_require__("../../node_modules/es-abstract/2021/ToNumber.js");module.exports=function ToUint32(x){return ToNumber(x)>>>0}},"../../node_modules/es-abstract/2021/Type.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ES5Type=__webpack_require__("../../node_modules/es-abstract/5/Type.js");module.exports=function Type(x){return"symbol"==typeof x?"Symbol":"bigint"==typeof x?"BigInt":ES5Type(x)}},"../../node_modules/es-abstract/2021/UTF16SurrogatePairToCodePoint.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$TypeError=GetIntrinsic("%TypeError%"),$fromCharCode=GetIntrinsic("%String.fromCharCode%"),isLeadingSurrogate=__webpack_require__("../../node_modules/es-abstract/helpers/isLeadingSurrogate.js"),isTrailingSurrogate=__webpack_require__("../../node_modules/es-abstract/helpers/isTrailingSurrogate.js");module.exports=function UTF16SurrogatePairToCodePoint(lead,trail){if(!isLeadingSurrogate(lead)||!isTrailingSurrogate(trail))throw new $TypeError("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return $fromCharCode(lead)+$fromCharCode(trail)}},"../../node_modules/es-abstract/2021/abs.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $abs=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%Math.abs%");module.exports=function abs(x){return $abs(x)}},"../../node_modules/es-abstract/2021/floor.js":module=>{"use strict";var $floor=Math.floor;module.exports=function floor(x){return $floor(x)}},"../../node_modules/es-abstract/5/CheckObjectCoercible.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $TypeError=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%TypeError%");module.exports=function CheckObjectCoercible(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value}},"../../node_modules/es-abstract/5/Type.js":module=>{"use strict";module.exports=function Type(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0}},"../../node_modules/es-abstract/GetIntrinsic.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("../../node_modules/get-intrinsic/index.js")},"../../node_modules/es-abstract/helpers/DefineOwnProperty.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasPropertyDescriptors=__webpack_require__("../../node_modules/has-property-descriptors/index.js"),GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$defineProperty=hasPropertyDescriptors()&&GetIntrinsic("%Object.defineProperty%",!0),hasArrayLengthDefineBug=hasPropertyDescriptors.hasArrayLengthDefineBug(),isArray=hasArrayLengthDefineBug&&__webpack_require__("../../node_modules/es-abstract/helpers/IsArray.js"),$isEnumerable=__webpack_require__("../../node_modules/call-bind/callBound.js")("Object.prototype.propertyIsEnumerable");module.exports=function DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,O,P,desc){if(!$defineProperty){if(!IsDataDescriptor(desc))return!1;if(!desc["[[Configurable]]"]||!desc["[[Writable]]"])return!1;if(P in O&&$isEnumerable(O,P)!==!!desc["[[Enumerable]]"])return!1;var V=desc["[[Value]]"];return O[P]=V,SameValue(O[P],V)}return hasArrayLengthDefineBug&&"length"===P&&"[[Value]]"in desc&&isArray(O)&&O.length!==desc["[[Value]]"]?(O.length=desc["[[Value]]"],O.length===desc["[[Value]]"]):($defineProperty(O,P,FromPropertyDescriptor(desc)),!0)}},"../../node_modules/es-abstract/helpers/IsArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $Array=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%Array%"),toStr=!$Array.isArray&&__webpack_require__("../../node_modules/call-bind/callBound.js")("Object.prototype.toString");module.exports=$Array.isArray||function IsArray(argument){return"[object Array]"===toStr(argument)}},"../../node_modules/es-abstract/helpers/assertRecord.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__("../../node_modules/has/src/index.js"),predicates={"Property Descriptor":function isPropertyDescriptor(Desc){var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":__webpack_require__("../../node_modules/es-abstract/helpers/isMatchRecord.js")};module.exports=function assertRecord(Type,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if("Object"!==Type(value)||!predicate(value))throw new $TypeError(argumentName+" must be a "+recordType)}},"../../node_modules/es-abstract/helpers/fromPropertyDescriptor.js":module=>{"use strict";module.exports=function fromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;var obj={};return"[[Value]]"in Desc&&(obj.value=Desc["[[Value]]"]),"[[Writable]]"in Desc&&(obj.writable=!!Desc["[[Writable]]"]),"[[Get]]"in Desc&&(obj.get=Desc["[[Get]]"]),"[[Set]]"in Desc&&(obj.set=Desc["[[Set]]"]),"[[Enumerable]]"in Desc&&(obj.enumerable=!!Desc["[[Enumerable]]"]),"[[Configurable]]"in Desc&&(obj.configurable=!!Desc["[[Configurable]]"]),obj}},"../../node_modules/es-abstract/helpers/getIteratorMethod.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__("../../node_modules/has-symbols/index.js")(),GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),isString=__webpack_require__("../../node_modules/is-string/index.js"),$iterator=GetIntrinsic("%Symbol.iterator%",!0),$stringSlice=callBound("String.prototype.slice"),$String=GetIntrinsic("%String%",!0);module.exports=function getIteratorMethod(ES,iterable){var usingIterator;return hasSymbols?usingIterator=ES.GetMethod(iterable,$iterator):ES.IsArray(iterable)?usingIterator=function(){var i=-1,arr=this;return{next:function(){return{done:(i+=1)>=arr.length,value:arr[i]}}}}:isString(iterable)&&(usingIterator=function(){var i=0;return{next:function(){var nextIndex=ES.AdvanceStringIndex($String(iterable),i,!0),value=$stringSlice(iterable,i,nextIndex);return i=nextIndex,{done:nextIndex>iterable.length,value}}}}),usingIterator}},"../../node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $gOPD=__webpack_require__("../../node_modules/get-intrinsic/index.js")("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch(e){$gOPD=null}module.exports=$gOPD},"../../node_modules/es-abstract/helpers/isFinite.js":module=>{"use strict";var $isNaN=Number.isNaN||function(a){return a!=a};module.exports=Number.isFinite||function(x){return"number"==typeof x&&!$isNaN(x)&&x!==1/0&&x!==-1/0}},"../../node_modules/es-abstract/helpers/isLeadingSurrogate.js":module=>{"use strict";module.exports=function isLeadingSurrogate(charCode){return"number"==typeof charCode&&charCode>=55296&&charCode<=56319}},"../../node_modules/es-abstract/helpers/isMatchRecord.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has=__webpack_require__("../../node_modules/has/src/index.js");module.exports=function isMatchRecord(record){return has(record,"[[StartIndex]]")&&has(record,"[[EndIndex]]")&&record["[[StartIndex]]"]>=0&&record["[[EndIndex]]"]>=record["[[StartIndex]]"]&&String(parseInt(record["[[StartIndex]]"],10))===String(record["[[StartIndex]]"])&&String(parseInt(record["[[EndIndex]]"],10))===String(record["[[EndIndex]]"])}},"../../node_modules/es-abstract/helpers/isNaN.js":module=>{"use strict";module.exports=Number.isNaN||function isNaN(a){return a!=a}},"../../node_modules/es-abstract/helpers/isPrimitive.js":module=>{"use strict";module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},"../../node_modules/es-abstract/helpers/isPropertyDescriptor.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),has=__webpack_require__("../../node_modules/has/src/index.js"),$TypeError=GetIntrinsic("%TypeError%");module.exports=function IsPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;if(ES.IsDataDescriptor(Desc)&&ES.IsAccessorDescriptor(Desc))throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}},"../../node_modules/es-abstract/helpers/isTrailingSurrogate.js":module=>{"use strict";module.exports=function isTrailingSurrogate(charCode){return"number"==typeof charCode&&charCode>=56320&&charCode<=57343}},"../../node_modules/es-abstract/helpers/maxSafeInteger.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$Math=GetIntrinsic("%Math%"),$Number=GetIntrinsic("%Number%");module.exports=$Number.MAX_SAFE_INTEGER||$Math.pow(2,53)-1},"../../node_modules/es-abstract/helpers/regexTester.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $exec=__webpack_require__("../../node_modules/call-bind/callBound.js")("RegExp.prototype.exec");module.exports=function regexTester(regex){return function test(s){return null!==$exec(regex,s)}}},"../../node_modules/es-abstract/helpers/sign.js":module=>{"use strict";module.exports=function sign(number){return number>=0?1:-1}},"../../node_modules/es-get-iterator/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("../../node_modules/process/browser.js"),isArguments=__webpack_require__("../../node_modules/is-arguments/index.js");if(__webpack_require__("../../node_modules/has-symbols/index.js")()||__webpack_require__("../../node_modules/has-symbols/shams.js")()){var $iterator=Symbol.iterator;module.exports=function getIterator(iterable){return null!=iterable&&void 0!==iterable[$iterator]?iterable[$iterator]():isArguments(iterable)?Array.prototype[$iterator].call(iterable):void 0}}else{var isArray=__webpack_require__("../../node_modules/es-get-iterator/node_modules/isarray/index.js"),isString=__webpack_require__("../../node_modules/is-string/index.js"),GetIntrinsic=__webpack_require__("../../node_modules/get-intrinsic/index.js"),$Map=GetIntrinsic("%Map%",!0),$Set=GetIntrinsic("%Set%",!0),callBound=__webpack_require__("../../node_modules/call-bind/callBound.js"),$arrayPush=callBound("Array.prototype.push"),$charCodeAt=callBound("String.prototype.charCodeAt"),$stringSlice=callBound("String.prototype.slice"),getArrayIterator=function getArrayIterator(arraylike){var i=0;return{next:function next(){var value,done=i>=arraylike.length;return done||(value=arraylike[i],i+=1),{done,value}}}},getNonCollectionIterator=function getNonCollectionIterator(iterable,noPrimordialCollections){if(isArray(iterable)||isArguments(iterable))return getArrayIterator(iterable);if(isString(iterable)){var i=0;return{next:function next(){var nextIndex=function advanceStringIndex(S,index){if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2}(iterable,i),value=$stringSlice(iterable,i,nextIndex);return i=nextIndex,{done:nextIndex>iterable.length,value}}}}return noPrimordialCollections&&void 0!==iterable["_es6-shim iterator_"]?iterable["_es6-shim iterator_"]():void 0};if($Map||$Set){var isMap=__webpack_require__("../../node_modules/is-map/index.js"),isSet=__webpack_require__("../../node_modules/is-set/index.js"),$mapForEach=callBound("Map.prototype.forEach",!0),$setForEach=callBound("Set.prototype.forEach",!0);if(void 0===process||!process.versions||!process.versions.node)var $mapIterator=callBound("Map.prototype.iterator",!0),$setIterator=callBound("Set.prototype.iterator",!0),getStopIterationIterator=function(iterator){var done=!1;return{next:function next(){try{return{done,value:done?void 0:iterator.next()}}catch(e){return done=!0,{done:!0,value:void 0}}}}};var $mapAtAtIterator=callBound("Map.prototype.@@iterator",!0)||callBound("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound("Set.prototype.@@iterator",!0)||callBound("Set.prototype._es6-shim iterator_",!0);module.exports=function getIterator(iterable){return function getCollectionIterator(iterable){if(isMap(iterable)){if($mapIterator)return getStopIterationIterator($mapIterator(iterable));if($mapAtAtIterator)return $mapAtAtIterator(iterable);if($mapForEach){var entries=[];return $mapForEach(iterable,(function(v,k){$arrayPush(entries,[k,v])})),getArrayIterator(entries)}}if(isSet(iterable)){if($setIterator)return getStopIterationIterator($setIterator(iterable));if($setAtAtIterator)return $setAtAtIterator(iterable);if($setForEach){var values=[];return $setForEach(iterable,(function(v){$arrayPush(values,v)})),getArrayIterator(values)}}}(iterable)||getNonCollectionIterator(iterable)}}else module.exports=function getIterator(iterable){if(null!=iterable)return getNonCollectionIterator(iterable,!0)}}},"../../node_modules/iterate-value/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getIterator=__webpack_require__("../../node_modules/es-get-iterator/index.js"),$TypeError=TypeError,iterate=__webpack_require__("../../node_modules/iterate-iterator/index.js");module.exports=function iterateValue(iterable){var iterator=getIterator(iterable);if(!iterator)throw new $TypeError("non-iterable value provided");return arguments.length>1?iterate(iterator,arguments[1]):iterate(iterator)}},"../../node_modules/json-stringify-pretty-compact/index.js":module=>{"use strict";var stringOrChar=/("(?:[^\\"]|\\.)*")|[:,]/g;module.exports=function stringify(passedObj,options){var indent,maxLength,replacer;return options=options||{},indent=JSON.stringify([1],void 0,void 0===options.indent?2:options.indent).slice(2,-3),maxLength=""===indent?1/0:void 0===options.maxLength?80:options.maxLength,replacer=options.replacer,function _stringify(obj,currentIndent,reserved){var end,index,items,key,keyPart,keys,length,nextIndent,prettified,start,string,value;if(obj&&"function"==typeof obj.toJSON&&(obj=obj.toJSON()),void 0===(string=JSON.stringify(obj,replacer)))return string;if(length=maxLength-currentIndent.length-reserved,string.length<=length&&(prettified=string.replace(stringOrChar,(function(match,stringLiteral){return stringLiteral||match+" "}))).length<=length)return prettified;if(null!=replacer&&(obj=JSON.parse(string),replacer=void 0),"object"==typeof obj&&null!==obj){if(nextIndent=currentIndent+indent,items=[],index=0,Array.isArray(obj))for(start="[",end="]",length=obj.length;index<length;index++)items.push(_stringify(obj[index],nextIndent,index===length-1?0:1)||"null");else for(start="{",end="}",length=(keys=Object.keys(obj)).length;index<length;index++)key=keys[index],keyPart=JSON.stringify(key)+": ",void 0!==(value=_stringify(obj[key],nextIndent,keyPart.length+(index===length-1?0:1)))&&items.push(keyPart+value);if(items.length>0)return[start,indent+items.join(",\n"+nextIndent),end].join("\n"+currentIndent)}return string}(passedObj,"",0)}},"../../node_modules/svelte/index.mjs":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H3:()=>_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.H3E,ev:()=>_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.evW,x:()=>_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.xa3});var _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/svelte/internal/index.mjs")},"../../node_modules/svelte/internal/index.mjs":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function noop(){}__webpack_require__.d(__webpack_exports__,{$Tr:()=>insert,DhX:()=>space,H3E:()=>onMount,Jn4:()=>src_url_equal,Ljt:()=>attr,LoY:()=>get_spread_update,N8:()=>safe_not_equal,R3I:()=>append,S1n:()=>init,Ui:()=>transition_in,VnY:()=>binding_callbacks,YCL:()=>create_component,ZTd:()=>noop,akz:()=>bind,bGB:()=>element,cKT:()=>bubble,cSb:()=>empty,dvw:()=>group_outros,etI:()=>transition_out,evW:()=>onDestroy,f0i:()=>assign,fLW:()=>text,f_C:()=>SvelteComponent,gCg:()=>get_spread_object,gbL:()=>check_outros,hjT:()=>add_flush_callback,j7q:()=>run_all,oLt:()=>listen,ogt:()=>detach,qOq:()=>append_styles,rTO:()=>set_data,vV4:()=>construct_svelte_component,vpE:()=>destroy_component,xa3:()=>createEventDispatcher,yef:()=>mount_component});function assign(tar,src){for(const k in src)tar[k]=src[k];return tar}function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}let src_url_equal_anchor;function src_url_equal(element_src,url){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=url,element_src===src_url_equal_anchor.href}function is_empty(obj){return 0===Object.keys(obj).length}new Set;let is_hydrating=!1;function append(target,node){target.appendChild(node)}function append_styles(target,style_sheet_id,styles){const append_styles_to=get_root_for_style(target);if(!append_styles_to.getElementById(style_sheet_id)){const style=element("style");style.id=style_sheet_id,style.textContent=styles,append_stylesheet(append_styles_to,style)}}function get_root_for_style(node){if(!node)return document;const root=node.getRootNode?node.getRootNode():node.ownerDocument;return root&&root.host?root:node.ownerDocument}function append_stylesheet(node,style){return append(node.head||node,style),style.sheet}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function element(name){return document.createElement(name)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function listen(node,event,handler,options){return node.addEventListener(event,handler,options),()=>node.removeEventListener(event,handler,options)}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}function set_data(text,data){data=""+data,text.wholeText!==data&&(text.data=data)}function custom_event(type,detail,{bubbles=!1,cancelable=!1}={}){const e=document.createEvent("CustomEvent");return e.initCustomEvent(type,bubbles,cancelable,detail),e}function construct_svelte_component(component,props){return new component(props)}new Map;let current_component;function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(fn){get_current_component().$$.on_mount.push(fn)}function onDestroy(fn){get_current_component().$$.on_destroy.push(fn)}function createEventDispatcher(){const component=get_current_component();return(type,detail,{cancelable=!1}={})=>{const callbacks=component.$$.callbacks[type];if(callbacks){const event=custom_event(type,detail,{cancelable});return callbacks.slice().forEach((fn=>{fn.call(component,event)})),!event.defaultPrevented}return!0}}function bubble(component,event){const callbacks=component.$$.callbacks[event.type];callbacks&&callbacks.slice().forEach((fn=>fn.call(this,event)))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(fn){render_callbacks.push(fn)}function add_flush_callback(fn){flush_callbacks.push(fn)}const seen_callbacks=new Set;let flushidx=0;function flush(){const saved_component=current_component;do{for(;flushidx<dirty_components.length;){const component=dirty_components[flushidx];flushidx++,set_current_component(component),update(component.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(seen_callbacks.add(callback),callback())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(saved_component)}function update($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}function transition_out(block,local,detach,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block),outros.c.push((()=>{outroing.delete(block),callback&&(detach&&block.d(1),callback())})),block.o(local)}else callback&&callback()}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function get_spread_update(levels,updates){const update={},to_null_out={},accounted_for={$$scope:1};let i=levels.length;for(;i--;){const o=levels[i],n=updates[i];if(n){for(const key in o)key in n||(to_null_out[key]=1);for(const key in n)accounted_for[key]||(update[key]=n[key],accounted_for[key]=1);levels[i]=n}else for(const key in o)accounted_for[key]=1}for(const key in to_null_out)key in update||(update[key]=void 0);return update}function get_spread_object(spread_props){return"object"==typeof spread_props&&null!==spread_props?spread_props:{}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let SvelteElement;function bind(component,name,callback){const index=component.$$.props[name];void 0!==index&&(component.$$.bound[index]=callback,callback(component.$$.ctx[index]))}function create_component(block){block&&block.c()}function mount_component(component,target,anchor,customElement){const{fragment,after_update}=component.$$;fragment&&fragment.m(target,anchor),customElement||add_render_callback((()=>{const new_on_destroy=component.$$.on_mount.map(run).filter(is_function);component.$$.on_destroy?component.$$.on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]})),after_update.forEach(add_render_callback)}function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function init(component,options,instance,create_fragment,not_equal,props,append_styles,dirty=[-1]){const parent_component=current_component;set_current_component(component);const $$=component.$$={fragment:null,ctx:[],props,update:noop,not_equal,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(options.context||(parent_component?parent_component.$$.context:[])),callbacks:blank_object(),dirty,skip_bound:!1,root:options.target||parent_component.$$.root};append_styles&&append_styles($$.root);let ready=!1;if($$.ctx=instance?instance(component,options.props||{},((i,ret,...rest)=>{const value=rest.length?rest[0]:ret;return $$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&(!$$.skip_bound&&$$.bound[i]&&$$.bound[i](value),ready&&function make_dirty(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),schedule_update(),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}(component,i)),ret})):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment&&create_fragment($$.ctx),options.target){if(options.hydrate){!function start_hydrating(){is_hydrating=!0}();const nodes=function children(element){return Array.from(element.childNodes)}(options.target);$$.fragment&&$$.fragment.l(nodes),nodes.forEach(detach)}else $$.fragment&&$$.fragment.c();options.intro&&transition_in(component.$$.fragment),mount_component(component,options.target,options.anchor,options.customElement),function end_hydrating(){is_hydrating=!1}(),flush()}set_current_component(parent_component)}"function"==typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount}=this.$$;this.$$.on_disconnect=on_mount.map(run).filter(is_function);for(const key in this.$$.slotted)this.appendChild(this.$$.slotted[key])}attributeChangedCallback(attr,_oldValue,newValue){this[attr]=newValue}disconnectedCallback(){run_all(this.$$.on_disconnect)}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){if(!is_function(callback))return noop;const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}});class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){if(!is_function(callback))return noop;const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}}},"../../node_modules/entities/lib/maps/decode.json":module=>{"use strict";module.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},"../../node_modules/entities/lib/maps/entities.json":module=>{"use strict";module.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')},"../../node_modules/entities/lib/maps/legacy.json":module=>{"use strict";module.exports=JSON.parse('{"Aacute":"","aacute":"","Acirc":"","acirc":"","acute":"","AElig":"","aelig":"","Agrave":"","agrave":"","amp":"&","AMP":"&","Aring":"","aring":"","Atilde":"","atilde":"","Auml":"","auml":"","brvbar":"","Ccedil":"","ccedil":"","cedil":"","cent":"","copy":"","COPY":"","curren":"","deg":"","divide":"","Eacute":"","eacute":"","Ecirc":"","ecirc":"","Egrave":"","egrave":"","ETH":"","eth":"","Euml":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","GT":">","Iacute":"","iacute":"","Icirc":"","icirc":"","iexcl":"","Igrave":"","igrave":"","iquest":"","Iuml":"","iuml":"","laquo":"","lt":"<","LT":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","Ntilde":"","ntilde":"","Oacute":"","oacute":"","Ocirc":"","ocirc":"","Ograve":"","ograve":"","ordf":"","ordm":"","Oslash":"","oslash":"","Otilde":"","otilde":"","Ouml":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","QUOT":"\\"","raquo":"","reg":"","REG":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","THORN":"","thorn":"","times":"","Uacute":"","uacute":"","Ucirc":"","ucirc":"","Ugrave":"","ugrave":"","uml":"","Uuml":"","uuml":"","Yacute":"","yacute":"","yen":"","yuml":""}')},"../../node_modules/entities/lib/maps/xml.json":module=>{"use strict";module.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}}]);
//# sourceMappingURL=498.bc619207.iframe.bundle.js.map